<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-JavaWeb/走进JavaWeb技术世界：Mybatis入门" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">走进JavaWeb技术世界：Mybatis入门 | Tommy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aiden-coding.github.io/code-note-blog/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://aiden-coding.github.io/code-note-blog/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://aiden-coding.github.io/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：Mybatis入门"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="走进JavaWeb技术世界：Mybatis入门 | Tommy"><meta data-rh="true" name="description" content="本文转载自互联网，侵删"><meta data-rh="true" property="og:description" content="本文转载自互联网，侵删"><link data-rh="true" rel="icon" href="/code-note-blog/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://aiden-coding.github.io/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：Mybatis入门"><link data-rh="true" rel="alternate" href="https://aiden-coding.github.io/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：Mybatis入门" hreflang="en"><link data-rh="true" rel="alternate" href="https://aiden-coding.github.io/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：Mybatis入门" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/code-note-blog/blog/rss.xml" title="Tommy RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/code-note-blog/blog/atom.xml" title="Tommy Atom Feed"><link rel="stylesheet" href="/code-note-blog/assets/css/styles.dd5372db.css">
<script src="/code-note-blog/assets/js/runtime~main.f999fb27.js" defer="defer"></script>
<script src="/code-note-blog/assets/js/main.a0bfbaed.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_XYiV" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/code-note-blog/"><b class="navbar__title text--truncate">Tommy</b></a><a class="navbar__item navbar__link" href="/code-note-blog/docs/Java/basic/抽象类和接口">java</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：JavaWeb的由来和基础知识">javaweb</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/cache/探索Redis设计与实现：连接底层与表面的数据结构robj">cache</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/backend/后端技术杂谈：白话虚拟化技术">backend</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/cs/algorithms/剑指offer">cs</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/database/重新学习MySQL数据库：『浅入浅出』MySQL和InnoDB">database</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/distributed/basic/分布式系统理论基础 ：CAP">distributed</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/interview/BATJ-Experience/面阿里,终获offer">interview</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/mq/kafka/消息队列kafka详解：如何实现死信队列">mq</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/Spring全家桶/Spring/第一个Spring应用">spring</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/mianshi/collection">面试</a><a href="https://aiden-coding.github.io/code-note-blog/SpringCloud%E7%AC%AC3%E5%AD%A32024.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_XbAW colorModeToggle_r5NY"><button class="clean-btn toggleButton_Jx0n toggleButtonDisabled_zYO7" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_FjAw"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_qmEt"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_wJfS"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_LABv"><div class="docsWrapper_pdvB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_Jioa" type="button"></button><div class="docRoot_qx_v"><aside class="theme-doc-sidebar-container docSidebarContainer_NHKT"><div class="sidebarViewport_uyYB"><div class="sidebar_SZG4"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_VP_k"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：JavaWeb的由来和基础知识">走进JavaWeb技术世界：JavaWeb的由来和基础知识</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：初探Tomcat9的HTTP请求过程">走进JavaWeb技术世界：初探Tomcat9的HTTP请求过程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：从手动编译打包到项目构建工具Maven">走进JavaWeb技术世界：从手动编译打包到项目构建工具Maven</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：从JavaBean讲到Spring">走进JavaWeb技术世界：从JavaBean讲到Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：单元测试框架Junit">走进JavaWeb技术世界：单元测试框架Junit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：极简配置的SpringBoot">走进JavaWeb技术世界：极简配置的SpringBoot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：浅析Tomcat请求处理流程与启动部署过程">走进JavaWeb技术世界：浅析Tomcat请求处理流程与启动部署过程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：深入浅出Mybatis基本原理">走进JavaWeb技术世界：深入浅出Mybatis基本原理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：Hibernate入门经典与注解式开发">走进JavaWeb技术世界：Hibernate入门经典与注解式开发</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：Java日志系统的诞生与发展">走进JavaWeb技术世界：Java日志系统的诞生与发展</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：JDBC的进化与连接池技术">走进JavaWeb技术世界：JDBC的进化与连接池技术</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：JSP与Servlet的曾经与现在">走进JavaWeb技术世界：JSP与Servlet的曾经与现在</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：Mybatis入门">走进JavaWeb技术世界：Mybatis入门</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：Servlet工作原理详解">走进JavaWeb技术世界：Servlet工作原理详解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：Tomcat5总体架构剖析">走进JavaWeb技术世界：Tomcat5总体架构剖析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：Tomcat和其他WEB容器的区别">走进JavaWeb技术世界：Tomcat和其他WEB容器的区别</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/JavaWeb/JavaWeb技术总结">JavaWeb技术总结</a></li></ul></nav></div></div></aside><main class="docMainContainer_SejT"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_j3Yw"><div class="docItemContainer_XOSC"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_F6gm" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/code-note-blog/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YCxa"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">走进JavaWeb技术世界：Mybatis入门</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ToOY theme-doc-toc-mobile tocMobile_suYB"><button type="button" class="clean-btn tocCollapsibleButton_VzP_">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>走进JavaWeb技术世界：Mybatis入门</h1></header><p>本文转载自互联网，侵删
本系列文章将整理到我在GitHub上的《Java面试指南》仓库，更多精彩内容请到我的仓库里查看</p>
<blockquote>
<p><a href="https://github.com/h2pl/Java-Tutorial" target="_blank" rel="noopener noreferrer">https://github.com/h2pl/Java-Tutorial</a></p>
</blockquote>
<p>喜欢的话麻烦点下Star哈</p>
<p>本系列文章将同步到我的个人博客：</p>
<blockquote>
<p><a href="http://www.how2playlife.com" target="_blank" rel="noopener noreferrer">www.how2playlife.com</a></p>
</blockquote>
<p>更多Java技术文章将陆续在微信公众号【Java技术江湖】更新，敬请关注。</p>
<p>本文是《走进JavaWeb技术世界》系列博文的其中一篇，本文部分内容来源于网络，为了把本文主题讲得清晰透彻，也整合了很多我认为不错的技术博客内容，引用其中了一些比较好的博客文章，如有侵权，请联系作者。</p>
<p>该系列博文会告诉你如何从入门到进阶，从servlet到框架，从ssm再到SpringBoot，一步步地学习JavaWeb基础知识，并上手进行实战，接着了解JavaWeb项目中经常要使用的技术和组件，包括日志组件、Maven、Junit，等等内容，以便让你更完整地了解整个JavaWeb技术体系，形成自己的知识框架。为了更好地总结和检验你的学习成果，本系列文章也会提供每个知识点对应的面试题以及参考答案。</p>
<p>如果对本系列文章有什么建议，或者是有什么疑问的话，也可以关注公众号【Java技术江湖】联系作者，欢迎你参与本系列博文的创作和修订。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="前言">前言<a href="#前言" class="hash-link" aria-label="Direct link to 前言" title="Direct link to 前言">​</a></h2>
<p>学习一个新东西前，如果能对他有一个比较直观的印象与定位，那么接下来的学习过程就会顺畅很多。所以本文主要是我对Mybatis的一个简单入门性的总结介绍（前提还是需要些必要的概念认知）。
<em>PS:文末有参考列表</em></p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="mybatis是什么">Mybatis是什么<a href="#mybatis是什么" class="hash-link" aria-label="Direct link to Mybatis是什么" title="Direct link to Mybatis是什么">​</a></h2>
<p>Mybatis是一个持久层框架，用于数据的持久化。主要表现为将SQL与POJO进行一个映射，将SQL从代码中解耦。基本概念如图：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/4226917-700b83c25876d6d0.png" alt="" class="img_kGBN"></p>
<p>使用时，以User为例，UserMapper定义了<code>findById</code>接口，该接口返回一个User对象，接口的实现为一个xml配置文件。该xml文件中定义对应接口中的实现所需要的SQL。从而达到将SQL与代码解耦的目标。</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;mapper namespace=&quot;com.mybatis.UserMapper&quot;&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;select id=&quot;findById&quot; parameterType=&quot;int&quot; resultType=&quot;User&quot;&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        select user_id id,user_name userName,user_age age from t_user where user_id=#{id}  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/select&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/mapper&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>MyBatis 是Apache的一个Java开源项目，是一款优秀的持久层框架，它支持定制化 SQL、存储过程以及高级映射。Mybatis可以将Sql语句配置在XML文件中，避免将Sql语句硬编码在Java类中。</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="特点">特点<a href="#特点" class="hash-link" aria-label="Direct link to 特点" title="Direct link to 特点">​</a></h3>
<p>1.Mybatis通过参数映射方式，可以将参数灵活的配置在SQL语句中的配置文件中，避免在Java类中配置参数（JDBC）</p>
<p>2.Mybatis通过输出映射机制，将结果集的检索自动映射成相应的Java对象，避免对结果集手工检索（JDBC）</p>
<p>3.Mybatis可以通过Xml配置文件对数据库连接进行管理</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="核心类介绍">核心类介绍<a href="#核心类介绍" class="hash-link" aria-label="Direct link to 核心类介绍" title="Direct link to 核心类介绍">​</a></h3>
<p>1.SqlSessionaFactoryBuilder ：该类主要用于创建 SqlSessionFactory, 这个类可以被实例化、使用和丢弃，一旦创建了 SqlSessionFactory，就不再需要它了。 因此 SqlSessionFactoryBuilder 实例的最佳作用域是方法作用域（也就是局部方法变量）。</p>
<p>2.SqlSessionFactory ：该类的作用了创建 SqlSession, 从名字上我们也能看出, 该类使用了工厂模式, 每次应用程序访问数据库, 我们就要通过 SqlSessionFactory 创建 SqlSession, 所以 SqlSessionFactory 和整个 Mybatis 的生命周期是相同的. 这也告  诉我们不能创建多个同一个数据的 SqlSessionFactory, 如果创建多个, 会消耗尽数据库的连接资源, 导致服务器夯机. 应当使用单例模式. 避免过多的连接被消耗, 也方便管理。</p>
<p>3.SqlSession ：SqlSession 相当于一个会话, 每次访问数据库都需要这样一个会话, 大家可能会想起了 JDBC 中的 Connection, 很类似, 但还是有区别的, 何况现在几乎所有的连接都是使用的连接池技术, 用完后直接归还而不会像 Session 一样销毁. 注意: 他是一个线程不安全的对象, 在设计多线程的时候我们需要特别的当心, 操作数据库需要注意其隔离级别, 数据库锁等高级特性, 此外, 每次创建的 SqlSession 都必须及时关闭它, 它长期存在就会使数据库连接池的活动资源减少, 对系统性能的影响很大, 我们一般在 finally 块中将其关闭. 还有, SqlSession 存活于一个应用的请求和操作, 可以执行多条 Sql, 保证事务的一致性。SqlSession在执行过程中，有包含了几大对象：</p>
<p>3.1.Executor ：执行器，由它调度 StatementHandler、ParameterHandler、ResultSetHandler 等来执行对应的 SQL。其中 StatementHandler 是最重要的。</p>
<p>3.2.StatementHandler ：作用是使用数据库的 Statement（PreparedStatement）执行操作，它是四大对象的核心，起到承上启下的作用，许多重要的插件都是通过拦截它来实现的。</p>
<p>3.3.ParamentHandler ：用来处理 SQL 参数的。</p>
<p>3.4.ResultSetHandler ：进行数据集的封装返回处理的。</p>
<p>4.Mapper ：映射器是一些由你创建的、绑定你映射的语句的接口。映射器接口的实例是从 SqlSession 中获得的, 他的作用是发送 SQL, 然后返回我们需要的结果. 或者执行 SQL 从而更改数据库的数据, 因此它应该在 SqlSession 的事务方法之内, 在 Spring 管理的 Bean 中, Mapper 是单例的。</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="功能架构我们把mybatis的功能架构分为三层">功能架构：我们把Mybatis的功能架构分为三层<a href="#功能架构我们把mybatis的功能架构分为三层" class="hash-link" aria-label="Direct link to 功能架构：我们把Mybatis的功能架构分为三层" title="Direct link to 功能架构：我们把Mybatis的功能架构分为三层">​</a></h3>
<p>(1)API接口层：提供给外部使用的接口API，开发人员通过这些本地API来操纵数据库。接口层一接收到调用请求就会调用数据处理层来完成具体的数据处理。</p>
<p>(2)数据处理层：负责具体的SQL查找、SQL解析、SQL执行和执行结果映射处理等。它主要的目的是根据调用的请求完成一次数据库操作。</p>
<p>(3)基础支撑层：负责最基础的功能支撑，包括连接管理、事务管理、配置加载和缓存处理，这些都是共用的东西，将他们抽取出来作为最基础的组件。为上层的数据处理层提供最基础的支撑。</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/20230405164855.png" alt="" class="img_kGBN"></p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="框架结构">框架结构：<a href="#框架结构" class="hash-link" aria-label="Direct link to 框架结构：" title="Direct link to 框架结构：">​</a></h3>
<p>(1)加载配置：配置来源于两个地方，一处是配置文件，一处是Java代码的注解，将SQL的配置信息加载成为一个个MappedStatement对象（包括了传入参数映射配置、执行的SQL语句、结果映射配置），存储在内存中。</p>
<p>(2)SQL解析：当API接口层接收到调用请求时，会接收到传入SQL的ID和传入对象（可以是Map、JavaBean或者基本数据类型），Mybatis会根据SQL的ID找到对应的MappedStatement，然后根据传入参数对象对MappedStatement进行解析，解析后可以得到最终要执行的SQL语句和参数。</p>
<p>(3)SQL执行：将最终得到的SQL和参数拿到数据  库进行执行，得到操作数据库的结果。</p>
<p>(4)结果映射：将操作数据库的结果按照映射的配置进行转换，可以转换成HashMap、JavaBean或者基本数据类型，并将最终结果返回。</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/20230405164952.png" alt="" class="img_kGBN"></p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="执行流程">执行流程：<a href="#执行流程" class="hash-link" aria-label="Direct link to 执行流程：" title="Direct link to 执行流程：">​</a></h3>
<p>1.获取SqlsessionFactory：根据配置文件（全局、sql映射）初始化configuration对象，</p>
<p>2.获取sqlSession：创建一个DefaultSqlSession对象，包含Configuration及Executor（根据全局配置文件中defaultExecutorType创建对应的Executor）</p>
<p>3.获取接口代理对象MapperProxy：DefaultSqlSession.getMapper拿到Mapper接口对应的MapperProxy</p>
<p>4.执行增删改查</p>
<p>1、调用DefaultSqlSession增删改查</p>
<p>2、创建StatementHandler （同时创建ParameterHandler,ResultSetHandler）</p>
<p>3、调用StatementHandler预编译参数以及设置参数值，使用ParameterHandler给sql设置参数</p>
<p>4、调用StatementHandler增删改查</p>
<p>5、ResultSetHandler封装结果</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/20190821203129674.png" alt="" class="img_kGBN"></p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="与hibernate的异同">与Hibernate的异同<a href="#与hibernate的异同" class="hash-link" aria-label="Direct link to 与Hibernate的异同" title="Direct link to 与Hibernate的异同">​</a></h2>
<p>Mybatis开始逐渐流行起来，必然有其原因，简单了解了一下它与同为持久层框架的Hibernate的异同。</p>
<ul>
<li>映射模式
从上面的简单概念可以知道Mybatis实际上着力点在POJO与SQL的映射。而Hibernate则主要是POJO与数据库表的对象关系映射。前者掌控力度 更细，代码量会相对多一点，后者灵活性则差一点，更为自动化一些，与PHP里的<code>Eloquent</code>属于同类型。</li>
<li>性能
Mybatis基于原生JDBC，相比于对JDBC进行二次封装的Hibernate性能会更好一点。</li>
<li>开发与维护
Hibernate配置好实体类后，使用起来是比较简洁，舒服的，但是前期学习曲线比较陡，后期调优比较麻烦。Mybatis对SQL掌控的颗粒更细一点，相比较而言看上去简陋些。由于直接映射SQL，迁移性是个问题。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="参考文章">参考文章<a href="#参考文章" class="hash-link" aria-label="Direct link to 参考文章" title="Direct link to 参考文章">​</a></h2>
<p><code>https://segmentfault.com/a/1190000009707894</code></p>
<p><code>https://www.cnblogs.com/hysum/p/7100874.html</code></p>
<p><code>http://c.biancheng.net/view/939.html</code></p>
<p><code>https://www.runoob.com/</code></p>
<p><a href="https://blog.csdn.net/android_hl/article/details/53228348" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/android_hl/article/details/53228348</a></p>
<h1>mybatis新手上路</h1>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="mybatis简介">MyBatis简介<a href="#mybatis简介" class="hash-link" aria-label="Direct link to MyBatis简介" title="Direct link to MyBatis简介">​</a></h2>
<p>Mybatis是Apache的一个Java开源项目，是一个支持动态Sql语句的持久层框架。Mybatis可以将Sql语句配置在XML文件中，避免将Sql语句硬编码在Java类中。与JDBC相比：</p>
<ol>
<li>Mybatis通过参数映射方式，可以将参数灵活的配置在SQL语句中的配置文件中，避免在Java类中配置参数（JDBC）</li>
<li>Mybatis通过输出映射机制，将结果集的检索自动映射成相应的Java对象，避免对结果集手工检索（JDBC）</li>
<li>Mybatis可以通过Xml配置文件对数据库连接进行管理。</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="mybatis整体架构及运行流程">MyBatis整体架构及运行流程<a href="#mybatis整体架构及运行流程" class="hash-link" aria-label="Direct link to MyBatis整体架构及运行流程" title="Direct link to MyBatis整体架构及运行流程">​</a></h2>
<p>Mybatis整体构造由 数据源配置文件、Sql映射文件、会话工厂、会话、执行器和底层封装对象组成。</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="1数据源配置文件">1.数据源配置文件<a href="#1数据源配置文件" class="hash-link" aria-label="Direct link to 1.数据源配置文件" title="Direct link to 1.数据源配置文件">​</a></h3>
<p>通过配置的方式将数据库的配置信息从应用程序中独立出来，由独立的模块管理和配置。Mybatis的数据源配置文件包含数据库驱动、数据库连接地址、用户名密码、事务管理等，还可以配置连接池的连接数、空闲时间等。</p>
<p>一个SqlMapConfig.xml基本的配置信息如下：</p>
<configuration><properties resource="db.properties"></properties><environments default=""><environment id="development"><transactionmanager type="JDBC"></transactionmanager><datasource type="POOLED"><property name="driver" value="${jdbc.driver}"></property><property name="url" value="${jdbc.url}"></property><property name="username" value="${jdbc.username}"></property><property name="password" value="${jdbc.password}"></property></datasource></environment></environments></configuration>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="2sql映射文件">2.Sql映射文件<a href="#2sql映射文件" class="hash-link" aria-label="Direct link to 2.Sql映射文件" title="Direct link to 2.Sql映射文件">​</a></h3>
<p>Mybatis中所有数据库的操作都会基于该映射文件和配置的sql语句，在这个配置文件中可以配置任何类型的sql语句。框架会根据配置文件中的参数配置，完成对sql语句以及输入输出参数的映射配置。</p>
<p>Mapper.xml配置  文件大致如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!DOCTYPE mapper </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;mapper namespace=&quot;com.sl.dao.ProductDao&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 根据id查询product表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resultType:返回值类型，一条数据库记录也就对应实体类的一个对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parameterType:参数类型，也就是查询条件的类型 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;select id=&quot;selectProductById&quot; resultType=&quot;com.sl.po.Product&quot; parameterType=&quot;int&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &lt;!-- 这里和普通的sql 查询语句差不多，对于只有一个参数，后面的 #{id}表示占位符，里面不一定要写id,写啥都可以，但是不要空着，如果有多个参数则必须写pojo类里面的属性 --&gt; select * from products where id = #{id} &lt;/select&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/mapper&gt;</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="3会话工厂与会话">3.会话工厂与会话<a href="#3会话工厂与会话" class="hash-link" aria-label="Direct link to 3.会话工厂与会话" title="Direct link to 3.会话工厂与会话">​</a></h3>
<p>Mybatis中会话工厂SqlSessionFactory类可以通过加载资源文件，读取数据源配置SqlMapConfig.xml信息，从而产生一种可以与数据库交互的会话实例SqlSession，会话实例SqlSession根据Mapper.xml文件中配置的sql,对数据库进行操作。</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="4运行流程">4.运行流程<a href="#4运行流程" class="hash-link" aria-label="Direct link to 4.运行流程" title="Direct link to 4.运行流程">​</a></h3>
<p>会话工厂SqlSessionFactory通过加载资源文件获取SqlMapConfig.xml配置文件信息，然后生成可以与数据库交互的会话实例SqlSession。</p>
<p>会话实例可以根据Mapper配置文件中的Sql配置去执行相应的增删改查操作。</p>
<p>在SqlSession会话实例内部，通过执行器Executor对数据库进行操作，Executor依靠封装对象Mappered Statement，它分装了从mapper.xml文件中读取的信息（sql语句，参数，结果集类型）。</p>
<p>Mybatis通过执行器与Mappered Statement的结合实现与数据库的交互。</p>
<p>执行流程图：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/577318-20180702181255132-2135681101.png" alt="" class="img_kGBN"></p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="测试工程搭建">测试工程搭建<a href="#测试工程搭建" class="hash-link" aria-label="Direct link to 测试工程搭建" title="Direct link to 测试工程搭建">​</a></h2>
<p>1.新建maven工程</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/577318-20180702181320571-1138935145.png" alt="" class="img_kGBN"></p>
<p>2. 添加依赖pom.xml</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.sl&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;mybatis-demo&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;junit.version&gt;4.12&lt;/junit.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;mybatis.version&gt;3.4.1&lt;/mybatis.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;mysql.version&gt;5.1.32&lt;/mysql.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- 单元测试 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;junit&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;version&gt;${junit.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;!-- &lt;scope&gt;test&lt;/scope&gt; --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- Mybatis --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;version&gt;${mybatis.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- mysql --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;version&gt;${mysql.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- 日志处理 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;log4j&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;artifactId&gt;log4j&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;version&gt;${log4j.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/project&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3.编写数据源配置文件SqlMapConfig.xml</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- 加载配置文件 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;properties resource=&quot;db.properties&quot;&gt;&lt;/properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;environments default=&quot;development&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- id属性必须和上面的defaut一致 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;environment id=&quot;development&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;!--dataSource 元素使用标准的 JDBC 数据源接口来配置 JDBC 连接对象源 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;property name=&quot;driver&quot; value=&quot;${jdbc.driver}&quot;&gt;&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot;&gt;&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;property name=&quot;username&quot; value=&quot;${jdbc.username}&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/dataSource&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/environment&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/environments&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &lt;!—申明mapper文件 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;mappers&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- xml实现    注册productMapper.xml文件 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;mapper resource=&quot;mapper/productMapper.xml&quot;&gt;&lt;/mapper&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/mappers&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/configuration&gt;</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>4.编写SQL映射配置文件productMapper.xml</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!DOCTYPE mapper </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;mapper namespace=&quot;com.sl.mapper.ProductMapper&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;select id=&quot;selectAllProduct&quot; resultType=&quot;com.sl.po.Product&quot;&gt; select * from products &lt;/select&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/mapper&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>5.编写测试代码TestClient.java</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">//使用productMapper.xml配置文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestClient { //定义会话SqlSession</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SqlSession session =null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Before public void init() throws IOException { //定义mabatis全局配置文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String resource = &quot;SqlMapConfig.xml&quot;; //加载mybatis全局配置文件 //InputStream inputStream = TestClient.class.getClassLoader().getResourceAsStream(resource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> InputStream inputStream = Resources.getResourceAsStream(resource);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SqlSessionFactoryBuilder builder = new SqlSessionFactoryBuilder();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SqlSessionFactory factory = builder.build(inputStream); //根据sqlSessionFactory产生会话sqlsession</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        session = factory.openSession();    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } //查询所有user表所有数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> @Test public void testSelectAllUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String statement = &quot;com.sl.mapper.ProductMapper.selectAllProduct&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Product&gt; listProduct =session.selectList(statement); for(Product product:listProduct)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(product);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } //关闭会话</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> session.close();    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class Product { private int Id; private String Name; private String Description; private BigDecimal UnitPrice; private String ImageUrl; private Boolean IsNew; public int getId() { return Id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } public void setId(int id) { this.Id = id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } public String getName() { return Name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } public void setName(String name) { this.Name = name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } public String getDescription() { return Description;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } public void setDescription(String description) { this.Description = description;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } public BigDecimal getUnitPrice() { return UnitPrice;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } public void setUnitPrice(BigDecimal unitprice) { this.UnitPrice = unitprice;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } public String getImageUrl() { return Name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } public void setImageUrl(String imageurl) { this.ImageUrl = imageurl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } public boolean getIsNew() { return IsNew;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } public void setIsNew(boolean isnew) { this.IsNew = isnew;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override public String toString() { return &quot;Product [id=&quot; + Id + &quot;, Name=&quot; + Name + &quot;, Description=&quot; + Description + &quot;, UnitPrice=&quot; + UnitPrice + &quot;, ImageUrl=&quot; + ImageUrl + &quot;, IsNew=&quot; + IsNew+ &quot;]&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>6.运行测试用例</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/577318-20180702181558003-1700599553.png" alt="" class="img_kGBN"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/JavaWeb/走进JavaWeb技术世界：Mybatis入门.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_EYjg" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_eevz"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：JSP与Servlet的曾经与现在"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">走进JavaWeb技术世界：JSP与Servlet的曾经与现在</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：Servlet工作原理详解"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">走进JavaWeb技术世界：Servlet工作原理详解</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_lc2k thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#前言" class="table-of-contents__link toc-highlight">前言</a></li><li><a href="#mybatis是什么" class="table-of-contents__link toc-highlight">Mybatis是什么</a><ul><li><a href="#特点" class="table-of-contents__link toc-highlight">特点</a></li><li><a href="#核心类介绍" class="table-of-contents__link toc-highlight">核心类介绍</a></li><li><a href="#功能架构我们把mybatis的功能架构分为三层" class="table-of-contents__link toc-highlight">功能架构：我们把Mybatis的功能架构分为三层</a></li><li><a href="#框架结构" class="table-of-contents__link toc-highlight">框架结构：</a></li><li><a href="#执行流程" class="table-of-contents__link toc-highlight">执行流程：</a></li></ul></li><li><a href="#与hibernate的异同" class="table-of-contents__link toc-highlight">与Hibernate的异同</a></li><li><a href="#参考文章" class="table-of-contents__link toc-highlight">参考文章</a></li><li><a href="#mybatis简介" class="table-of-contents__link toc-highlight">MyBatis简介</a></li><li><a href="#mybatis整体架构及运行流程" class="table-of-contents__link toc-highlight">MyBatis整体架构及运行流程</a><ul><li><a href="#1数据源配置文件" class="table-of-contents__link toc-highlight">1.数据源配置文件</a></li><li><a href="#2sql映射文件" class="table-of-contents__link toc-highlight">2.Sql映射文件</a></li><li><a href="#3会话工厂与会话" class="table-of-contents__link toc-highlight">3.会话工厂与会话</a></li><li><a href="#4运行流程" class="table-of-contents__link toc-highlight">4.运行流程</a></li></ul></li><li><a href="#测试工程搭建" class="table-of-contents__link toc-highlight">测试工程搭建</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/code-note-blog/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/code-note-blog/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>