<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-monitor/Spring Actuator" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Spring Actuator | Tommy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aiden-coding.github.io/code-note-blog/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://aiden-coding.github.io/code-note-blog/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://aiden-coding.github.io/code-note-blog/docs/monitor/Spring Actuator"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Spring Actuator | Tommy"><meta data-rh="true" name="description" content="前言"><meta data-rh="true" property="og:description" content="前言"><link data-rh="true" rel="icon" href="/code-note-blog/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://aiden-coding.github.io/code-note-blog/docs/monitor/Spring Actuator"><link data-rh="true" rel="alternate" href="https://aiden-coding.github.io/code-note-blog/docs/monitor/Spring Actuator" hreflang="en"><link data-rh="true" rel="alternate" href="https://aiden-coding.github.io/code-note-blog/docs/monitor/Spring Actuator" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/code-note-blog/blog/rss.xml" title="Tommy RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/code-note-blog/blog/atom.xml" title="Tommy Atom Feed"><link rel="stylesheet" href="/code-note-blog/assets/css/styles.dd5372db.css">
<script src="/code-note-blog/assets/js/runtime~main.f999fb27.js" defer="defer"></script>
<script src="/code-note-blog/assets/js/main.a0bfbaed.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_XYiV" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/code-note-blog/"><b class="navbar__title text--truncate">Tommy</b></a><a class="navbar__item navbar__link" href="/code-note-blog/docs/Java/basic/抽象类和接口">java</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：JavaWeb的由来和基础知识">javaweb</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/cache/探索Redis设计与实现：连接底层与表面的数据结构robj">cache</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/backend/后端技术杂谈：白话虚拟化技术">backend</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/cs/algorithms/剑指offer">cs</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/database/重新学习MySQL数据库：『浅入浅出』MySQL和InnoDB">database</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/distributed/basic/分布式系统理论基础 ：CAP">distributed</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/interview/BATJ-Experience/面阿里,终获offer">interview</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/mq/kafka/消息队列kafka详解：如何实现死信队列">mq</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/Spring全家桶/Spring/第一个Spring应用">spring</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/mianshi/collection">面试</a><a href="https://aiden-coding.github.io/code-note-blog/SpringCloud%E7%AC%AC3%E5%AD%A32024.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_XbAW colorModeToggle_r5NY"><button class="clean-btn toggleButton_Jx0n toggleButtonDisabled_zYO7" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_FjAw"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_qmEt"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_wJfS"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_LABv"><div class="docsWrapper_pdvB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_Jioa" type="button"></button><div class="docRoot_qx_v"><main class="docMainContainer_SejT docMainContainerEnhanced_vBcq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_j3Yw"><div class="docItemContainer_XOSC"><article><div class="tocCollapsible_ToOY theme-doc-toc-mobile tocMobile_suYB"><button type="button" class="clean-btn tocCollapsibleButton_VzP_">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Spring Actuator</h1></header><h2 class="anchor anchorWithStickyNavbar_HWLp" id="前言">前言<a href="#前言" class="hash-link" aria-label="Direct link to 前言" title="Direct link to 前言">​</a></h2>
<p>在微服务系统架构中，服务的监控是必不可少的。目前大多数微服务应用又是基于Spring Cloud系列，也可以说是基于Spring Boot系列的。此时使用Spring Boot Actuator来进行微服务的监控，不仅功能全面，而且非常方便。</p>
<p>在上篇文章《<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FBaNQWygQb8UXxktrXetOcw" target="_blank" rel="noopener noreferrer" title="https://mp.weixin.qq.com/s/BaNQWygQb8UXxktrXetOcw">Spring Boot Actuator集成，难的是灵活运用！</a>》中我们已经介绍了如何将Actuator集成到Spring Boot项目中，并且介绍了如何自定义Endpoint（端点）。有朋友留言说不够深入，那么，本篇文章呢，我们将介绍Actuator原生端点的功能及基本使用场景。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="endpoints-介绍">Endpoints 介绍<a href="#endpoints-介绍" class="hash-link" aria-label="Direct link to Endpoints 介绍" title="Direct link to Endpoints 介绍">​</a></h2>
<p>Actuator中所谓的 Endpoints （翻译为端点）提供了外部来与应用程序进行访问和交互的功能。 比如说/health端点提供了应用健康情况的信息，metrics 端点提供了应用程序的指标（JVM 内存使用、系统CPU使用等）信息。</p>
<p>Actuator原生的端点可分为三大类：</p>
<ul>
<li>应用配置类：获取应用程序中加载的应用配置、环境变量、自动化配置报告等与Spring Boot应用密切相关的配置类信息。</li>
<li>度量指标类：获取应用程序运行过程中用于监控的度量指标，比如：内存信息、线程池信息、HTTP请求统计等。</li>
<li>操作控制类：提供了对应用的关闭等操作类功能。</li>
</ul>
<p>不同版本的Actuator提供的原生端点有所出入，在使用的过程中最好以所使用版本的官方文档为准。同时，每个原生的端点都可以通过配置来单独的禁用或启用。</p>
<p>而在Actuator 2.x 中默认端点增加了/actuator前缀，同时默认只暴露的两个端点为/actuator/health和 /actuator/info。关于端点暴露的配置，可参考前一篇文章。下面基于Spring Boot 2.2.2.RELEASE版本来重点讲解每个端点的功能和应用场景。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="actuator端点">actuator端点<a href="#actuator端点" class="hash-link" aria-label="Direct link to actuator端点" title="Direct link to actuator端点">​</a></h2>
<p>Actuator 2.x新增的默认端点，用于展示目前应用中暴露出来的端点汇总，你可以理解为可用端点的目录。</p>
<p>访问URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator">http://localhost:8080/actuator</a> ，对应展示结果如下图：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530233537559.png" alt="image-20230530233537559" class="img_kGBN"></p>
<p>上述只展示了一部分的端点，返回结果为，这里采用了浏览器的插件-Handler进行了格式美化。通过actuator可以直观的看出目前开放了哪些端点，以及这些端点的名称和请求路径。</p>
<p>下面我们就按照显示actuator端点展示的列表逐一介绍。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="auditevents端点">auditevents端点<a href="#auditevents端点" class="hash-link" aria-label="Direct link to auditevents端点" title="Direct link to auditevents端点">​</a></h2>
<p>auditevents端点用于显示应用暴露的审计事件 (比如认证进入、订单失败)，即使我们打开了所有端点，默认情况下也是看不到这个端点的。因为使用它的前提是需要在Spring容器中存在一个类型为AuditEventRepository的Bean的。</p>
<p>查看了网络上大多数教程，基本上都是介绍了auditevents端点功能，而未展示具体实例。笔者经过多方尝试，终于给大家写了一个案例出来。</p>
<p>首先涉及到权限认证，需要先引入spring-boot-starter-security依赖：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;` </span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>单纯添加这个依赖还是不够的，还需要加入security的配置，不然AuthorizationAuditListener,AuthenticationAuditListener 监听什么事件呢? 因此,我们加入如下代码：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WebSecurityConfig extends WebSecurityConfigurerAdapter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> protected void configure(AuthenticationManagerBuilder auth) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> auth.inMemoryAuthentication()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> .withUser(&quot;admin&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> .password(bcryptPasswordEncoder().encode(&quot;admin&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> .roles(&quot;admin&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public PasswordEncoder bcryptPasswordEncoder() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> return new BCryptPasswordEncoder();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里采用了security默认的登录界面和权限控制，也就是说所有的访问都需要进行登录。而登录的用户名和密码均为admin。</p>
<p>另外，前面提到需要用到AuditEventRepository的Bean，这里初始化一个对应的Bean：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AuditEventConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public InMemoryAuditEventRepository repository(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> return new InMemoryAuditEventRepository();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>InMemoryAuditEventRepository是AuditEventRepository接口的唯一实现类。</p>
<p>重启项目，auditevents端点便可用了。访问<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator">http://localhost:8080/actuator</a> ,此时会跳转到Security提供的登录页面：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530233604253.png" alt="image-20230530233604253" class="img_kGBN"></p>
<p>输入代码中指定的用户名和密码，登录成功，跳转到/actuator页面：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530233625068.png" alt="image-20230530233625068" class="img_kGBN"></p>
<p>可以看到auditevents端点已经成功显示出来了。新开页面访问<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fauditevents" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/auditevents">http://localhost:8080/actuator/auditevents</a> ，展示内容如下：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530233716752.png" alt="image-20230530233716752" class="img_kGBN"></p>
<p>可以看到已经记录下了权限相关的事件，其中第一次事件是我们直接访问actuator端点时，由于之前为做权限认真，所以事件类型为&quot;AUTHORIZATION_FAILURE&quot;，也就是认证失败。此时跳转到登录页面，然后在登录页面输入用户名和密码，登录成功，对应的事件为&quot;AUTHENTICATION_SUCCESS&quot;。</p>
<p>也就是说auditevents记录了用户认证登录系统相关的事件信息，包括时间戳、认证用户、事件类型、访问地址、sessionId等。</p>
<p>示例源码地址：<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsecbr%2Fspringboot-all%2Ftree%2Fmaster%2Fspringboot-actuator-auditevents" target="_blank" rel="noopener noreferrer" title="https://github.com/secbr/springboot-all/tree/master/springboot-actuator-auditevents">github.com/secbr/sprin…</a> 。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="beans端点">beans端点<a href="#beans端点" class="hash-link" aria-label="Direct link to beans端点" title="Direct link to beans端点">​</a></h2>
<p>/beans端点会返回Spring容器中所有bean的别名、类型、是否单例、依赖等信息。</p>
<p>访问路径为<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fbeans" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/beans">http://localhost:8080/actuator/beans</a> ，范围结果如下：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530233748286.png" alt="image-20230530233748286" class="img_kGBN"></p>
<p>这个端点会展示目前Spring容器中初始化的所有Bean，试想一下，如果你配置了一个Bean，但不确定是否成功实例化，是不是就可以通过这个 端口查询一下呢？</p>
<p>我们在项目中定义一个TestController，并注入一个UserService：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TestController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> @Resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> private UserService userService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>重新启动并访问该端点，会看到如下信息：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530233805161.png" alt="image-20230530233805161" class="img_kGBN"></p>
<p>可以看到TestController被实例化了，而且依赖于UserService。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="caches端点">caches端点<a href="#caches端点" class="hash-link" aria-label="Direct link to caches端点" title="Direct link to caches端点">​</a></h2>
<p>caches端点主要用于暴露应用程序中的缓冲。这里以Spring Boot提供的Cache组件来展示一下实例。</p>
<p>在项目中集成spring-boot-starter-cache，引入依赖：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后在启动类上添加@EnableCaching，开启缓存功能。</p>
<p>定义一个CacheController，对其方法queryAll使用缓存机制：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CacheController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> @RequestMapping(&quot;/queryAll&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> @Cacheable(value = &quot;queryAll&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public Map&lt;String, String&gt; queryAll() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Map&lt;String, String&gt; map = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> map.put(&quot;1&quot;, &quot;Tom&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> map.put(&quot;2&quot;, &quot;Steven&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> return map;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里使用@Cacheable注解来实现缓存功能，缓存的key为queryAll。此时，访问<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fcaches" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/caches">http://localhost:8080/actuator/caches</a> ，会展示缓存的根内容，但里面并没有缓存。</p>
<p>访问一下<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2FqueryAll" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/queryAll">http://localhost:8080/queryAll</a> ，也就是触发一下缓存内容的生成。此时再访问上面的链接，便可以看到应用程序中的缓存信息了：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530233852486.png" alt="image-20230530233852486" class="img_kGBN"></p>
<p>可以看到，返回的内容不仅展示了应用程序的缓存管理器，同时也展示了缓存的Key和缓存数据存储类型信息。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="caches-cache端点">caches-cache端点<a href="#caches-cache端点" class="hash-link" aria-label="Direct link to caches-cache端点" title="Direct link to caches-cache端点">​</a></h2>
<p>caches-cache端点是对上面caches端点的扩展，caches端点展示的所有的缓存信息。如果想直接看出具体的一个缓存信息，则可以使用caches-cache端点。</p>
<p>访问的URL为：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fcaches%2F%257Bcache%257D" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/caches/%7Bcache%7D">http://localhost:8080/actuator/caches/<code>{cache}</code></a> ，其中大括号内的值可以替换为缓存的key。</p>
<p><code>http://localhost:8080/actuator/caches/queryAll</code></p>
<p>将上面的占位符换成queryAll（缓存的key），执行结果如下：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530233906164.png" alt="image-20230530233906164" class="img_kGBN"></p>
<p>可以看出，只查询除了指定的缓存信息，包括缓存管理器、缓存名称（key），缓存的存储类型。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="health端点">health端点<a href="#health端点" class="hash-link" aria-label="Direct link to health端点" title="Direct link to health端点">​</a></h2>
<p>health端点用来检查应用的运行状态，最高频使用的一个端点。检查应用实例的运行状态以及应用不”健康“的原因，比如数据库连接、磁盘空间不够等。</p>
<p>访问地址：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fhealth" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/health">http://localhost:8080/actuator/health</a></p>
<p>展示结果：</p>
<p><code>{ &quot;status&quot;: &quot;UP&quot; }</code></p>
<p>上面的实例过于简单，在项目中把数据库给集成进去：</p>
<p>`</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;` </span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后在application配置文件中进行配置：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">spring:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> datasource:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> url: jdbc:mysql://xxx:3333/xxx?characterEncoding=utf8&amp;serverTimezone=Asia/Shanghai</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> username: root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> password: root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> driver-class-name: com.mysql.cj.jdbc.Driver</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>同时，我们要在application配置文件中配置一下management.endpoint.health.show-details的值。该属性有三个可选项：</p>
<ul>
<li>never ：不展示详细信息，up 或者 down 的状态，默认配置；</li>
<li>when-authorized：详细信息将会展示给通过认证的用户。授权的角色可以通过management.endpoint.health.roles 配置；</li>
<li>always：对所有用户暴露详细信息。</li>
</ul>
<p>默认值是never，所以我们直接访问看到的只有UP或DOWN。现在集成了数据库，同时把该项值配置为always，看一下详情：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530233934501.png" alt="image-20230530233934501" class="img_kGBN"></p>
<p>可以看到整体状态为UP，其中下面的三个组件均为UP，而数据库是MYSQL，检查数据库的语句为“SELECT 1”。同时，还展示了磁盘信息和ping的状态。</p>
<p>现在我们把数据库的用户名和密码故意改错，重启访问可得：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530233951145.png" alt="image-20230530233951145" class="img_kGBN"></p>
<p>状态为DOWN，组件中db出现了问题，状态为DOWN。问题的详情在error中展示，可以看出是建立连接时出错了。在实践中，我们可以通过health端口监控数据库、Redis、MongoDB、磁盘等健康情况。Actuator预定义的处理类为：DataSourceHealthIndicator, DiskSpaceHealthIndicator, MongoHealthIndicator, RedisHealthIndicator等。</p>
<p>而且每个指标都可以单独的进行开启和关闭，以数据库的为例：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">management:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> health:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> db:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> enabled: true` </span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="info端点">info端点<a href="#info端点" class="hash-link" aria-label="Direct link to info端点" title="Direct link to info端点">​</a></h2>
<p>/info 端点用来查看配置文件 application中以info开头的配置信息，默认情况下 application中并没有 info 节点配置，所以默认为空。</p>
<p>application中添加如下配置：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">info:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> type: 公众号</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> name: 程序新视界</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> wechat: zhuan2quan</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>访问<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Finfo" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/info">http://localhost:8080/actuator/info</a> ，展示结果如下：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530234019487.png" alt="image-20230530234019487" class="img_kGBN"></p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="conditions端点">conditions端点<a href="#conditions端点" class="hash-link" aria-label="Direct link to conditions端点" title="Direct link to conditions端点">​</a></h2>
<p>Spring Boot提供了自动配置功能，使用起来非常方便。但这些自动配置类是什么情况下生效的，是否生效是比较难排查的。此时，可以使用 conditions 在应用运行时查看某个配置类在什么条件下生效，或为什么没有生效。</p>
<p>访问URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fconditions" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/conditions">http://localhost:8080/actuator/conditions</a> ，部分返回信息如下：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530234053134.png" alt="image-20230530234053134" class="img_kGBN"></p>
<p>可以看到某个自动配置类对应的生效条件和提示信息。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="shutdown端点">shutdown端点<a href="#shutdown端点" class="hash-link" aria-label="Direct link to shutdown端点" title="Direct link to shutdown端点">​</a></h2>
<p>shutdown端点属于操作控制类端点，可以优雅关闭 Spring Boot 应用。需要在配置文件中开启：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">management:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> endpoint:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> shutdown:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> enabled: true</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>该端点只支持POST请求，执行命令及返回结果如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST &quot;http://localhost:8080/actuator/shutdown&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;message&quot;: &quot;Shutting down, bye...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>执行之后，会发现应用程序已经被关闭了。由于该端点会关闭应用程序，因此使用是需要小心。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="configprops端点">configprops端点<a href="#configprops端点" class="hash-link" aria-label="Direct link to configprops端点" title="Direct link to configprops端点">​</a></h2>
<p>在Spring Boot项目中，我们经常会用到@ConfigurationProperties注解来批量注入一些属性，而configprops端点就是用来显示这些被该注解标注的配置类。</p>
<p>比如前面的info配置，我们就可以定义一个类InfoProperties：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(prefix = &quot;info&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class InfoProperties {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> private String type;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> private String name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> private String wechat;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // 省略getter/setter </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>访问URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fconfigprops" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/configprops">http://localhost:8080/actuator/configprops</a> ，部分信息如下：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530234110515.png" alt="image-20230530234110515" class="img_kGBN"></p>
<p>不仅可以看到系统中默认集成的配置类信息，还可以看到我们自定义的配置类信息。这里需要注意的是对应的类需要进行实例化（@Component）这里才能够看到。</p>
<p>我们自定义的类中返回了Bean的名称、配置前缀。上面的ProjectInfoProperties还返回了属性信息。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="env端点">env端点<a href="#env端点" class="hash-link" aria-label="Direct link to env端点" title="Direct link to env端点">​</a></h2>
<p>env端点用于获取全部环境属性，包括application配置文件中的内容、系统变量等。</p>
<p>访问URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fenv%25EF%25BC%258C%25E8%25BF%2594%25E5%259B%259E%25E9%2583%25A8%25E5%2588%2586%25E4%25BF%25A1%25E6%2581%25AF%25EF%25BC%259A" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/env%EF%BC%8C%E8%BF%94%E5%9B%9E%E9%83%A8%E5%88%86%E4%BF%A1%E6%81%AF%EF%BC%9A">http://localhost:8080/actuator/env，返回部分信息：</a></p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530234200949.png" alt="image-20230530234200949" class="img_kGBN"></p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="env-tomatch端点">env-toMatch端点<a href="#env-tomatch端点" class="hash-link" aria-label="Direct link to env-toMatch端点" title="Direct link to env-toMatch端点">​</a></h2>
<p>env-toMatch端点与caches和caches-cache类似，一个是获取所有的，一个是获取指定的。这里的env-toMatch端点是获取指定key的环境变量属性。</p>
<p>基本格式为：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fenv%2F%257BtoMatch%257D%25E3%2580%2582" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/env/%7BtoMatch%7D%E3%80%82">http://localhost:8080/actuator/env/<code>{toMatch}</code>。</a> 实例URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fenv%2Finfo.user.name" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/env/info.user.name">http://localhost:8080/actuator/env/info.user.name</a> ，返回结果如下图：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530234238073.png" alt="image-20230530234238073" class="img_kGBN"></p>
<p>返回数据信息包括该属性的来源、value值等信息。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="loggers端点">loggers端点<a href="#loggers端点" class="hash-link" aria-label="Direct link to loggers端点" title="Direct link to loggers 端点">​</a></h2>
<p>/loggers 端点暴露了程序内部配置的所有 logger 的信息，包括不同的package、不同的类的日志级别信息。</p>
<p>访问URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Floggers" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/loggers">http://localhost:8080/actuator/loggers</a> ，部分返回结果：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530234301625.png" alt="image-20230530234301625" class="img_kGBN"></p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="loggers-name端点">loggers-name端点<a href="#loggers-name端点" class="hash-link" aria-label="Direct link to loggers-name端点" title="Direct link to loggers-name端点">​</a></h2>
<p>loggers-name端点也是logger端点的细分，可以通过name访问某一个logger。</p>
<p>基本请求格式：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Floggers%2F%257Bname%257D" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/loggers/%7Bname%7D">http://localhost:8080/actuator/loggers/<code>{name}</code></a> 示例请求URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Floggers%2Fcom.secbro2.SpringbootActuatorApplication" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/loggers/com.secbro2.SpringbootActuatorApplication">http://localhost:8080/actuator/loggers/com.secbro2.SpringbootActuatorApplication</a> ，返回结果如下：</p>
<p><code>{ &quot;configuredLevel&quot;: null, &quot;effectiveLevel&quot;: &quot;INFO&quot; }</code></p>
<p>可以看出，启动类的日志级别为INFO。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="heapdump端点">heapdump端点<a href="#heapdump端点" class="hash-link" aria-label="Direct link to heapdump端点" title="Direct link to heapdump端点">​</a></h2>
<p>heapdump端点会返回一个JVM 堆dump，通  过JVM自带的监控工具VisualVM可打开此文件查看内存快照。这是内存优化，基于堆栈层面进行排查的利器。</p>
<p>访问URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fheapdump" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/heapdump">http://localhost:8080/actuator/heapdump</a> 。Mac操作系统下浏览器访问会下载一个名字为heapdump的文件，无后缀，30M。</p>
<p>命令行执行jvisualvm命令，打开VisualVM，依次点击“文件”、“装入”，记得文件类型要选择“堆Dump(<em>.hprof,</em>.*)”，然后选择heapdump。</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530234346098.png" alt="image-20230530234346098" class="img_kGBN"></p>
<p>此时便可以通过工具来进行堆栈信息的分析了。对于线上问题的分析提供了极为便利的方式。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="threaddump端点">threaddump端点<a href="#threaddump端点" class="hash-link" aria-label="Direct link to threaddump端点" title="Direct link to threaddump端点">​</a></h2>
<p>/threaddump 端点会生成当前线程活动的快照。在日常定位问题的时候查看线程的情况非常有用，主要展示了线程名、线程ID、线程的状态、是否等待锁资源等信息。</p>
<p>访问URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fthreaddump" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/threaddump">http://localhost:8080/actuator/threaddump</a> ，部分返回结果：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530234405331.png" alt="image-20230530234405331" class="img_kGBN"></p>
<p>我们可通过线程快照来排查生产环境的问题。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="metrics端点">metrics端点<a href="#metrics端点" class="hash-link" aria-label="Direct link to metrics端点" title="Direct link to metrics端点">​</a></h2>
<p>/metrics 端点用来暴露当前应用的各类重要度量指标，比如：内存信息、线程信息、垃圾回收信息、tomcat、数据库连接池等。2.x版本这里只显示了一个指标的列表。</p>
<p>访问URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fmetrics" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/metrics">http://localhost:8080/actuator/metrics</a> 。</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;names&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.memory.max&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.threads.states&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.gc.pause&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;http.server.requests&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;process.files.max&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.gc.memory.promoted&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;system.load.average.1m&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.memory.used&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.gc.max.data.size&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.memory.committed&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;system.cpu.count&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;logback.events&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.buffer.memory.used&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;tomcat.sessions.created&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.threads.daemon&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;system.cpu.usage&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.gc.memory.allocated&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;tomcat.sessions.expired&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.threads.live&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.threads.peak&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;process.uptime&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;tomcat.sessions.rejected&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;process.cpu.usage&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.classes.loaded&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.classes.unloaded&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;tomcat.sessions.active.current&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;tomcat.sessions.alive.max&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.gc.live.data.size&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;process.files.open&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.buffer.count&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;jvm.buffer.total.capacity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;tomcat.sessions.active.max&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;process.start.time&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>/metrics端点可以提供应用运行状态的完整度量指标报告，这项功能非常的实用，但是对于监控系统中的各项监控  功能，它们的监控内容、数据收集频率都有所不同，如果我们每次都通过全量获取报告的方式来收集，略显粗暴。官方也是可能是处于此方面的考虑，在Spring Boot 2.x之后，/metrics端点只显示了指标的列表。</p>
<p>如果需要查看具体的某项指标，则可通过/metrics-requiredMetricName端点来实现。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="metrics-requiredmetricname端点">metrics-requiredMetricName端点<a href="#metrics-requiredmetricname端点" class="hash-link" aria-label="Direct link to metrics-requiredMetricName端点" title="Direct link to metrics-requiredMetricName端点">​</a></h2>
<p>metrics-requiredMetricName端点，用于访问指定指标的报告，一般会配合/metrics端点先查出指标列表，然后再查询具体的某个指标。</p>
<p>基本格式：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fmetrics%2F%257BrequiredMetricName%257D%25E3%2580%2582" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/metrics/%7BrequiredMetricName%7D%E3%80%82">http://localhost:8080/actuator/metrics/<code>{requiredMetricName}</code>。</a> 实例URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fmetrics%2Fjvm.memory.max" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/metrics/jvm.memory.max">http://localhost:8080/actuator/metrics/jvm.memory.max</a> ，返回结果如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;name&quot;: &quot;jvm.memory.max&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;description&quot;: &quot;The maximum amount of memory in bytes that can be used for memory management&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;baseUnit&quot;: &quot;bytes&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;measurements&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;statistic&quot;: &quot;VALUE&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;value&quot;: 5606211583</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;availableTags&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;tag&quot;: &quot;area&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;values&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;heap&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;nonheap&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;tag&quot;: &quot;id&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;values&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;Compressed Class Space&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;PS Survivor Space&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;PS Old Gen&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;Metaspace&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;PS Eden Space&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;Code Cache&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>上述结果展示了最大可用内存的情况。其他相关指标的展示替换对应的名字进行查看即可。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="scheduledtasks端点">scheduledtasks端点<a href="#scheduledtasks端点" class="hash-link" aria-label="Direct link to scheduledtasks端点" title="Direct link to scheduledtasks端点">​</a></h2>
<p>/scheduledtasks端点用于展示应用中的定时任务信息。</p>
<p>先在项目中构建两个定时任务，首先在启动类上添加@EnableScheduling开启定时任务功能。然后创建定时任务类：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyTask {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> @Scheduled(cron = &quot;0/10 * * * * *&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public void work() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> System.out.println(&quot;I am a cron job.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> @Scheduled(fixedDelay = 10000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public void work1() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> System.out.println(&quot;I am a fixedDelay job.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中定义了两种类型的定时任务，work是基于cron实现的定时任务，work1是基于fixedDelay实现的定时任务。</p>
<p>访问URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fscheduledtasks" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/scheduledtasks">http://localhost:8080/actuator/scheduledtasks</a> ，返回结果信息如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;cron&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;runnable&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;target&quot;: &quot;com.secbro2.job.MyTask.work&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;expression&quot;: &quot;0/10 * * * * *&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;fixedDelay&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;runnable&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;target&quot;: &quot;com.secbro2.job.MyTask.work1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;initialDelay&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;interval&quot;: 10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;fixedRate&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;custom&quot;: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，通过该端点可以明确的知道当前应用中定义的定时任务，以及执行模式和频次。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="mappings端点">mappings端点<a href="#mappings端点" class="hash-link" aria-label="Direct link to mappings端点" title="Direct link to mappings端点">​</a></h2>
<p>/mappings端点用于描述全部的 URI 路径，以及和控制器的映射关系。这个功能算是比较常用的了，如果想系统的查看URL对应的Controller及方法，可以使用此端点。</p>
<p>访问URL：<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Factuator%2Fmappings" target="_blank" rel="noopener noreferrer" title="http://localhost:8080/actuator/mappings">http://localhost:8080/actuator/mappings</a> ，部分返回结果如下：</p>
<p><img loading="lazy" src="https://java-tutorial.oss-cn-shanghai.aliyuncs.com/image-20230530234501440.png" alt="image-20230530234501440" class="img_kGBN"></p>
<p>至此关于Spring Boot Actuator提供的所有端点介绍完毕。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="小结">小结<a href="#小结" class="hash-link" aria-label="Direct link to 小结" title="Direct link to 小结">​</a></h2>
<p>本文通过对Spring Boot Actuator提供所有端点构建实例并演示结果，本文大多数内容和实例都是全网第一手资料。该框架对排查线上问题，性能优化等都有极大的帮助。而在写本文的过程中也越来越惊叹Actuator的功能之强大，强烈推荐用起来。</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="参考链接">参考链接<a href="#参考链接" class="hash-link" aria-label="Direct link to 参考链接" title="Direct link to 参考链接">​</a></h2>
<p>作者：程序新视界
链接：<a href="https://juejin.cn/post/6984550846876876814" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6984550846876876814</a>
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/monitor/Spring Actuator.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_EYjg" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_eevz"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_lc2k thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#前言" class="table-of-contents__link toc-highlight">前言</a></li><li><a href="#endpoints-介绍" class="table-of-contents__link toc-highlight">Endpoints 介绍</a></li><li><a href="#actuator端点" class="table-of-contents__link toc-highlight">actuator端点</a></li><li><a href="#auditevents端点" class="table-of-contents__link toc-highlight">auditevents端点</a></li><li><a href="#beans端点" class="table-of-contents__link toc-highlight">beans端点</a></li><li><a href="#caches端点" class="table-of-contents__link toc-highlight">caches端点</a></li><li><a href="#caches-cache端点" class="table-of-contents__link toc-highlight">caches-cache端点</a></li><li><a href="#health端点" class="table-of-contents__link toc-highlight">health端点</a></li><li><a href="#info端点" class="table-of-contents__link toc-highlight">info端点</a></li><li><a href="#conditions端点" class="table-of-contents__link toc-highlight">conditions端点</a></li><li><a href="#shutdown端点" class="table-of-contents__link toc-highlight">shutdown端点</a></li><li><a href="#configprops端点" class="table-of-contents__link toc-highlight">configprops端点</a></li><li><a href="#env端点" class="table-of-contents__link toc-highlight">env端点</a></li><li><a href="#env-tomatch端点" class="table-of-contents__link toc-highlight">env-toMatch端点</a></li><li><a href="#loggers端点" class="table-of-contents__link toc-highlight">loggers端点</a></li><li><a href="#loggers-name端点" class="table-of-contents__link toc-highlight">loggers-name端点</a></li><li><a href="#heapdump端点" class="table-of-contents__link toc-highlight">heapdump端点</a></li><li><a href="#threaddump端点" class="table-of-contents__link toc-highlight">threaddump端点</a></li><li><a href="#metrics端点" class="table-of-contents__link toc-highlight">metrics端点</a></li><li><a href="#metrics-requiredmetricname端点" class="table-of-contents__link toc-highlight">metrics-requiredMetricName端点</a></li><li><a href="#scheduledtasks端点" class="table-of-contents__link toc-highlight">scheduledtasks端点</a></li><li><a href="#mappings端点" class="table-of-contents__link toc-highlight">mappings端点</a></li><li><a href="#小结" class="table-of-contents__link toc-highlight">小结</a></li><li><a href="#参考链接" class="table-of-contents__link toc-highlight">参考链接</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/code-note-blog/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/code-note-blog/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>