<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-mianshi/spring" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Spring | Tommy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aiden-coding.github.io/code-note-blog/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://aiden-coding.github.io/code-note-blog/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://aiden-coding.github.io/code-note-blog/docs/mianshi/spring"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Spring | Tommy"><meta data-rh="true" name="description" content="Springé¢è¯•é¢˜ï¼Œ35é“Springå…«è‚¡æ–‡ï¼ˆ1.3ä¸‡å­—63å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘"><meta data-rh="true" property="og:description" content="Springé¢è¯•é¢˜ï¼Œ35é“Springå…«è‚¡æ–‡ï¼ˆ1.3ä¸‡å­—63å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘"><link data-rh="true" rel="icon" href="/code-note-blog/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://aiden-coding.github.io/code-note-blog/docs/mianshi/spring"><link data-rh="true" rel="alternate" href="https://aiden-coding.github.io/code-note-blog/docs/mianshi/spring" hreflang="en"><link data-rh="true" rel="alternate" href="https://aiden-coding.github.io/code-note-blog/docs/mianshi/spring" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/code-note-blog/blog/rss.xml" title="Tommy RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/code-note-blog/blog/atom.xml" title="Tommy Atom Feed"><link rel="stylesheet" href="/code-note-blog/assets/css/styles.dd5372db.css">
<script src="/code-note-blog/assets/js/runtime~main.f999fb27.js" defer="defer"></script>
<script src="/code-note-blog/assets/js/main.a0bfbaed.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_XYiV" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/code-note-blog/"><b class="navbar__title text--truncate">Tommy</b></a><a class="navbar__item navbar__link" href="/code-note-blog/docs/Java/basic/æŠ½è±¡ç±»å’Œæ¥å£">java</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/JavaWeb/èµ°è¿›JavaWebæŠ€æœ¯ä¸–ç•Œï¼šJavaWebçš„ç”±æ¥å’ŒåŸºç¡€çŸ¥è¯†">javaweb</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/cache/æ¢ç´¢Redisè®¾è®¡ä¸å®ç°ï¼šè¿æ¥åº•å±‚ä¸è¡¨é¢çš„æ•°æ®ç»“æ„robj">cache</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/backend/åç«¯æŠ€æœ¯æ‚è°ˆï¼šç™½è¯è™šæ‹ŸåŒ–æŠ€æœ¯">backend</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/cs/algorithms/å‰‘æŒ‡offer">cs</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/database/é‡æ–°å­¦ä¹ MySQLæ•°æ®åº“ï¼šã€æµ…å…¥æµ…å‡ºã€MySQLå’ŒInnoDB">database</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/distributed/basic/åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºåŸºç¡€ ï¼šCAP">distributed</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/interview/BATJ-Experience/é¢é˜¿é‡Œ,ç»ˆè·offer">interview</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/mq/kafka/æ¶ˆæ¯é˜Ÿåˆ—kafkaè¯¦è§£ï¼šå¦‚ä½•å®ç°æ­»ä¿¡é˜Ÿåˆ—">mq</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/Springå…¨å®¶æ¡¶/Spring/ç¬¬ä¸€ä¸ªSpringåº”ç”¨">spring</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/code-note-blog/docs/mianshi/collection">é¢è¯•</a><a href="https://aiden-coding.github.io/code-note-blog/SpringCloud%E7%AC%AC3%E5%AD%A32024.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_XbAW colorModeToggle_r5NY"><button class="clean-btn toggleButton_Jx0n toggleButtonDisabled_zYO7" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_FjAw"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_qmEt"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_wJfS"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_LABv"><div class="docsWrapper_pdvB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_Jioa" type="button"></button><div class="docRoot_qx_v"><aside class="theme-doc-sidebar-container docSidebarContainer_NHKT"><div class="sidebarViewport_uyYB"><div class="sidebar_SZG4"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_VP_k"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/collection">Javaé›†åˆæ¡†æ¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/fenbushi">åˆ†å¸ƒå¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/javabasic">Java åŸºç¡€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/javase">Java SE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/javathread">Javaå¹¶å‘ç¼–ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/jvm">JVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/mybatis">MyBatis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/mysql">MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/network">è®¡ç®—æœºç½‘ç»œ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/nixi">é¢æ¸£é€†è¢­</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/os">æ“ä½œç³»ç»Ÿ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/redis">Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/rocketmq">RocketMQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/code-note-blog/docs/mianshi/spring">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/code-note-blog/docs/mianshi/weifuwu">å¾®æœåŠ¡</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/code-note-blog/docs/test/b">b</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_SejT"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_j3Yw"><div class="docItemContainer_XOSC"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_F6gm" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/code-note-blog/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YCxa"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Spring</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ToOY theme-doc-toc-mobile tocMobile_suYB"><button type="button" class="clean-btn tocCollapsibleButton_VzP_">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Spring</h1></header><p>1.3 ä¸‡å­— 63 å¼ æ‰‹ç»˜å›¾ï¼Œè¯¦è§£ 35 é“ Spring é¢è¯•é«˜é¢‘é¢˜ï¼ˆè®©å¤©ä¸‹æ²¡æœ‰éš¾èƒŒçš„å…«è‚¡ï¼‰ï¼Œé¢æ¸£èƒŒä¼šè¿™äº› Spring å…«è‚¡æ–‡ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚æ•´ç†ï¼šæ²‰é»˜ç‹äºŒï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/EQge6DmgIqYITM3mAxkatg" target="_blank" rel="noopener noreferrer">è½¬è½½é“¾æ¥</a>ï¼Œä½œè€…ï¼šä¸‰åˆ†æ¶ï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/Y17S85ntHm_MLTZMJdtjQQ" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a>ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="åŸºç¡€">åŸºç¡€<a href="#åŸºç¡€" class="hash-link" aria-label="Direct link to åŸºç¡€" title="Direct link to åŸºç¡€">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="1spring-æ˜¯ä»€ä¹ˆç‰¹æ€§  æœ‰å“ªäº›æ¨¡å—">1.Spring æ˜¯ä»€ä¹ˆï¼Ÿç‰¹æ€§ï¼Ÿæœ‰å“ªäº›æ¨¡å—ï¼Ÿ<a href="#1spring-æ˜¯ä»€ä¹ˆç‰¹æ€§æœ‰å“ªäº›æ¨¡å—" class="hash-link" aria-label="Direct link to 1.Spring æ˜¯ä»€ä¹ˆï¼Ÿç‰¹æ€§ï¼Ÿæœ‰å“ªäº›æ¨¡å—ï¼Ÿ" title="Direct link to 1.Spring æ˜¯ä»€ä¹ˆï¼Ÿç‰¹æ€§ï¼Ÿæœ‰å“ªäº›æ¨¡å—ï¼Ÿ">â€‹</a></h3>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-301-55cfaad2b2ba4e586a19810c5f498893.png" width="1200" height="600" class="img_kGBN"></p>
<p>ä¸€å¥è¯æ¦‚æ‹¬ï¼š<strong>Spring æ˜¯ä¸€ä¸ªè½»é‡çº§ã€éå…¥ä¾µå¼çš„æ§åˆ¶åè½¬ (IoC) å’Œé¢å‘åˆ‡é¢ (AOP) çš„æ¡†æ¶ã€‚</strong></p>
<p>2003 å¹´ï¼Œä¸€ä¸ªéŸ³ä¹å®¶ Rod Johnson å†³å®šå‘å±•ä¸€ä¸ªè½»é‡çº§çš„ Java å¼€å‘æ¡†æ¶ï¼Œ<code>Spring</code>ä½œä¸º Java æˆ˜åœºçš„é¾™éª‘å…µæ¸æ¸å´›èµ·ï¼Œå¹¶æ·˜æ±°äº†<code>EJB</code>è¿™ä¸ªä¼ ç»Ÿçš„é‡è£…éª‘å…µã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-302-ee740efb06f603032af7f083f613bd3c.png" width="893" height="242" class="img_kGBN"></p>
<p>åˆ°äº†ç°åœ¨ï¼Œä¼ä¸šçº§å¼€å‘çš„æ ‡é…åŸºæœ¬å°±æ˜¯ <strong>Spring5</strong> + <strong>Spring Boot 2</strong> + <strong>JDK 8</strong></p>
<blockquote>
<p>Spring æœ‰å“ªäº›ç‰¹æ€§å‘¢ï¼Ÿ</p>
</blockquote>
<p>Spring æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-303-872435c23d17bbef1748fafb9d489f6a.png" width="702" height="578" class="img_kGBN"></p>
<ol>
<li><strong>IOC</strong> å’Œ <strong>DI</strong> çš„æ”¯æŒ</li>
</ol>
<p>Spring çš„æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªå¤§çš„å·¥å‚å®¹å™¨ï¼Œå¯ä»¥ç»´æŠ¤æ‰€æœ‰å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»ï¼ŒSpring å·¥å‚ç”¨äºç”Ÿæˆ Beanï¼Œå¹¶ä¸”ç®¡ç† Bean çš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ç°<strong>é«˜å†…èšä½è€¦åˆ</strong>çš„è®¾è®¡ç†å¿µã€‚</p>
<ol start="2">
<li>AOP ç¼–ç¨‹çš„æ”¯æŒ</li>
</ol>
<p>Spring æä¾›äº†<strong>é¢å‘åˆ‡é¢ç¼–ç¨‹</strong>ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°å¯¹ç¨‹åºè¿›è¡Œæƒé™æ‹¦æˆªã€è¿è¡Œç›‘æ§ç­‰åˆ‡é¢åŠŸèƒ½ã€‚</p>
<ol start="3">
<li>å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒ</li>
</ol>
<p>æ”¯æŒé€šè¿‡é…ç½®å°±æ¥å®Œæˆå¯¹äº‹åŠ¡çš„ç®¡ç†ï¼Œè€Œä¸éœ€è¦é€šè¿‡ç¡¬ç¼–ç çš„æ–¹  å¼ï¼Œä»¥å‰é‡å¤çš„ä¸€äº›äº‹åŠ¡æäº¤ã€å›æ»šçš„ JDBC ä»£ç ï¼Œéƒ½å¯ä»¥ä¸ç”¨è‡ªå·±å†™äº†ã€‚</p>
<ol start="4">
<li>å¿«æ·æµ‹è¯•çš„æ”¯æŒ</li>
</ol>
<p>Spring å¯¹ Junit æä¾›æ”¯æŒï¼Œå¯ä»¥é€šè¿‡<strong>æ³¨è§£</strong>å¿«æ·åœ°æµ‹è¯• Spring ç¨‹åºã€‚</p>
<ol start="5">
<li>å¿«é€Ÿé›†æˆåŠŸèƒ½</li>
</ol>
<p>æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶ï¼ŒSpring ä¸æ’æ–¥å„ç§ä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼Œå…¶å†…éƒ¨æä¾›äº†å¯¹å„ç§ä¼˜ç§€æ¡†æ¶ï¼ˆå¦‚ï¼šStrutsã€Hibernateã€MyBatisã€Quartz ç­‰ï¼‰çš„ç›´æ¥æ”¯æŒã€‚</p>
<ol start="6">
<li>å¤æ‚ API æ¨¡æ¿å°è£…</li>
</ol>
<p>Spring å¯¹ JavaEE å¼€å‘ä¸­éå¸¸éš¾ç”¨çš„ä¸€äº› APIï¼ˆJDBCã€JavaMailã€è¿œç¨‹è°ƒç”¨ç­‰ï¼‰éƒ½æä¾›äº†æ¨¡æ¿åŒ–çš„å°è£…ï¼Œè¿™äº›å°è£… API çš„æä¾›ä½¿å¾—åº”ç”¨éš¾åº¦å¤§å¤§é™ä½ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="2spring-æœ‰å“ªäº›æ¨¡å—å‘¢">2.Spring æœ‰å“ªäº›æ¨¡å—å‘¢ï¼Ÿ<a href="#2spring-æœ‰å“ªäº›æ¨¡å—å‘¢" class="hash-link" aria-label="Direct link to 2.Spring æœ‰å“ªäº›æ¨¡å—å‘¢ï¼Ÿ" title="Direct link to 2.Spring æœ‰å“ªäº›æ¨¡å—å‘¢ï¼Ÿ">â€‹</a></h3>
<p>Spring æ¡†æ¶æ˜¯åˆ†æ¨¡å—å­˜åœ¨ï¼Œé™¤äº†æœ€æ ¸å¿ƒçš„<code>Spring Core Container</code>æ˜¯å¿…è¦æ¨¡å—ä¹‹å¤–ï¼Œå…¶ä»–æ¨¡å—éƒ½æ˜¯<code>å¯é€‰</code>ï¼Œå¤§çº¦æœ‰ 20 å¤šä¸ªæ¨¡å—ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-304-de5da574938c4142242fae2a4f464909.png" width="694" height="508" class="img_kGBN"></p>
<p>æœ€ä¸»è¦çš„ä¸ƒå¤§æ¨¡å—ï¼š</p>
<ol>
<li><strong>Spring Core</strong>ï¼šSpring æ ¸å¿ƒï¼Œå®ƒæ˜¯æ¡†æ¶æœ€åŸºç¡€çš„éƒ¨åˆ†ï¼Œæä¾› IOC å’Œä¾èµ–æ³¨å…¥ DI ç‰¹æ€§ã€‚</li>
<li><strong>Spring Context</strong>ï¼šSpring ä¸Šä¸‹æ–‡å®¹å™¨ï¼Œå®ƒæ˜¯ BeanFactory åŠŸèƒ½åŠ å¼ºçš„ä¸€ä¸ªå­æ¥å£ã€‚</li>
<li><strong>Spring Web</strong>ï¼šå®ƒæä¾› Web åº”ç”¨å¼€å‘çš„æ”¯æŒã€‚</li>
<li><strong>Spring MVC</strong>ï¼šå®ƒé’ˆå¯¹ Web åº”ç”¨ä¸­ MVC æ€æƒ³çš„å®ç°ã€‚</li>
<li><strong>Spring DAO</strong>ï¼šæä¾›å¯¹ JDBC æŠ½è±¡å±‚ï¼Œç®€åŒ–äº† JDBC ç¼–ç ï¼ŒåŒæ—¶ï¼Œç¼–ç æ›´å…·æœ‰å¥å£®æ€§ã€‚</li>
<li><strong>Spring ORM</strong>ï¼šå®ƒæ”¯æŒç”¨äºæµè¡Œçš„ ORM æ¡†æ¶ çš„æ•´åˆï¼Œæ¯”å¦‚ï¼šSpring + Hibernateã€Spring + iBatisã€Spring + JDO çš„æ•´åˆç­‰ã€‚</li>
<li><strong>Spring AOP</strong>ï¼šå³é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå®ƒæä¾›äº†ä¸ AOP è”ç›Ÿå…¼å®¹çš„ç¼–ç¨‹å®ç°ã€‚</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="3spring-æœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢">3.Spring æœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢ï¼Ÿ<a href="#3spring-æœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢" class="hash-link" aria-label="Direct link to 3.Spring æœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢ï¼Ÿ" title="Direct link to 3.Spring æœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢ï¼Ÿ">â€‹</a></h3>
<p>Spring æœ‰å¾ˆå¤šæ¨¡å—ï¼Œç”šè‡³å¹¿ä¹‰çš„ SpringBootã€SpringCloud ä¹Ÿç®—æ˜¯ Spring çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ¥åˆ†æ¨¡å—ï¼ŒæŒ‰åŠŸèƒ½æ¥çœ‹ä¸€ä¸‹ä¸€äº›å¸¸ç”¨çš„æ³¨è§£ï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-305-18f664c768129ec5457522a691f333f0.png" width="1026" height="1347" class="img_kGBN"></p>
<p><strong>Web</strong>:</p>
<ul>
<li>@Controllerï¼šç»„åˆæ³¨è§£ï¼ˆç»„åˆäº†@Component æ³¨è§£ï¼‰ï¼Œåº”ç”¨åœ¨ MVC å±‚ï¼ˆæ§åˆ¶å±‚ï¼‰ã€‚</li>
<li>@RestControllerï¼šè¯¥æ³¨è§£ä¸ºä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œç›¸å½“äº@Controller å’Œ@ResponseBody çš„ç»„åˆï¼Œæ³¨è§£åœ¨ç±»ä¸Šï¼Œæ„å‘³ç€ï¼Œè¯¥ Controller çš„æ‰€æœ‰æ–¹æ³•éƒ½é»˜è®¤åŠ ä¸Šäº†@ResponseBodyã€‚</li>
<li>@RequestMappingï¼šç”¨äºæ˜ å°„ Web è¯·æ±‚ï¼ŒåŒ…æ‹¬è®¿é—®è·¯å¾„å’Œå‚æ•°ã€‚å¦‚æœæ˜¯ Restful é£æ ¼æ¥å£ï¼Œè¿˜å¯ä»¥æ ¹æ®è¯·æ±‚ç±»å‹ä½¿ç”¨ä¸åŒçš„æ³¨è§£ï¼š<!-- -->
<ul>
<li>@GetMapping</li>
<li>@PostMapping</li>
<li>@PutMapping</li>
<li>@DeleteMapping</li>
</ul>
</li>
<li>@ResponseBodyï¼šæ”¯æŒå°†è¿”å›å€¼æ”¾åœ¨ response å†…ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé¡µé¢ï¼Œé€šå¸¸ç”¨æˆ·è¿”å› json æ•°æ®ã€‚</li>
<li>@RequestBodyï¼šå…è®¸ request çš„å‚æ•°åœ¨ request ä½“ä¸­ï¼Œè€Œä¸æ˜¯åœ¨ç›´æ¥è¿æ¥åœ¨åœ°å€åé¢ã€‚</li>
<li>@PathVariableï¼šç”¨äºæ¥æ”¶è·¯å¾„å‚æ•°ï¼Œæ¯”å¦‚ <code>@RequestMapping(â€œ/hello/{name}â€)</code>ç”³æ˜çš„è·¯å¾„ï¼Œå°†æ³¨è§£æ”¾åœ¨å‚æ•°ä¸­å‰ï¼Œå³å¯è·å–è¯¥å€¼ï¼Œé€šå¸¸ä½œä¸º Restful çš„æ¥å£å®ç°æ–¹æ³•ã€‚</li>
<li>@RestControllerï¼šè¯¥æ³¨è§£ä¸ºä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œç›¸å½“äº@Controller å’Œ@ResponseBody çš„ç»„åˆï¼Œæ³¨è§£åœ¨ç±»ä¸Šï¼Œæ„å‘³ç€ï¼Œè¯¥ Controller çš„æ‰€æœ‰æ–¹æ³•éƒ½é»˜è®¤åŠ ä¸Šäº†@ResponseBodyã€‚</li>
</ul>
<p><strong>å®¹å™¨</strong>:</p>
<ul>
<li>@Componentï¼šè¡¨ç¤ºä¸€ä¸ªå¸¦æ³¨é‡Šçš„ç±»æ˜¯ä¸€ä¸ªâ€œç»„ä»¶â€ï¼Œæˆä¸º Spring ç®¡ç†çš„ Beanã€‚å½“ä½¿ç”¨åŸºäºæ³¨è§£çš„é…ç½®å’Œç±»è·¯å¾„æ‰«ææ—¶ï¼Œè¿™äº›ç±»è¢«è§†ä¸ºè‡ªåŠ¨æ£€æµ‹çš„å€™é€‰å¯¹è±¡ã€‚åŒæ—¶@Component è¿˜æ˜¯ä¸€ä¸ªå…ƒæ³¨è§£ã€‚</li>
<li>@Serviceï¼šç»„åˆæ³¨è§£ï¼ˆç»„åˆäº†@Component æ³¨è§£ï¼‰ï¼Œåº”ç”¨åœ¨ service å±‚ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰ã€‚</li>
<li>@Repositoryï¼šç»„åˆæ³¨è§£ï¼ˆç»„åˆäº†@Component æ³¨è§£ï¼‰ï¼Œåº”ç”¨åœ¨ dao å±‚ï¼ˆæ•°æ®è®¿é—®å±‚ï¼‰ã€‚</li>
<li>@Autowiredï¼šSpring æä¾›çš„å·¥å…·ï¼ˆç”± Spring çš„ä¾èµ–æ³¨å…¥å·¥å…·ï¼ˆBeanPostProcessorã€BeanFactoryPostProcessorï¼‰è‡ªåŠ¨æ³¨å…¥ï¼‰ã€‚</li>
<li>@Qualifierï¼šè¯¥æ³¨è§£é€šå¸¸è·Ÿ @Autowired ä¸€èµ·ä½¿ç”¨ï¼Œå½“æƒ³å¯¹æ³¨å…¥çš„è¿‡ç¨‹åšæ›´å¤šçš„æ§åˆ¶ï¼Œ@Qualifier å¯å¸®åŠ©é…ç½®ï¼Œæ¯”å¦‚ä¸¤ä¸ªä»¥ä¸Šç›¸åŒç±»å‹çš„ Bean æ—¶ Spring æ— æ³•æŠ‰æ‹©ï¼Œç”¨åˆ°æ­¤æ³¨è§£</li>
<li>@Configurationï¼šå£°æ˜å½“å‰ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼ˆç›¸å½“äºä¸€ä¸ª Spring é…ç½®çš„ xml æ–‡ä»¶ï¼‰</li>
<li>@Valueï¼šå¯ç”¨åœ¨å­—æ®µï¼Œæ„é€ å™¨å‚æ•°è·Ÿæ–¹æ³•å‚æ•°ï¼ŒæŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ï¼Œæ”¯æŒ <code>#{} è·Ÿ \${}</code> ä¸¤ä¸ªæ–¹å¼ã€‚ä¸€èˆ¬å°† SpringbBoot ä¸­çš„ application.properties é…ç½®çš„å±æ€§å€¼èµ‹å€¼ç»™å˜é‡ã€‚</li>
<li>@Beanï¼šæ³¨è§£åœ¨æ–¹æ³•ä¸Šï¼Œå£°æ˜å½“å‰æ–¹æ³•çš„è¿”å›å€¼ä¸ºä¸€ä¸ª Beanã€‚è¿”å›çš„ Bean å¯¹åº”çš„ç±»ä¸­å¯ä»¥å®šä¹‰ init()æ–¹æ³•å’Œ destroy()æ–¹æ³•ï¼Œç„¶ååœ¨<code>@Bean(initMethod=â€initâ€,destroyMethod=â€destroyâ€)</code>å®šä¹‰ï¼Œåœ¨æ„é€ ä¹‹åæ‰§è¡Œ initï¼Œåœ¨é”€æ¯ä¹‹å‰æ‰§è¡Œ destroyã€‚</li>
<li>@Scope:å®šä¹‰æˆ‘ä»¬é‡‡ç”¨ä»€ä¹ˆæ¨¡å¼å»åˆ›å»º Beanï¼ˆæ–¹æ³•ä¸Šï¼Œå¾—æœ‰@Beanï¼‰ å…¶è®¾ç½®ç±»å‹åŒ…æ‹¬ï¼šSingleton ã€Prototypeã€Request ã€ Sessionã€GlobalSessionã€‚</li>
</ul>
<p><strong>AOP</strong>:</p>
<ul>
<li>@Aspect:å£°æ˜ä¸€ä¸ªåˆ‡é¢ï¼ˆç±»ä¸Šï¼‰ ä½¿ç”¨@Afterã€@Beforeã€@Around å®šä¹‰å»ºè¨€ï¼ˆadviceï¼‰ï¼Œå¯ç›´æ¥å°†æ‹¦æˆªè§„åˆ™ï¼ˆåˆ‡ç‚¹ï¼‰ä½œä¸ºå‚æ•°ã€‚<!-- -->
<ul>
<li><code>@After</code> ï¼šåœ¨æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œï¼ˆæ–¹æ³•ä¸Šï¼‰ã€‚</li>
<li><code>@Before</code>ï¼š åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼ˆæ–¹æ³•ä¸Šï¼‰ã€‚</li>
<li><code>@Around</code>ï¼š åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰ä¸ä¹‹åæ‰§è¡Œï¼ˆæ–¹æ³•ä¸Šï¼‰ã€‚</li>
<li><code>@PointCut</code>ï¼š å£°æ˜åˆ‡ç‚¹ åœ¨ java é…ç½®ç±»ä¸­ä½¿ç”¨@EnableAspectJAutoProxy æ³¨è§£å¼€å¯ Spring å¯¹ AspectJ ä»£ç†çš„æ”¯æŒï¼ˆç±»ä¸Šï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p><strong>äº‹åŠ¡ï¼š</strong></p>
<ul>
<li>@Transactionalï¼šåœ¨è¦å¼€å¯äº‹åŠ¡çš„æ–¹æ³•ä¸Šä½¿ç”¨@Transactional æ³¨è§£ï¼Œå³å¯å£°æ˜å¼å¼€å¯äº‹åŠ¡ã€‚</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="4spring-ä¸­åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼å‘¢">4.Spring ä¸­åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼å‘¢ï¼Ÿ<a href="#4spring-ä¸­åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼å‘¢" class="hash-link" aria-label="Direct link to 4.Spring ä¸­åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼å‘¢ï¼Ÿ" title="Direct link to 4.Spring ä¸­åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼å‘¢ï¼Ÿ">â€‹</a></h3>
<p>Spring æ¡†æ¶ä¸­å¹¿æ³›ä½¿ç”¨äº†ä¸åŒç±»å‹çš„è®¾è®¡æ¨¡å¼ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹åˆ°åº•æœ‰å“ªäº›è®¾è®¡æ¨¡å¼?</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-306-09006e26b928378199335306e2f891f6.png" width="795" height="667" class="img_kGBN"></p>
<ol>
<li><strong>å·¥å‚æ¨¡å¼</strong> : Spring å®¹å™¨æœ¬è´¨æ˜¯ä¸€ä¸ªå¤§å·¥å‚ï¼Œä½¿ç”¨å·¥å‚æ¨¡å¼é€šè¿‡ BeanFactoryã€ApplicationContext åˆ›å»º bean å¯¹è±¡ã€‚</li>
<li><strong>ä»£ç†æ¨¡å¼</strong> : Spring AOP åŠŸèƒ½åŠŸèƒ½å°±æ˜¯é€šè¿‡ä»£ç†æ¨¡å¼æ¥å®ç°çš„ï¼Œåˆ†ä¸ºåŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†ã€‚</li>
<li><strong>å•ä¾‹æ¨¡å¼</strong> : Spring ä¸­çš„ Bean é»˜è®¤éƒ½æ˜¯å•ä¾‹çš„ï¼Œè¿™æ ·æœ‰åˆ©äºå®¹å™¨å¯¹ Bean çš„ç®¡ç†ã€‚</li>
<li><strong>æ¨¡æ¿æ¨¡å¼</strong> : Spring ä¸­ JdbcTemplateã€RestTemplate ç­‰ä»¥ Template ç»“å°¾çš„å¯¹æ•°æ®åº“ã€ç½‘ç»œç­‰ç­‰è¿›è¡Œæ“ä½œçš„æ¨¡æ¿ç±»ï¼Œå°±ä½¿ç”¨åˆ°äº†æ¨¡æ¿æ¨¡å¼ã€‚</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>: Spring äº‹ä»¶é©±åŠ¨æ¨¡å‹å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼å¾ˆç»å…¸çš„ä¸€ä¸ªåº”ç”¨ã€‚</li>
<li><strong>é€‚é…å™¨æ¨¡å¼</strong> <!-- -->:Spring<!-- --> AOP çš„å¢å¼ºæˆ–é€šçŸ¥ (Advice) ä½¿ç”¨åˆ°äº†é€‚é…å™¨æ¨¡å¼ã€Spring MVC ä¸­ä¹Ÿæ˜¯ç”¨åˆ°äº†é€‚é…å™¨æ¨¡å¼é€‚é… Controllerã€‚</li>
<li><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼šSpring ä¸­æœ‰ä¸€ä¸ª Resource æ¥å£ï¼Œå®ƒçš„ä¸åŒå®ç°ç±»ï¼Œä¼šæ ¹æ®ä¸åŒçš„ç­–ç•¥å»è®¿é—®èµ„æºã€‚</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="ioc">IOC<a href="#ioc" class="hash-link" aria-label="Direct link to IOC" title="Direct link to IOC">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="5è¯´ä¸€è¯´ä»€ä¹ˆæ˜¯-iocä»€ä¹ˆæ˜¯-di">5.è¯´ä¸€è¯´ä»€ä¹ˆæ˜¯ IOCï¼Ÿä»€ä¹ˆæ˜¯ DI?<a href="#5è¯´ä¸€è¯´ä»€ä¹ˆæ˜¯-iocä»€ä¹ˆæ˜¯-di" class="hash-link" aria-label="Direct link to 5.è¯´ä¸€è¯´ä»€ä¹ˆæ˜¯ IOCï¼Ÿä»€ä¹ˆæ˜¯ DI?" title="Direct link to 5.è¯´ä¸€è¯´ä»€ä¹ˆæ˜¯ IOCï¼Ÿä»€ä¹ˆæ˜¯ DI?">â€‹</a></h3>
<p>Java æ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸€ä¸ªä¸ªå®ä¾‹å¯¹è±¡ç›¸äº’åˆä½œç»„æˆäº†ä¸šåŠ¡é€»è¾‘ï¼ŒåŸæ¥ï¼Œæˆ‘ä»¬éƒ½æ˜¯åœ¨ä»£ç é‡Œåˆ›å»ºå¯¹è±¡å’Œå¯¹è±¡çš„ä¾èµ–ã€‚</p>
<p>æ‰€è°“çš„<strong>IOC</strong>ï¼ˆæ§åˆ¶åè½¬ï¼‰ï¼šå°±æ˜¯ç”±å®¹å™¨æ¥è´Ÿè´£æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œå¯¹è±¡é—´çš„å…³ç³»ã€‚ä»¥å‰æ˜¯æˆ‘ä»¬æƒ³è¦ä»€ä¹ˆï¼Œå°±è‡ªå·±åˆ›å»ºä»€ä¹ˆï¼Œç°åœ¨æ˜¯æˆ‘ä»¬éœ€è¦ä»€ä¹ˆï¼Œå®¹å™¨å°±ç»™æˆ‘ä»¬é€æ¥ä»€ä¹ˆã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-307-078f954108fa0549c0be743a37d85bc7.png" width="1330" height="569" class="img_kGBN"></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ§åˆ¶å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„ä¸å†æ˜¯å¼•ç”¨å®ƒçš„å¯¹è±¡ï¼Œè€Œæ˜¯å®¹å™¨ã€‚å¯¹å…·ä½“å¯¹è±¡ï¼Œä»¥å‰æ˜¯å®ƒæ§åˆ¶å…¶å®ƒå¯¹è±¡ï¼Œç°åœ¨æ‰€æœ‰å¯¹è±¡éƒ½è¢«å®¹å™¨æ§åˆ¶ï¼Œæ‰€ä»¥è¿™å°±å«<strong>æ§åˆ¶åè½¬</strong>ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-308-88967a441de35c2163965ab17b034be0.png" width="655" height="357" class="img_kGBN"></p>
<p><strong>DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰</strong>ï¼šæŒ‡çš„æ˜¯å®¹å™¨åœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™æŠŠå®ƒä¾èµ–çš„ç±»æ³¨å…¥ç»™å®ƒã€‚æœ‰çš„è¯´æ³• IOC å’Œ DI æ˜¯ä¸€å›äº‹ï¼Œæœ‰çš„è¯´æ³•æ˜¯ IOC æ˜¯æ€æƒ³ï¼ŒDI æ˜¯ IOC çš„å®ç°ã€‚</p>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ IOC å‘¢ï¼Ÿ</strong></p>
</blockquote>
<p>æœ€ä¸»è¦çš„æ˜¯ä¸¤ä¸ªå­—<strong>è§£è€¦</strong>ï¼Œç¡¬ç¼–ç ä¼šé€ æˆå¯¹è±¡é—´çš„è¿‡åº¦è€¦åˆï¼Œä½¿ç”¨ IOC ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨å…³å¿ƒå¯¹è±¡é—´çš„ä¾èµ–ï¼Œä¸“å¿ƒå¼€å‘åº”ç”¨å°±è¡Œã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="6èƒ½ç®€å•è¯´ä¸€ä¸‹-spring-ioc-çš„å®ç°æœºåˆ¶å—">6.èƒ½ç®€å•è¯´ä¸€ä¸‹ Spring IOC çš„å®ç°æœºåˆ¶å—ï¼Ÿ<a href="#6èƒ½ç®€å•è¯´ä¸€ä¸‹-spring-ioc-çš„å®ç°æœºåˆ¶å—" class="hash-link" aria-label="Direct link to 6.èƒ½ç®€å•è¯´ä¸€ä¸‹ Spring IOC çš„å®ç°æœºåˆ¶å—ï¼Ÿ" title="Direct link to 6.èƒ½ç®€å•è¯´ä¸€ä¸‹ Spring IOC çš„å®ç°æœºåˆ¶å—ï¼Ÿ">â€‹</a></h3>
<p>PS:è¿™é“é¢˜è€ä¸‰åœ¨é¢è¯•ä¸­è¢«é—®åˆ°è¿‡ï¼Œé—®æ³•æ˜¯â€œ<strong>ä½ æœ‰è‡ªå·±å®ç°è¿‡ç®€å•çš„ Spring å—ï¼Ÿ</strong>â€</p>
<p>Spring çš„ IOC æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå¤§å·¥å‚ï¼Œæˆ‘ä»¬æƒ³æƒ³ä¸€ä¸ªå·¥å‚æ˜¯æ€ä¹ˆè¿è¡Œçš„å‘¢ï¼Ÿ</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-309-c7d791d719afcae3124012b2015108d5.png" width="710" height="509" class="img_kGBN"></p>
<ul>
<li>
<p><strong>ç”Ÿäº§äº§å“</strong>ï¼šä¸€ä¸ªå·¥å‚æœ€æ ¸å¿ƒçš„åŠŸèƒ½å°±æ˜¯ç”Ÿäº§äº§å“ã€‚åœ¨ Spring é‡Œï¼Œä¸ç”¨ Bean è‡ªå·±æ¥å®ä¾‹åŒ–ï¼Œè€Œæ˜¯äº¤ç»™ Springï¼Œåº”è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿâ€”â€”ç­”æ¡ˆæ¯«æ— ç–‘é—®ï¼Œ<strong>åå°„</strong>ã€‚</p>
<p>é‚£ä¹ˆè¿™ä¸ªå‚å­çš„ç”Ÿäº§ç®¡ç†æ˜¯æ€ä¹ˆåšçš„ï¼Ÿä½ åº”è¯¥ä¹ŸçŸ¥é“â€”â€”<strong>å·¥å‚æ¨¡å¼</strong>ã€‚</p>
</li>
<li>
<p><strong>åº“å­˜äº§å“</strong>ï¼šå·¥å‚ä¸€èˆ¬éƒ½æ˜¯æœ‰åº“æˆ¿çš„ï¼Œç”¨æ¥åº“å­˜äº§å“ï¼Œæ¯•ç«Ÿç”Ÿäº§çš„äº§å“ä¸èƒ½ç«‹é©¬å°±æ‹‰èµ°ã€‚Spring æˆ‘ä»¬éƒ½çŸ¥é“æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œè¿™ä¸ªå®¹å™¨é‡Œå­˜çš„å°±æ˜¯å¯¹è±¡ï¼Œä¸èƒ½æ¯æ¬¡æ¥å–å¯¹è±¡ï¼Œéƒ½å¾—ç°åœºæ¥åå°„åˆ›å»ºå¯¹è±¡ï¼Œå¾—æŠŠåˆ›å»ºå‡ºçš„å¯¹è±¡å­˜èµ·æ¥ã€‚</p>
</li>
<li>
<p><strong>è®¢å•å¤„ç†</strong>ï¼šè¿˜æœ‰æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œå·¥å‚æ ¹æ®ä»€ä¹ˆæ¥æä¾›äº§å“å‘¢ï¼Ÿè®¢å•ã€‚è¿™äº›è®¢å•å¯èƒ½äº”èŠ±å…«é—¨ï¼Œæœ‰çº¿ä¸Šç­¾ç­¾çš„ã€æœ‰åˆ°å·¥å‚ç­¾çš„ã€è¿˜æœ‰å·¥å‚é”€å”®ä¸Šé—¨ç­¾çš„â€¦â€¦æœ€åç»è¿‡å¤„ç†ï¼ŒæŒ‡å¯¼å·¥å‚çš„å‡ºè´§ã€‚</p>
<p>åœ¨ Spring é‡Œï¼Œä¹Ÿæœ‰è¿™æ ·çš„è®¢å•ï¼Œå®ƒå°±æ˜¯æˆ‘ä»¬ bean çš„å®šä¹‰å’Œä¾èµ–å…³ç³»ï¼Œå¯ä»¥æ˜¯ xml å½¢å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„æ³¨è§£å½¢å¼ã€‚</p>
</li>
</ul>
<p>æˆ‘ä»¬ç®€å•åœ°å®ç°ä¸€ä¸ª mini ç‰ˆçš„ Spring IOCï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-310-9c340ee4fbe7094d411d4dcfdfc90e3d.png" width="1061" height="299" class="img_kGBN"></p>
<p><strong>Bean å®šä¹‰ï¼š</strong></p>
<p>Bean é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶å®šä¹‰ï¼ŒæŠŠå®ƒè§£ææˆä¸€ä¸ªç±»å‹ã€‚</p>
<ul>
<li>
<p>beans.properties</p>
<p>å·æ‡’ï¼Œè¿™é‡Œç›´æ¥ç”¨äº†æœ€æ–¹ä¾¿è§£æçš„ propertiesï¼Œè¿™é‡Œç›´æ¥ç”¨ä¸€ä¸ª<code>&lt;key,value&gt;</code>ç±»å‹çš„é…ç½®æ¥ä»£è¡¨ Bean çš„å®šä¹‰ï¼Œå…¶ä¸­ key æ˜¯ beanNameï¼Œvalue æ˜¯ class</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">userDao:cn.fighter3.bean.UserDao</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>BeanDefinition.java</p>
<p>bean å®šä¹‰ç±»ï¼Œé…ç½®æ–‡ä»¶ä¸­ bean å®šä¹‰å¯¹åº”çš„å®ä½“</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class BeanDefinition {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String beanName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Class beanClass;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     //çœç•¥getterã€setter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>ResourceLoader.java</p>
<p>èµ„æºåŠ è½½å™¨ï¼Œç”¨æ¥å®Œæˆé…ç½®æ–‡ä»¶ä¸­é…ç½®çš„åŠ è½½</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class ResourceLoader {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static Map&lt;String, BeanDefinition&gt; getResource() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, BeanDefinition&gt; beanDefinitionMap = new HashMap&lt;&gt;(16);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Properties properties = new Properties();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            InputStream inputStream = ResourceLoader.class.getResourceAsStream(&quot;/beans.properties&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            properties.load(inputStream);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Iterator&lt;String&gt; it = properties.stringPropertyNames().iterator();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            while (it.hasNext()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String key = it.next();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                String className = properties.getProperty(key);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                BeanDefinition beanDefinition = new BeanDefinition();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                beanDefinition.setBeanName(key);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Class clazz = Class.forName(className);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                beanDefinition.setBeanClass(clazz);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                beanDefinitionMap.put(key, beanDefinition);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            inputStream.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (IOException | ClassNotFoundException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return beanDefinitionMap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>BeanRegister.java</p>
<p>å¯¹è±¡æ³¨å†Œå™¨ï¼Œè¿™é‡Œç”¨äºå•ä¾‹ bean çš„ç¼“å­˜ï¼Œæˆ‘ä»¬å¤§å¹…ç®€åŒ–ï¼Œé»˜è®¤æ‰€æœ‰ bean éƒ½æ˜¯å•ä¾‹çš„ã€‚å¯ä»¥çœ‹åˆ°æ‰€è°“å•ä¾‹æ³¨å†Œï¼Œä¹Ÿå¾ˆç®€å•ï¼Œä¸è¿‡æ˜¯å¾€ HashMap é‡Œå­˜å¯¹è±¡ã€‚</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class BeanRegister {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //å•ä¾‹Beanç¼“å­˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Map&lt;String, Object&gt; singletonMap = new HashMap&lt;&gt;(32);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å–å•ä¾‹Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param beanName beanåç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object getSingletonBean(String beanName) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return singletonMap.get(beanName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ³¨å†Œå•ä¾‹bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param beanName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void registerSingletonBean(String beanName, Object bean) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (singletonMap.containsKey(beanName)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        singletonMap.put(beanName, bean);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>BeanFactory.java</strong></p>
</li>
</ul>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-311-072b3665c85eef2009ec525eb139f8ae.png" width="432" height="270" class="img_kGBN"></p>
<ul>
<li>
<p>å¯¹è±¡å·¥å‚ï¼Œæˆ‘ä»¬æœ€<strong>æ ¸å¿ƒ</strong>çš„ä¸€ä¸ªç±»ï¼Œåœ¨å®ƒåˆå§‹åŒ–çš„æ—¶å€™ï¼Œåˆ›å»ºäº† bean æ³¨å†Œå™¨ï¼Œå®Œæˆäº†èµ„æºçš„åŠ è½½ã€‚</p>
</li>
<li>
<p>è·å– bean çš„æ—¶å€™ï¼Œå…ˆä»å•ä¾‹ç¼“å­˜ä¸­å–ï¼Œå¦‚æœæ²¡æœ‰å–åˆ°ï¼Œå°±åˆ›å»ºå¹¶æ³¨å†Œä¸€ä¸ª bean</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class BeanFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Map&lt;String, BeanDefinition&gt; beanDefinitionMap = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private BeanRegister beanRegister;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public BeanFactory() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //åˆ›å»ºbeanæ³¨å†Œå™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        beanRegister = new BeanRegister();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //åŠ è½½èµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.beanDefinitionMap = new ResourceLoader().getResource();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å–bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param beanName beanåç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object getBean(String beanName) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä»beanç¼“å­˜ä¸­å–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object bean = beanRegister.getSingletonBean(beanName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (bean != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //æ ¹æ®beanå®šä¹‰ï¼Œåˆ›å»ºbean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return createBean(beanDefinitionMap.get(beanName));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * åˆ›å»ºBean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param beanDefinition beanå®šä¹‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Object createBean(BeanDefinition beanDefinition) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Object bean = beanDefinition.getBeanClass().newInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //ç¼“å­˜bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            beanRegister.registerSingletonBean(beanDefinition.getBeanName(), bean);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (InstantiationException | IllegalAccessException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>æµ‹è¯•</p>
<ul>
<li>
<p>UserDao.java</p>
<p>æˆ‘ä»¬çš„ Bean ç±»ï¼Œå¾ˆç®€å•</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class UserDao {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void queryUserInfo(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;A good man.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>å•å…ƒæµ‹è¯•</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class ApiTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void test_BeanFactory() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //1.åˆ›å»ºbeanå·¥å‚(åŒæ—¶å®Œæˆäº†åŠ è½½èµ„æºã€åˆ›å»ºæ³¨å†Œå•ä¾‹beanæ³¨å†Œå™¨çš„æ“ä½œ)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BeanFactory beanFactory = new BeanFactory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //2.ç¬¬ä¸€æ¬¡è·å–beanï¼ˆé€šè¿‡åå°„åˆ›å»ºbeanï¼Œç¼“å­˜beanï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserDao userDao1 = (UserDao) beanFactory.getBean(&quot;userDao&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userDao1.queryUserInfo();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //3.ç¬¬äºŒæ¬¡è·å–beanï¼ˆä»ç¼“å­˜ä¸­è·å–beanï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserDao userDao2 = (UserDao) beanFactory.getBean(&quot;userDao&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userDao2.queryUserInfo();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>è¿è¡Œç»“æœ</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">A good man.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A good man.</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
</ul>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¹ä¸+ç ´èˆ¹ç‰ˆçš„ Spring å°±å®Œæˆäº†ï¼Œä»£ç ä¹Ÿæ¯”è¾ƒå®Œæ•´ï¼Œæœ‰æ¡ä»¶çš„å¯ä»¥è·‘ä¸€ä¸‹ã€‚</p>
<p>PS:å› ä¸ºæ—¶é—´+ç¯‡å¹…çš„é™åˆ¶ï¼Œè¿™ä¸ª demo æ¯”è¾ƒç®€é™‹ï¼Œæ²¡æœ‰é¢å‘æ¥å£ã€æ²¡æœ‰è§£è€¦ã€è¾¹ç•Œæ£€æŸ¥ã€å¼‚å¸¸å¤„ç†â€¦â€¦å¥å£®æ€§ã€æ‰©å±•æ€§éƒ½æœ‰å¾ˆå¤§çš„ä¸è¶³ï¼Œæ„Ÿå…´è¶£å¯ä»¥å­¦ä¹ å‚è€ƒ[15]ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="7è¯´è¯´-beanfactory-å’Œ-applicantcontext">7.è¯´è¯´ BeanFactory å’Œ ApplicantContext?<a href="#7è¯´è¯´-beanfactory-å’Œ-applicantcontext" class="hash-link" aria-label="Direct link to 7.è¯´è¯´ BeanFactory å’Œ ApplicantContext?" title="Direct link to 7.è¯´è¯´ BeanFactory å’Œ ApplicantContext?">â€‹</a></h3>
<p>å¯ä»¥è¿™ä¹ˆå½¢å®¹ï¼ŒBeanFactory æ˜¯ Spring çš„â€œå¿ƒè„â€ï¼ŒApplicantContext æ˜¯å®Œæ•´çš„â€œèº«èº¯â€ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-312-ff9883d79712b6802558f2c8f63d2c92.png" width="330" height="454" class="img_kGBN"></p>
<ul>
<li>BeanFactoryï¼ˆBean å·¥å‚ï¼‰æ˜¯ Spring æ¡†æ¶çš„åŸºç¡€è®¾æ–½ï¼Œé¢å‘ Spring æœ¬èº«ã€‚</li>
<li>ApplicantContextï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡ï¼‰å»ºç«‹åœ¨ BeanFactoty åŸºç¡€ä¸Šï¼Œé¢å‘ä½¿ç”¨ Spring æ¡†æ¶çš„å¼€å‘è€…ã€‚</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_HWLp" id="beanfactory-æ¥å£">BeanFactory æ¥å£<a href="#beanfactory-æ¥å£" class="hash-link" aria-label="Direct link to BeanFactory æ¥å£" title="Direct link to BeanFactory æ¥å£">â€‹</a></h6>
<p>BeanFactory æ˜¯ç±»çš„é€šç”¨å·¥å‚ï¼Œå¯ä»¥åˆ›å»ºå¹¶ç®¡ç†å„ç§ç±»çš„å¯¹è±¡ã€‚</p>
<p>Spring ä¸º BeanFactory æä¾›äº†å¾ˆå¤šç§å®ç°ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ XmlBeanFactoryï¼Œä½†åœ¨ Spring 3.2 ä¸­å·²è¢«åºŸå¼ƒï¼Œå»ºè®®ä½¿ç”¨ XmlBeanDefinitionReaderã€DefaultListableBeanFactoryã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-313-3e82ec1aff99af824097db12c3d5ebc7.png" width="1227" height="816" class="img_kGBN"></p>
<p>BeanFactory æ¥å£ä½äºç±»ç»“æ„æ ‘çš„é¡¶ç«¯ï¼Œå®ƒæœ€ä¸»è¦çš„æ–¹æ³•å°±æ˜¯ getBean(String var1)ï¼Œè¿™ä¸ªæ–¹æ³•ä»å®¹å™¨ä¸­è¿”å›ç‰¹å®šåç§°çš„ Beanã€‚</p>
<p>BeanFactory çš„åŠŸèƒ½é€šè¿‡å…¶å®ƒçš„æ¥å£å¾—åˆ°äº†ä¸æ–­çš„æ‰©å±•ï¼Œæ¯”å¦‚ AbstractAutowireCapableBeanFactory å®šä¹‰äº†å°†å®¹å™¨ä¸­çš„ Bean æŒ‰ç…§æŸç§è§„åˆ™ï¼ˆæ¯”å¦‚æŒ‰åå­—åŒ¹é…ã€æŒ‰ç±»å‹åŒ¹é…ç­‰ï¼‰è¿›è¡Œè‡ªåŠ¨è£…é…çš„æ–¹æ³•ã€‚</p>
<p>è¿™é‡Œçœ‹ä¸€ä¸ª XMLBeanFactoryï¼ˆå·²è¿‡æœŸï¼‰ è·å– bean çš„ä¾‹å­ï¼š</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloWorldApp{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      BeanFactory factory = new XmlBeanFactory (new ClassPathResource(&quot;beans.xml&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      HelloWorld obj = (HelloWorld) factory.getBean(&quot;helloWorld&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      obj.getMessage();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_HWLp" id="applicationcontext-æ¥å£">ApplicationContext æ¥å£<a href="#applicationcontext-æ¥å£" class="hash-link" aria-label="Direct link to ApplicationContext æ¥å£" title="Direct link to ApplicationContext æ¥å£">â€‹</a></h6>
<p>ApplicationContext ç”± BeanFactory æ´¾ç”Ÿè€Œæ¥ï¼Œæä¾›äº†æ›´å¤šé¢å‘å®é™…åº”ç”¨çš„åŠŸèƒ½ã€‚å¯ä»¥è¿™ä¹ˆè¯´ï¼Œä½¿ç”¨ BeanFactory å°±æ˜¯æ‰‹åŠ¨æ¡£ï¼Œä½¿ç”¨ ApplicationContext å°±æ˜¯è‡ªåŠ¨æ¡£ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-314-4aee845ab798f1b58638b0e281986d92.png" width="1140" height="792" class="img_kGBN"></p>
<p>ApplicationContext ç»§æ‰¿äº† HierachicalBeanFactory å’Œ ListableBeanFactory æ¥å£ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œè¿˜é€šè¿‡å…¶ä»–çš„æ¥å£æ‰©å±•äº† BeanFactory çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>Bean instantiation/wiring</p>
</li>
<li>
<p>Bean çš„å®ä¾‹åŒ–/ä¸²è”</p>
</li>
<li>
<p>è‡ªåŠ¨çš„ BeanPostProcessor æ³¨å†Œ</p>
</li>
<li>
<p>è‡ªåŠ¨çš„ BeanFactoryPostProcessor æ³¨å†Œ</p>
</li>
<li>
<p>æ–¹ä¾¿çš„ MessageSource è®¿é—®ï¼ˆi18nï¼‰</p>
</li>
<li>
<p>ApplicationEvent çš„å‘å¸ƒä¸ BeanFactory æ‡’åŠ è½½çš„æ–¹å¼ä¸åŒï¼Œå®ƒæ˜¯é¢„åŠ è½½ï¼Œæ‰€ä»¥ï¼Œæ¯ä¸€ä¸ª bean éƒ½åœ¨ ApplicationContext å¯åŠ¨ä¹‹åå®ä¾‹åŒ–</p>
</li>
</ul>
<p>è¿™æ˜¯ ApplicationContext çš„ä½¿ç”¨ä¾‹å­ï¼š</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloWorldApp{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ApplicationContext context=new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      HelloWorld obj = (HelloWorld) context.getBean(&quot;helloWorld&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      obj.getMessage();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ApplicationContext åŒ…å« BeanFactory çš„æ‰€æœ‰ç‰¹æ€§ï¼Œé€šå¸¸æ¨èä½¿ç”¨å‰è€…ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="8ä½ çŸ¥é“-spring-å®¹å™¨å¯åŠ¨é˜¶æ®µä¼šå¹²ä»€ä¹ˆå—">8.ä½ çŸ¥é“ Spring å®¹å™¨å¯åŠ¨é˜¶æ®µä¼šå¹²ä»€ä¹ˆå—ï¼Ÿ<a href="#8ä½ çŸ¥é“-spring-å®¹å™¨å¯åŠ¨é˜¶æ®µä¼šå¹²ä»€ä¹ˆå—" class="hash-link" aria-label="Direct link to 8.ä½ çŸ¥é“ Spring å®¹å™¨å¯åŠ¨é˜¶æ®µä¼šå¹²ä»€ä¹ˆå—ï¼Ÿ" title="Direct link to 8.ä½ çŸ¥é“ Spring å®¹å™¨å¯åŠ¨é˜¶æ®µä¼šå¹²ä»€ä¹ˆå—ï¼Ÿ">â€‹</a></h3>
<p>PSï¼šè¿™é“é¢˜è€ä¸‰é¢è¯•è¢«é—®åˆ°è¿‡</p>
<p>Spring çš„ IOC å®¹å™¨å·¥ä½œçš„è¿‡ç¨‹ï¼Œå…¶å®å¯ä»¥åˆ’åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š<strong>å®¹å™¨å¯åŠ¨é˜¶æ®µ</strong>å’Œ<strong>Bean å®ä¾‹åŒ–é˜¶æ®µ</strong>ã€‚</p>
<p>å…¶ä¸­å®¹å™¨å¯åŠ¨é˜¶æ®µä¸»è¦åšçš„å·¥ä½œæ˜¯åŠ è½½å’Œè§£æé…ç½®æ–‡ä»¶ï¼Œä¿å­˜åˆ°å¯¹åº”çš„ Bean å®šä¹‰ä¸­ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-315-8c7441a951c883fa3cd7f8c5946b23e2.png" width="755" height="368" class="img_kGBN"></p>
<p>å®¹å™¨å¯åŠ¨å¼€å§‹ï¼Œé¦–å…ˆä¼šé€šè¿‡æŸç§é€”å¾„åŠ è½½ Congiguration MetaDataï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå®¹å™¨éœ€è¦ä¾èµ–æŸäº›å·¥å…·ç±»ï¼ˆBeanDefinitionReaderï¼‰å¯¹åŠ è½½çš„ Congiguration MetaData è¿›è¡Œè§£æå’Œåˆ†æï¼Œå¹¶å°†åˆ†æåçš„ä¿¡æ¯ç»„ä¸ºç›¸åº”çš„ BeanDefinitionã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-316-76927d3b40d1502d9d9f96fbcdfb2a83.png" width="801" height="423" class="img_kGBN"></p>
<p>æœ€åæŠŠè¿™äº›ä¿å­˜äº† Bean å®šä¹‰å¿…è¦ä¿¡æ¯çš„ BeanDefinitionï¼Œæ³¨å†Œåˆ°ç›¸åº”çš„ BeanDefinitionRegistryï¼Œè¿™æ ·å®¹å™¨å¯åŠ¨å°±å®Œæˆäº†ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="9èƒ½è¯´ä¸€ä¸‹-spring-bean-ç”Ÿå‘½å‘¨æœŸå—">9.èƒ½è¯´ä¸€ä¸‹ Spring Bean ç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ<a href="#9èƒ½è¯´ä¸€ä¸‹-spring-bean-ç”Ÿå‘½å‘¨æœŸå—" class="hash-link" aria-label="Direct link to 9.èƒ½è¯´ä¸€ä¸‹ Spring Bean ç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ" title="Direct link to 9.èƒ½è¯´ä¸€ä¸‹ Spring Bean ç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ">â€‹</a></h3>
<p>å¯ä»¥çœ‹çœ‹ï¼š<a href="https://mp.weixin.qq.com/s/zb6eA3Se0gQoqL8PylCPLw" target="_blank" rel="noopener noreferrer">Spring Bean ç”Ÿå‘½å‘¨æœŸï¼Œå¥½åƒäººçš„ä¸€ç”Ÿã€‚ã€‚</a></p>
<p>åœ¨ Spring ä¸­ï¼ŒåŸºæœ¬å®¹å™¨ BeanFactory å’Œæ‰©å±•å®¹å™¨ ApplicationContext çš„å®ä¾‹åŒ–æ—¶æœºä¸å¤ªä¸€æ ·ï¼ŒBeanFactory é‡‡ç”¨çš„æ˜¯å»¶è¿Ÿåˆå§‹åŒ–çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯åªæœ‰åœ¨ç¬¬ä¸€æ¬¡ getBean()çš„æ—¶å€™ï¼Œæ‰ä¼šå®ä¾‹åŒ– Beanï¼›ApplicationContext å¯åŠ¨ä¹‹åä¼šå®ä¾‹åŒ–æ‰€æœ‰çš„ Bean å®šä¹‰ã€‚</p>
<p>Spring IOC ä¸­ Bean çš„ç”Ÿå‘½å‘¨æœŸå¤§è‡´åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š<strong>å®ä¾‹åŒ–</strong>ï¼ˆInstantiationï¼‰ã€<strong>å±æ€§èµ‹å€¼</strong>ï¼ˆPopulateï¼‰ã€<strong>åˆå§‹åŒ–</strong>ï¼ˆInitializationï¼‰ã€<strong>é”€æ¯</strong>ï¼ˆDestructionï¼‰ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-317-3811da8c71bf259436fa0188ec4ebed8.png" width="1000" height="507" class="img_kGBN"></p>
<p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªç¨å¾®è¯¦ç»†ä¸€äº›çš„è¿‡ç¨‹ï¼š</p>
<ul>
<li><strong>å®ä¾‹åŒ–</strong>ï¼šç¬¬ 1 æ­¥ï¼Œå®ä¾‹åŒ–ä¸€ä¸ª Bean å¯¹è±¡</li>
<li><strong>å±æ€§èµ‹å€¼</strong>ï¼šç¬¬ 2 æ­¥ï¼Œä¸º Bean è®¾ç½®ç›¸å…³å±æ€§å’Œä¾èµ–</li>
<li><strong>åˆå§‹åŒ–</strong>ï¼šåˆå§‹åŒ–çš„é˜¶æ®µçš„æ­¥éª¤æ¯”è¾ƒå¤šï¼Œ5ã€6 æ­¥æ˜¯çœŸæ­£çš„åˆå§‹åŒ–ï¼Œç¬¬ 3ã€4 æ­¥ä¸ºåœ¨åˆå§‹åŒ–å‰æ‰§è¡Œï¼Œç¬¬ 7 æ­¥åœ¨åˆå§‹åŒ–åæ‰§è¡Œï¼Œåˆå§‹åŒ–å®Œæˆä¹‹åï¼ŒBean å°±å¯ä»¥è¢«ä½¿ç”¨äº†</li>
<li><strong>é”€æ¯</strong>ï¼šç¬¬ 8~10 æ­¥ï¼Œç¬¬ 8 æ­¥å…¶å®ä¹Ÿå¯ä»¥ç®—åˆ°é”€æ¯é˜¶æ®µï¼Œä½†ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„é”€æ¯ï¼Œè€Œæ˜¯å…ˆåœ¨ä½¿ç”¨å‰æ³¨å†Œäº†é”€æ¯çš„ç›¸å…³è°ƒç”¨æ¥å£ï¼Œä¸ºäº†åé¢ç¬¬ 9ã€10 æ­¥çœŸæ­£é”€æ¯ Bean æ—¶å†æ‰§è¡Œç›¸åº”çš„æ–¹æ³•</li>
</ul>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-318-c57f74afc63f438e3cad1a5aeb21c74e.png" width="1364" height="1062" class="img_kGBN"></p>
<p>ç®€å•æ€»ç»“ä¸€ä¸‹ï¼ŒBean ç”Ÿå‘½å‘¨æœŸé‡Œåˆå§‹åŒ–çš„è¿‡ç¨‹ç›¸å¯¹æ­¥éª¤ä¼šå¤šä¸€äº›ï¼Œæ¯”å¦‚å‰ç½®ã€åç½®çš„å¤„ç†ã€‚</p>
<p>æœ€åé€šè¿‡ä¸€ä¸ªå®ä¾‹æ¥çœ‹ä¸€ä¸‹å…·ä½“çš„ç»†èŠ‚ï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-319-b175e46a678ee0da74ad4c38c4c40d85.png" width="712" height="1824" class="img_kGBN"></p>
<ul>
<li>å®šä¹‰ä¸€ä¸ª<code>PersonBean</code>ç±»ï¼Œå®ç°<code>DisposableBean</code>,<code>InitializingBean</code>, <code>BeanFactoryAware</code>, <code>BeanNameAware</code>è¿™ 4 ä¸ªæ¥å£ï¼ŒåŒæ—¶è¿˜æœ‰è‡ªå®šä¹‰çš„<code>init-method</code>å’Œ<code>destroy-method</code>ã€‚</li>
</ul>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class PersonBean implements InitializingBean, BeanFactoryAware, BeanNameAware, DisposableBean {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * èº«ä»½è¯å·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer no;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * å§“å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public PersonBean() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;1.è°ƒç”¨æ„é€ æ–¹æ³•ï¼šæˆ‘å‡ºç”Ÿäº†ï¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Integer getNo() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return no;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setNo(Integer no) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.no = no;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getName() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setName(String name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;2.è®¾ç½®å±æ€§ï¼šæˆ‘çš„åå­—å«&quot;+name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setBeanName(String s) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;3.è°ƒç”¨BeanNameAware#setBeanNameæ–¹æ³•:æˆ‘è¦ä¸Šå­¦äº†ï¼Œèµ·äº†ä¸ªå­¦å&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;4.è°ƒç”¨BeanFactoryAware#setBeanFactoryæ–¹æ³•ï¼šé€‰å¥½å­¦æ ¡äº†&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void afterPropertiesSet() throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;6.InitializingBean#afterPropertiesSetæ–¹æ³•ï¼šå…¥å­¦ç™»è®°&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void init() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;7.è‡ªå®šä¹‰initæ–¹æ³•ï¼šåŠªåŠ›ä¸Šå­¦ing&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void destroy() throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;9.DisposableBean#destroyæ–¹æ³•ï¼šå¹³æ·¡çš„ä¸€ç”Ÿè½å¹•äº†&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void destroyMethod() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;10.è‡ªå®šä¹‰destroyæ–¹æ³•:ç¡äº†ï¼Œåˆ«æƒ³å«é†’æˆ‘&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void work(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;Beanä½¿ç”¨ä¸­ï¼šå·¥ä½œï¼Œåªæœ‰å¯¹ç¤¾ä¼šæ²¡æœ‰ç”¨çš„äººæ‰æ”¾å‡ã€‚ã€‚&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>å®šä¹‰ä¸€ä¸ª<code>MyBeanPostProcessor</code>å®ç°<code>BeanPostProcessor</code>æ¥å£ã€‚</li>
</ul>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class MyBeanPostProcessor implements BeanPostProcessor {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;5.BeanPostProcessor.postProcessBeforeInitializationæ–¹æ³•ï¼šåˆ°å­¦æ ¡æŠ¥åå•¦&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;8.BeanPostProcessor#postProcessAfterInitializationæ–¹æ³•ï¼šç»ˆäºæ¯•ä¸šï¼Œæ‹¿åˆ°æ¯•ä¸šè¯å•¦ï¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return bean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®š<code>init-method</code>å’Œ<code>destroy-method</code>å±æ€§</li>
</ul>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;bean name=&quot;myBeanPostProcessor&quot; class=&quot;cn.fighter3.spring.life.MyBeanPostProcessor&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;bean name=&quot;personBean&quot; class=&quot;cn.fighter3.spring.life.PersonBean&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          init-method=&quot;init&quot; destroy-method=&quot;destroyMethod&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;property name=&quot;idNo&quot; value= &quot;80669865&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;property name=&quot;name&quot; value=&quot;å¼ é“é’¢&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/bean&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/beans&gt;</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>æµ‹è¯•</li>
</ul>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class Main {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring-config.xml&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PersonBean personBean = (PersonBean) context.getBean(&quot;personBean&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        personBean.work();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ((ClassPathXmlApplicationContext) context).destroy();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>è¿è¡Œç»“æœï¼š</li>
</ul>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">1.è°ƒç”¨æ„é€ æ–¹æ³•ï¼šæˆ‘å‡ºç”Ÿäº†ï¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.è®¾ç½®å±æ€§ï¼šæˆ‘çš„åå­—å«å¼ é“é’¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.è°ƒç”¨BeanNameAware#setBeanNameæ–¹æ³•:æˆ‘è¦ä¸Šå­¦äº†ï¼Œèµ·äº†ä¸ªå­¦å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.è°ƒç”¨BeanFactoryAware#setBeanFactoryæ–¹æ³•ï¼šé€‰å¥½å­¦æ ¡äº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5.BeanPostProcessor#postProcessBeforeInitializationæ–¹æ³•ï¼šåˆ°å­¦æ ¡æŠ¥åå•¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6.InitializingBean#afterPropertiesSetæ–¹æ³•ï¼šå…¥å­¦ç™»è®°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7.è‡ªå®šä¹‰initæ–¹æ³•ï¼šåŠªåŠ›ä¸Šå­¦ing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">8.BeanPostProcessor#postProcessAfterInitializationæ–¹æ³•ï¼šç»ˆäºæ¯•ä¸šï¼Œæ‹¿åˆ°æ¯•ä¸šè¯å•¦ï¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Beanä½¿ç”¨ä¸­ï¼šå·¥ä½œï¼Œåªæœ‰å¯¹ç¤¾ä¼šæ²¡æœ‰ç”¨çš„äººæ‰æ”¾å‡ã€‚ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">9.DisposableBean#destroyæ–¹æ³•ï¼šå¹³æ·¡çš„ä¸€ç”Ÿè½å¹•äº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10.è‡ªå®šä¹‰destroyæ–¹æ³•:ç¡äº†ï¼Œåˆ«æƒ³å«é†’æˆ‘</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å…³äºæºç ï¼ŒBean åˆ›å»ºè¿‡ç¨‹å¯ä»¥æŸ¥çœ‹<code>AbstractBeanFactory#doGetBean</code>æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œå¯ä»¥çœ‹åˆ° Bean çš„å®ä¾‹åŒ–ï¼Œèµ‹å€¼ã€åˆå§‹åŒ–çš„è¿‡ç¨‹ï¼Œè‡³äºæœ€ç»ˆçš„é”€æ¯ï¼Œå¯ä»¥çœ‹çœ‹<code>ConfigurableApplicationContext#close()</code>ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-320-4c8b8d7c545d46e723451f0f7c6d679d.png" width="1338" height="814" class="img_kGBN"></p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="10bean-å®šä¹‰å’Œä¾èµ–å®šä¹‰æœ‰å“ªäº›æ–¹å¼">10.Bean å®šä¹‰å’Œä¾èµ–å®šä¹‰æœ‰å“ªäº›æ–¹å¼ï¼Ÿ<a href="#10bean-å®šä¹‰å’Œä¾èµ–å®šä¹‰æœ‰å“ªäº›æ–¹å¼" class="hash-link" aria-label="Direct link to 10.Bean å®šä¹‰å’Œä¾èµ–å®šä¹‰æœ‰å“ªäº›æ–¹å¼ï¼Ÿ" title="Direct link to 10.Bean å®šä¹‰å’Œä¾èµ–å®šä¹‰æœ‰å“ªäº›æ–¹å¼ï¼Ÿ">â€‹</a></h3>
<p>æœ‰ä¸‰ç§æ–¹å¼ï¼š<strong>ç›´æ¥ç¼–ç æ–¹å¼</strong>ã€<strong>é…ç½®æ–‡ä»¶æ–¹å¼</strong>ã€<strong>æ³¨è§£æ–¹å¼</strong>ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-321-2be974f988b263e727d2eb95c93bae3e.png" width="720" height="345" class="img_kGBN"></p>
<ul>
<li>ç›´æ¥ç¼–ç æ–¹å¼ï¼šæˆ‘ä»¬ä¸€èˆ¬æ¥è§¦ä¸åˆ°ç›´æ¥ç¼–ç çš„æ–¹å¼ï¼Œä½†å…¶å®å…¶å®ƒçš„æ–¹å¼æœ€ç»ˆéƒ½è¦é€šè¿‡ç›´æ¥ç¼–ç æ¥å®ç°ã€‚</li>
<li>é…ç½®æ–‡ä»¶æ–¹å¼ï¼šé€šè¿‡ xmlã€propreties ç±»å‹çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®ç›¸åº”çš„ä¾èµ–å…³ç³»ï¼ŒSpring è¯»å–é…ç½®æ–‡ä»¶ï¼Œå®Œæˆä¾èµ–å…³ç³»çš„æ³¨å…¥ã€‚</li>
<li>æ³¨è§£æ–¹å¼ï¼šæ³¨è§£æ–¹å¼åº”è¯¥æ˜¯æˆ‘ä»¬ç”¨çš„æœ€å¤šçš„ä¸€ç§æ–¹å¼äº†ï¼Œåœ¨ç›¸åº”çš„åœ°æ–¹ä½¿ç”¨æ³¨è§£ä¿®é¥°ï¼ŒSpring ä¼šæ‰«ææ³¨è§£ï¼Œå®Œæˆ  ä¾èµ–å…³ç³»çš„æ³¨å…¥ã€‚</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="11æœ‰å“ªäº›ä¾èµ–æ³¨å…¥çš„æ–¹æ³•">11.æœ‰å“ªäº›ä¾èµ–æ³¨å…¥çš„æ–¹æ³•ï¼Ÿ<a href="#11æœ‰å“ªäº›ä¾èµ–æ³¨å…¥çš„æ–¹æ³•" class="hash-link" aria-label="Direct link to 11.æœ‰å“ªäº›ä¾èµ–æ³¨å…¥çš„æ–¹æ³•ï¼Ÿ" title="Direct link to 11.æœ‰å“ªäº›ä¾èµ–æ³¨å…¥çš„æ–¹æ³•ï¼Ÿ">â€‹</a></h3>
<p>Spring æ”¯æŒ<strong>æ„é€ æ–¹æ³•æ³¨å…¥</strong>ã€<strong>å±æ€§æ³¨å…¥</strong>ã€<strong>å·¥å‚æ–¹æ³•æ³¨å…¥</strong>,å…¶ä¸­å·¥å‚æ–¹æ³•æ³¨å…¥ï¼Œåˆå¯ä»¥åˆ†ä¸º<strong>é™æ€å·¥å‚æ–¹æ³•æ³¨å…¥</strong>å’Œ<strong>éé™æ€å·¥å‚æ–¹æ³•æ³¨å…¥</strong>ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-322-2847978e36905aa32ebc4f35f132c794.png" width="1564" height="582" class="img_kGBN"></p>
<ul>
<li>
<p><strong>æ„é€ æ–¹æ³•æ³¨å…¥</strong></p>
<p>é€šè¿‡è°ƒç”¨ç±»çš„æ„é€ æ–¹æ³•ï¼Œå°†æ¥å£å®ç°ç±»é€šè¿‡æ„é€ æ–¹æ³•å˜é‡ä¼ å…¥</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> public CatDaoImpl(String message){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   this. message = message;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;bean id=&quot;CatDaoImpl&quot; class=&quot;com.CatDaoImpl&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;constructor-arg value=&quot; message &quot;&gt;&lt;/constructor-arg&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/bean&gt;</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>å±æ€§æ³¨å…¥</strong></p>
<p>é€šè¿‡ Setter æ–¹æ³•å®Œæˆè°ƒç”¨ç±»æ‰€éœ€ä¾èµ–çš„æ³¨å…¥</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> public class Id {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int getId() { return id; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setId(int id) { this.id = id; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;bean id=&quot;id&quot; class=&quot;com.id &quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;property name=&quot;id&quot; value=&quot;123&quot;&gt;&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/bean&gt;</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>å·¥å‚æ–¹æ³•æ³¨å…¥</strong></p>
<ul>
<li>
<p><strong>é™æ€å·¥å‚æ³¨å…¥</strong></p>
<p>é™æ€å·¥å‚é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯é€šè¿‡è°ƒç”¨é™æ€å·¥å‚çš„æ–¹æ³•æ¥è·å–è‡ªå·±éœ€è¦çš„å¯¹è±¡ï¼Œä¸ºäº†è®© Spring ç®¡ç†æ‰€æœ‰å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥é€šè¿‡&quot;å·¥ç¨‹ç±».é™æ€æ–¹æ³•()&quot;æ¥è·å–å¯¹è±¡ï¼Œè€Œæ˜¯ä¾ç„¶é€šè¿‡ Spring æ³¨å…¥çš„å½¢å¼è·å–ï¼š</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class DaoFactory { //é™æ€å·¥å‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public static final FactoryDao getStaticFactoryDaoImpl(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return new StaticFacotryDaoImpl();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SpringAction {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //æ³¨å…¥å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> private FactoryDao staticFactoryDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //æ³¨å…¥å¯¹è±¡çš„ set æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public void setStaticFactoryDao(FactoryDao staticFactoryDao) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     this.staticFactoryDao = staticFactoryDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">//factory-method=&quot;getStaticFactoryDaoImpl&quot;æŒ‡å®šè°ƒç”¨å“ªä¸ªå·¥å‚æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;bean name=&quot;springAction&quot; class=&quot; SpringAction&quot; &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;!--ä½¿ç”¨é™æ€å·¥å‚çš„æ–¹æ³•æ³¨å…¥å¯¹è±¡,å¯¹åº”ä¸‹é¢çš„é…ç½®æ–‡ä»¶--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;property name=&quot;staticFactoryDao&quot; ref=&quot;staticFactoryDao&quot;&gt;&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;/bean&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;!--æ­¤å¤„è·å–å¯¹è±¡çš„æ–¹å¼æ˜¯ä»å·¥å‚ç±»ä¸­è·å–é™æ€æ–¹æ³•--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;bean name=&quot;staticFactoryDao&quot; class=&quot;DaoFactory&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  factory-method=&quot;getStaticFactoryDaoImpl&quot;&gt;&lt;/bean&gt;</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>éé™æ€å·¥å‚æ³¨å…¥</strong></p>
<p>éé™æ€å·¥å‚ï¼Œä¹Ÿå«å®ä¾‹å·¥å‚ï¼Œæ„æ€æ˜¯å·¥å‚æ–¹æ³•ä¸æ˜¯é™æ€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é¦–å…ˆ new ä¸€ä¸ªå·¥å‚å®ä¾‹ï¼Œå†è°ƒç”¨æ™®é€šçš„å®ä¾‹æ–¹æ³•ã€‚</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">//éé™æ€å·¥å‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DaoFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public FactoryDao getFactoryDaoImpl(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     return new FactoryDaoImpl();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SpringAction {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //æ³¨å…¥å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private FactoryDao factoryDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public void setFactoryDao(FactoryDao factoryDao) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.factoryDao = factoryDao;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;bean name=&quot;springAction&quot; class=&quot;SpringAction&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;!--ä½¿ç”¨éé™æ€å·¥å‚çš„æ–¹æ³•æ³¨å…¥å¯¹è±¡,å¯¹åº”ä¸‹é¢çš„é…ç½®æ–‡ä»¶--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;property name=&quot;factoryDao&quot; ref=&quot;factoryDao&quot;&gt;&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;/bean&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;!--æ­¤å¤„è·å–å¯¹è±¡çš„æ–¹å¼æ˜¯ä»å·¥å‚ç±»ä¸­è·å–å®ä¾‹æ–¹æ³•--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;bean name=&quot;daoFactory&quot; class=&quot;com.DaoFactory&quot;&gt;&lt;/bean&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;bean name=&quot;factoryDao&quot; factory-bean=&quot;daoFactory&quot; factory-method=&quot;getFactoryDaoImpl&quot;&gt;&lt;/bean&gt;</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="12spring-æœ‰å“ªäº›è‡ªåŠ¨è£…é…çš„æ–¹å¼">12.Spring æœ‰å“ªäº›è‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Ÿ<a href="#12spring-æœ‰å“ªäº›è‡ªåŠ¨è£…é…çš„æ–¹å¼" class="hash-link" aria-label="Direct link to 12.Spring æœ‰å“ªäº›è‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Ÿ" title="Direct link to 12.Spring æœ‰å“ªäº›è‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Ÿ">â€‹</a></h3>
<blockquote>
<p><strong>ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…ï¼Ÿ</strong></p>
</blockquote>
<p>Spring IOC å®¹å™¨çŸ¥é“æ‰€æœ‰ Bean çš„é…ç½®ä¿¡æ¯ï¼Œæ­¤å¤–ï¼Œé€šè¿‡ Java åå°„æœºåˆ¶è¿˜å¯ä»¥è·çŸ¥å®ç°ç±»çš„ç»“æ„ä¿¡æ¯ï¼Œå¦‚æ„é€ æ–¹æ³•çš„ç»“æ„ã€å±æ€§ç­‰ä¿¡æ¯ã€‚æŒæ¡æ‰€æœ‰ Bean çš„è¿™äº›ä¿¡æ¯åï¼ŒSpring IOC å®¹å™¨å°±å¯ä»¥æŒ‰ç…§æŸç§è§„åˆ™å¯¹å®¹å™¨ä¸­çš„ Bean è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œè€Œæ— é¡»é€šè¿‡æ˜¾å¼çš„æ–¹å¼è¿›è¡Œä¾èµ–é…ç½®ã€‚</p>
<p>Spring æä¾›çš„è¿™ç§æ–¹å¼ï¼Œå¯ä»¥æŒ‰ç…§æŸäº›è§„åˆ™è¿›è¡Œ Bean çš„è‡ªåŠ¨è£…é…ï¼Œ<code>&lt;bean&gt;</code>å…ƒç´ æä¾›äº†ä¸€ä¸ªæŒ‡å®šè‡ªåŠ¨è£…é…ç±»å‹çš„å±æ€§ï¼š<code>autowire=&quot;&lt;è‡ªåŠ¨è£…é…ç±»å‹&gt;&quot;</code></p>
<blockquote>
<p><strong>Spring æä¾›äº†å“ªå‡ ç§è‡ªåŠ¨è£…é…ç±»å‹ï¼Ÿ</strong></p>
</blockquote>
<p>Spring æä¾›äº† 4 ç§è‡ªåŠ¨è£…é…ç±»å‹ï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-323-7008412abbed2f69bf97d8e49261db5f.png" width="1092" height="646" class="img_kGBN"></p>
<ul>
<li><strong>byName</strong>ï¼šæ ¹æ®åç§°è¿›è¡Œè‡ªåŠ¨åŒ¹é…ï¼Œå‡è®¾ Boss åˆä¸€ä¸ªåä¸º car çš„å±æ€§ï¼Œå¦‚æœå®¹å™¨ä¸­åˆšå¥½æœ‰ä¸€ä¸ªåä¸º car çš„ beanï¼ŒSpring å°±ä¼šè‡ªåŠ¨å°†å…¶è£…é…ç»™ Boss çš„ car å±æ€§</li>
<li><strong>byType</strong>ï¼šæ ¹æ®ç±»å‹è¿›è¡Œè‡ªåŠ¨åŒ¹é…ï¼Œå‡è®¾ Boss æœ‰ä¸€ä¸ª Car ç±»å‹çš„å±æ€§ï¼Œå¦‚æœå®¹å™¨ä¸­åˆšå¥½æœ‰ä¸€ä¸ª Car ç±»å‹çš„ Beanï¼ŒSpring å°±ä¼šè‡ªåŠ¨å°†å…¶è£…é…ç»™ Boss è¿™ä¸ªå±æ€§</li>
<li><strong>constructor</strong>ï¼šä¸ byType ç±»ä¼¼ï¼Œ åªä¸è¿‡å®ƒæ˜¯é’ˆå¯¹æ„é€ å‡½æ•°æ³¨å…¥è€Œè¨€çš„ã€‚å¦‚æœ Boss æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ„é€ å‡½æ•°åŒ…å«ä¸€ä¸ª Car ç±»å‹çš„å…¥å‚ï¼Œå¦‚æœå®¹å™¨ä¸­æœ‰ä¸€ä¸ª Car ç±»å‹çš„ Beanï¼Œåˆ™ Spring å°†è‡ªåŠ¨æŠŠè¿™ä¸ª Bean ä½œä¸º Boss æ„é€ å‡½æ•°çš„å…¥å‚ï¼›å¦‚æœå®¹å™¨ä¸­æ²¡æœ‰æ‰¾åˆ°å’Œæ„é€ å‡½æ•°å…¥å‚åŒ¹é…ç±»å‹çš„ Beanï¼Œåˆ™ Spring å°†æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li><strong>autodetect</strong>ï¼šæ ¹æ® Bean çš„è‡ªçœæœºåˆ¶å†³å®šé‡‡ç”¨ byType è¿˜æ˜¯ constructor è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œå¦‚æœ Bean æä¾›äº†é»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œåˆ™é‡‡ç”¨ byTypeï¼Œå¦åˆ™é‡‡ç”¨ constructorã€‚</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="13spring-ä¸­çš„-bean-çš„ä½œç”¨åŸŸæœ‰å“ªäº›">13.Spring ä¸­çš„ Bean çš„ä½œç”¨åŸŸæœ‰å“ªäº›?<a href="#13spring-ä¸­çš„-bean-çš„ä½œ  ç”¨åŸŸæœ‰å“ªäº›" class="hash-link" aria-label="Direct link to 13.Spring ä¸­çš„ Bean çš„ä½œç”¨åŸŸæœ‰å“ªäº›?" title="Direct link to 13.Spring ä¸­çš„ Bean çš„ä½œç”¨åŸŸæœ‰å“ªäº›?">â€‹</a></h3>
<p>Spring çš„ Bean ä¸»è¦æ”¯æŒäº”ç§ä½œç”¨åŸŸï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-324-2620bb73eae83ed58929d1526b4c3711.png" width="761" height="499" class="img_kGBN"></p>
<ul>
<li><strong>singleton</strong> : åœ¨ Spring å®¹å™¨ä»…å­˜åœ¨ä¸€ä¸ª Bean å®ä¾‹ï¼ŒBean ä»¥å•å®ä¾‹çš„æ–¹å¼å­˜åœ¨ï¼Œæ˜¯ Bean é»˜è®¤çš„ä½œç”¨åŸŸã€‚</li>
<li><strong>prototype</strong> : æ¯æ¬¡ä»å®¹å™¨é‡è°ƒç”¨ Bean æ—¶ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</li>
</ul>
<p>ä»¥ä¸‹ä¸‰ä¸ªä½œç”¨åŸŸäºåªåœ¨ Web åº”ç”¨ä¸­é€‚ç”¨ï¼š</p>
<ul>
<li><strong>request</strong> : æ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ Beanï¼Œè¯¥ Bean ä»…åœ¨å½“å‰ HTTP Request å†…æœ‰æ•ˆã€‚</li>
<li><strong>session</strong> : åŒä¸€ä¸ª HTTP Session å…±äº«ä¸€ä¸ª Beanï¼Œä¸åŒçš„ HTTP Session ä½¿ç”¨ä¸åŒçš„ Beanã€‚</li>
<li><strong>globalSession</strong>ï¼šåŒä¸€ä¸ªå…¨å±€ Session å…±äº«ä¸€ä¸ª Beanï¼Œåªç”¨äºåŸºäº Protlet çš„ Web åº”ç”¨ï¼ŒSpring5 ä¸­å·²ç»ä¸å­˜åœ¨äº†ã€‚</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="14spring-ä¸­çš„å•ä¾‹-bean-ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—">14.Spring ä¸­çš„å•ä¾‹ Bean ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—ï¼Ÿ<a href="#14spring-ä¸­çš„å•ä¾‹-bean-ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—" class="hash-link" aria-label="Direct link to 14.Spring ä¸­çš„å•ä¾‹ Bean ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—ï¼Ÿ" title="Direct link to 14.Spring ä¸­çš„å•ä¾‹ Bean ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—ï¼Ÿ">â€‹</a></h3>
<p>é¦–å…ˆç»“è®ºåœ¨è¿™ï¼šSpring ä¸­çš„å•ä¾‹ Bean<strong>ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong>ã€‚</p>
<p>å› ä¸ºå•ä¾‹ Beanï¼Œæ˜¯å…¨å±€åªæœ‰ä¸€ä¸ª Beanï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«ã€‚å¦‚æœè¯´å•ä¾‹ Beanï¼Œæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹ä¸­çš„æ“ä½œä¸ä¼šå¯¹ Bean ä¸­çš„æˆå‘˜å˜é‡æ‰§è¡Œ<strong>æŸ¥è¯¢</strong>ä»¥å¤–çš„æ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªå•ä¾‹ Bean æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚æ¯”å¦‚ Spring mvc çš„ Controllerã€Serviceã€Dao ç­‰ï¼Œè¿™ äº› Bean å¤§å¤šæ˜¯æ— çŠ¶æ€çš„ï¼Œåªå…³æ³¨äºæ–¹æ³•æœ¬èº«ã€‚</p>
<p>å‡å¦‚è¿™ä¸ª Bean æ˜¯æœ‰çŠ¶æ€çš„ï¼Œä¹Ÿå°±æ˜¯ä¼šå¯¹ Bean ä¸­çš„æˆå‘˜å˜é‡è¿›è¡Œå†™æ“ä½œï¼Œé‚£ä¹ˆå¯èƒ½å°±å­˜åœ¨çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-325-b78cc192254f8c36c59eece7fdbc4e37.png" width="562" height="373" class="img_kGBN"></p>
<blockquote>
<p><strong>å•ä¾‹ Bean çº¿ç¨‹å®‰å…¨é—®é¢˜æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</strong></p>
</blockquote>
<p>å¸¸è§çš„æœ‰è¿™ä¹ˆäº›è§£å†³åŠæ³•ï¼š</p>
<ol>
<li>
<p>å°† Bean å®šä¹‰ä¸ºå¤šä¾‹</p>
<p>è¿™æ ·æ¯ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚è¿‡æ¥éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Beanï¼Œä½†æ˜¯è¿™æ ·å®¹å™¨å°±ä¸å¥½ç®¡ç† Beanï¼Œä¸èƒ½è¿™ä¹ˆåŠã€‚</p>
</li>
<li>
<p>åœ¨ Bean å¯¹è±¡ä¸­å°½é‡é¿å…å®šä¹‰å¯å˜çš„æˆå‘˜å˜é‡</p>
<p>å‰Šè¶³é€‚å±¥äº†å±äºæ˜¯ï¼Œä¹Ÿä¸èƒ½è¿™ä¹ˆå¹²ã€‚</p>
</li>
<li>
<p>å°† Bean ä¸­çš„æˆå‘˜å˜é‡ä¿å­˜åœ¨ ThreadLocal ä¸­ â­</p>
<p>æˆ‘ä»¬çŸ¥é“ ThredLoca èƒ½ä¿è¯å¤šçº¿ç¨‹ä¸‹å˜é‡çš„éš”ç¦»ï¼Œå¯ä»¥åœ¨ç±»ä¸­å®šä¹‰ä¸€ä¸ª ThreadLocal æˆå‘˜å˜é‡ï¼Œå°†éœ€è¦çš„å¯å˜æˆå‘˜å˜é‡ä¿å­˜åœ¨ ThreadLocal é‡Œï¼Œè¿™æ˜¯æ¨èçš„ä¸€ç§æ–¹å¼ã€‚</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="15è¯´è¯´å¾ªç¯ä¾èµ–">15.è¯´è¯´å¾ªç¯ä¾èµ–?<a href="#15è¯´è¯´å¾ªç¯ä¾èµ–" class="hash-link" aria-label="Direct link to 15.è¯´è¯´å¾ªç¯ä¾èµ–?" title="Direct link to 15.è¯´è¯´å¾ªç¯ä¾èµ–?">â€‹</a></h3>
<blockquote>
<p><strong>ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ</strong></p>
</blockquote>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-326-c5b90db0ce70a7a72397745853c2485a.png" width="678" height="695" class="img_kGBN"></p>
<p>Spring å¾ªç¯ä¾èµ–ï¼šç®€å•è¯´å°±æ˜¯è‡ªå·±ä¾èµ–è‡ªå·±ï¼Œæˆ–è€…å’Œåˆ«çš„ Bean ç›¸äº’ä¾èµ–ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-327-7025745704c31080a578f3f4c80094f2.png" width="1046" height="359" class="img_kGBN"></p>
<p>åªæœ‰å•ä¾‹çš„ Bean æ‰å­˜åœ¨å¾ªç¯ä¾èµ–çš„æƒ…å†µï¼Œ<strong>åŸå‹</strong>(Prototype)æƒ…å†µä¸‹ï¼ŒSpring ä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚åŸå› å¾ˆç®€å•ï¼ŒAB å¾ªç¯ä¾èµ–ï¼ŒA å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œå‘ç°ä¾èµ– Bï¼Œåˆ›å»º B å®ä¾‹ï¼Œåˆ›å»º B çš„æ—¶å€™å‘ç°éœ€è¦ Aï¼Œåˆ›å»º A1 å®ä¾‹â€¦â€¦æ— é™å¥—å¨ƒï¼Œç›´æ¥æŠŠç³»ç»Ÿå¹²å®ã€‚</p>
<blockquote>
<p><strong>Spring å¯ä»¥è§£å†³å“ªäº›æƒ…å†µçš„å¾ªç¯ä¾èµ–ï¼Ÿ</strong></p>
</blockquote>
<p>Spring ä¸æ”¯æŒåŸºäºæ„é€ å™¨æ³¨å…¥çš„å¾ªç¯ä¾èµ–ï¼Œä½†æ˜¯å‡å¦‚ AB å¾ªç¯ä¾èµ–ï¼Œå¦‚æœä¸€ä¸ªæ˜¯æ„é€ å™¨æ³¨å…¥ï¼Œä¸€ä¸ªæ˜¯ setter æ³¨å…¥å‘¢ï¼Ÿ</p>
<p>çœ‹çœ‹å‡ ç§æƒ…å½¢ï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-328-5c34bff56ad17a82cd06383efb33ae29.png" width="865" height="517" class="img_kGBN"></p>
<p>ç¬¬å››ç§å¯ä»¥è€Œç¬¬äº”ç§ä¸å¯ä»¥çš„åŸå› æ˜¯ Spring åœ¨åˆ›å»º Bean æ—¶é»˜è®¤ä¼šæ ¹æ®è‡ªç„¶æ’åºè¿›è¡Œåˆ›å»ºï¼Œæ‰€ä»¥ A ä¼šå…ˆäº B è¿›è¡Œåˆ›å»ºã€‚</p>
<p>æ‰€ä»¥ç®€å•æ€»ç»“ï¼Œå½“å¾ªç¯ä¾èµ–çš„å®ä¾‹éƒ½é‡‡ç”¨ setter æ–¹æ³•æ³¨å…¥çš„æ—¶å€™ï¼ŒSpring å¯ä»¥æ”¯æŒï¼Œéƒ½é‡‡ç”¨æ„é€ å™¨æ³¨å…¥çš„æ—¶å€™ï¼Œä¸æ”¯æŒï¼Œæ„é€ å™¨æ³¨å…¥å’Œ setter æ³¨å…¥åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼Œçœ‹å¤©ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="16é‚£-spring-æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„å‘¢">16.é‚£ Spring æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„å‘¢ï¼Ÿ<a href="#16é‚£-spring-æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„å‘¢" class="hash-link" aria-label="Direct link to 16.é‚£ Spring æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„å‘¢ï¼Ÿ" title="Direct link to 16.é‚£ Spring æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„å‘¢ï¼Ÿ">â€‹</a></h3>
<blockquote>
<p>PSï¼šå…¶å®æ­£ç¡®ç­”æ¡ˆæ˜¯å¼€å‘äººå‘˜åšå¥½è®¾è®¡ï¼Œåˆ«è®© Bean å¾ªç¯ä¾èµ–ï¼Œä½†æ˜¯æ²¡åŠæ³•ï¼Œé¢è¯•å®˜ä¸æƒ³å¬è¿™ä¸ªã€‚</p>
</blockquote>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå•ä¾‹ Bean åˆå§‹åŒ–å®Œæˆï¼Œè¦ç»å†ä¸‰æ­¥ï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-329-7d33a610adca79a5103085b4baa4fefa.png" width="555" height="202" class="img_kGBN"></p>
<p>æ³¨å…¥å°±å‘ç”Ÿåœ¨ç¬¬äºŒæ­¥ï¼Œ<strong>å±æ€§èµ‹å€¼</strong>ï¼Œç»“åˆè¿™ä¸ªè¿‡ç¨‹ï¼ŒSpring é€šè¿‡<strong>ä¸‰çº§ç¼“å­˜</strong>è§£å†³äº†å¾ªç¯ä¾èµ–ï¼š</p>
<ol>
<li>ä¸€çº§ç¼“å­˜ : <code>Map&lt;String,Object&gt;</code> <strong>singletonObjects</strong>ï¼Œå•ä¾‹æ± ï¼Œç”¨äºä¿å­˜å®ä¾‹åŒ–ã€å±æ€§èµ‹å€¼ï¼ˆæ³¨å…¥ï¼‰ã€åˆå§‹åŒ–å®Œæˆçš„ bean å®ä¾‹</li>
<li>äºŒçº§ç¼“å­˜ : <code>Map&lt;String,Object&gt;</code> <strong>earlySingletonObjects</strong>ï¼Œæ—©æœŸæ›å…‰å¯¹è±¡ï¼Œç”¨äºä¿å­˜å®ä¾‹åŒ–å®Œæˆçš„ bean å®ä¾‹</li>
<li>ä¸‰çº§ç¼“å­˜ : <code>Map&lt;String,ObjectFactory&lt;?&gt;&gt;</code> <strong>singletonFactories</strong>ï¼Œæ—©æœŸæ›å…‰å¯¹è±¡å·¥å‚ï¼Œç”¨äºä¿å­˜ bean åˆ›å»ºå·¥å‚ï¼Œä»¥ä¾¿äºåé¢æ‰©å±•æœ‰æœºä¼šåˆ›å»ºä»£ç†å¯¹è±¡ã€‚</li>
</ol>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-330-1be2be9ac2d046b095a93808108dd203.png" width="1157" height="415" class="img_kGBN"></p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸‰çº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–çš„è¿‡ç¨‹ï¼š</p>
<p>å½“ Aã€B ä¸¤ä¸ªç±»å‘ç”Ÿå¾ªç¯ä¾èµ–æ—¶ï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-331-b6ec8629040f7a27cb397286de34b371.png" width="435" height="227" class="img_kGBN"></p>
<p>A å®ä¾‹çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼š</p>
<ol>
<li>åˆ›å»º A å®ä¾‹ï¼Œå®ä¾‹åŒ–çš„æ—¶å€™æŠŠ A å¯¹è±¡â¼¯â¼šæ”¾â¼Šä¸‰çº§ç¼“å­˜ï¼Œè¡¨ç¤º A å¼€å§‹å®ä¾‹åŒ–äº†ï¼Œè™½ç„¶æˆ‘è¿™ä¸ªå¯¹è±¡è¿˜ä¸å®Œæ•´ï¼Œä½†æ˜¯å…ˆæ›å…‰å‡ºæ¥è®©å¤§å®¶çŸ¥é“</li>
</ol>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-332-57071bfed09f9b357b485fc11d6c793b.png" width="939" height="438" class="img_kGBN"></p>
<ol start="2">
<li>
<p>A æ³¨â¼Šå±æ€§æ—¶ï¼Œå‘ç°ä¾èµ– Bï¼Œæ­¤æ—¶ B è¿˜æ²¡æœ‰è¢«åˆ›å»ºå‡ºæ¥ï¼Œæ‰€ä»¥å»å®ä¾‹åŒ– B</p>
</li>
<li>
<p>åŒæ ·ï¼ŒB æ³¨â¼Šå±æ€§æ—¶å‘ç°ä¾èµ– Aï¼Œå®ƒå°±ä¼šä»ç¼“å­˜é‡Œæ‰¾ A å¯¹è±¡ã€‚ä¾æ¬¡ä»â¼€çº§åˆ°ä¸‰çº§ç¼“å­˜æŸ¥è¯¢ Aï¼Œä»ä¸‰çº§ç¼“å­˜é€šè¿‡å¯¹è±¡â¼¯â¼šæ‹¿åˆ° Aï¼Œå‘ç° A è™½ç„¶ä¸å¤ªå®Œå–„ï¼Œä½†æ˜¯å­˜åœ¨ï¼ŒæŠŠ A æ”¾â¼Šâ¼†çº§ç¼“å­˜ï¼ŒåŒæ—¶åˆ é™¤ä¸‰çº§ç¼“å­˜ä¸­çš„ Aï¼Œæ­¤æ—¶ï¼ŒB å·²ç»å®ä¾‹åŒ–å¹¶ä¸”åˆå§‹åŒ–å®Œæˆï¼ŒæŠŠ B æ”¾å…¥â¼€çº§ç¼“å­˜ã€‚</p>
</li>
</ol>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-334-6e821ffda0c62db825e3ab11c1e07730.png" width="877" height="421" class="img_kGBN"></p>
<ol start="4">
<li>
<p>æ¥ç€ A ç»§ç»­å±æ€§èµ‹å€¼ï¼Œé¡ºåˆ©ä»â¼€çº§ç¼“å­˜æ‹¿åˆ°å®ä¾‹åŒ–ä¸”åˆå§‹åŒ–å®Œæˆçš„ B å¯¹è±¡ï¼ŒA å¯¹è±¡åˆ›å»ºä¹Ÿå®Œæˆï¼Œåˆ é™¤â¼†çº§ç¼“å­˜ä¸­çš„ Aï¼ŒåŒæ—¶æŠŠ A æ”¾â¼Šâ¼€çº§ç¼“å­˜</p>
</li>
<li>
<p>æœ€åï¼Œâ¼€çº§ç¼“å­˜ä¸­ä¿å­˜ç€å®ä¾‹åŒ–ã€åˆå§‹åŒ–éƒ½å®Œæˆçš„ Aã€B å¯¹è±¡</p>
</li>
</ol>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-333-0ba413ccea594b24c7f0da6d01d4036a.png" width="817" height="472" class="img_kGBN"></p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±çŸ¥é“ä¸ºä»€ä¹ˆ Spring èƒ½è§£å†³ setter æ³¨å…¥çš„å¾ªç¯ä¾èµ–äº†ï¼Œå› ä¸ºå®ä¾‹åŒ–å’Œå±æ€§èµ‹å€¼æ˜¯åˆ†å¼€çš„ï¼Œæ‰€ä»¥é‡Œé¢æœ‰æ“ä½œçš„ç©ºé—´ã€‚å¦‚æœéƒ½æ˜¯æ„é€ å™¨æ³¨å…¥çš„åŒ–ï¼Œé‚£ä¹ˆéƒ½å¾—åœ¨å®ä¾‹åŒ–è¿™ä¸€æ­¥å®Œæˆæ³¨å…¥ï¼Œæ‰€ä»¥è‡ªç„¶æ˜¯æ— æ³•æ”¯æŒäº†ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="17ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜çº§ä¸å—">17.ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼Ÿâ¼†çº§ä¸â¾å—ï¼Ÿ<a href="#17ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜çº§ä¸å—" class="hash-link" aria-label="Direct link to 17.ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼Ÿâ¼†çº§ä¸â¾å—ï¼Ÿ" title="Direct link to 17.ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼Ÿâ¼†çº§ä¸â¾å—ï¼Ÿ">â€‹</a></h3>
<p>ä¸è¡Œï¼Œä¸»è¦æ˜¯ä¸ºäº†<strong>â½£æˆä»£ç†å¯¹è±¡</strong>ã€‚å¦‚æœæ˜¯æ²¡æœ‰ä»£ç†çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨äºŒçº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–ä¹Ÿæ˜¯ OK çš„ã€‚ä½†æ˜¯å¦‚æœå­˜åœ¨ä»£ç†ï¼Œä¸‰çº§æ²¡æœ‰é—®é¢˜ï¼ŒäºŒçº§å°±ä¸è¡Œäº†ã€‚</p>
<p>å› ä¸ºä¸‰çº§ç¼“å­˜ä¸­æ”¾çš„æ˜¯â½£æˆå…·ä½“å¯¹è±¡çš„åŒ¿åå†…éƒ¨ç±»ï¼Œè·å– Object çš„æ—¶å€™ï¼Œå®ƒå¯ä»¥â½£æˆä»£ç†å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥è¿”å›æ™®é€šå¯¹è±¡ã€‚ä½¿â½¤ä¸‰çº§ç¼“å­˜ä¸»è¦æ˜¯ä¸ºäº†ä¿è¯ä¸ç®¡ä»€ä¹ˆæ—¶å€™ä½¿â½¤çš„éƒ½æ˜¯â¼€ä¸ªå¯¹è±¡ã€‚</p>
<p>å‡è®¾åªæœ‰â¼†çº§ç¼“å­˜çš„æƒ…å†µï¼Œå¾€â¼†çº§ç¼“å­˜ä¸­æ”¾çš„æ˜¾ç¤ºâ¼€ä¸ªæ™®é€šçš„ Bean å¯¹è±¡ï¼ŒBean åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ BeanPostProcessor å»â½£æˆä»£ç†å¯¹è±¡ä¹‹åï¼Œè¦†ç›–æ‰â¼†çº§ç¼“å­˜ä¸­çš„æ™®é€š Bean å¯¹è±¡ï¼Œé‚£ä¹ˆå¯èƒ½å°±å¯¼è‡´å–åˆ°çš„ Bean å¯¹è±¡ä¸ä¸€è‡´äº†ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-335-1cb61108a027e1ecd9d28e5ada34c797.png" width="1009" height="129" class="img_kGBN"></p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="18autowired-çš„å®ç°åŸç†">18.@Autowired çš„å®ç°åŸç†ï¼Ÿ<a href="#18autowired-çš„å®ç°åŸç†" class="hash-link" aria-label="Direct link to 18.@Autowired çš„å®ç°åŸç†ï¼Ÿ" title="Direct link to 18.@Autowired çš„å®ç°åŸç†ï¼Ÿ">â€‹</a></h3>
<p>å®ç°@Autowired çš„å…³é”®æ˜¯ï¼š<strong>AutowiredAnnotationBeanPostProcessor</strong></p>
<p>åœ¨ Bean çš„åˆå§‹åŒ–é˜¶æ®µï¼Œä¼šé€šè¿‡ Bean åç½®å¤„ç†å™¨æ¥è¿›è¡Œä¸€äº›å‰ç½®å’Œåç½®çš„å¤„ç†ã€‚</p>
<p>å®ç°@Autowired çš„åŠŸèƒ½ï¼Œä¹Ÿæ˜¯é€šè¿‡åç½®å¤„ç†å™¨æ¥å®Œæˆçš„ã€‚è¿™ä¸ªåç½®å¤„ç†å™¨å°±æ˜¯ AutowiredAnnotationBeanPostProcessorã€‚</p>
<ul>
<li>
<p>Spring åœ¨åˆ›å»º bean çš„è¿‡ç¨‹ä¸­ï¼Œæœ€ç»ˆä¼šè°ƒç”¨åˆ° doCreateBean()æ–¹æ³•ï¼Œåœ¨ doCreateBean()æ–¹æ³•ä¸­ä¼šè°ƒç”¨ populateBean()æ–¹æ³•ï¼Œæ¥ä¸º bean è¿›è¡Œå±æ€§å¡«å……ï¼Œå®Œæˆè‡ªåŠ¨è£…é…ç­‰å·¥ä½œã€‚</p>
</li>
<li>
<p>åœ¨ populateBean()æ–¹æ³•ä¸­ä¸€å…±è°ƒç”¨äº†ä¸¤æ¬¡åç½®å¤„ç†å™¨ï¼Œç¬¬ä¸€æ¬¡æ˜¯ä¸ºäº†åˆ¤æ–­æ˜¯å¦éœ€è¦å±æ€§å¡«å……ï¼Œå¦‚æœä¸éœ€è¦è¿›è¡Œå±æ€§å¡«å……ï¼Œé‚£ä¹ˆå°±ä¼šç›´æ¥è¿›è¡Œ returnï¼Œå¦‚æœéœ€è¦è¿›è¡Œå±æ€§å¡«å……ï¼Œé‚£ä¹ˆæ–¹æ³•å°±ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œåé¢ä¼šè¿›è¡Œç¬¬äºŒæ¬¡åç½®å¤„ç†å™¨çš„è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨åˆ° AutowiredAnnotationBeanPostProcessor çš„ postProcessPropertyValues()æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­å°±ä¼šè¿›è¡Œ@Autowired æ³¨è§£çš„è§£æï¼Œç„¶åå®ç°è‡ªåŠ¨è£…é…ã€‚</p>
</li>
</ul>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* å±æ€§èµ‹å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">protected void populateBean(String beanName, RootBeanDefinition mbd, @Nullable BeanWrapper bw) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //â€¦â€¦â€¦â€¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (hasInstAwareBpps) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              if (pvs == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  pvs = mbd.getPropertyValues();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              PropertyValues pvsToUse;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              for(Iterator var9 = this.getBeanPostProcessorCache().instantiationAware.iterator(); var9.hasNext(); pvs = pvsToUse) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  InstantiationAwareBeanPostProcessor bp = (InstantiationAwareBeanPostProcessor)var9.next();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  pvsToUse = bp.postProcessProperties((PropertyValues)pvs, bw.getWrappedInstance(), beanName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  if (pvsToUse == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      if (filteredPds == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          filteredPds = this.filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      //æ‰§è¡Œåå¤„ç†å™¨ï¼Œå¡«å……å±æ€§ï¼Œå®Œæˆè‡ªåŠ¨è£…é…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      //è°ƒç”¨InstantiationAwareBeanPostProcessorçš„postProcessPropertyValues()æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      pvsToUse = bp.postProcessPropertyValues((PropertyValues)pvs, filteredPds, bw.getWrappedInstance(), beanName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      if (pvsToUse == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         //â€¦â€¦â€¦â€¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>postProcessorPropertyValues()æ–¹æ³•çš„æºç å¦‚ä¸‹ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ï¼Œä¼šå…ˆè°ƒç”¨ findAutowiringMetadata()æ–¹æ³•è§£æå‡º bean ä¸­å¸¦æœ‰@Autowired æ³¨è§£ã€@Inject å’Œ@Value æ³¨è§£çš„å±æ€§å’Œæ–¹æ³•ã€‚ç„¶åè°ƒç”¨ metadata.inject()æ–¹æ³•ï¼Œè¿›è¡Œå±æ€§å¡«å……ã€‚</li>
</ul>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">  public PropertyValues postProcessProperties(PropertyValues pvs, Object bean, String beanName) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      //@Autowiredæ³¨è§£ã€@Injectå’Œ@Valueæ³¨è§£çš„å±æ€§å’Œæ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      InjectionMetadata metadata = this.findAutowiringMetadata(beanName, bean.getClass(), pvs);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          //å±æ€§å¡«å……</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          metadata.inject(bean, beanName, pvs);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          return pvs;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } catch (BeanCreationException var6) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          throw var6;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } catch (Throwable var7) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          throw new BeanCreationException(beanName, &quot;Injection of autowired dependencies failed&quot;, var7);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="aop">AOP<a href="#aop" class="hash-link" aria-label="Direct link to AOP" title="Direct link to AOP">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="19è¯´è¯´ä»€ä¹ˆæ˜¯-aop">19.è¯´è¯´ä»€ä¹ˆæ˜¯ AOPï¼Ÿ<a href="#19è¯´è¯´ä»€ä¹ˆæ˜¯-aop" class="hash-link" aria-label="Direct link to 19.è¯´è¯´ä»€ä¹ˆæ˜¯ AOPï¼Ÿ" title="Direct link to 19.è¯´è¯´ä»€ä¹ˆæ˜¯ AOPï¼Ÿ">â€‹</a></h3>
<p>AOPï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯æŠŠä¸€äº›ä¸šåŠ¡é€»è¾‘ä¸­çš„ç›¸åŒçš„ä»£ç æŠ½å–åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ä¸­ï¼Œè®©ä¸šåŠ¡é€»è¾‘æ›´åŠ æ¸…çˆ½ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-336-df631f34cf8e5c29fd7f8fbbf7a47083.png" width="729" height="459" class="img_kGBN"></p>
<p>å…·ä½“æ¥è¯´ï¼Œå‡å¦‚æˆ‘ç°åœ¨è¦ crud å†™ä¸€å †ä¸šåŠ¡ï¼Œå¯æ˜¯å¦‚ä½•ä¸šåŠ¡ä»£ç å‰åå‰åè¿›è¡Œæ‰“å°æ—¥å¿—å’Œå‚æ•°çš„æ ¡éªŒå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠ<code>æ—¥å¿—è®°å½•</code>å’Œ<code>æ•°æ®æ ¡éªŒ</code>å¯é‡ç”¨çš„åŠŸèƒ½æ¨¡å—åˆ†ç¦»å‡ºæ¥ï¼Œç„¶ååœ¨ç¨‹åºçš„æ‰§è¡Œçš„åˆé€‚çš„åœ°æ–¹åŠ¨æ€åœ°æ¤å…¥è¿™äº›ä»£ç å¹¶æ‰§è¡Œã€‚è¿™æ ·å°±ç®€åŒ–äº†ä»£ç çš„ä¹¦å†™ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-337-e5e4785cd04fbd8a445ec8c84a1eede5.png" width="306" height="330" class="img_kGBN"></p>
<p>ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­æ²¡æœ‰å‚å’Œé€šç”¨é€»è¾‘çš„ä»£ç ï¼Œä¸šåŠ¡æ¨¡å—æ›´ç®€æ´ï¼ŒåªåŒ…å«æ ¸å¿ƒä¸šåŠ¡ä»£ç ã€‚å®ç°äº†ä¸šåŠ¡é€»è¾‘å’Œé€šç”¨é€»è¾‘çš„ä»£ç åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤å’Œå‡çº§ï¼Œé™ä½äº†ä¸šåŠ¡é€»è¾‘å’Œé€šç”¨é€»è¾‘çš„è€¦åˆæ€§ã€‚</p>
<p>AOP å¯ä»¥å°†éå¸ƒåº”ç”¨å„å¤„çš„åŠŸèƒ½åˆ†ç¦»å‡ºæ¥å½¢æˆå¯é‡ç”¨çš„ç»„ä»¶ã€‚åœ¨ç¼–è¯‘æœŸé—´ã€è£…è½½æœŸé—´æˆ–è¿è¡ŒæœŸé—´å®ç°åœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹ç»™ç¨‹åºåŠ¨æ€æ·»åŠ åŠŸèƒ½ã€‚ä»è€Œå®ç°å¯¹ä¸šåŠ¡é€»è¾‘çš„éš”ç¦»ï¼Œæé«˜ä»£ç çš„æ¨¡å—åŒ–èƒ½åŠ›ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-338-accd1d12f4b8b412b99d05fd8e78a4d1.png" width="747" height="320" class="img_kGBN"></p>
<p>AOP çš„æ ¸å¿ƒå…¶å®å°±æ˜¯<strong>åŠ¨æ€ä»£ç†</strong>ï¼Œå¦‚æœæ˜¯å®ç°äº†æ¥å£çš„è¯å°±ä¼šä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œå¦åˆ™ä½¿ç”¨ CGLIB ä»£ç†ï¼Œä¸»è¦åº”ç”¨äºå¤„ç†ä¸€äº›å…·æœ‰æ¨ªåˆ‡æ€§è´¨çš„ç³»ç»Ÿçº§æœåŠ¡ï¼Œå¦‚æ—¥å¿—æ”¶é›†ã€äº‹åŠ¡ç®¡ç†ã€å®‰å…¨æ£€æŸ¥ã€ç¼“å­˜ã€å¯¹è±¡æ± ç®¡ç†ç­‰ã€‚</p>
<blockquote>
<p><strong>AOP æœ‰å“ªäº›æ ¸å¿ƒæ¦‚å¿µï¼Ÿ</strong></p>
</blockquote>
<ul>
<li>
<p><strong>åˆ‡é¢</strong>ï¼ˆAspectï¼‰ï¼šç±»æ˜¯å¯¹ç‰©ä½“ç‰¹å¾çš„æŠ½è±¡ï¼Œåˆ‡é¢å°±æ˜¯å¯¹æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æŠ½è±¡</p>
</li>
<li>
<p><strong>è¿æ¥ç‚¹</strong>ï¼ˆJoinpointï¼‰ï¼šè¢«æ‹¦æˆªåˆ°çš„ç‚¹ï¼Œå› ä¸º Spring åªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ï¼Œæ‰€ä»¥åœ¨ Spring ä¸­è¿æ¥ç‚¹æŒ‡çš„å°±æ˜¯è¢«æ‹¦æˆªåˆ°çš„æ–¹æ³•ï¼Œå®é™…ä¸Šè¿æ¥ç‚¹è¿˜å¯ä»¥æ˜¯å­—æ®µæˆ–è€…æ„é€ å™¨</p>
</li>
<li>
<p><strong>åˆ‡ç‚¹</strong>ï¼ˆPointcutï¼‰ï¼šå¯¹è¿æ¥ç‚¹è¿›è¡Œæ‹¦æˆªçš„å®šä½</p>
</li>
<li>
<p><strong>é€šçŸ¥</strong>ï¼ˆAdviceï¼‰ï¼šæ‰€è°“é€šçŸ¥æŒ‡çš„å°±æ˜¯æŒ‡æ‹¦æˆªåˆ°è¿æ¥ç‚¹ä¹‹åè¦æ‰§è¡Œçš„ä»£ç ï¼Œä¹Ÿå¯ä»¥ç§°ä½œ<strong>å¢å¼º</strong></p>
</li>
<li>
<p><strong>ç›®æ ‡å¯¹è±¡</strong> ï¼ˆTargetï¼‰ï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡</p>
</li>
<li>
<p><strong>ç»‡å…¥</strong>ï¼ˆWeabingï¼‰ï¼šç»‡å…¥æ˜¯å°†å¢å¼ºæ·»åŠ åˆ°ç›®æ ‡ç±»çš„å…·ä½“è¿æ¥ç‚¹ä¸Šçš„è¿‡ç¨‹ã€‚</p>
<ul>
<li>
<p>ç¼–è¯‘æœŸç»‡å…¥ï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»ç¼–è¯‘æ—¶è¢«ç»‡å…¥</p>
</li>
<li>
<p>ç±»åŠ è½½æœŸç»‡å…¥ï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»åŠ è½½åˆ° JVM æ—¶è¢«ç»‡å…¥ã€‚éœ€è¦ç‰¹æ®Šçš„ç±»åŠ è½½å™¨ï¼Œå®ƒå¯ä»¥åœ¨ç›®æ ‡ç±»è¢«å¼•å…¥åº”ç”¨ä¹‹å‰å¢å¼ºè¯¥ç›®æ ‡ç±»çš„å­—èŠ‚ç ã€‚</p>
</li>
<li>
<p>è¿è¡ŒæœŸç»‡å…¥ï¼šåˆ‡é¢åœ¨åº”ç”¨è¿è¡Œçš„æŸä¸ªæ—¶åˆ»è¢«ç»‡å…¥ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ç»‡å…¥åˆ‡é¢æ—¶ï¼ŒAOP å®¹å™¨ä¼šä¸ºç›®æ ‡å¯¹è±¡åŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚SpringAOP å°±æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ã€‚</p>
<p>Spring é‡‡ç”¨è¿è¡ŒæœŸç»‡å…¥ï¼Œè€Œ AspectJ é‡‡ç”¨ç¼–è¯‘æœŸç»‡å…¥å’Œç±»åŠ è½½å™¨ç»‡å…¥ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>å¼•ä»‹</strong>ï¼ˆintroductionï¼‰ï¼šå¼•ä»‹æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¢å¼ºï¼Œå¯ä»¥åŠ¨æ€åœ°ä¸ºç±»æ·»åŠ ä¸€äº›å±æ€§å’Œæ–¹æ³•</p>
</li>
</ul>
<blockquote>
<p><strong>AOP æœ‰å“ªäº›ç¯ç»•æ–¹å¼ï¼Ÿ</strong></p>
</blockquote>
<p>AOP ä¸€èˆ¬æœ‰ <strong>5 ç§</strong>ç¯ç»•æ–¹å¼ï¼š</p>
<ul>
<li>å‰ç½®é€šçŸ¥ (@Before)</li>
<li>è¿”å›é€šçŸ¥ (@AfterReturning)</li>
<li>å¼‚å¸¸é€šçŸ¥ (@AfterThrowing)</li>
<li>åç½®é€šçŸ¥ (@After)</li>
<li>ç¯ç»•é€šçŸ¥ (@Around)</li>
</ul>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-339-1ce0060fd7a28f39821332f8b1f22dbb.png" width="751" height="435" class="img_kGBN"></p>
<p>å¤šä¸ªåˆ‡é¢çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ @Order æŒ‡å®šå…ˆåé¡ºåºï¼Œæ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="20è¯´è¯´ä½ å¹³æ—¶æœ‰ç”¨åˆ°-aop-å—">20.è¯´è¯´ä½ å¹³æ—¶æœ‰ç”¨åˆ° AOP å—ï¼Ÿ<a href="#20è¯´è¯´ä½ å¹³æ—¶æœ‰ç”¨åˆ°-aop-å—" class="hash-link" aria-label="Direct link to 20.è¯´è¯´ä½ å¹³æ—¶æœ‰ç”¨åˆ° AOP å—ï¼Ÿ" title="Direct link to 20.è¯´è¯´ä½ å¹³æ—¶æœ‰ç”¨åˆ° AOP å—ï¼Ÿ">â€‹</a></h3>
<p>PSï¼šè¿™é“é¢˜è€ä¸‰çš„åŒäº‹é¢è¯•å€™é€‰äººçš„æ—¶å€™é—®åˆ°äº†ï¼Œå€™é€‰äººè¯´äº†ä¸€å † AOP åŸç†ï¼ŒåŒäº‹å°±åŠ¿æ¥ä¸€å¥ï¼Œä½ èƒ½ç°åœºå†™ä¸€ä¸‹ AOP çš„åº”ç”¨å—ï¼Ÿç»“æœâ€”â€”åœºé¢ä¸€åº¦å¾ˆå°´å°¬ã€‚è™½ç„¶æˆ‘å¯¹é¢è¯•å†™è¿™ç§ç™¾åº¦å°±èƒ½å‡ºæ¥çš„ä¸œè¥¿æŒä¿ç•™æ„è§ï¼Œä½†æ˜¯è¿˜æ˜¯åŠ ä¸Šäº†è¿™ä¸€é—®ï¼Œæ¯•ç«Ÿæ‹›äººæœ€åéƒ½æ˜¯è¦æ’¸ä»£ç çš„ã€‚</p>
<p>è¿™é‡Œç»™å‡ºä¸€ä¸ªå°ä¾‹å­ï¼ŒSpringBoot é¡¹ç›®ä¸­ï¼Œåˆ©ç”¨ AOP æ‰“å°æ¥å£çš„å…¥å‚å’Œå‡ºå‚æ—¥å¿—ï¼Œä»¥åŠæ‰§è¡Œæ—¶é—´ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¿«æ·çš„ã€‚</p>
<ul>
<li>
<p>å¼•å…¥ä¾èµ–ï¼šå¼•å…¥ AOP ä¾èµ–</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>è‡ªå®šä¹‰æ³¨è§£ï¼šè‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ä½œä¸ºåˆ‡ç‚¹</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@Retention(RetentionPolicy.RUNTIME)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Target({ElementType.METHOD})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Documented</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface WebLog {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>é…ç½® AOP åˆ‡é¢ï¼š</p>
<ul>
<li>
<p>@Aspectï¼šæ ‡è¯†åˆ‡é¢</p>
</li>
<li>
<p>@Pointcutï¼šè®¾ç½®åˆ‡ç‚¹ï¼Œè¿™é‡Œä»¥è‡ªå®šä¹‰æ³¨è§£ä¸ºåˆ‡ç‚¹ï¼Œå®šä¹‰åˆ‡ç‚¹æœ‰å¾ˆå¤šå…¶å®ƒç§æ–¹å¼ï¼Œè‡ªå®šä¹‰æ³¨è§£æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§ã€‚</p>
</li>
<li>
<p>@Beforeï¼šåœ¨åˆ‡ç‚¹ä¹‹å‰ç»‡å…¥ï¼Œæ‰“å°äº†ä¸€äº›å…¥å‚ä¿¡æ¯</p>
</li>
<li>
<p>@Aroundï¼šç¯ç»•åˆ‡ç‚¹ï¼Œæ‰“å°è¿”å›å‚æ•°å’Œæ¥å£æ‰§è¡Œæ—¶é—´</p>
</li>
</ul>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@Aspect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WebLogAspect {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final static Logger logger         = LoggerFactory.getLogger(WebLogAspect.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * ä»¥è‡ªå®šä¹‰ @WebLog æ³¨è§£ä¸ºåˆ‡ç‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     **/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Pointcut(&quot;@annotation(cn.fighter3.spring.aop_demo.WebLog)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void webLog() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * åœ¨åˆ‡ç‚¹ä¹‹å‰ç»‡å…¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Before(&quot;webLog()&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doBefore(JoinPoint joinPoint) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å¼€å§‹æ‰“å°è¯·æ±‚æ—¥å¿—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpServletRequest request = attributes.getRequest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ‰“å°è¯·æ±‚ç›¸å…³å‚æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;========================================== Start ==========================================&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ‰“å°è¯·æ±‚ url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;URL            : {}&quot;, request.getRequestURL().toString());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ‰“å° Http method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;HTTP Method    : {}&quot;, request.getMethod());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ‰“å°è°ƒç”¨ controller çš„å…¨è·¯å¾„ä»¥åŠæ‰§è¡Œæ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;Class Method   : {}.{}&quot;, joinPoint.getSignature().getDeclaringTypeName(), joinPoint.getSignature().getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ‰“å°è¯·æ±‚çš„ IP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;IP             : {}&quot;, request.getRemoteAddr());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ‰“å°è¯·æ±‚å…¥å‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;Request Args   : {}&quot;,new ObjectMapper().writeValueAsString(joinPoint.getArgs()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * åœ¨åˆ‡ç‚¹ä¹‹åç»‡å…¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @throws Throwable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @After(&quot;webLog()&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doAfter() throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ç»“æŸåæ‰“ä¸ªåˆ†éš”çº¿ï¼Œæ–¹ä¾¿æŸ¥çœ‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;=========================================== End ===========================================&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * ç¯ç»•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Around(&quot;webLog()&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object doAround(ProceedingJoinPoint proceedingJoinPoint) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //å¼€å§‹æ—¶é—´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        long startTime = System.currentTimeMillis();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object result = proceedingJoinPoint.proceed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ‰“å°å‡ºå‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;Response Args  : {}&quot;, new ObjectMapper().writeValueAsString(result));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ‰§è¡Œè€—æ—¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;Time-Consuming : {} ms&quot;, System.currentTimeMillis() - startTime);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>ä½¿ç”¨ï¼šåªéœ€è¦åœ¨æ¥å£ä¸ŠåŠ ä¸Šè‡ªå®šä¹‰æ³¨è§£</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/hello&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @WebLog(desc = &quot;è¿™æ˜¯ä¸€ä¸ªæ¬¢è¿æ¥å£&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String hello(String name){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;Hello &quot;+name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<ul>
<li>æ‰§è¡Œç»“æœï¼šå¯ä»¥çœ‹åˆ°æ—¥å¿—æ‰“å°äº†å…¥å‚ã€å‡ºå‚å’Œæ‰§è¡Œæ—¶é—´</li>
</ul>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-340-ced36c5b0c014a60b3d8d7a15bb1c803.png" width="1749" height="248" class="img_kGBN"></p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="21è¯´è¯´-jdk-åŠ¨æ€ä»£ç†å’Œ-cglib-ä»£ç†-">21.è¯´è¯´ JDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç† ï¼Ÿ<a href="#21è¯´è¯´-jdk-åŠ¨æ€ä»£ç†å’Œ-cglib-ä»£ç†-" class="hash-link" aria-label="Direct link to 21.è¯´è¯´ JDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç† ï¼Ÿ" title="Direct link to 21.è¯´è¯´ JDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç† ï¼Ÿ">â€‹</a></h3>
<p>Spring çš„ AOP æ˜¯é€šè¿‡<a href="https://mp.weixin.qq.com/s/aZtfwik0weJN5JzYc-JxYg" target="_blank" rel="noopener noreferrer">åŠ¨æ€ä»£ç†</a>æ¥å®ç°çš„ï¼ŒåŠ¨æ€ä»£ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ JDK åŠ¨æ€ä»£ç†å’Œ Cglib åŠ¨æ€ä»£ç†ï¼Œè¿™ä¸¤ç§åŠ¨æ€ä»£ç†çš„ä½¿ç”¨å’ŒåŸç†æœ‰äº›ä¸åŒã€‚</p>
<p><strong>JDK åŠ¨æ€ä»£ç†</strong></p>
<ol>
<li><strong>Interface</strong>ï¼šå¯¹äº JDK åŠ¨æ€ä»£ç†ï¼Œç›®æ ‡ç±»éœ€è¦å®ç°ä¸€ä¸ª Interfaceã€‚</li>
<li><strong>InvocationHandler</strong>ï¼šInvocationHandler æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥é€šè¿‡å®ç°è¿™ä¸ªæ¥å£ï¼Œå®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼Œå†é€šè¿‡åå°„æœºåˆ¶ï¼ˆinvokeï¼‰è°ƒç”¨ç›®æ ‡ç±»çš„ä»£ç ï¼Œåœ¨æ¬¡è¿‡ç¨‹ï¼Œå¯èƒ½åŒ…è£…é€»è¾‘ï¼Œå¯¹ç›®æ ‡æ–¹æ³•è¿›è¡Œå‰ç½®åç½®å¤„ç†ã€‚</li>
<li><strong>Proxy</strong>ï¼šProxy åˆ©ç”¨ InvocationHandler åŠ¨æ€åˆ›å»ºä¸€ä¸ªç¬¦åˆç›®æ ‡ç±»å®ç°çš„æ¥å£çš„å®ä¾‹ï¼Œç”Ÿæˆç›®æ ‡ç±»çš„ä»£ç†å¯¹è±¡ã€‚</li>
</ol>
<p><strong>CgLib åŠ¨æ€ä»£ç†</strong></p>
<ol>
<li>ä½¿ç”¨ JDK åˆ›å»ºä»£ç†æœ‰ä¸€å¤§é™åˆ¶ï¼Œå®ƒåªèƒ½ä¸ºæ¥å£åˆ›å»ºä»£ç†å®ä¾‹ï¼Œè€Œ CgLib åŠ¨æ€ä»£ç†å°±æ²¡æœ‰è¿™ä¸ªé™åˆ¶ã€‚</li>
<li>CgLib åŠ¨æ€ä»£ç†æ˜¯ä½¿ç”¨å­—èŠ‚ç å¤„ç†æ¡†æ¶ <strong>ASM</strong>ï¼Œå…¶åŸç†æ˜¯é€šè¿‡å­—èŠ‚ç æŠ€æœ¯ä¸ºä¸€ä¸ªç±»åˆ›å»ºå­ç±»ï¼Œå¹¶åœ¨å­ç±»ä¸­é‡‡ç”¨æ–¹æ³•æ‹¦æˆªçš„æŠ€æœ¯æ‹¦æˆªæ‰€æœ‰çˆ¶ç±»æ–¹æ³•çš„è°ƒç”¨ï¼Œé¡ºåŠ¿ç»‡å…¥æ¨ªåˆ‡é€»è¾‘ã€‚</li>
<li><strong>CgLib</strong> åˆ›å»ºçš„åŠ¨æ€ä»£ç†å¯¹è±¡æ€§èƒ½æ¯” JDK åˆ›å»ºçš„åŠ¨æ€ä»£ç†å¯¹è±¡çš„æ€§èƒ½é«˜ä¸å°‘ï¼Œä½†æ˜¯ CGLib åœ¨åˆ›å»ºä»£ç†å¯¹è±¡æ—¶æ‰€èŠ±è´¹çš„æ—¶é—´å´æ¯” JDK å¤šå¾—å¤šï¼Œæ‰€ä»¥å¯¹äºå•ä¾‹çš„å¯¹è±¡ï¼Œå› ä¸ºæ— éœ€é¢‘ç¹åˆ›å»ºå¯¹è±¡ï¼Œç”¨ CGLib åˆé€‚ï¼Œåä¹‹ï¼Œä½¿ç”¨ JDK æ–¹å¼è¦æ›´ä¸ºåˆé€‚ä¸€äº›ã€‚åŒæ—¶ï¼Œç”±äº CGLib ç”±äºæ˜¯é‡‡ç”¨åŠ¨æ€åˆ›å»ºå­ç±»çš„æ–¹æ³•ï¼Œå¯¹äº final æ–¹æ³•ï¼Œæ— æ³•è¿›è¡Œä»£ç†ã€‚</li>
</ol>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå¸¸è§çš„å°åœºæ™¯ï¼Œå®¢æœä¸­è½¬ï¼Œè§£å†³ç”¨æˆ·é—®é¢˜ï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-341-110a4282852473e7263076870a852e0a.png" width="1550" height="858" class="img_kGBN"></p>
<p><strong>JDK åŠ¨æ€ä»£ç†å®ç°ï¼š</strong></p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-342-4f2a99bc3fabe662ba3adfcb4086f599.png" width="1126" height="604" class="img_kGBN"></p>
<ul>
<li>
<p>æ¥å£</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public interface ISolver {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void solve();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>ç›®æ ‡ç±»:éœ€è¦å®ç°å¯¹åº”æ¥å£</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class Solver implements ISolver {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void solve() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ç–¯ç‹‚æ‰å¤´å‘è§£å†³é—®é¢˜â€¦â€¦&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>æ€ä»£ç†å·¥å‚<!-- -->:ProxyFactory<!-- -->ï¼Œç›´æ¥ç”¨åå°„æ–¹å¼ç”Ÿæˆä¸€ä¸ªç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œè¿™é‡Œç”¨äº†ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»æ–¹å¼é‡å†™ InvocationHandler æ–¹æ³•ï¼Œå®ç°æ¥å£é‡å†™ä¹Ÿå·®ä¸å¤š</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class ProxyFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç»´æŠ¤ä¸€ä¸ªç›®æ ‡å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Object target;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ProxyFactory(Object target) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.target = target;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ä¸ºç›®æ ‡å¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object getProxyInstance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Proxy.newProxyInstance(target.getClass().getClassLoader(), target.getClass().getInterfaces(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                new InvocationHandler() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        System.out.println(&quot;è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åˆ°æ‚¨ï¼Ÿ&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        // è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Object returnValue = method.invoke(target, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        System.out.println(&quot;é—®é¢˜å·²ç»è§£å†³å•¦ï¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>å®¢æˆ·ç«¯ï¼šClientï¼Œç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡å®ä¾‹ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class Client {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ç›®æ ‡å¯¹è±¡:ç¨‹åºå‘˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ISolver developer = new Solver();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä»£ç†ï¼šå®¢æœå°å§å§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ISolver csProxy = (ISolver) new ProxyFactory(developer).getProxyInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ç›®æ ‡æ–¹æ³•ï¼šè§£å†³é—®é¢˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        csProxy.solve();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p><strong>Cglib åŠ¨æ€ä»£ç†å®ç°ï¼š</strong></p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-343-5d58e7d2605ddd75cee9bd6ca2c905c0.png" width="1128" height="522" class="img_kGBN"></p>
<ul>
<li>
<p>ç›®æ ‡ç±»ï¼šSolverï¼Œè¿™é‡Œç›®æ ‡ç±»ä¸ç”¨å†å®ç°æ¥å£ã€‚</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class Solver {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void solve() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ç–¯ç‹‚æ‰å¤´å‘è§£å†³é—®é¢˜â€¦â€¦&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>åŠ¨æ€ä»£ç†å·¥å‚ï¼š</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class ProxyFactory implements MethodInterceptor {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   //ç»´æŠ¤ä¸€ä¸ªç›®æ ‡å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Object target;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ProxyFactory(Object target) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.target = target;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //ä¸ºç›®æ ‡å¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object getProxyInstance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //å·¥å…·ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Enhancer en = new Enhancer();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è®¾ç½®çˆ¶ç±»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        en.setSuperclass(target.getClass());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //è®¾ç½®å›è°ƒå‡½æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        en.setCallback(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //åˆ›å»ºå­ç±»å¯¹è±¡ä»£ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return en.create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åˆ°æ‚¨ï¼Ÿ&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ‰§è¡Œç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Object returnValue = method.invoke(target, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;é—®é¢˜å·²ç»è§£å†³å•¦ï¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>å®¢æˆ·ç«¯ï¼šClient</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class Client {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ç›®æ ‡å¯¹è±¡:ç¨‹åºå‘˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Solver developer = new Solver();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ä»£ç†ï¼šå®¢æœå°å§å§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Solver csProxy = (Solver) new ProxyFactory(developer).getProxyInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ç›®æ ‡æ–¹æ³•ï¼šè§£å†³é—®é¢˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        csProxy.solve();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="22è¯´è¯´-spring-aop-å’Œ-aspectj-aop-åŒºåˆ«">22.è¯´è¯´ Spring AOP å’Œ AspectJ AOP åŒºåˆ«?<a href="#22è¯´è¯´-spring-aop-å’Œ-aspectj-aop-åŒºåˆ«" class="hash-link" aria-label="Direct link to 22.è¯´è¯´ Spring AOP å’Œ AspectJ AOP åŒºåˆ«?" title="Direct link to 22.è¯´è¯´ Spring AOP å’Œ AspectJ AOP åŒºåˆ«?">â€‹</a></h3>
<p><strong>Spring AOP</strong></p>
<p>Spring AOP å±äº<code>è¿è¡Œæ—¶å¢å¼º</code>ï¼Œä¸»è¦å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li>
<p>åŸºäºåŠ¨æ€ä»£ç†æ¥å®ç°ï¼Œé»˜è®¤å¦‚æœä½¿ç”¨æ¥å£çš„ï¼Œç”¨ JDK æä¾›çš„åŠ¨æ€ä»£ç†å®ç°ï¼Œå¦‚æœæ˜¯æ–¹æ³•åˆ™ä½¿ç”¨ CGLIB å®ç°</p>
</li>
<li>
<p>Spring AOP éœ€è¦ä¾èµ– IOC å®¹å™¨æ¥ç®¡ç†ï¼Œå¹¶ä¸”åªèƒ½ä½œç”¨äº Spring å®¹å™¨ï¼Œä½¿ç”¨çº¯ Java ä»£ç å®ç°</p>
</li>
<li>
<p>åœ¨æ€§èƒ½ä¸Šï¼Œç”±äº Spring AOP æ˜¯åŸºäº<strong>åŠ¨æ€ä»£ç†</strong>æ¥å®ç°çš„ï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶éœ€è¦ç”Ÿæˆä»£ç†å®ä¾‹ï¼Œåœ¨æ–¹æ³•è°ƒç”¨ä¸Šä¹Ÿä¼šå¢åŠ æ ˆçš„æ·±åº¦ï¼Œä½¿å¾— Spring AOP çš„æ€§èƒ½ä¸å¦‚ AspectJ çš„é‚£ä¹ˆå¥½ã€‚</p>
</li>
<li>
<p>Spring AOP è‡´åŠ›äºè§£å†³ä¼ä¸šçº§å¼€å‘ä¸­æœ€æ™®éçš„ AOP(æ–¹æ³•ç»‡å…¥)ã€‚</p>
</li>
</ol>
<p><strong>AspectJ</strong></p>
<p>AspectJ æ˜¯ä¸€ä¸ªæ˜“ç”¨çš„åŠŸèƒ½å¼ºå¤§çš„ AOP æ¡†æ¶ï¼Œå±äº<code>ç¼–è¯‘æ—¶å¢å¼º</code>ï¼Œ å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æ•´åˆåˆ°å…¶å®ƒæ¡†æ¶ä¸­ï¼Œæ˜¯ AOP ç¼–ç¨‹çš„å®Œå…¨è§£å†³æ–¹æ¡ˆã€‚AspectJ éœ€è¦ç”¨åˆ°å•ç‹¬çš„ç¼–è¯‘å™¨ ajcã€‚</p>
<p>AspectJ å±äº<strong>é™æ€ç»‡å…¥</strong>ï¼Œé€šè¿‡ä¿®æ”¹ä»£ç æ¥å®ç°ï¼Œåœ¨å®é™…è¿è¡Œä¹‹å‰å°±å®Œæˆäº†ç»‡å…¥ï¼Œæ‰€ä»¥è¯´å®ƒç”Ÿæˆçš„ç±»æ˜¯æ²¡æœ‰é¢å¤–è¿è¡Œæ—¶å¼€é”€çš„ï¼Œä¸€èˆ¬æœ‰å¦‚ä¸‹å‡ ä¸ªç»‡å…¥çš„æ—¶æœºï¼š</p>
<ol>
<li>
<p>ç¼–è¯‘æœŸç»‡å…¥ï¼ˆCompile-time weavingï¼‰ï¼šå¦‚ç±» A ä½¿ç”¨ AspectJ æ·»åŠ äº†ä¸€ä¸ªå±æ€§ï¼Œç±» B å¼•ç”¨äº†å®ƒï¼Œè¿™ä¸ªåœºæ™¯å°±éœ€è¦ç¼–è¯‘æœŸçš„æ—¶å€™å°±è¿›è¡Œç»‡å…¥ï¼Œå¦åˆ™æ²¡æ³•ç¼–è¯‘ç±» Bã€‚</p>
</li>
<li>
<p>ç¼–è¯‘åç»‡å…¥ï¼ˆPost-compile weavingï¼‰ï¼šä¹Ÿå°±æ˜¯å·²ç»ç”Ÿæˆäº† .class æ–‡ä»¶ï¼Œæˆ–å·²ç»æ‰“æˆ jar åŒ…äº†ï¼Œè¿™ç§æƒ…å†µæˆ‘ä»¬éœ€è¦å¢å¼ºå¤„ç†çš„è¯ï¼Œå°±è¦ç”¨åˆ°ç¼–è¯‘åç»‡å…¥ã€‚</p>
</li>
<li>
<p>ç±»åŠ è½½åç»‡å…¥ï¼ˆLoad-time weavingï¼‰ï¼šæŒ‡çš„æ˜¯åœ¨åŠ è½½ç±»çš„æ—¶å€™è¿›è¡Œç»‡å…¥ï¼Œè¦å®ç°è¿™ä¸ªæ—¶æœŸçš„ç»‡å…¥ï¼Œæœ‰å‡ ç§å¸¸è§çš„æ–¹æ³•</p>
</li>
</ol>
<p>æ•´ä½“å¯¹æ¯”å¦‚ä¸‹ï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-344-caadaf22620ef704d0401198d4b10589.png" width="930" height="565" class="img_kGBN"></p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="äº‹åŠ¡">äº‹åŠ¡<a href="#äº‹åŠ¡" class="hash-link" aria-label="Direct link to äº‹åŠ¡" title="Direct link to äº‹åŠ¡">â€‹</a></h2>
<p>Spring äº‹åŠ¡çš„æœ¬è´¨å…¶å®å°±æ˜¯æ•°æ®åº“å¯¹äº‹åŠ¡çš„æ”¯æŒï¼Œæ²¡æœ‰æ•°æ®åº“çš„äº‹åŠ¡æ”¯æŒï¼ŒSpring æ˜¯æ— æ³•æä¾›äº‹åŠ¡åŠŸèƒ½çš„ã€‚Spring åªæä¾›ç»Ÿä¸€äº‹åŠ¡ç®¡ç†æ¥å£ï¼Œå…·ä½“å®ç°éƒ½æ˜¯ç”±å„æ•°æ®åº“è‡ªå·±å®ç°ï¼Œæ•°æ®åº“äº‹åŠ¡çš„æäº¤å’Œå›æ»šæ˜¯é€šè¿‡æ•°æ®åº“è‡ªå·±çš„äº‹åŠ¡æœºåˆ¶å®ç°ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="23spring-äº‹åŠ¡çš„ç§ç±»">23.Spring äº‹åŠ¡çš„ç§ç±»ï¼Ÿ<a href="#23spring-äº‹åŠ¡çš„ç§ç±»" class="hash-link" aria-label="Direct link to 23.Spring äº‹åŠ¡çš„ç§ç±»ï¼Ÿ" title="Direct link to 23.Spring äº‹åŠ¡çš„ç§ç±»ï¼Ÿ">â€‹</a></h3>
<p>Spring æ”¯æŒ<code>ç¼–ç¨‹å¼äº‹åŠ¡</code>ç®¡ç†å’Œ<code>å£°æ˜å¼</code>äº‹åŠ¡ç®¡ç†ä¸¤ç§æ–¹å¼ï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-345-895430493e16f12aa3e97f57979760f9.png" width="567" height="229" class="img_kGBN"></p>
<ol>
<li>ç¼–ç¨‹å¼äº‹åŠ¡</li>
</ol>
<p>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ä½¿ç”¨ TransactionTemplateï¼Œéœ€è¦æ˜¾å¼æ‰§è¡Œäº‹åŠ¡ã€‚</p>
<ol start="2">
<li>
<p>å£°æ˜å¼äº‹åŠ¡</p>
</li>
<li>
<p>å£°æ˜å¼äº‹åŠ¡ç®¡ç†å»ºç«‹åœ¨ AOP ä¹‹ä¸Šçš„ã€‚å…¶æœ¬è´¨æ˜¯é€šè¿‡ AOP åŠŸèƒ½ï¼Œå¯¹æ–¹æ³•å‰åè¿›è¡Œæ‹¦æˆªï¼Œå°†äº‹åŠ¡å¤„ç†çš„åŠŸèƒ½ç¼–ç»‡åˆ°æ‹¦æˆªçš„æ–¹æ³•ä¸­ï¼Œä¹Ÿå°±æ˜¯åœ¨ç›®æ ‡æ–¹æ³•å¼€å§‹ä¹‹å‰å¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨æ‰§è¡Œå®Œç›®æ ‡æ–¹æ³•ä¹‹åæ ¹æ®æ‰§è¡Œæƒ…å†µæäº¤æˆ–è€…å›æ»šäº‹åŠ¡</p>
</li>
<li>
<p>ä¼˜ç‚¹æ˜¯ä¸éœ€è¦åœ¨ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­æºæ‚äº‹åŠ¡ç®¡ç†çš„ä»£ç ï¼Œåªéœ€åœ¨é…ç½®æ–‡ä»¶ä¸­åšç›¸å…³çš„äº‹åŠ¡è§„åˆ™å£°æ˜æˆ–é€šè¿‡ @Transactional æ³¨è§£çš„æ–¹å¼ï¼Œä¾¿å¯ä»¥å°†äº‹åŠ¡è§„åˆ™åº”ç”¨åˆ°ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œå‡å°‘ä¸šåŠ¡ä»£ç çš„æ±¡æŸ“ã€‚å”¯ä¸€ä¸è¶³åœ°æ–¹æ˜¯ï¼Œæœ€ç»†ç²’åº¦åªèƒ½ä½œç”¨åˆ°æ–¹æ³•çº§åˆ«ï¼Œæ— æ³•åšåˆ°åƒç¼–ç¨‹å¼äº‹åŠ¡é‚£æ ·å¯ä»¥ä½œç”¨åˆ°ä»£ç å—çº§åˆ«ã€‚</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="24spring-çš„äº‹åŠ¡éš”ç¦»çº§åˆ«">24.Spring çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Ÿ<a href="#24spring-çš„äº‹åŠ¡éš”ç¦»çº§åˆ«" class="hash-link" aria-label="Direct link to 24.Spring çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Ÿ" title="Direct link to 24.Spring çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Ÿ">â€‹</a></h3>
<p>Spring çš„æ¥å£ TransactionDefinition ä¸­å®šä¹‰äº†è¡¨ç¤ºéš”ç¦»çº§åˆ«çš„å¸¸é‡ï¼Œå½“ç„¶å…¶å®ä¸»è¦è¿˜æ˜¯å¯¹åº”æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š</p>
<ol>
<li>ISOLATION_DEFAULTï¼šä½¿ç”¨åç«¯æ•°æ®åº“é»˜è®¤çš„éš”ç¦»ç•Œåˆ«ï¼ŒMySQL é»˜è®¤å¯é‡å¤è¯»ï¼ŒOracle é»˜è®¤è¯»å·²æäº¤ã€‚</li>
<li>ISOLATION_READ_UNCOMMITTEDï¼šè¯»æœªæäº¤</li>
<li>ISOLATION_READ_COMMITTEDï¼šè¯»å·²æäº¤</li>
<li>ISOLATION_REPEATABLE_READï¼šå¯é‡å¤è¯»</li>
<li>ISOLATION_SERIALIZABLEï¼šä¸²è¡ŒåŒ–</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="25spring-çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶">25.Spring çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼Ÿ<a href="#25spring-çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶" class="hash-link" aria-label="Direct link to 25.Spring çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼Ÿ" title="Direct link to 25.Spring çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼Ÿ">â€‹</a></h3>
<p>Spring äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶è¯´çš„æ˜¯ï¼Œå½“å¤šä¸ªäº‹åŠ¡åŒæ—¶å­˜åœ¨çš„æ—¶å€™â€”â€”ä¸€èˆ¬æŒ‡çš„æ˜¯å¤šä¸ªäº‹åŠ¡æ–¹æ³•ç›¸äº’è°ƒç”¨æ—¶ï¼ŒSpring å¦‚ä½•å¤„ç†è¿™äº›äº‹åŠ¡çš„è¡Œä¸ºã€‚</p>
<p>äº‹åŠ¡ä¼ æ’­æœºåˆ¶æ˜¯ä½¿ç”¨ç®€å•çš„ ThreadLocal å®ç°çš„ï¼Œæ‰€ä»¥ï¼Œå¦‚æœè°ƒç”¨çš„æ–¹æ³•æ˜¯åœ¨æ–°çº¿ç¨‹è°ƒç”¨çš„ï¼Œäº‹åŠ¡ä¼ æ’­å®é™…ä¸Šæ˜¯ä¼šå¤±æ•ˆçš„ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-346-e75be4dc1d2d21caf9cf957f896dc7ec.png" width="1568" height="908" class="img_kGBN"></p>
<p>Spring é»˜è®¤çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºæ˜¯ PROPAFATION_REQUIREDï¼Œå®ƒé€‚åˆç»å¤§å¤šæ•°æƒ…å†µï¼Œå¦‚æœå¤šä¸ª ServiceX#methodX()éƒ½å·¥ä½œåœ¨äº‹åŠ¡ç¯å¢ƒä¸‹ï¼ˆå‡è¢« Spring äº‹åŠ¡å¢å¼ºï¼‰ï¼Œä¸”ç¨‹åºä¸­å­˜åœ¨è°ƒç”¨é“¾ <code>Service1#method1()-&gt;Service2#method2()-&gt;Service3#method3()</code>ï¼Œé‚£ä¹ˆè¿™ 3 ä¸ªæœåŠ¡ç±»çš„ä¸‰ä¸ªæ–¹æ³•é€šè¿‡ Spring çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶éƒ½å·¥ä½œåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="26å£°æ˜å¼äº‹åŠ¡å®ç°åŸç†äº†è§£å—">26.å£°æ˜å¼äº‹åŠ¡å®ç°åŸç†äº†è§£å—ï¼Ÿ<a href="#26å£°æ˜å¼äº‹åŠ¡å®ç°åŸç†äº†è§£å—" class="hash-link" aria-label="Direct link to 26.å£°æ˜å¼äº‹åŠ¡å®ç°åŸç†äº†è§£å—ï¼Ÿ" title="Direct link to 26.å£°æ˜å¼äº‹åŠ¡å®ç°åŸç†äº†è§£å—ï¼Ÿ">â€‹</a></h3>
<p>å°±æ˜¯é€šè¿‡ AOP/åŠ¨æ€ä»£ç†ã€‚</p>
<ul>
<li>
<p><strong>åœ¨ Bean åˆå§‹åŒ–é˜¶æ®µåˆ›å»ºä»£ç†å¯¹è±¡</strong>ï¼šSpring å®¹å™¨åœ¨åˆå§‹åŒ–æ¯ä¸ªå•ä¾‹ bean çš„æ—¶å€™ï¼Œä¼šéå†å®¹å™¨ä¸­çš„æ‰€æœ‰ BeanPostProcessor å®ç°ç±»ï¼Œå¹¶æ‰§è¡Œå…¶ postProcessAfterInitialization æ–¹æ³•ï¼Œåœ¨æ‰§è¡Œ AbstractAutoProxyCreator ç±»çš„ postProcessAfterInitialization æ–¹æ³•æ—¶ä¼šéå†å®¹å™¨ä¸­æ‰€æœ‰çš„åˆ‡é¢ï¼ŒæŸ¥æ‰¾ä¸å½“å‰å®ä¾‹åŒ– bean åŒ¹é…çš„åˆ‡é¢ï¼Œè¿™é‡Œä¼šè·å–äº‹åŠ¡å±æ€§åˆ‡é¢ï¼ŒæŸ¥æ‰¾@Transactional æ³¨è§£åŠå…¶å±æ€§å€¼ï¼Œç„¶åæ ¹æ®å¾—åˆ°çš„åˆ‡é¢åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†åˆ›å»ºä»£ç†ï¼Œå¦‚æœç›®æ ‡ç±»æ˜¯æ¥å£ï¼Œåˆ™ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œå¦åˆ™ä½¿ç”¨ Cglibã€‚</p>
</li>
<li>
<p><strong>åœ¨æ‰§è¡Œç›®æ ‡æ–¹æ³•æ—¶è¿›è¡Œäº‹åŠ¡å¢å¼ºæ“ä½œ</strong>ï¼šå½“é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨ Bean æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šè§¦å‘å¯¹åº”çš„ AOP å¢å¼ºæ‹¦æˆªå™¨ï¼Œå£°æ˜å¼äº‹åŠ¡æ˜¯ä¸€ç§ç¯ç»•å¢å¼ºï¼Œå¯¹åº”æ¥å£ä¸º<code>MethodInterceptor</code>ï¼Œäº‹åŠ¡å¢å¼ºå¯¹è¯¥æ¥å£çš„å®ç°ä¸º<code>TransactionInterceptor</code>ï¼Œç±»å›¾å¦‚ä¸‹ï¼š</p>
</li>
</ul>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-347-44b9355a1a46cb2e2bd33d9791c7e801.png" width="720" height="283" class="img_kGBN"></p>
<p>äº‹åŠ¡æ‹¦æˆªå™¨<code>TransactionInterceptor</code>åœ¨<code>invoke</code>æ–¹æ³•ä¸­ï¼Œé€šè¿‡è°ƒç”¨çˆ¶ç±»<code>TransactionAspectSupport</code>çš„<code>invokeWithinTransaction</code>æ–¹æ³•è¿›è¡Œäº‹åŠ¡å¤„ç†ï¼ŒåŒ…æ‹¬å¼€å¯äº‹åŠ¡ã€äº‹åŠ¡æäº¤ã€å¼‚å¸¸å›æ»šã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="27å£°æ˜å¼äº‹åŠ¡åœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆ">27.å£°æ˜å¼äº‹åŠ¡åœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ<a href="#27å£°æ˜å¼äº‹åŠ¡åœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆ" class="hash-link" aria-label="Direct link to 27.å£°æ˜å¼äº‹åŠ¡åœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ" title="Direct link to 27.å£°æ˜å¼äº‹ åŠ¡åœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ">â€‹</a></h3>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-348-2f6fed56da43fcdd2e7259fef0cc4e4b.png" width="769" height="362" class="img_kGBN"></p>
<p><strong>1ã€@Transactional åº”ç”¨åœ¨é public ä¿®é¥°çš„æ–¹æ³•ä¸Š</strong></p>
<p>å¦‚æœ Transactional æ³¨è§£åº”ç”¨åœ¨é public ä¿®é¥°çš„æ–¹æ³•ä¸Šï¼ŒTransactional å°†ä¼šå¤±æ•ˆã€‚</p>
<p>æ˜¯å› ä¸ºåœ¨ Spring AOP ä»£ç†æ—¶ï¼ŒTransactionInterceptor ï¼ˆäº‹åŠ¡æ‹¦æˆªå™¨ï¼‰åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åè¿›è¡Œæ‹¦æˆªï¼ŒDynamicAdvisedInterceptorï¼ˆCglibAopProxy çš„å†…éƒ¨ç±»ï¼‰çš„ intercept æ–¹æ³• æˆ– JdkDynamicAopProxy çš„ invoke æ–¹æ³•ä¼šé—´æ¥è°ƒç”¨ AbstractFallbackTransactionAttributeSource çš„ <strong>computeTransactionAttribute</strong>æ–¹æ³•ï¼Œè·å– Transactional æ³¨è§£çš„äº‹åŠ¡é…ç½®ä¿¡æ¯ã€‚</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">protected TransactionAttribute computeTransactionAttribute(Method method,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Class&lt;?&gt; targetClass) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Don&#x27;t allow no-public methods as required.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (allowPublicMethodsOnly() &amp;&amp; !Modifier.isPublic(method.getModifiers())) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ­¤æ–¹æ³•ä¼šæ£€æŸ¥ç›®æ ‡æ–¹æ³•çš„ä¿®é¥°ç¬¦æ˜¯å¦ä¸º publicï¼Œä¸æ˜¯ public åˆ™ä¸ä¼šè·å–@Transactional çš„å±æ€§é…ç½®ä¿¡æ¯ã€‚</p>
<p><strong>2ã€@Transactional æ³¨è§£å±æ€§ propagation è®¾ç½®é”™è¯¯</strong></p>
<ul>
<li>TransactionDefinition.PROPAGATION_SUPPORTSï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä»¥éäº‹åŠ¡çš„æ–¹å¼ç»§ç»­è¿è¡Œã€‚</li>
<li>TransactionDefinition.PROPAGATION_NOT_SUPPORTEDï¼šä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li>
<li>TransactionDefinition.PROPAGATION_NEVERï¼šä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li>
</ul>
<p><strong>3ã€@Transactional æ³¨è§£å±æ€§ rollbackFor è®¾ç½®é”™è¯¯</strong></p>
<p>rollbackFor å¯ä»¥æŒ‡å®šèƒ½å¤Ÿè§¦å‘äº‹åŠ¡å›æ»šçš„å¼‚å¸¸ç±»å‹ã€‚Spring é»˜è®¤æŠ›å‡ºäº†æœªæ£€æŸ¥ unchecked å¼‚å¸¸ï¼ˆç»§æ‰¿è‡ª RuntimeException çš„å¼‚å¸¸ï¼‰æˆ–è€… Error æ‰å›æ»šäº‹åŠ¡ï¼Œå…¶ä»–å¼‚å¸¸ä¸ä¼šè§¦å‘å›æ»šäº‹åŠ¡ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-349-6eacb26dde1c40127dfcfd3c80de0ab3.png" width="1251" height="696" class="img_kGBN"></p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">// å¸Œæœ›è‡ªå®šä¹‰çš„å¼‚å¸¸å¯ä»¥è¿›è¡Œå›æ»š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Transactional(propagation= Propagation.REQUIRED,rollbackFor= MyException.class</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>è‹¥åœ¨ç›®æ ‡æ–¹æ³•ä¸­æŠ›å‡ºçš„å¼‚å¸¸æ˜¯ rollbackFor æŒ‡å®šçš„å¼‚å¸¸çš„å­ç±»ï¼Œäº‹åŠ¡åŒæ ·ä¼šå›æ»šã€‚</p>
<p><strong>4ã€åŒä¸€ä¸ªç±»ä¸­æ–¹æ³•è°ƒç”¨ï¼Œå¯¼è‡´@Transactional å¤±æ•ˆ</strong></p>
<p>å¼€å‘ä¸­é¿å…ä¸äº†ä¼šå¯¹åŒä¸€ä¸ªç±»é‡Œé¢çš„æ–¹æ³•è°ƒç”¨ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªç±» Testï¼Œå®ƒçš„ä¸€ä¸ªæ–¹æ³• Aï¼ŒA å†è°ƒç”¨æœ¬ç±»çš„æ–¹æ³• Bï¼ˆä¸è®ºæ–¹æ³• B æ˜¯ç”¨ public è¿˜æ˜¯ private ä¿®é¥°ï¼‰ï¼Œä½†æ–¹æ³• A æ²¡æœ‰å£°æ˜æ³¨è§£äº‹åŠ¡ï¼Œè€Œ B æ–¹æ³•æœ‰ã€‚åˆ™å¤–éƒ¨è°ƒç”¨æ–¹æ³• A ä¹‹åï¼Œæ–¹æ³• B çš„äº‹åŠ¡æ˜¯ä¸ä¼šèµ·ä½œç”¨çš„ã€‚è¿™ä¹Ÿæ˜¯ç»å¸¸çŠ¯é”™è¯¯çš„ä¸€ä¸ªåœ°æ–¹ã€‚</p>
<p>é‚£ä¸ºå•¥ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Ÿå…¶å®è¿™è¿˜æ˜¯ç”±äºä½¿ç”¨ Spring AOP ä»£ç†é€ æˆçš„ï¼Œå› ä¸ºåªæœ‰å½“äº‹åŠ¡æ–¹æ³•è¢«å½“å‰ç±»ä»¥å¤–çš„ä»£ç è°ƒç”¨æ—¶ï¼Œæ‰ä¼šç”± Spring ç”Ÿæˆçš„ä»£ç†å¯¹è±¡æ¥ç®¡ç†ã€‚</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> //@Transactional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     @GetMapping(&quot;/test&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     private Integer A() throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         CityInfoDict cityInfoDict = new CityInfoDict();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         cityInfoDict.setCityName(&quot;2&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          * B æ’å…¥å­—æ®µä¸º 3çš„æ•°æ®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         this.insertB();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * A æ’å…¥å­—æ®µä¸º 2çš„æ•°æ®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int insert = cityInfoDictMapper.insert(cityInfoDict);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return insert;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Transactional()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Integer insertB() throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CityInfoDict cityInfoDict = new CityInfoDict();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cityInfoDict.setCityName(&quot;3&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cityInfoDict.setParentCityId(3);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return cityInfoDictMapper.insert(cityInfoDict);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>è¿™ç§æƒ…å†µæ˜¯æœ€å¸¸è§çš„ä¸€ç§@Transactional æ³¨è§£å¤±æ•ˆåœºæ™¯</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@Transactional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private Integer A() throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int insert = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CityInfoDict cityInfoDict = new CityInfoDict();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cityInfoDict.setCityName(&quot;2&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cityInfoDict.setParentCityId(2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * A æ’å…¥å­—æ®µä¸º 2çš„æ•°æ®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        insert = cityInfoDictMapper.insert(cityInfoDict);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         * B æ’å…¥å­—æ®µä¸º 3çš„æ•°æ®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b.insertB();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœ B æ–¹æ³•å†…éƒ¨æŠ›äº†å¼‚å¸¸ï¼Œè€Œ A æ–¹æ³•æ­¤æ—¶ try catch äº† B æ–¹æ³•çš„å¼‚å¸¸ï¼Œé‚£è¿™ä¸ªäº‹åŠ¡å°±ä¸èƒ½æ­£å¸¸å›æ»šäº†ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼š</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="mvc">MVC<a href="#mvc" class="hash-link" aria-label="Direct link to MVC" title="Direct link to MVC">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="28spring-mvc-çš„æ ¸å¿ƒç»„ä»¶">28.Spring MVC çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ<a href="#28spring-mvc-çš„æ ¸å¿ƒç»„ä»¶" class="hash-link" aria-label="Direct link to 28.Spring MVC çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ" title="Direct link to 28.Spring MVC çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ">â€‹</a></h3>
<ol>
<li><strong>DispatcherServlet</strong>ï¼šå‰ç½®æ§åˆ¶å™¨ï¼Œæ˜¯æ•´ä¸ªæµç¨‹æ§åˆ¶çš„<strong>æ ¸å¿ƒ</strong>ï¼Œæ§åˆ¶å…¶ä»–ç»„ä»¶çš„æ‰§è¡Œï¼Œè¿›è¡Œç»Ÿä¸€è°ƒåº¦ï¼Œé™ä½ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ï¼Œç›¸å½“äºæ€»æŒ‡æŒ¥ã€‚</li>
<li><strong>Handler</strong>ï¼šå¤„ç†å™¨ï¼Œå®Œæˆå…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œç›¸å½“äº Servlet æˆ– Actionã€‚</li>
<li><strong>HandlerMapping</strong>ï¼šDispatcherServlet æ¥æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œé€šè¿‡ HandlerMapping å°†ä¸åŒçš„è¯·æ±‚æ˜ å°„åˆ°ä¸åŒçš„ Handlerã€‚</li>
<li><strong>HandlerInterceptor</strong>ï¼šå¤„ç†å™¨æ‹¦æˆªå™¨ï¼Œæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå¦‚æœéœ€è¦å®Œæˆä¸€äº›æ‹¦æˆªå¤„ç†ï¼Œå¯ä»¥å®ç°è¯¥æ¥å£ã€‚</li>
<li><strong>HandlerExecutionChain</strong>ï¼šå¤„ç†å™¨æ‰§è¡Œé“¾ï¼ŒåŒ…æ‹¬ä¸¤éƒ¨åˆ†å†…å®¹ï¼šHandler å’Œ HandlerInterceptorï¼ˆç³»ç»Ÿä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„ HandlerInterceptorï¼Œå¦‚æœéœ€è¦é¢å¤–è®¾ç½®æ‹¦æˆªï¼Œå¯ä»¥æ·»åŠ æ‹¦æˆªå™¨ï¼‰ã€‚</li>
<li><strong>HandlerAdapter</strong>ï¼šå¤„ç†å™¨é€‚é…å™¨ï¼ŒHandler æ‰§è¡Œä¸šåŠ¡æ–¹æ³•ä¹‹å‰ï¼Œéœ€è¦è¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼ŒåŒ…æ‹¬è¡¨å•æ•°æ®çš„éªŒè¯ã€æ•°æ®ç±»å‹çš„è½¬æ¢ã€å°†è¡¨å•æ•°æ®å°è£…åˆ° JavaBean ç­‰ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯ç”± HandlerApater æ¥å®Œæˆï¼Œå¼€å‘è€…åªéœ€å°†æ³¨æ„åŠ›é›†ä¸­ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ä¸Šï¼ŒDispatcherServlet é€šè¿‡ HandlerAdapter æ‰§è¡Œä¸åŒçš„ Handlerã€‚</li>
<li><strong>ModelAndView</strong>ï¼šè£…è½½äº†æ¨¡å‹æ•°æ®å’Œè§†å›¾ä¿¡æ¯ï¼Œä½œä¸º Handler çš„å¤„ç†ç»“æœï¼Œè¿”å›ç»™ DispatcherServletã€‚</li>
<li><strong>ViewResolver</strong>ï¼šè§†å›¾è§£æå™¨ï¼ŒDispatcheServlet é€šè¿‡å®ƒå°†é€»è¾‘è§†å›¾è§£æä¸ºç‰©ç†è§†å›¾ï¼Œæœ€ç»ˆå°†æ¸²æŸ“ç»“æœå“åº”ç»™å®¢æˆ·ç«¯ã€‚</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="29spring-mvc-çš„å·¥ä½œæµç¨‹">29.Spring MVC çš„å·¥ä½œæµç¨‹ï¼Ÿ<a href="#29spring-mvc-çš„å·¥ä½œæµç¨‹" class="hash-link" aria-label="Direct link to 29.Spring MVC çš„å·¥ä½œæµç¨‹ï¼Ÿ" title="Direct link to 29.Spring MVC çš„å·¥ä½œæµç¨‹ï¼Ÿ">â€‹</a></h3>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-350-d6832631293199de8216366877ac1bad.png" width="1100" height="589" class="img_kGBN"></p>
<ol>
<li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œè¿™ä¸ªè¯·æ±‚ä¼šå…ˆåˆ°å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet(ä¹Ÿå«ä¸­å¤®æ§åˆ¶å™¨)ã€‚</li>
<li>DispatcherServlet æ¥æ”¶åˆ°è¯·æ±‚åä¼šè°ƒç”¨ HandlerMapping å¤„ç†å™¨æ˜ å°„å™¨ã€‚ç”±æ­¤å¾—çŸ¥ï¼Œè¯¥è¯·æ±‚è¯¥ç”±å“ªä¸ª Controller æ¥å¤„ç†ï¼ˆå¹¶æœªè°ƒç”¨ Controllerï¼Œåªæ˜¯å¾—çŸ¥ï¼‰</li>
<li>DispatcherServlet è°ƒç”¨ HandlerAdapter å¤„ç†å™¨é€‚é…å™¨ï¼Œå‘Šè¯‰å¤„ç†å™¨é€‚é…å™¨åº”è¯¥è¦å»æ‰§è¡Œå“ªä¸ª Controller</li>
<li>HandlerAdapter å¤„ç†å™¨é€‚é…å™¨å»æ‰§è¡Œ Controller å¹¶å¾—åˆ° ModelAndView(æ•°æ®å’Œè§†å›¾)ï¼Œå¹¶å±‚å±‚è¿”å›ç»™ DispatcherServlet</li>
<li>DispatcherServlet å°† ModelAndView äº¤ç»™ ViewReslover è§†å›¾è§£æå™¨è§£æï¼Œç„¶åè¿”å›çœŸæ­£çš„è§†å›¾ã€‚</li>
<li>DispatcherServlet å°†æ¨¡å‹æ•°æ®å¡«å……åˆ°è§†å›¾ä¸­</li>
<li>DispatcherServlet å°†ç»“æœå“åº”ç»™å®¢æˆ·ç«¯</li>
</ol>
<p><strong>Spring MVC</strong> è™½ç„¶æ•´ä½“æµç¨‹å¤æ‚ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­å¾ˆç®€å•ï¼Œå¤§éƒ¨åˆ†çš„ç»„ä»¶ä¸éœ€è¦å¼€å‘äººå‘˜åˆ›å»ºå’Œç®¡ç†ï¼Œåªéœ€è¦é€šè¿‡é…ç½®æ–‡ä»¶çš„æ–¹å¼å®Œæˆé…ç½®å³å¯ï¼ŒçœŸæ­£éœ€è¦å¼€å‘äººå‘˜è¿›è¡Œå¤„ç†çš„åªæœ‰ <strong>Handlerï¼ˆControllerï¼‰</strong> ã€<strong>View</strong> ã€<strong>Model</strong>ã€‚</p>
<p>å½“ç„¶æˆ‘ä»¬ç°åœ¨å¤§éƒ¨åˆ†çš„å¼€å‘éƒ½æ˜¯å‰åç«¯åˆ†ç¦»ï¼ŒRestful é£æ ¼æ¥å£ï¼Œåç«¯åªéœ€è¦è¿”å› Json æ•°æ®å°±è¡Œäº†ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="30springmvc-restful-é£æ ¼çš„æ¥å£çš„æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢">30.SpringMVC Restful é£æ ¼  çš„æ¥å£çš„æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ<a href="#30springmvc-restful-é£æ ¼çš„æ¥å£çš„æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢" class="hash-link" aria-label="Direct link to 30.SpringMVC Restful é£æ ¼çš„æ¥å£çš„æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ" title="Direct link to 30.SpringMVC Restful é£æ ¼çš„æ¥å£çš„æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ">â€‹</a></h3>
<p>PS:è¿™æ˜¯ä¸€é“å…¨æ–°çš„å…«è‚¡ï¼Œæ¯•ç«Ÿ ModelAndView è¿™ç§æ–¹å¼åº”è¯¥æ²¡äººç”¨äº†å§ï¼Ÿç°åœ¨éƒ½æ˜¯å‰åç«¯åˆ†ç¦»æ¥å£ï¼Œå…«è‚¡ä¹Ÿè¯¥æ›´æ–°æ¢ä»£äº†ã€‚</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ Restful æ¥å£ï¼Œå“åº”æ ¼å¼æ˜¯ jsonï¼Œè¿™å°±ç”¨åˆ°äº†ä¸€ä¸ªå¸¸ç”¨æ³¨è§£ï¼š<strong>@ResponseBody</strong></p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/user&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ResponseBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public User user(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new User(1,&quot;å¼ ä¸‰&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>åŠ å…¥äº†è¿™ä¸ªæ³¨è§£åï¼Œæ•´ä½“çš„æµç¨‹ä¸Šå’Œä½¿ç”¨ ModelAndView å¤§ä½“ä¸Šç›¸åŒï¼Œä½†æ˜¯ç»†èŠ‚ä¸Šæœ‰ä¸€äº›ä¸åŒï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-351-120c72f2dd37dadb0fca567cee0d4869.png" width="3990" height="1671" class="img_kGBN"></p>
<ol>
<li>
<p>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œè¿™ä¸ªè¯·æ±‚ä¼šå…ˆåˆ°å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet</p>
</li>
<li>
<p>DispatcherServlet æ¥æ”¶åˆ°è¯·æ±‚åä¼šè°ƒç”¨ HandlerMapping å¤„ç†å™¨æ˜ å°„å™¨ã€‚ç”±æ­¤å¾—çŸ¥ï¼Œè¯¥è¯·æ±‚è¯¥ç”±å“ªä¸ª Controller æ¥å¤„ç†</p>
</li>
<li>
<p>DispatcherServlet è°ƒç”¨ HandlerAdapter å¤„ç†å™¨é€‚é…å™¨ï¼Œå‘Šè¯‰å¤„ç†å™¨é€‚é…å™¨åº”è¯¥è¦å»æ‰§è¡Œå“ªä¸ª Controller</p>
</li>
<li>
<p>Controller è¢«å°è£…æˆäº† ServletInvocableHandlerMethodï¼ŒHandlerAdapter å¤„ç†å™¨é€‚é…å™¨å»æ‰§è¡Œ invokeAndHandle æ–¹æ³•ï¼Œå®Œæˆå¯¹ Controller çš„è¯·æ±‚å¤„ç†</p>
</li>
<li>
<p>HandlerAdapter æ‰§è¡Œå®Œå¯¹ Controller çš„è¯·æ±‚ï¼Œä¼šè°ƒç”¨ HandlerMethodReturnValueHandler å»å¤„ç†è¿”å›å€¼ï¼Œä¸»è¦çš„è¿‡ç¨‹ï¼š</p>
<p>5.1. è°ƒç”¨ RequestResponseBodyMethodProcessorï¼Œåˆ›å»º ServletServerHttpResponseï¼ˆSpring å¯¹åŸç”Ÿ ServerHttpResponse çš„å°è£…ï¼‰å®ä¾‹</p>
<p>5.2.ä½¿ç”¨ HttpMessageConverter çš„ write æ–¹æ³•ï¼Œå°†è¿”å›å€¼å†™å…¥ ServletServerHttpResponse çš„ OutputStream è¾“å‡ºæµä¸­</p>
<p>5.3.åœ¨å†™å…¥çš„è¿‡ç¨‹ä¸­ï¼Œä¼šä½¿ç”¨ JsonGeneratorï¼ˆé»˜è®¤ä½¿ç”¨ Jackson æ¡†æ¶ï¼‰å¯¹è¿”å›å€¼è¿›è¡Œ Json åºåˆ—åŒ–</p>
</li>
<li>
<p>æ‰§è¡Œå®Œè¯·æ±‚åï¼Œè¿”å›çš„ ModealAndView ä¸º nullï¼ŒServletServerHttpResponse é‡Œä¹Ÿå·²ç»å†™å…¥äº†å“åº”ï¼Œæ‰€ä»¥ä¸ç”¨å…³å¿ƒ View çš„å¤„ç†</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="spring-boot">Spring Boot<a href="#spring-boot" class="hash-link" aria-label="Direct link to Spring Boot" title="Direct link to Spring Boot">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="31ä»‹ç»ä¸€ä¸‹-springbootæœ‰å“ªäº›ä¼˜ç‚¹">31.ä»‹ç»ä¸€ä¸‹ SpringBootï¼Œæœ‰å“ªäº›ä¼˜  ç‚¹ï¼Ÿ<a href="#31ä»‹ç»ä¸€ä¸‹-springbootæœ‰å“ªäº›ä¼˜ç‚¹" class="hash-link" aria-label="Direct link to 31.ä»‹ç»ä¸€ä¸‹ SpringBootï¼Œæœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ" title="Direct link to 31.ä»‹ç»ä¸€ä¸‹ SpringBootï¼Œæœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ">â€‹</a></h3>
<p>Spring Boot åŸºäº Spring å¼€å‘ï¼ŒSpirng Boot æœ¬èº«å¹¶ä¸æä¾› Spring æ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§ä»¥åŠæ‰©å±•åŠŸèƒ½ï¼Œåªæ˜¯ç”¨äºå¿«é€Ÿã€æ•æ·åœ°å¼€å‘æ–°ä¸€ä»£åŸºäº Spring æ¡†æ¶çš„åº”ç”¨ç¨‹åºã€‚å®ƒå¹¶ä¸æ˜¯ç”¨æ¥æ›¿ä»£ Spring çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯å’Œ Spring æ¡†æ¶ç´§å¯†ç»“åˆç”¨äºæå‡ Spring å¼€å‘è€…ä½“éªŒçš„å·¥å…·ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-352-15e59575197c87376c9531bc9bb95ccf.png" width="280" height="259" class="img_kGBN"></p>
<p>Spring Boot ä»¥<code>çº¦å®šå¤§äºé…ç½®</code>æ ¸å¿ƒæ€æƒ³å¼€å±•å·¥ä½œï¼Œç›¸æ¯” Spring å…·æœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š</p>
<ol>
<li>Spring Boot å¯ä»¥å¿«é€Ÿåˆ›å»ºç‹¬ç«‹çš„ Spring åº”ç”¨ç¨‹åºã€‚</li>
<li>Spring Boot å†…åµŒäº†å¦‚ Tomcatï¼ŒJetty å’Œ Undertow è¿™æ ·çš„å®¹å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥ç›´æ¥è·‘èµ·æ¥ï¼Œç”¨ä¸ç€å†åšéƒ¨ç½²å·¥ä½œäº†ã€‚</li>
<li>Spring Boot æ— éœ€å†åƒ Spring ä¸€æ ·ä½¿ç”¨ä¸€å †ç¹ççš„ xml æ–‡ä»¶é…ç½®ã€‚</li>
<li>Spring Boot å¯ä»¥è‡ªåŠ¨é…ç½®(æ ¸å¿ƒ)Springã€‚SpringBoot å°†åŸæœ‰çš„ XML é…ç½®æ”¹ä¸º Java é…ç½®ï¼Œå°† bean æ³¨å…¥æ”¹ä¸ºä½¿ç”¨æ³¨è§£æ³¨å…¥çš„æ–¹å¼(@Autowire)ï¼Œå¹¶å°†å¤šä¸ª xmlã€properties é…ç½®æµ“ç¼©åœ¨ä¸€ä¸ª appliaction.yml é…ç½®æ–‡ä»¶ä¸­ã€‚</li>
<li>Spring Boot æä¾›äº†ä¸€äº›ç°æœ‰çš„åŠŸèƒ½ï¼Œå¦‚é‡åº¦å·¥å…·ï¼Œè¡¨å•æ•°æ®éªŒè¯ä»¥åŠä¸€äº›å¤–éƒ¨é…ç½®è¿™æ ·çš„ä¸€äº›ç¬¬ä¸‰æ–¹åŠŸèƒ½ã€‚</li>
<li>Spring Boot å¯ä»¥å¿«é€Ÿæ•´åˆå¸¸ç”¨ä¾èµ–ï¼ˆå¼€å‘åº“ï¼Œä¾‹å¦‚ spring-webmvcã€jackson-jsonã€validation-api å’Œ tomcat ç­‰ï¼‰ï¼Œæä¾›çš„ POM å¯ä»¥ç®€åŒ– Maven çš„é…ç½®ã€‚å½“æˆ‘ä»¬å¼•å…¥æ ¸å¿ƒä¾èµ–æ—¶ï¼ŒSpringBoot ä¼šè‡ªå¼•å…¥å…¶ä»–ä¾èµ–ã€‚</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="32springboot-è‡ªåŠ¨é…ç½®åŸç†äº†è§£å—">32.SpringBoot è‡ªåŠ¨é…ç½®åŸç†äº†è§£å—ï¼Ÿ<a href="#32springboot-è‡ªåŠ¨é…ç½®åŸç†äº†è§£å—" class="hash-link" aria-label="Direct link to 32.SpringBoot è‡ªåŠ¨é…ç½®åŸç†äº†è§£å—ï¼Ÿ" title="Direct link to 32.SpringBoot è‡ªåŠ¨é…ç½®åŸç†äº†è§£å—ï¼Ÿ">â€‹</a></h3>
<p>SpringBoot å¼€å¯è‡ªåŠ¨é…ç½®çš„æ³¨è§£æ˜¯<code>@EnableAutoConfiguration</code> ï¼Œå¯åŠ¨ç±»ä¸Šçš„æ³¨è§£<code>@SpringBootApplication</code>æ˜¯ä¸€ä¸ªå¤åˆæ³¨è§£ï¼ŒåŒ…å«äº†@EnableAutoConfigurationï¼š</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-353-76de2542f7ff1276afdac2ba69da5609.png" width="1175" height="395" class="img_kGBN"></p>
<ul>
<li>
<p><code>EnableAutoConfiguration</code> åªæ˜¯ä¸€ä¸ªç®€å•çš„æ³¨è§£ï¼Œè‡ªåŠ¨è£…é…æ ¸å¿ƒåŠŸèƒ½çš„å®ç°å®é™…æ˜¯é€šè¿‡ <code>AutoConfigurationImportSelector</code>ç±»</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@AutoConfigurationPackage //å°†mainåŒçº§çš„åŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶æ³¨å†Œåˆ°å®¹å™¨ä¸­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Import({AutoConfigurationImportSelector.class}) //åŠ è½½è‡ªåŠ¨è£…é…ç±» xxxAutoconfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface EnableAutoConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String ENABLED_OVERRIDE_PROPERTY = &quot;spring.boot.enableautoconfiguration&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Class&lt;?&gt;[] exclude() default {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String[] excludeName() default {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><code>AutoConfigurationImportSelector</code>å®ç°äº†<code>ImportSelector</code>æ¥å£ï¼Œè¿™ä¸ªæ¥å£çš„ä½œç”¨å°±æ˜¯æ”¶é›†éœ€è¦å¯¼å…¥çš„é…ç½®ç±»ï¼Œé…åˆ<code>@Import(ï¼‰</code>å°±å¯ä»¥å°†ç›¸åº”çš„ç±»å¯¼å…¥åˆ° Spring å®¹å™¨ä¸­</p>
</li>
<li>
<p>è·å–æ³¨å…¥ç±»çš„æ–¹æ³•æ˜¯ selectImports()ï¼Œå®ƒå®é™…è°ƒç”¨çš„æ˜¯<code>getAutoConfigurationEntry</code>ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯è·å–è‡ªåŠ¨è£…é…ç±»çš„å…³é”®ï¼Œä¸»è¦æµç¨‹å¯ä»¥åˆ†ä¸ºè¿™ä¹ˆå‡ æ­¥ï¼š</p>
<ol>
<li>è·å–æ³¨è§£çš„å±æ€§ï¼Œç”¨äºåé¢çš„æ’é™¤</li>
<li><strong>è·å–æ‰€æœ‰éœ€è¦è‡ªåŠ¨è£…é…çš„é…ç½®ç±»çš„è·¯å¾„</strong>ï¼šè¿™ä¸€æ­¥æ˜¯æœ€å…³é”®çš„ï¼Œä» META-INF/spring.factories è·å–è‡ªåŠ¨é…ç½®ç±»çš„è·¯å¾„</li>
<li>å»æ‰é‡å¤çš„é…ç½®ç±»å’Œéœ€è¦æ’é™¤çš„é‡å¤ç±»ï¼ŒæŠŠéœ€è¦è‡ªåŠ¨åŠ è½½çš„é…ç½®ç±»çš„è·¯å¾„å­˜å‚¨èµ·æ¥</li>
</ol>
</li>
</ul>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">    protected AutoConfigurationImportSelector.AutoConfigurationEntry getAutoConfigurationEntry(AnnotationMetadata annotationMetadata) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (!this.isEnabled(annotationMetadata)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return EMPTY_ENTRY;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //1.è·å–åˆ°æ³¨è§£çš„å±æ€§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            AnnotationAttributes attributes = this.getAttributes(annotationMetadata);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //2.è·å–éœ€è¦è‡ªåŠ¨è£…é…çš„æ‰€æœ‰é…ç½®ç±»ï¼Œè¯»å–META-INF/spring.factoriesï¼Œè·å–è‡ªåŠ¨é…ç½®ç±»è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            List&lt;String&gt; configurations = this.getCandidateConfigurations(annotationMetadata, attributes);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //3.1.ç§»é™¤é‡å¤çš„é…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            configurations = this.removeDuplicates(configurations);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //3.2.å¤„ç†éœ€è¦æ’é™¤çš„é…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Set&lt;String&gt; exclusions = this.getExclusions(annotationMetadata, attributes);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.checkExcludedClasses(configurations, exclusions);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            configurations.removeAll(exclusions);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            configurations = this.getConfigurationClassFilter().filter(configurations);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.fireAutoConfigurationImportEvents(configurations, exclusions);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new AutoConfigurationImportSelector.AutoConfigurationEntry(configurations, exclusions);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="33å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª-springboot-srarter">33.å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª SpringBoot Srarter?<a href="#33å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª-springboot-srarter" class="hash-link" aria-label="Direct link to 33.å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª SpringBoot Srarter?" title="Direct link to 33.å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª SpringBoot Srarter?">â€‹</a></h3>
<p>çŸ¥é“äº†è‡ªåŠ¨é…ç½®åŸç†ï¼Œåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ SpringBoot Starter ä¹Ÿå¾ˆç®€å•ã€‚</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå‘½åä¸º demo-spring-boot-starterï¼Œå¼•å…¥ SpringBoot ç›¸å…³ä¾èµ–</li>
</ol>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;optional&gt;true&lt;/optional&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>
<p>ç¼–å†™é…ç½®æ–‡ä»¶</p>
<p>è¿™é‡Œå®šä¹‰äº†å±æ€§é…ç½®çš„å‰ç¼€</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@ConfigurationProperties(prefix = &quot;hello&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloProperties {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //çœç•¥getterã€setter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>è‡ª åŠ¨è£…é…</p>
<p>åˆ›å»ºè‡ªåŠ¨é…ç½®ç±» HelloPropertiesConfigure</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableConfigurationProperties(HelloProperties.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloPropertiesConfigure {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>é…ç½®è‡ªåŠ¨ç±»</p>
<p>åœ¨<code>/resources/META-INF/spring.factories</code>æ–‡ä»¶ä¸­æ·»åŠ è‡ªåŠ¨é…ç½®ç±»è·¯å¾„</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cn.fighter3.demo.starter.configure.HelloPropertiesConfigure</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>æµ‹è¯•</p>
<ul>
<li>
<p>åˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œå¼•å…¥è‡ªå®šä¹‰ starter ä¾èµ–</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;cn.fighter3&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;artifactId&gt;demo-spring-boot-starter&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>åœ¨é…ç½®æ–‡ä»¶é‡Œæ·»åŠ é…ç½®</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">hello.name=å¼ ä¸‰</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>æµ‹è¯•ç±»</p>
<div class="language-java codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-java codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(SpringRunner.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HelloProperties helloProperties;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void hello(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;ä½ å¥½ï¼Œ&quot;+helloProperties.getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
</ol>
<ul>
<li>è¿è¡Œç»“æœ</li>
</ul>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-354-dee2e2c6ede9c4e6d7808f8e3df3df4f.png" width="410" height="151" class="img_kGBN"></p>
<p>è‡³æ­¤ï¼Œéšæ‰‹å†™çš„ä¸€ä¸ªè‡ªå®šä¹‰ SpringBoot-Starter å°±å®Œæˆäº†ï¼Œè™½ç„¶æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å®Œæˆäº†ä¸»è¦çš„è‡ªåŠ¨è£…é…çš„èƒ½åŠ›ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="34springboot-å¯åŠ¨åŸç†">34.Springboot å¯åŠ¨åŸç†ï¼Ÿ<a href="#34springboot-å¯åŠ¨åŸç†" class="hash-link" aria-label="Direct link to 34.Springboot å¯åŠ¨åŸç†ï¼Ÿ" title="Direct link to 34.Springboot å¯åŠ¨åŸç†ï¼Ÿ">â€‹</a></h3>
<p>SpringApplication è¿™ä¸ªç±»ä¸»è¦åšäº†ä»¥ä¸‹å››ä»¶äº‹æƒ…ï¼š</p>
<ol>
<li>æ¨æ–­åº”ç”¨çš„ç±»å‹æ˜¯æ™®é€šçš„é¡¹ç›®è¿˜æ˜¯ Web é¡¹ç›®</li>
<li>æŸ¥æ‰¾å¹¶åŠ è½½æ‰€æœ‰å¯ç”¨åˆå§‹åŒ–å™¨ ï¼Œ è®¾ç½®åˆ° initializers å±æ€§ä¸­</li>
<li>æ‰¾å‡ºæ‰€æœ‰çš„åº”ç”¨ç¨‹åºç›‘å¬å™¨ï¼Œè®¾ç½®åˆ° listeners å±æ€§ä¸­</li>
<li>æ¨æ–­å¹¶è®¾ç½® main æ–¹æ³•çš„å®šä¹‰ç±»ï¼Œæ‰¾åˆ°è¿è¡Œçš„ä¸»ç±»</li>
</ol>
<p>SpringBoot å¯åŠ¨å¤§è‡´æµç¨‹å¦‚ä¸‹ ï¼š
(assets/image-355.png)</p>
<h2 class="anchor anchorWithStickyNavbar_HWLp" id="spring-cloud">Spring Cloud<a href="#spring-cloud" class="hash-link" aria-label="Direct link to Spring Cloud" title="Direct link to Spring Cloud">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="35å¯¹-springcloud-äº†è§£å¤šå°‘">35.å¯¹ SpringCloud äº†è§£å¤šå°‘ï¼Ÿ<a href="#35å¯¹-springcloud-äº†è§£å¤šå°‘" class="hash-link" aria-label="Direct link to 35.å¯¹ SpringCloud äº†è§£å¤šå°‘ï¼Ÿ" title="Direct link to 35.å¯¹ SpringCloud äº†è§£å¤šå°‘ï¼Ÿ">â€‹</a></h3>
<p>SpringCloud æ˜¯ Spring å®˜æ–¹æ¨å‡ºçš„å¾®æœåŠ¡æ²»ç†æ¡†æ¶ã€‚</p>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-356-e3601097079e38931fca3fc799333de0.png" width="1080" height="594" class="img_kGBN"></p>
<blockquote>
<p><strong>ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</strong></p>
</blockquote>
<ol>
<li>2014 å¹´ <strong>Martin Fowler</strong> æå‡ºçš„ä¸€ç§æ–°çš„æ¶æ„å½¢å¼ã€‚å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§<strong>æ¶æ„æ¨¡å¼</strong>ï¼Œæå€¡å°†å•ä¸€åº”ç”¨ç¨‹åºåˆ’åˆ†æˆä¸€ç»„å°çš„æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´ç›¸äº’åè°ƒï¼Œäº’ç›¸é…åˆï¼Œä¸ºç”¨æˆ·æä¾›æœ€ç»ˆä»·å€¼ã€‚æ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨å…¶ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡æœºåˆ¶(å¦‚ HTTP æˆ– Dubbo)äº’ç›¸åä½œï¼Œæ¯ä¸ªæœåŠ¡éƒ½å›´ç»•ç€å…·ä½“çš„ä¸šåŠ¡  è¿›è¡Œæ„å»ºï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«ç‹¬ç«‹çš„éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦å¤–ï¼Œåº”å°½é‡é¿å…ç»Ÿä¸€çš„ï¼Œé›†ä¸­å¼çš„æœåŠ¡ç®¡ç†æœºåˆ¶ï¼Œå¯¹å…·ä½“çš„ä¸€ä¸ªæœåŠ¡è€Œè¨€ï¼Œåº”æ ¹æ®ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼Œé€‰æ‹©åˆé€‚çš„è¯­è¨€ã€å·¥å…·(å¦‚ Maven)å¯¹å…¶è¿›è¡Œæ„å»ºã€‚</li>
<li>å¾®æœåŠ¡åŒ–çš„æ ¸å¿ƒå°±æ˜¯å°†ä¼ ç»Ÿçš„ä¸€ç«™å¼åº”ç”¨ï¼Œæ ¹æ®ä¸šåŠ¡æ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„æœåŠ¡ï¼Œå½»åº•åœ°å»è€¦åˆï¼Œæ¯ä¸€ä¸ªå¾®æœåŠ¡æä¾›å•ä¸ªä¸šåŠ¡åŠŸèƒ½çš„æœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡åšä¸€ä»¶äº‹æƒ…ï¼Œä»æŠ€æœ¯è§’åº¦çœ‹å°±æ˜¯ä¸€ç§å°è€Œç‹¬ç«‹çš„å¤„ç†è¿‡ç¨‹ï¼Œç±»ä¼¼è¿›ç¨‹çš„æ¦‚å¿µï¼Œèƒ½å¤Ÿè‡ªè¡Œå•ç‹¬å¯åŠ¨æˆ–é”€æ¯ï¼Œæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“ã€‚</li>
</ol>
<blockquote>
<p><strong>å¾®æœåŠ¡æ¶æ„ä¸»è¦è¦è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ</strong></p>
</blockquote>
<ol>
<li>æœåŠ¡å¾ˆå¤šï¼Œå®¢æˆ·ç«¯æ€ä¹ˆè®¿é—®ï¼Œå¦‚ä½•æä¾›å¯¹å¤–ç½‘å…³?</li>
<li>è¿™ä¹ˆå¤šæœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡? HTTP è¿˜æ˜¯ RPC?</li>
<li>è¿™ä¹ˆå¤šæœåŠ¡ï¼Œå¦‚ä½•æ²»ç†? æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°ã€‚</li>
<li>æœåŠ¡æŒ‚äº†æ€ä¹ˆåŠï¼Ÿç†”æ–­æœºåˆ¶ã€‚</li>
</ol>
<blockquote>
<p><strong>æœ‰å“ªäº›ä¸»æµå¾®æœåŠ¡æ¡†æ¶ï¼Ÿ</strong></p>
</blockquote>
<ol>
<li>Spring Cloud Netflix</li>
<li>Spring Cloud Alibaba</li>
<li>SpringBoot + Dubbo + ZooKeeper</li>
</ol>
<blockquote>
<p><strong>SpringCloud æœ‰å“ªäº›æ ¸å¿ƒç»„ä»¶ï¼Ÿ</strong></p>
</blockquote>
<p><img loading="lazy" alt="Alt text" src="/code-note-blog/assets/images/image-357-751eb8acae18951c6880350065363c50.png" width="2776" height="3368" class="img_kGBN"></p>
<p>PS:å¾®æœåŠ¡åé¢æœ‰æœºä¼šå†æ‰©å±•ï¼Œå…¶å®é¢è¯•ä¸€èˆ¬éƒ½æ˜¯ç»“åˆé¡¹ç›®å»é—®ã€‚</p>
<hr>
<p><em>æ²¡æœ‰ä»€ä¹ˆä½¿æˆ‘åœç•™â€”â€”é™¤äº†ç›®çš„ï¼Œçºµç„¶å²¸æ—æœ‰ç«ç‘°ã€æœ‰ç»¿è«ã€æœ‰å®é™çš„æ¸¯æ¹¾ï¼Œæˆ‘æ˜¯ä¸ç³»ä¹‹èˆŸ</em>ã€‚</p>
<p><strong>ç³»åˆ—å†…å®¹</strong>ï¼š</p>
<hr>
<p><em>æ²¡æœ‰ä»€ä¹ˆä½¿æˆ‘åœç•™â€”â€”é™¤äº†ç›®çš„ï¼Œçºµç„¶å²¸æ—æœ‰ç«ç‘°ã€æœ‰ç»¿è«ã€æœ‰å®é™çš„æ¸¯æ¹¾ï¼Œæˆ‘æ˜¯ä¸ç³»ä¹‹èˆŸ</em>ã€‚</p>
<p><strong>ç³»åˆ—å†…å®¹</strong>ï¼š</p>
<ul>
<li><a href="/code-note-blog/docs/mianshi/javase">é¢æ¸£é€†è¢­ Java SE ç¯‡ğŸ‘</a></li>
<li><a href="/code-note-blog/docs/mianshi/javathread">é¢æ¸£é€†è¢­ Java é›†åˆæ¡†æ¶ç¯‡ğŸ‘</a></li>
<li><a href="/code-note-blog/docs/mianshi/collection">é¢æ¸£é€†è¢­ Java å¹¶å‘ç¼–ç¨‹ç¯‡ğŸ‘</a></li>
<li><a href="/code-note-blog/docs/mianshi/jvm">é¢æ¸£é€†è¢­ JVM ç¯‡ğŸ‘</a></li>
<li><a href="/code-note-blog/docs/mianshi/spring">é¢æ¸£é€†è¢­ Spring ç¯‡ğŸ‘</a></li>
<li><a href="/code-note-blog/docs/mianshi/redis">é¢æ¸£é€†è¢­ Redis ç¯‡ğŸ‘</a></li>
<li><a href="/code-note-blog/docs/mianshi/mybatis">é¢æ¸£é€†è¢­ MyBatis ç¯‡ğŸ‘</a></li>
<li><a href="/code-note-blog/docs/mianshi/mysql">é¢æ¸£é€†è¢­ MySQL ç¯‡ğŸ‘</a></li>
<li><a href="/code-note-blog/docs/mianshi/os">é¢æ¸£é€†è¢­æ“ä½œç³»ç»Ÿç¯‡ğŸ‘</a></li>
<li><a href="/code-note-blog/docs/mianshi/network">é¢æ¸£é€†è¢­è®¡ç®—æœºç½‘ç»œç¯‡ğŸ‘</a></li>
<li><a href="/code-note-blog/docs/mianshi/rocketmq">é¢æ¸£é€†è¢­RocketMQç¯‡ğŸ‘</a></li>
<li><a href="/code-note-blog/docs/mianshi/fenbushi">é¢æ¸£é€†è¢­åˆ†å¸ƒå¼ç¯‡ğŸ‘</a></li>
<li><a href="/code-note-blog/docs/mianshi/weifuwu">é¢æ¸£é€†è¢­å¾®æœåŠ¡ç¯‡ğŸ‘</a></li>
</ul>
<hr>
<blockquote>
<p>å›¾æ–‡è¯¦è§£ 35 é“Springé¢è¯•é«˜é¢‘é¢˜ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚æ•´ç†ï¼šæ²‰é»˜ç‹äºŒï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/EQge6DmgIqYITM3mAxkatg" target="_blank" rel="noopener noreferrer">è½¬è½½é“¾æ¥</a>ï¼Œä½œè€…ï¼šä¸‰åˆ†æ¶ï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/Y17S85ntHm_MLTZMJdtjQQ" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a>ã€‚</p>
</blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/mianshi/spring.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_EYjg" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_eevz"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/code-note-blog/docs/mianshi/rocketmq"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">RocketMQ</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/code-note-blog/docs/mianshi/weifuwu"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">å¾®æœåŠ¡</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_lc2k thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#åŸºç¡€" class="table-of-contents__link toc-highlight">åŸºç¡€</a><ul><li><a href="#1spring-æ˜¯ä»€ä¹ˆç‰¹æ€§æœ‰å“ªäº›æ¨¡å—" class="table-of-contents__link toc-highlight">1.Spring æ˜¯ä»€ä¹ˆï¼Ÿç‰¹æ€§ï¼Ÿæœ‰å“ªäº›æ¨¡å—ï¼Ÿ</a></li><li><a href="#2spring-æœ‰å“ªäº›æ¨¡å—å‘¢" class="table-of-contents__link toc-highlight">2.Spring æœ‰å“ªäº›æ¨¡å—å‘¢ï¼Ÿ</a></li><li><a href="#3spring-æœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢" class="table-of-contents__link toc-highlight">3.Spring æœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢ï¼Ÿ</a></li><li><a href="#4spring-ä¸­åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼å‘¢" class="table-of-contents__link toc-highlight">4.Spring ä¸­åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼å‘¢ï¼Ÿ</a></li></ul></li><li><a href="#ioc" class="table-of-contents__link toc-highlight">IOC</a><ul><li><a href="#5è¯´ä¸€è¯´ä»€ä¹ˆæ˜¯-iocä»€ä¹ˆæ˜¯-di" class="table-of-contents__link toc-highlight">5.è¯´ä¸€è¯´ä»€ä¹ˆæ˜¯ IOCï¼Ÿä»€ä¹ˆæ˜¯ DI?</a></li><li><a href="#6èƒ½ç®€å•è¯´ä¸€ä¸‹-spring-ioc-çš„å®ç°æœºåˆ¶å—" class="table-of-contents__link toc-highlight">6.èƒ½ç®€å•è¯´ä¸€ä¸‹ Spring IOC çš„å®ç°æœºåˆ¶å—ï¼Ÿ</a></li><li><a href="#7è¯´è¯´-beanfactory-å’Œ-applicantcontext" class="table-of-contents__link toc-highlight">7.è¯´è¯´ BeanFactory å’Œ ApplicantContext?</a></li><li><a href="#8ä½ çŸ¥é“-spring-å®¹å™¨  å¯åŠ¨é˜¶æ®µä¼šå¹²ä»€ä¹ˆå—" class="table-of-contents__link toc-highlight">8.ä½ çŸ¥é“ Spring å®¹å™¨å¯åŠ¨é˜¶æ®µä¼šå¹²ä»€ä¹ˆå—ï¼Ÿ</a></li><li><a href="#9èƒ½è¯´ä¸€ä¸‹-spring-bean-ç”Ÿå‘½å‘¨æœŸå—" class="table-of-contents__link toc-highlight">9.èƒ½è¯´ä¸€ä¸‹ Spring Bean ç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ</a></li><li><a href="#10bean-å®šä¹‰å’Œä¾èµ–å®šä¹‰æœ‰å“ªäº›æ–¹å¼" class="table-of-contents__link toc-highlight">10.Bean å®šä¹‰å’Œä¾èµ–å®šä¹‰æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</a></li><li><a href="#11æœ‰å“ªäº›ä¾èµ–æ³¨å…¥çš„æ–¹æ³•" class="table-of-contents__link toc-highlight">11.æœ‰å“ªäº›ä¾èµ–æ³¨å…¥çš„æ–¹æ³•ï¼Ÿ</a></li><li><a href="#12spring-æœ‰å“ªäº›è‡ªåŠ¨è£…é…çš„æ–¹å¼" class="table-of-contents__link toc-highlight">12.Spring æœ‰å“ªäº›è‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Ÿ</a></li><li><a href="#13spring-ä¸­çš„-bean-çš„ä½œç”¨åŸŸæœ‰å“ªäº›" class="table-of-contents__link toc-highlight">13.Spring ä¸­çš„ Bean çš„ä½œç”¨åŸŸæœ‰å“ªäº›?</a></li><li><a href="#14spring-ä¸­çš„å•ä¾‹-bean-ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—" class="table-of-contents__link toc-highlight">14.Spring ä¸­çš„å•ä¾‹ Bean ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—ï¼Ÿ</a></li><li><a href="#15è¯´è¯´å¾ªç¯ä¾èµ–" class="table-of-contents__link toc-highlight">15.è¯´è¯´å¾ªç¯ä¾èµ–?</a></li><li><a href="#16é‚£-spring-æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„å‘¢" class="table-of-contents__link toc-highlight">16.é‚£ Spring æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„å‘¢ï¼Ÿ</a></li><li><a href="#17ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜çº§ä¸å—" class="table-of-contents__link toc-highlight">17.ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼Ÿâ¼†çº§ä¸â¾å—ï¼Ÿ</a></li><li><a href="#18autowired-çš„å®ç°åŸç†" class="table-of-contents__link toc-highlight">18.@Autowired çš„å®ç°åŸç†ï¼Ÿ</a></li></ul></li><li><a href="#aop" class="table-of-contents__link toc-highlight">AOP</a><ul><li><a href="#19è¯´è¯´ä»€ä¹ˆæ˜¯-aop" class="table-of-contents__link toc-highlight">19.è¯´è¯´ä»€ä¹ˆæ˜¯ AOPï¼Ÿ</a></li><li><a href="#20è¯´è¯´ä½ å¹³æ—¶æœ‰ç”¨åˆ°-aop-å—" class="table-of-contents__link toc-highlight">20.è¯´è¯´ä½ å¹³æ—¶æœ‰ç”¨åˆ° AOP å—ï¼Ÿ</a></li><li><a href="#21è¯´è¯´-jdk-åŠ¨æ€ä»£ç†å’Œ-cglib-ä»£ç†-" class="table-of-contents__link toc-highlight">21.è¯´è¯´ JDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç† ï¼Ÿ</a></li><li><a href="#22è¯´è¯´-spring-aop-å’Œ-aspectj-aop-åŒºåˆ«" class="table-of-contents__link toc-highlight">22.è¯´è¯´ Spring AOP å’Œ AspectJ AOP åŒºåˆ«?</a></li></ul></li><li><a href="#äº‹åŠ¡" class="table-of-contents__link toc-highlight">äº‹åŠ¡</a><ul><li><a href="#23spring-äº‹åŠ¡çš„ç§ç±»" class="table-of-contents__link toc-highlight">23.Spring äº‹åŠ¡çš„ç§ç±»ï¼Ÿ</a></li><li><a href="#24spring-çš„äº‹åŠ¡éš”ç¦»çº§åˆ«" class="table-of-contents__link toc-highlight">24.Spring çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Ÿ</a></li><li><a href="#25spring-çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶" class="table-of-contents__link toc-highlight">25.Spring çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼Ÿ</a></li><li><a href="#26å£°æ˜å¼äº‹åŠ¡å®ç°åŸç†äº†è§£å—" class="table-of-contents__link toc-highlight">26.å£°æ˜å¼äº‹åŠ¡å®ç°åŸç†äº†è§£å—ï¼Ÿ</a></li><li><a href="#27å£°æ˜å¼äº‹åŠ¡åœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆ" class="table-of-contents__link toc-highlight">27.å£°æ˜å¼äº‹åŠ¡åœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ</a></li></ul></li><li><a href="#mvc" class="table-of-contents__link toc-highlight">MVC</a><ul><li><a href="#28spring-mvc-çš„æ ¸å¿ƒç»„ä»¶" class="table-of-contents__link toc-highlight">28.Spring MVC çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ</a></li><li><a href="#29spring-mvc-çš„å·¥ä½œæµç¨‹" class="table-of-contents__link toc-highlight">29.Spring MVC çš„å·¥ä½œæµç¨‹ï¼Ÿ</a></li><li><a href="#30springmvc-restful-é£æ ¼çš„æ¥å£çš„æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢" class="table-of-contents__link toc-highlight">30.SpringMVC Restful é£æ ¼çš„æ¥å£çš„æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</a></li></ul></li><li><a href="#spring-boot" class="table-of-contents__link toc-highlight">Spring Boot</a><ul><li><a href="#31ä»‹ç»ä¸€ä¸‹-springbootæœ‰å“ªäº›ä¼˜ç‚¹" class="table-of-contents__link toc-highlight">31.ä»‹ç»ä¸€ä¸‹ SpringBootï¼Œæœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</a></li><li><a href="#32springboot-è‡ªåŠ¨é…ç½®åŸç†äº†è§£å—" class="table-of-contents__link toc-highlight">32.SpringBoot è‡ªåŠ¨é…ç½®åŸç†äº†è§£å—ï¼Ÿ</a></li><li><a href="#33å¦‚ ä½•è‡ªå®šä¹‰ä¸€ä¸ª-springboot-srarter" class="table-of-contents__link toc-highlight">33.å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª SpringBoot Srarter?</a></li><li><a href="#34springboot-å¯åŠ¨åŸç†" class="table-of-contents__link toc-highlight">34.Springboot å¯åŠ¨åŸç†ï¼Ÿ</a></li></ul></li><li><a href="#spring-cloud" class="table-of-contents__link toc-highlight">Spring Cloud</a><ul><li><a href="#35å¯¹-springcloud-äº†è§£å¤šå°‘" class="table-of-contents__link toc-highlight">35.å¯¹ SpringCloud äº†è§£å¤šå°‘ï¼Ÿ</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/code-note-blog/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/code-note-blog/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>