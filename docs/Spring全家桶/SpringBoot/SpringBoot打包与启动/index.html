<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Spring全家桶/SpringBoot/SpringBoot打包与启动" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">SpringBoot打包与启动 | Tommy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aiden-coding.github.io/code-note-blog/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://aiden-coding.github.io/code-note-blog/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://aiden-coding.github.io/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot打包与启动"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="SpringBoot打包与启动 | Tommy"><meta data-rh="true" name="description" content="在使用maven构建springboot项目时，springboot相关 jar 包可以使用parent方式引入（即在pom.xml的parent节点引入springboot的GAVspring-boot-starter-parentorg.springframework.boot2.1.1.RELEASE）。同时，在打包时，我们可以打成 jar 包，也可以打成 war 包，本文旨在梳理各引入、打包方式的异同。"><meta data-rh="true" property="og:description" content="在使用maven构建springboot项目时，springboot相关 jar 包可以使用parent方式引入（即在pom.xml的parent节点引入springboot的GAVspring-boot-starter-parentorg.springframework.boot2.1.1.RELEASE）。同时，在打包时，我们可以打成 jar 包，也可以打成 war 包，本文旨在梳理各引入、打包方式的异同。"><link data-rh="true" rel="icon" href="/code-note-blog/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://aiden-coding.github.io/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot打包与启动"><link data-rh="true" rel="alternate" href="https://aiden-coding.github.io/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot打包与启动" hreflang="en"><link data-rh="true" rel="alternate" href="https://aiden-coding.github.io/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot打包与启动" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/code-note-blog/blog/rss.xml" title="Tommy RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/code-note-blog/blog/atom.xml" title="Tommy Atom Feed"><link rel="stylesheet" href="/code-note-blog/assets/css/styles.dd5372db.css">
<script src="/code-note-blog/assets/js/runtime~main.f999fb27.js" defer="defer"></script>
<script src="/code-note-blog/assets/js/main.a0bfbaed.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_XYiV" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/code-note-blog/"><b class="navbar__title text--truncate">Tommy</b></a><a class="navbar__item navbar__link" href="/code-note-blog/docs/Java/basic/抽象类和接口">java</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/JavaWeb/走进JavaWeb技术世界：JavaWeb的由来和基础知识">javaweb</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/cache/探索Redis设计与实现：连接底层与表面的数据结构robj">cache</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/backend/后端技术杂谈：白话虚拟化技术">backend</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/cs/algorithms/剑指offer">cs</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/database/重新学习MySQL数据库：『浅入浅出』MySQL和InnoDB">database</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/distributed/basic/分布式系统理论基础 ：CAP">distributed</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/interview/BATJ-Experience/面阿里,终获offer">interview</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/mq/kafka/消息队列kafka详解：如何实现死信队列">mq</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/code-note-blog/docs/Spring全家桶/Spring/第一个Spring应用">spring</a><a class="navbar__item navbar__link" href="/code-note-blog/docs/mianshi/collection">面试</a><a href="https://aiden-coding.github.io/code-note-blog/SpringCloud%E7%AC%AC3%E5%AD%A32024.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_XbAW colorModeToggle_r5NY"><button class="clean-btn toggleButton_Jx0n toggleButtonDisabled_zYO7" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_FjAw"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_qmEt"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_wJfS"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_LABv"><div class="docsWrapper_pdvB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_Jioa" type="button"></button><div class="docRoot_qx_v"><aside class="theme-doc-sidebar-container docSidebarContainer_NHKT"><div class="sidebarViewport_uyYB"><div class="sidebar_SZG4"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_VP_k"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/code-note-blog/docs/Spring全家桶/Spring/第一个Spring应用">Spring</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/code-note-blog/docs/Spring全家桶/Spring源码分析/Spring源码剖析：初探SpringIOC核心流程">Spring源码分析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/code-note-blog/docs/Spring全家桶/SpringBoot/给你一份SpringBoot知识清单">SpringBoot</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/给你一份SpringBoot知识清单">给你一份SpringBoot知识清单</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/基于SpringBoot中的开源监控工具SpringBootAdmin">基于SpringBoot中的开源监控工具SpringBootAdmin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/Spring常见注解使用指南">Spring注解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot常见注解">SpringBoot常见注解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot打包与启动">SpringBoot打包与启动</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot的基本使用">快速构建SpringBoot应用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot的配置文件管理">SpringBoot的配置文件管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot的前世今生">SpringBoot的前世今生</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot的Starter机制">SpringBoot的Starter机制</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot集成Swagger实现API文档自动生成">SpringBoot集成Swagger实现API文档自动生成</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot生产环境工具Actuator">生产就绪功能</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot应用也可以部署到外部Tomcat">SpringBoot应用也可以部署到外部Tomcat</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot中的任务调度与@Async">SpringBoot中的任务调度与@Async</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot中的日志管理">SpringBoot中的日志管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot自带的热部署工具">SpringBoot入门 - 配置热部署devtools工具</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/code-note-blog/docs/Spring全家桶/SpringBoot源码解析/SpringBoot启动流程（四）：启动IOC容器">SpringBoot源码解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/code-note-blog/docs/Spring全家桶/SpringCloud/SpringCloudConsul">SpringCloud</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/code-note-blog/docs/Spring全家桶/SpringCloud源码分析/SpringCloudConfig源码分析">SpringCloud源码分析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/code-note-blog/docs/Spring全家桶/SpringCloudAlibaba/SpringCloudAlibaba概览">SpringCloudAlibaba</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/code-note-blog/docs/Spring全家桶/SpringCloudAlibaba源码分析/SpringCloudAlibabaNacos源码分析：服务发现">SpringCloudAlibaba源  码分析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/code-note-blog/docs/Spring全家桶/SpringMVC/SpringMVC常见注解">SpringMVC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/code-note-blog/docs/Spring全家桶/SpringMVC源码分析/请求执行流程（二）之执行Handler方法">SpringMVC源码分析</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_SejT"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_j3Yw"><div class="docItemContainer_XOSC"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_F6gm" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/code-note-blog/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YCxa"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">SpringBoot</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">SpringBoot打包与启动</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ToOY theme-doc-toc-mobile tocMobile_suYB"><button type="button" class="clean-btn tocCollapsibleButton_VzP_">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>SpringBoot打包与启动</h1></header><p>在使用<code>maven</code>构建<code>springboot</code>项目时，<code>springboot</code>相关 jar 包可以使用<code>parent方式</code>引入（即在<code>pom.xml</code>的<code>parent</code>节点引入<code>springboot</code>的<code>GAV</code>:<code>org.springframework.boot:spring-boot-starter-parent:2.1.1.RELEASE</code>），也可以使用<code>非parent方式</code>引入（即在 pom 的 dependencyManagement 节点引入<code>springboot</code>的<code>GAV</code>:<code>org.springframework.boot:spring-boot-dependencies:2.1.1.RELEASE</code>）。同时，在打包时，我们可以打成 jar 包，也可以打成 war 包，本文旨在梳理各引入、打包方式的异同。</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="1-parent-方式引入打成-jar-包">1. parent 方式引入，打成 jar 包<a href="#1-parent-方式引入打成-jar-包" class="hash-link" aria-label="Direct link to 1. parent 方式引入，打成 jar 包" title="Direct link to 1. parent 方式引入，打成 jar 包">​</a></h3>
<p>parent 方式，即在 pom 文件中，将 springboot 的依赖当成项目的 parent 引入，pom 文件示例如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 引入springboot的parent --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;parent&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        spring-boot-starter-parent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/parent&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.gitee.funcy&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    springboot-parent-jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;1.0.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;packaging&gt;jar&lt;/packaging&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;springboot parent jar打包方式&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;maven-compiler-plugin.version&gt;3.8.1&lt;/maven-compiler-plugin.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- springboot 的基础依赖 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-starter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- springboot 的web 依赖 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-starter-web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;build&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;plugins&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;!-- maven编译插件 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                maven-compiler-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;source&gt;${java.version}&lt;/source&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;target&gt;${java.version}&lt;/target&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;!-- springboot编译插件 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                spring-boot-maven-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- 其他内容不用指定，因为 spring-boot-starter-parent 已经指定了--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/plugins&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/build&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/project&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>添加一个 controller:</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">package com.gitee.funcy.mavenparent.jar.controller;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.bind.annotation.RequestMapping;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.web.bind.annotation.RestController;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ｛这里添加描述｝</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author funcy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2019-12-13 10:43 下午</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class IndexController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RequestMapping(&quot;/&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String helloWorld() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;hello world&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再引入启动类：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">package com.gitee.funcy.mavenparent.jar;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.boot.SpringApplication;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ｛这里添加描述｝</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author funcy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2019-12-13 10:36 下午</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Main {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(Main.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>运行 Main 方法，请求<code>http://localhost:8080/</code>，结果如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> $ curl http://localhost:8080/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，项目运行成功。</p>
<p>接着，尝试使用 jar 包启动：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"># 打包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mvn clean install -Dmaven.test.skip=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # 启动jar包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> java -jar target/springboot-parent-jar-1.0.0.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，项目启动成功，请求请求<code>http://localhost:8080/</code>，也能显示正确结果。</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="2-非-parent-方式引入打成-jar-包">2. 非 parent 方式引入，打成 jar 包<a href="#2-非-parent-方式引入打成-jar-包" class="hash-link" aria-label="Direct link to 2. 非 parent 方式引入，打成 jar 包" title="Direct link to 2. 非 parent 方式引入，打成 jar 包">​</a></h3>
<p>在实际项目中，项目的 parent 依赖可能给了其他项目，此时 parent 引用就无法进行了，这时我们需要非 parent 引入。非 parent 引入的 pom 如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.gitee.funcy&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    springboot-jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;1.0.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;packaging&gt;jar&lt;/packaging&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;springboot非parent jar打包方式&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;spring-boot.version&gt;2.1.1.RELEASE&lt;/spring-boot.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;maven-compiler-plugin.version&gt;3.8.1&lt;/maven-compiler-plugin.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dependencyManagement&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- Import dependency management from Spring Boot --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                spring-boot-dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;${spring-boot.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;type&gt;pom&lt;/type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;scope&gt;import&lt;/scope&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dependencyManagement&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-starter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-starter-web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;build&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;plugins&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                maven-compiler-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;source&gt;${java.version}&lt;/source&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;target&gt;${java.version}&lt;/target&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                spring-boot-maven-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;${spring-boot.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- 与parent引入相比，需要指定goals，否则会打包失败--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;executions&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;execution&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;goals&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &lt;goal&gt;repackage&lt;/goal&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;/goals&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/execution&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/executions&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/plugins&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/build&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/project&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再添加一个<code>ControllerIndexController.java</code>与启动类<code>Main.java</code>，这两个文件与上述示例相同，这里就不作展示了。</p>
<p>运行 Main 方法，请求<code>http://localhost:8080/</code>，结果如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> $ curl http://localhost:8080/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，项目运行成功。</p>
<p>接着，尝试使用 jar 包启动：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"># 打包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mvn clean install -Dmaven.test.skip=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # 启动jar包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> java -jar target/springboot-jar-1.0.0.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，项目启动成功，请求请求<code>http://localhost:8080/</code>，也能显示正确结果。</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="3-parent-方式引入打成-war-包">3. parent 方式引入，打成 war 包<a href="#3-parent-方式引入打成-war-包" class="hash-link" aria-label="Direct link to 3. parent 方式引入，打成 war 包" title="Direct link to 3. parent 方式引入，打成 war 包">​</a></h3>
<p>以上两种方式都是打成 jar，为了兼容传统的 servlet 应用，springboot 也支持打包 war 包，parent 引入打包 war 包的 pom 文件如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 引入springboot的parent --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;parent&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        spring-boot-starter-parent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/parent&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.gitee.funcy&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    springboot-parent-war</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;1.0.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 指定打包方式为war包 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;packaging&gt;war&lt;/packaging&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;springboot parent war打包方式&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;maven-compiler-plugin.version&gt;3.8.1&lt;/maven-compiler-plugin.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-starter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-starter-web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;scope&gt;provided&lt;/scope&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;build&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;plugins&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                maven-compiler-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;source&gt;${java.version}&lt;/source&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;target&gt;${java.version}&lt;/target&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                maven-war-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- 保持与 spring-boot-dependencies 版本一致 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;3.2.2&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                spring-boot-maven-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/plugins&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/build&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/project&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再添加一个<code>ControllerIndexController.java</code>与启动类<code>Main.java</code>，这两个文件与上述示例相同，这里就不作展示了。</p>
<p>除此之外，war 包方式还需要添加一个类，用以实现<code>SpringBootServletInitializer</code>，该类与启动类<code>Main.java</code>位于同一个  包下，主要是用来引导 tomcat 等 servlet 容器加载 servlet，内容如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ｛这里添加描述｝</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @author funcy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @date 2019-12-20 1:22 下午</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class StartApplication extends SpringBootServletInitializer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected SpringApplicationBuilder configure(SpringApplicationBuilder builder) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 注意这里要指向原先用main方法执行的Application启动类</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return builder.sources(Main.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>运行 Main 方法，请求<code>http://localhost:8080/</code>，结果如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> $ curl http://localhost:8080/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，项目运行成功。</p>
<p>接着，尝试使用 jar 包启动：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"># 打包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mvn clean install -Dmaven.test.skip=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # 启动jar包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> java -jar target/springboot-parent-war-1.0.0.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，项目启动成功，请求请求<code>http://localhost:8080/</code>，也能显示正确结果。</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="4-非-parent-方式引入打成-war-包">4. 非 parent 方式引入，打成 war 包<a href="#4-非-parent-方式引入打成-war-包" class="hash-link" aria-label="Direct link to 4. 非 parent 方式引入，打成 war 包" title="Direct link to 4. 非 parent 方式引入，打成 war 包">​</a></h3>
<p>同样地，打成 war 包时，也可使用非 parent 引入方式：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.gitee.funcy&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    springboot-war</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;1.0.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 指定打包方式为war包 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;packaging&gt;war&lt;/packaging&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;springboot非parent war打包方式&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;spring-boot.version&gt;2.1.1.RELEASE&lt;/spring-boot.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;maven-compiler-plugin.version&gt;3.8.1&lt;/maven-compiler-plugin.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dependencyManagement&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- Import dependency management from Spring Boot --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                spring-boot-dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;${spring-boot.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;type&gt;pom&lt;/type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;scope&gt;import&lt;/scope&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dependencyManagement&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-starter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-starter-web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- 测试war包中 WEB-INF/lib-provided/ 目录内容--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;scope&gt;provided&lt;/scope&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;build&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;plugins&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                maven-compiler-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;source&gt;${java.version}&lt;/source&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;target&gt;${java.version}&lt;/target&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;!-- 打成war包时，需要添加该插件 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                maven-war-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- 保持与 spring-boot-dependencies 版本一致 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;3.2.2&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                spring-boot-maven-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;${spring-boot.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;executions&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;execution&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;goals&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &lt;goal&gt;repackage&lt;/goal&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;/goals&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/execution&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/executions&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/plugins&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/build&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/project&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再添加一个<code>ControllerIndexController.java</code>、<code>StartApplication.java</code>与启动类<code>Main.java</code>，这三个文件与上述示例相同，这里就不作展示了。</p>
<p>运行 Main 方法，请求<code>http://localhost:8080/</code>，结果如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> $ curl http://localhost:8080/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，项目运行成功。</p>
<p>接着，尝试使用 jar 包启动：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"># 打包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mvn clean install -Dmaven.test.skip=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # 启动jar包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> java -jar target/springboot-war-1.0.0.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，项目启动成功，请求请求<code>http://localhost:8080/</code>，也能显示正确结果。</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="5-总结">5. 总结<a href="#5-总结" class="hash-link" aria-label="Direct link to 5. 总结" title="Direct link to 5. 总结">​</a></h3>
<p>springboot 引入及打包方式组合下来有如下四种：</p>
<table><thead><tr><th>打包 / 引入</th><th>parent 方式</th><th>非 parent 方式</th></tr></thead><tbody><tr><td>jar</td><td>parent-jar 方式</td><td>非 parent-jar 方式</td></tr><tr><td>war</td><td>parent-war 方式</td><td>非 parent-war 方式</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="1-开发时启动">1. 开发时启动<a href="#1-开发时启动" class="hash-link" aria-label="Direct link to 1. 开发时启动" title="Direct link to 1. 开发时启动">​</a></h3>
<p>在开发时启动 springboot 应用，指的是直接运行源码，如在开发时在 ide 中运行启动类的 main () 方法。</p>
<h4 class="anchor anchorWithStickyNavbar_HWLp" id="11-在-ide-中执行启动类的main方法">1.1 在 ide 中执行启动类的<code>main()</code>方法<a href="#11-在-ide-中执行启动类的main方法" class="hash-link" aria-label="Direct link to 11-在-ide-中执行启动类的main方法" title="Direct link to 11-在-ide-中执行启动类的main方法">​</a></h4>
<p>自从有了 springboot 后，web 项目就不必再放到 web 容器中运行了，直接运行项目的<code>main()</code>方法就行了：</p>
<p><img loading="lazy" src="https://oscimg.oschina.net/oscnet/up-040888025c22694b18d7be748b8cbb89f06.png" alt="" class="img_kGBN"></p>
<p>启动日志如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">  .   ____          _            __ _ _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> =========|_|==============|___/=/_/_/_/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :: Spring Boot ::        (v2.1.1.RELEASE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:16.365  INFO 84046 --- [           main] com.gitee.funcy.maven.jar.Main           : Starting Main on l with PID 84046 (/Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-jar/target/classes started by funcy in /Users/funcy/IdeaProjects/myproject/springboot-demo)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:16.368  INFO 84046 --- [           main] com.gitee.funcy.maven.jar.Main           : No active profile set, falling back to default profiles: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:17.468  INFO 84046 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:17.497  INFO 84046 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:17.497  INFO 84046 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/9.0.13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:17.513  INFO 84046 --- [           main] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/Users/funcy/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:17.605  INFO 84046 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:17.605  INFO 84046 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1206 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:17.861  INFO 84046 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#x27;applicationTaskExecutor&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:18.096  INFO 84046 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:18.100  INFO 84046 --- [           main] com.gitee.funcy.maven.jar.Main           : Started Main in 1.988 seconds (JVM running for 2.34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:32.155  INFO 84046 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#x27;dispatcherServlet&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:32.155  INFO 84046 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#x27;dispatcherServlet&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:11:32.223  INFO 84046 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 68 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>访问<code>http://localhost:8080/</code>，结果如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl http://localhost:8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>以上启动方式<strong>war 与 jar 打包方式</strong>都支持。</p>
<h4 class="anchor anchorWithStickyNavbar_HWLp" id="12mvn-spring-bootrun启动">1.2<code>mvn spring-boot:run</code>启动<a href="#12mvn-spring-bootrun启动" class="hash-link" aria-label="Direct link to 12mvn-spring-bootrun启动" title="Direct link to 12mvn-spring-bootrun启动">​</a></h4>
<p>这种方式也是源码启动，在命令行界面进入项目对应的源码目录下，然后执行<code>mvn spring-boot:run</code>命令：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">springboot-parent-war $ mvn spring-boot:run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Scanning for projects...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] ---------------&lt; com.gitee.funcy:springboot-parent-war &gt;----------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Building springboot parent war打包方式 1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] --------------------------------[ war ]---------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] &gt;&gt;&gt; spring-boot-maven-plugin:2.1.1.RELEASE:run (default-cli) &gt; test-compile @ springboot-parent-war &gt;&gt;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ springboot-parent-war ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Using &#x27;UTF-8&#x27; encoding to copy filtered resources.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Copying 0 resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Copying 0 resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ springboot-parent-war ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Changes detected - recompiling the module!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Compiling 3 source files to /Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-parent-war/target/classes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] --- maven-resources-plugin:3.1.0:testResources (default-testResources) @ springboot-parent-war ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Using &#x27;UTF-8&#x27; encoding to copy filtered resources.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] skip non existing resourceDirectory /Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-parent-war/src/test/resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ springboot-parent-war ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] No sources to compile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] &lt;&lt;&lt; spring-boot-maven-plugin:2.1.1.RELEASE:run (default-cli) &lt; test-compile @ springboot-parent-war &lt;&lt;&lt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] --- spring-boot-maven-plugin:2.1.1.RELEASE:run (default-cli) @ springboot-parent-war ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .   ____          _            __ _ _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> =========|_|==============|___/=/_/_/_/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :: Spring Boot ::        (v2.1.1.RELEASE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:40:50.577  INFO 84448 --- [           main] com.gitee.funcy.mavenparent.war.Main     : Starting Main on funcydeMacBook-Pro.local with PID 84448 (/Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-parent-war/target/classes started by funcy in /Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-parent-war)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:40:50.579  INFO 84448 --- [           main] com.gitee.funcy.mavenparent.war.Main     : No active profile set, falling back to default profiles: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:40:51.311  INFO 84448 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:40:51.336  INFO 84448 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:40:51.337  INFO 84448 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/9.0.13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:40:51.347  INFO 84448 --- [           main] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/Users/funcy/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:40:51.406  INFO 84448 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:40:51.406  INFO 84448 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 800 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:40:51.582  INFO 84448 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#x27;applicationTaskExecutor&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:40:51.736  INFO 84448 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:40:51.739  INFO 84448 --- [           main] com.gitee.funcy.mavenparent.war.Main     : Started Main in 1.39 seconds (JVM running for 3.943)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:41:04.068  INFO 84448 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#x27;dispatcherServlet&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:41:04.069  INFO 84448 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#x27;dispatcherServlet&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:41:04.076  INFO 84448 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 7 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，项目启动成功，请求<code>http://localhost:8080</code>，也能获得结果：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> $ curl http://localhost:8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>以上启动方式<strong>war 与 jar 打包方式</strong>都支持。</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="2-jar-包启动">2. jar 包启动<a href="#2-jar-包启动" class="hash-link" aria-label="Direct link to 2. jar 包启动" title="Direct link to 2. jar 包启动">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_HWLp" id="21java--jar方式启动">2.1<code>java -jar</code>方式启动<a href="#21java--jar方式启动" class="hash-link" aria-label="Direct link to 21java--jar方式启动" title="Direct link to 21java--jar方式启动">​</a></h4>
<p>对于打成<code>jar包</code>的<code>springboot</code>项目，使用<code>java -jar xxx.jar</code>命令即可启动：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">:target $ java -jar springboot-jar-1.0.0.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .   ____          _            __ _ _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> =========|_|==============|___/=/_/_/_/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :: Spring Boot ::        (v2.1.1.RELEASE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:47:47.075  INFO 85080 --- [           main] com.gitee.funcy.maven.jar.Main           : Starting Main on funcydeMacBook-Pro.local with PID 85080 (/Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-jar/target/springboot-jar-1.0.0.jar started by funcy in /Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-jar/target)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:47:47.077  INFO 85080 --- [           main] com.gitee.funcy.maven.jar.Main           : No active profile set, falling back to default profiles: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:47:48.152  INFO 85080 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:47:48.186  INFO 85080 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:47:48.186  INFO 85080 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/9.0.13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:47:48.202  INFO 85080 --- [           main] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/Users/funcy/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:47:48.303  INFO 85080 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:47:48.303  INFO 85080 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1177 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:47:48.502  INFO 85080 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#x27;applicationTaskExecutor&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:47:48.677  INFO 85080 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:47:48.680  INFO 85080 --- [           main] com.gitee.funcy.maven.jar.Main           : Started Main in 1.977 seconds (JVM running for 2.398)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>访问<code>http://localhost:8080</code>，同样也能获得结果.</p>
<h4 class="anchor anchorWithStickyNavbar_HWLp" id="22java-orgspringframeworkbootloaderjarlauncher方式启动">2.2<code>java org.springframework.boot.loader.JarLauncher</code>方式启动<a href="#22java-orgspringframeworkbootloaderjarlauncher方式启动" class="hash-link" aria-label="Direct link to 22java-orgspringframeworkbootloaderjarlauncher方式启动" title="Direct link to 22java-orgspringframeworkbootloaderjarlauncher方式启动">​</a></h4>
<p>这种启动方式就魔幻了：好好的一个 jar，要先解压，然后直接运行里面的类，操作如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">target $ unzip -d ./tmp springboot-jar-1.0.0.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Archive:  springboot-jar-1.0.0.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   creating: ./tmp/META-INF/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  inflating: ./tmp/META-INF/MANIFEST.MF  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   creating: ./tmp/org/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   creating: ./tmp/org/springframework/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   creating: ./tmp/org/springframework/boot/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">··· 省略其他内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">target $ cd tmp/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmp $ java org.springframework.boot.loader.JarLauncher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .   ____          _            __ _ _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> =========|_|==============|___/=/_/_/_/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :: Spring Boot ::        (v2.1.1.RELEASE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:56:00.472  INFO 85431 --- [           main] com.gitee.funcy.maven.jar.Main           : Starting Main on funcydeMacBook-Pro.local with PID 85431 (/Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-jar/target/tmp/BOOT-INF/classes started by funcy in /Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-jar/target/tmp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:56:00.475  INFO 85431 --- [           main] com.gitee.funcy.maven.jar.Main           : No active profile set, falling back to default profiles: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:56:01.589  INFO 85431 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:56:01.619  INFO 85431 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:56:01.619  INFO 85431 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/9.0.13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:56:01.634  INFO 85431 --- [           main] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/Users/funcy/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:56:01.722  INFO 85431 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:56:01.722  INFO 85431 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1203 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:56:01.931  INFO 85431 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#x27;applicationTaskExecutor&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:56:02.154  INFO 85431 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 21:56:02.157  INFO 85431 --- [           main] com.gitee.funcy.maven.jar.Main           : Started Main in 2.025 seconds (JVM running for 2.472)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>总结下，步骤  如下：</p>
<ol>
<li>进入项目<code>target/</code>目录</li>
<li>解压<code>jar包</code>到<code>tmp</code>目录：<code>unzip -d ./tmp springboot-jar-1.0.0.jar</code></li>
<li>进入<code>tmp目录</code>：<code>cd tmp/</code></li>
<li>运行：<code>java org.springframework.boot.loader.JarLauncher</code></li>
</ol>
<p>访问<code>http://localhost:8080</code>，也能得到正确结果。</p>
<blockquote>
<p>注：这种神奇的启动方式在什么情况下会使用呢？我曾经见过一些项目组，为了安全会把生产的配置文件放在服务器上，在部署项目的时候，先解压 jar 包，然后替换相应的配置文件，再运行。这种解压 jar 包、替换配置文件的方式就可以用此启动方式了。当然，这些解压、替换、启动等操作都会写进 shell 脚本里，自动化运行。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="3-war-包启动">3. war 包启动<a href="#3-war-包启动" class="hash-link" aria-label="Direct link to 3. war 包启动" title="Direct link to 3. war 包启动">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_HWLp" id="31java--jar方式启动">3.1<code>java -jar</code>方式启动<a href="#31java--jar方式启动" class="hash-link" aria-label="Direct link to 31java--jar方式启动" title="Direct link to 31java--jar方式启动">​</a></h4>
<p>项目都打成<code>war包</code>了，还能使用<code>java -jar</code>启动？是的，<code>springboot</code>就是这么方便：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">target $ java -jar springboot-war-1.0.0.war</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .   ____          _            __ _ _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> =========|_|==============|___/=/_/_/_/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :: Spring Boot ::        (v2.1.1.RELEASE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:11:54.284  INFO 85638 --- [           main] com.gitee.funcy.maven.war.Main           : Starting Main on funcydeMacBook-Pro.local with PID 85638 (/Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-war/target/springboot-war-1.0.0.war started by funcy in /Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-war/target)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:11:54.287  INFO 85638 --- [           main] com.gitee.funcy.maven.war.Main           : No active profile set, falling back to default profiles: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:11:55.257  INFO 85638 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:11:55.286  INFO 85638 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:11:55.287  INFO 85638 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/9.0.13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:11:55.299  INFO 85638 --- [           main] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/Users/funcy/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:11:55.711  INFO 85638 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:11:55.711  INFO 85638 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1379 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:11:55.873  INFO 85638 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#x27;applicationTaskExecutor&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:11:56.031  INFO 85638 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:11:56.034  INFO 85638 --- [           main] com.gitee.funcy.maven.war.Main           : Started Main in 2.066 seconds (JVM running for 2.469)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:12:01.189  INFO 85638 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#x27;dispatcherServlet&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:12:01.190  INFO 85638 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#x27;dispatcherServlet&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:12:01.195  INFO 85638 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>看，项目真的跑起来了！</p>
<h4 class="anchor anchorWithStickyNavbar_HWLp" id="32java-orgspringframeworkbootloaderwarlauncher方式启动">3.2<code>java org.springframework.boot.loader.WarLauncher</code>方式启动<a href="#32java-orgspringframeworkbootloaderwarlauncher方式启动" class="hash-link" aria-label="Direct link to 32java-orgspringframeworkbootloaderwarlauncher方式启动" title="Direct link to 32java-orgspringframeworkbootloaderwarlauncher方式启动">​</a></h4>
<p><code>springboot</code>的<code>jar包</code>可以解压，然后运行某个类来启动，<code>war包</code>竟然也有这种方法！<code>jar包</code>的启动类是<code>org.springframework.boot.loader.JarLauncher</code>，相应的<code>war包</code>启动类是<code>org.springframework.boot.loader.WarLauncher</code>，步骤如下：</p>
<ol>
<li>进入项目<code>target/</code>目录</li>
<li>解压<code>war包</code>到<code>tmp</code>目录：<code>unzip -d ./tmp springboot-war-1.0.0.war</code></li>
<li>进入<code>tmp目录</code>：<code>cd tmp/</code></li>
<li>运行：<code>java org.springframework.boot.loader.WarLauncher</code></li>
</ol>
<p>过程如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">target $ unzip -d ./tmp springboot-war-1.0.0.war</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Archive:  springboot-war-1.0.0.war</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   creating: ./tmp/META-INF/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  inflating: ./tmp/META-INF/MANIFEST.MF  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   creating: ./tmp/org/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   creating: ./tmp/org/springframework/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   creating: ./tmp/org/springframework/boot/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">··· 省略其他</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">target $ cd tmp/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmp $ java org.springframework.boot.loader.WarLauncher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .   ____          _            __ _ _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> =========|_|==============|___/=/_/_/_/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :: Spring Boot ::        (v2.1.1.RELEASE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:09.637  INFO 85782 --- [           main] com.gitee.funcy.maven.war.Main           : Starting Main on funcydeMacBook-Pro.local with PID 85782 (/Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-war/target/tmp/WEB-INF/classes started by funcy in /Users/funcy/IdeaProjects/myproject/springboot-demo/springboot-maven/springboot-war/target/tmp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:09.640  INFO 85782 --- [           main] com.gitee.funcy.maven.war.Main           : No active profile set, falling back to default profiles: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:10.576  INFO 85782 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:10.603  INFO 85782 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:10.604  INFO 85782 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/9.0.13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:10.616  INFO 85782 --- [           main] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/Users/funcy/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:10.725  INFO 85782 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:10.725  INFO 85782 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1046 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:10.942  INFO 85782 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#x27;applicationTaskExecutor&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:11.137  INFO 85782 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:11.140  INFO 85782 --- [           main] com.gitee.funcy.maven.war.Main           : Started Main in 1.817 seconds (JVM running for 2.183)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:15.024  INFO 85782 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#x27;dispatcherServlet&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:15.024  INFO 85782 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#x27;dispatcherServlet&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:17:15.029  INFO 85782 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，项目也启动成功了！</p>
<h4 class="anchor anchorWithStickyNavbar_HWLp" id="33-传统方式启动使用-tomcat-容器">3.3 传统方式启动：使用 tomcat 容器<a href="#33-传统方式启动使用-tomcat-容器" class="hash-link" aria-label="Direct link to 3.3 传统方式启动：使用 tomcat 容器" title="Direct link to 3.3 传统方式启动：使用 tomcat 容器">​</a></h4>
<p>最初的<code>war包</code>就是放在 tomcat 等容器中运行的，我们也来试试<code>war包</code>在 tomcat 容器中运行情况如何。这里说的 tomcat 容器是指在<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Ftomcat.apache.org%2F" target="_blank" rel="noopener noreferrer" title="tomcat官网">tomcat 官网</a>下载的容器，非<code>springboot</code>内置容器。这里我下载的是<code>apache-tomcat-8.5.47</code>，过程如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">... 省略tomcat日志输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .   ____          _            __ _ _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> =========|_|==============|___/=/_/_/_/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :: Spring Boot ::        (v2.1.1.RELEASE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:28:23.519  INFO 85904 --- [ost-startStop-1] c.g.funcy.maven.war.StartApplication     : Starting StartApplication on funcydeMacBook-Pro.local with PID 85904 (/Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47/webapps/springboot-war-1.0.0/WEB-INF/classes started by funcy in /Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:28:23.523  INFO 85904 --- [ost-startStop-1] c.g.funcy.maven.war.StartApplication     : No active profile set, falling back to default profiles: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:28:24.256  INFO 85904 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 676 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:28:24.655  INFO 85904 --- [ost-startStop-1] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#x27;applicationTaskExecutor&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:28:24.920  INFO 85904 --- [ost-startStop-1] c.g.funcy.maven.war.StartApplication     : Started StartApplication in 1.86 seconds (JVM running for 3.98)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:24.974 信息 [localhost-startStop-1] org.apache.jasper.servlet.TldScanner.scanJars 至少有一个JAR被扫描用于TLD但尚未包含TLD。 为此记录器启用调试日志记录，以获取已扫描但未在其中找到TLD的完整JAR列表。 在扫描期间跳过不需要的JAR可以缩短启动时间和JSP编译时间。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:24.999 信息 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [/Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47/webapps/springboot-war-1.0.0.war] has finished in [3,468] ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.000 信息 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory 把web 应用程序部署到目录 [/Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47/webapps/docs]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.010 信息 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [/Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47/webapps/docs] has finished in [10] ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.010 信息 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory 把web 应用程序部署到目录 [/Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47/webapps/manager]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.027 信息 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [/Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47/webapps/manager] has finished in [17] ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.027 信息 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory 把web 应用 程序部署到目录 [/Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47/webapps/examples]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.181 信息 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [/Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47/webapps/examples] has finished in [154] ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.181 信息 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory 把web 应用程序部署到目录 [/Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47/webapps/ROOT]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.191 信息 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [/Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47/webapps/ROOT] has finished in [10] ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.191 信息 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory 把web 应用程序部署到目录 [/Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47/webapps/host-manager]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.202 信息 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [/Users/funcy/Applications/Tomcat/apache-tomcat-8.5.47/webapps/host-manager] has finished in [11] ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.206 信息 [main] org.apache.coyote.AbstractProtocol.start 开始协议处理句柄[&quot;http-nio-8080&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.212 信息 [main] org.apache.coyote.AbstractProtocol.start 开始协议处理句柄[&quot;ajp-nio-8009&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">07-Jan-2020 22:28:25.213 信息 [main] org.apache.catalina.startup.Catalina.start Server startup in 3717 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:29:30.754  INFO 85904 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#x27;dispatcherServlet&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2020-01-07 22:29:30.767  INFO 85904 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 12 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>请求<code>http://localhost:8080/springboot-war-1.0.0/</code>，结果如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl &#x27;http://localhost:8080/springboot-war-1.0.0/&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，已经部署成功了。</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="4-总结">4. 总结<a href="#4-总结" class="hash-link" aria-label="Direct link to 4. 总结" title="Direct link to 4. 总结">​</a></h3>
<table><thead><tr><th></th><th>main () 方法</th><th>mvn 命令</th><th>java -jar</th><th>java xxx.WarLauncher</th><th>java xxx.JarLauncher</th><th>外置容器</th></tr></thead><tbody><tr><td>war</td><td>支持</td><td>支持</td><td>支持</td><td>支持</td><td>不支持</td><td>支持</td></tr><tr><td>jar</td><td>支持</td><td>支持</td><td>支持</td><td>不支持</td><td>支持</td><td>不支持</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="1-maven-打包后的文件">1. maven 打包后的文件<a href="#1-maven-打包后的文件" class="hash-link" aria-label="Direct link to 1. maven 打包后的文件" title="Direct link to 1. maven 打包后的文件">​</a></h3>
<p>进入<code>springboot-jar/target</code>目录，使用<code>tree</code>命令，目录结构如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> $ tree</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── classes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └── com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     └── gitee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── funcy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             └── maven</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 └── jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                     ├── Main.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                     └── controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                         └── IndexController.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── generated-sources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └── annotations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── maven-archiver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └── pom.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── maven-status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └── maven-compiler-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     └── compile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── default-compile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── createdFiles.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             └── inputFiles.lst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── springboot-jar-1.0.0.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── springboot-jar-1.0.0.jar.original</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14 directories, 7 files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意<code>springboot-jar-1.0.0.jar</code>与<code>springboot-jar-1.0.0.jar.original</code>的区别：<code>springboot-jar-1.0.0.jar.original</code>属于原始 Maven 打包 jar 文件，该文件仅包含应用本地资源，如编译后的 classes 目录下的资源文件等，未引入第三方依赖资源；而<code>springboot-jar-1.0.0.jar</code>引入了第三方依赖资源（主要为 jar 包）。</p>
<p>使用<code>unzip springboot-jar-1.0.0.jar -d tmp</code>解压 jar 包，内容如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> $ tree tmp/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmp/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── BOOT-INF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├── classes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ └── com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │     └── gitee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │         └── funcy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │             └── maven</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │                 └── jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │                     ├── Main.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │                     └── controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │                         └── IndexController.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └── lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── classmate-1.4.0.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── hibernate-validator-6.0.13.Final.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── jackson-annotations-2.9.0.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── jackson-core-2.9.7.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── jackson-databind-2.9.7.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── jackson-datatype-jdk8-2.9.7.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── jackson-datatype-jsr310-2.9.7.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── jackson-module-parameter-names-2.9.7.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── javax.annotation-api-1.3.2.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── jboss-logging-3.3.2.Final.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── jul-to-slf4j-1.7.25.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── log4j-api-2.11.1.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── log4j-to-slf4j-2.11.1.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── logback-classic-1.2.3.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── logback-core-1.2.3.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── slf4j-api-1.7.25.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── snakeyaml-1.23.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-aop-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-beans-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-boot-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-boot-autoconfigure-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-boot-starter-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-boot-starter-json-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-boot-starter-logging-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-boot-starter-tomcat-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-boot-starter-web-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-context-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├─  ─ spring-core-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-expression-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-jcl-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-web-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── spring-webmvc-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── tomcat-embed-core-9.0.13.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── tomcat-embed-el-9.0.13.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├── tomcat-embed-websocket-9.0.13.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     └── validation-api-2.0.1.Final.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── META-INF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├── MANIFEST.MF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └── maven</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     └── com.gitee.funcy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── springboot-jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── pom.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             └── pom.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── springframework</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        └── boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            └── loader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── ExecutableArchiveLauncher.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── JarLauncher.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── LaunchedURLClassLoader$UseFastConnectionExceptionsEnumeration.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── LaunchedURLClassLoader.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── Launcher.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── MainMethodRunner.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── PropertiesLauncher$1.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── PropertiesLauncher$ArchiveEntryFilter.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── PropertiesLauncher$PrefixMatchingArchiveFilter.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── PropertiesLauncher.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── WarLauncher.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── archive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── Archive$Entry.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── Archive$EntryFilter.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── Archive.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── ExplodedArchive$1.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── ExplodedArchive$FileEntry.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── ExplodedArchive$FileEntryIterator$EntryComparator.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── ExplodedArchive$FileEntryIterator.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── ExplodedArchive.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarFileArchive$EntryIterator.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarFileArchive$JarFileEntry.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ └── JarFileArchive.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── RandomAccessData.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── RandomAccessDataFile$1.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── RandomAccessDataFile$DataInputStream.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── RandomAccessDataFile$FileAccess.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ └── RandomAccessDataFile.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── AsciiBytes.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── Bytes.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── CentralDirectoryEndRecord.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── CentralDirectoryFileHeader.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── CentralDirectoryParser.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── CentralDirectoryVisitor.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── FileHeader.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── Handler.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarEntry.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarEntryFilter.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarFile$1.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarFile$2.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarFile$JarFileType.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarFile.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarFileEntries$1.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarFileEntries$EntryIterator.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarFileEntries.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarURLConnection$1.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarURLConnection$JarEntryName.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── JarURLConnection.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── StringSequence.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ └── ZipInflaterInputStream.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                └── util</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    └── SystemPropertyUtils.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">21 directories, 91 files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，文件中主要分为如下几个目录：</p>
<ul>
<li><code>BOOT-INF/classes</code>目录存放应用编译后的 class 文件；</li>
<li><code>BOOT-INF/lib</code>目录存放应用依赖的 jar 包；</li>
<li><code>META-INF/</code>目录存放应用依赖的 jar 包；</li>
<li><code>org/</code>目录存放 spring boot 相关的 class 文件。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="2java--jar启动-springboot-jar-包">2.<code>java -jar</code>启动 springboot jar 包<a href="#2java--jar启动-springboot-jar-包" class="hash-link" aria-label="Direct link to 2java--jar启动-springboot-jar-包" title="Direct link to 2java--jar启动-springboot-jar-包">​</a></h3>
<p>java 官方规定，<code>java -jar</code>命令引导的具体启动类必须配置在<code>MANIFEST.MF</code>文件中，而根据<code>jar文件规范</code>，<code>MANIFEST.MF</code>文件必须存放在<code>/META-INF/</code>目录下。因此，启动类配置在 jar 包的<code>/META-INF/MANIFEST.MF</code>文件中，查看该文件，内容如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat MANIFEST.MF </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Manifest-Version: 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Archiver-Version: Plexus Archiver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Built-By: fangchengyan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Start-Class: com.gitee.funcy.maven.jar.Main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Spring-Boot-Classes: BOOT-INF/classes/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Spring-Boot-Lib: BOOT-INF/lib/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Spring-Boot-Version: 2.1.1.RELEASE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Created-By: Apache Maven 3.6.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Build-Jdk: 1.8.0_222</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Main-Class: org.springframework.boot.loader.JarLauncher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>发现<code>Main-Class</code>属性指向的<code>Class</code>为<code>org.springframework.boot.loader.JarLauncher</code>，而该类存放在 jar 包的<code>org/springframework/boot/loader/</code>目录下，并且项目的引导类定义在<code>Start-Class</code>属性性中，该属性并非 java 平台标准<code>META-INF/MANIFEST.MF</code>属性。</p>
<blockquote>
<p>注：</p>
<ol>
<li>
<p><code>org.springframework.boot.loader.JarLauncher</code>是可执行 jar 的启动器，<code>org.springframework.boot.loader.WarLauncher</code>是可执行 war 的启动器。</p>
</li>
<li>
<p><code>org.springframework.boot.loader.JarLauncher</code>所在的 jar 文件的 Maven GAV 信息为<code>org.springframework.boot:spring-boot-loader:${springboot-version}</code>，通常情况下，这个依赖没有必要引入 springboot 项目的 pom.xml 文件。</p>
</li>
</ol>
</blockquote>
<p>查看<code>JarLauncher</code>源码，如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class JarLauncher extends ExecutableArchiveLauncher {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	static final String BOOT_INF_CLASSES = &quot;BOOT-INF/classes/&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	static final String BOOT_INF_LIB = &quot;BOOT-INF/lib/&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public JarLauncher() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	protected JarLauncher(Archive archive) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		super(archive);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	protected boolean isNestedArchive(Archive.Entry entry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		if (entry.isDirectory()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			return entry.getName().equals(BOOT_INF_CLASSES);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		return entry.getName().startsWith(BOOT_INF_LIB);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		new JarLauncher().launch(args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以发现，<code>BOOT-INF/classes/</code>与<code>BOOT-INF/lib/</code>分别使用常量<code>BOOT_INF_CLASSES</code>和<code>BOOT_INF_LIB</code>表示，并且用于<code>isNestedArchive(Archive.Entry)</code>方法判断，从该方法的实现分析，方法参数<code>Archive.Entry</code>看似为 jar 文件中的资源，比如<code>application.properties</code>。</p>
<p><code>Archive.Entry</code>有两种实现，其中一种为<code>org.springframework.boot.loader.archive.JarFileArchive.JarFileEntry</code>，基于<code>java.util.jar.JarEntry</code>，表示<code>FAT JAR</code>嵌入资源，另一种为<code>org.springframework.boot.loader.archive.ExplodedArchive.FileEntry</code>，基于文件系统实现。这也说明了<code>JarLauncher</code>支持<code>JAR</code>和<code>文件系统</code>两种启动方式。</p>
<blockquote>
<p>文件系统启动方式如下：</p>
<ol>
<li>解压 jar 包到<code>temp</code>目录：<code>unzip springboot-jar-1.0.0.jar -d tmp</code></li>
<li>进入<code>temp</code>目录，运行命令：<code>java org.springframework.boot.loader.JarLauncher</code>可以看到，项目同样能正常启动。</li>
</ol>
</blockquote>
<p>在<code>JarLauncher</code>作为引导类时，当执行<code>java -jar</code>命令时，<code>/META-INF</code>资源的<code>Main-Class</code>属性将调用其<code>main(String[])</code>方法，实际上调用的是<code>JarLauncher#launch(args)</code>方法，而该方法继承于基类<code>org.springframework.boot.loader.Launcher</code>，它们之间的继承关系如下：</p>
<ul>
<li><code>org.springframework.boot.loader.Launcher</code></li>
<li><code>org.springframework.boot.loader.ExecutableArchiveLauncher</code></li>
<li><code>org.springframework.boot.loader.JarLauncher</code></li>
<li><code>org.springframework.boot.loader.WarLauncher</code></li>
</ul>
<p>简单来说，springboot jar 启动过程如下：</p>
<ol>
<li><code>java -jar xxx.jar</code>运行的是<code>JarLauncher</code></li>
<li><code>JarLauncher#main(String[])</code>方法会调用<code>Launcher#launch(String[])</code>方法，创建 ClassLoader () 及调用项目的<code>main</code>方法</li>
</ol>
<ul>
<li>项目主类的获取实现位于<code>ExecutableArchiveLauncher#getMainClass()</code>，主要是从<code>/META-INF/MANIFEST.MF</code>获取<code>Start-Class</code>属性</li>
<li>项目主类的 main () 方法调用位于<code>MainMethodRunner#run()</code>，使用反射方式进行调用</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="3java--jar启动-springboot-war-包">3.<code>java -jar</code>启动 springboot war 包<a href="#3java--jar启动-springboot-war-包" class="hash-link" aria-label="Direct link to 3java--jar启动-springboot-war-包" title="Direct link to 3java--jar启动-springboot-war-包">​</a></h3>
<p>从上面的分析，我们得到了启动 jar 包的<code>org.springframework.boot.loader.JarLauncher</code>以及启动 war 包的<code>org.springframework.boot.loader.WarLauncher</code>，这里我们来分析下<code>WarLauncher</code>上如何工作的。</p>
<p><code>WarLauncher</code>代码如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">public class WarLauncher extends ExecutableArchiveLauncher {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private static final String WEB_INF = &quot;WEB-INF/&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private static final String WEB_INF_CLASSES = WEB_INF + &quot;classes/&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private static final String WEB_INF_LIB = WEB_INF + &quot;lib/&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	private static final String WEB_INF_LIB_PROVIDED = WEB_INF + &quot;lib-provided/&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public WarLauncher() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	protected WarLauncher(Archive archive) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		super(archive);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public boolean isNestedArchive(Archive.Entry entry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		if (entry.isDirectory()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			return entry.getName().equals(WEB_INF_CLASSES);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			return entry.getName().startsWith(WEB_INF_LIB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					|| entry.getName().startsWith(WEB_INF_LIB_PROVIDED);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		new WarLauncher().launch(args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，<code>WEB-INF/classes/</code>、<code>WEB-INF/lib/</code>、<code>WEB-INF/lib-provided/</code>均为<code>WarLauncher</code>的<code>Class Path</code>，其中<code>WEB-INF/classes/</code>、<code>WEB-INF/lib/</code>是传统的 Servlet 应用的 ClassPath 路径，而<code>WEB-INF/lib-provided/</code>属性 springboot<code>WarLauncher</code>定制实现。那么<code>WEB-INF/lib-provided/</code>究竟是干嘛的呢？看到<code>provided</code>，我们可以大胆猜想<code>WEB-INF/lib-provided/</code>存放的是<code>pom.xml</code>文件中，<code>scope</code>为<code>provided</code>的 jar。</p>
<p>为了验证以上猜想，修改的 pom.xml 文件如下：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.gitee.funcy&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    springboot-war</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;1.0.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 指定打包方式为war包 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;packaging&gt;war&lt;/packaging&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;name&gt;springboot非parent war打包方式&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;spring-boot.version&gt;2.1.1.RELEASE&lt;/spring-boot.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;maven-compiler-plugin.version&gt;3.8.1&lt;/maven-compiler-plugin.version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/properties&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dependencyManagement&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- Import dependency management from Spring Boot --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                spring-boot-dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;${spring-boot.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;type&gt;pom&lt;/type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;scope&gt;import&lt;/scope&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dependencyManagement&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-starter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-starter-web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- 测试war包中 WEB-INF/lib-provided/ 目录内容--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spring-boot-test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;scope&gt;provided&lt;/scope&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dependencies&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;build&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;plugins&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                maven-compiler-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;source&gt;${java.version}&lt;/source&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;target&gt;${java.version}&lt;/target&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/configuration&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;!-- 打成war包时，需要添加该插件 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                maven-war-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;!-- 保持与 spring-boot-dependencies 版本一致 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;3.2.2&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                spring-boot-maven-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;version&gt;${spring-boot.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;executions&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;execution&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;goals&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &lt;goal&gt;repackage&lt;/goal&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;/goals&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/execution&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/executions&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/plugin&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/plugins&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/build&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/project&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里我们添加了 springboot 的测试 jar<code>org.springframework.boot:spring-boot-test</code>，并将其<code>scope</code>设置为<code>provided</code>. 运行 maven 打包命令<code>mvn clean install -Dmaven.test.skip=true</code>，可以看到项目能正常打包。</p>
<p>打包完成后，进入<code>target</code>目录，运行<code>java -jar springboot-war-1.0.0.war</code>，项目能正常启动。</p>
<p>接下来，我们来看看<code>springboot-war-1.0.0.war</code>有些啥。首先使用<code>unzip springboot-war-1.0.0.war -d tmp</code>命令解压，再使用<code>tree -h</code>命令查看文件结构，结果如下</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain"> $ tree -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── [ 128]  META-INF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├── [ 311]  MANIFEST.MF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └── [  96]  maven</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     └── [  96]  com.gitee.funcy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         └── [ 128]  springboot-war</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ├── [  95]  pom.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             └── [3.3K]  pom.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── [ 160]  WEB-INF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├── [  96]  classes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ └── [  96]  com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │     └── [  96]  gitee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │         └── [  96]  funcy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │             └── [  96]  maven</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │                 └── [ 160]  war</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │                     ├── [ 688]  Main.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │                     ├── [ 891]  StartApplication.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │                     └── [  96]  controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │                         └── [ 646]  IndexController.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ ├── [1.2K]  lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 65K]  classmate-1.4.0.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [1.1M]  hibernate-validator-6.0.13.Final.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 65K]  jackson-annotations-2.9.0.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [316K]  jackson-core-2.9.7.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [1.3M]  jackson-databind-2.9.7.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 33K]  jackson-datatype-jdk8-2.9.7.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 98K]  jackson-datatype-jsr310-2.9.7.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [8.4K]  jackson-module-parameter-names-2.9.7.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 26K]  javax.annotation-api-1.3.2.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 65K]  jboss-logging-3.3.2.Final.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │  ├── [4.5K]  jul-to-slf4j-1.7.25.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [258K]  log4j-api-2.11.1.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 17K]  log4j-to-slf4j-2.11.1.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [284K]  logback-classic-1.2.3.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [461K]  logback-core-1.2.3.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 40K]  slf4j-api-1.7.25.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [294K]  snakeyaml-1.23.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [360K]  spring-aop-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [656K]  spring-beans-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [935K]  spring-boot-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [1.2M]  spring-boot-autoconfigure-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 413]  spring-boot-starter-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 421]  spring-boot-starter-json-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 423]  spring-boot-starter-logging-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 422]  spring-boot-starter-tomcat-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 421]  spring-boot-starter-web-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [1.0M]  spring-context-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [1.2M]  spring-core-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [274K]  spring-expression-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [ 23K]  spring-jcl-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [1.3M]  spring-web-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [782K]  spring-webmvc-5.1.3.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [3.1M]  tomcat-embed-core-9.0.13.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [244K]  tomcat-embed-el-9.0.13.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ ├── [257K]  tomcat-embed-websocket-9.0.13.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ │ └── [ 91K]  validation-api-2.0.1.Final.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ └── [  96]  lib-provided</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     └── [194K]  spring-boot-test-2.1.1.RELEASE.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── [  96]  org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── [  96]  springframework</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        └── [  96]  boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            └── [ 544]  loader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [3.5K]  ExecutableArchiveLauncher.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [1.5K]  JarLauncher.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [1.5K]  LaunchedURLClassLoader$UseFastConnectionExceptionsEnumeration.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [5.6K]  LaunchedURLClassLoader.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [4.6K]  Launcher.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [1.5K]  MainMethodRunner.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [ 266]  PropertiesLauncher$1.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [1.4K]  PropertiesLauncher$ArchiveEntryFilter.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [1.9K]  PropertiesLauncher$PrefixMatchingArchiveFilter.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [ 19K]  PropertiesLauncher.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [1.7K]  WarLauncher.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [ 416]  archive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 302]  Archive$Entry.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 437]  Archive$EntryFilter.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 945]  Archive.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 273]  ExplodedArchive$1.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [1.1K]  ExplodedArchive$FileEntry.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [1.5K]  ExplodedArchive$FileEntryIterator$EntryComparator.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [3.7K]  ExplodedArchive$FileEntryIterator.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [5.1K]  ExplodedArchive.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [1.7K]  JarFileArchive$EntryIterator.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [1.1K]  JarFileArchive$JarFileEntry.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ └── [7.2K]  JarFileArchive.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [ 224]  data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 485]  RandomAccessData.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 282]  RandomAccessDataFile$1.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [2.6K]  RandomAccessDataFile$DataInputStream.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [3.2K]  RandomAccessDataFile$FileAccess.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ └── [3.9K]  RandomAccessDataFile.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ├── [ 768]  jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [4.9K]  AsciiBytes.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 616]  Bytes.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [3.0K]  CentralDirectoryEndRecord.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [5.1K]  CentralDirectoryFileHeader.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [4.5K]  CentralDirectoryParser.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 540]  CentralDirectoryVisitor.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├ ── [ 345]  FileHeader.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 12K]  Handler.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [3.5K]  JarEntry.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 299]  JarEntryFilter.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [2.0K]  JarFile$1.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [1.2K]  JarFile$2.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [1.3K]  JarFile$JarFileType.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 15K]  JarFile.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [1.6K]  JarFileEntries$1.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [2.0K]  JarFileEntries$EntryIterator.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 14K]  JarFileEntries.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [ 702]  JarURLConnection$1.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [4.2K]  JarURLConnection$JarEntryName.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [9.6K]  JarURLConnection.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ ├── [3.5K]  StringSequence.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                │ └── [1.8K]  ZipInflaterInputStream.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                └── [  96]  util</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    └── [5.1K]  SystemPropertyUtils.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">22 directories, 93 files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>相比于<code>FAT JAR</code>的解压目录，<code>War</code>增加了<code>WEB-INF/lib-provided</code>，并且该目录仅有一个 jar 文件，即<code>spring-boot-test-2.1.1.RELEASE.jar</code>，这正是我们在 pom.xml 文件中设置的<code>scope</code>为<code>provided</code>的 jar 包。</p>
<p>由此可以得出结论：<strong><code>WEB-INF/lib-provided</code>存放的是<code>scope</code>为<code>provided</code>的 jar 包</strong>。</p>
<p>我们现来看下<code>META-INF/MANIFEST.MF</code>的内容：</p>
<div class="codeBlockContainer_Ty55 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zoWS"><pre tabindex="0" class="prism-code language-text codeBlock_Po6r thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Llrq"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat META-INF/MANIFEST.MF </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Manifest-Version: 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Built-By: fangchengyan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Start-Class: com.gitee.funcy.maven.war.Main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Spring-Boot-Classes: WEB-INF/classes/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Spring-Boot-Lib: WEB-INF/lib/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Spring-Boot-Version: 2.1.1.RELEASE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Created-By: Apache Maven 3.6.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Build-Jdk: 1.8.0_222</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Main-Class: org.springframework.boot.loader.WarLauncher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_EjFN"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RXpO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sabX"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_WdXf"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，该文件与 jar 包中的<code>META-INF/MANIFEST.MF</code>很相似，在文件中同样定义了<code>Main-Class</code>与<code>Start-Class</code>，这也说明了该 war 可以使用<code>java -jar xxx.jar</code>和<code>java org.springframework.boot.loader.WarLauncher</code>启动，这也与我们的验证结果一致。</p>
<h3 class="anchor anchorWithStickyNavbar_HWLp" id="4-tomcat-等外部容器启动-war-包">4. tomcat 等外部容器启动 war 包<a href="#4-tomcat-等外部容器启动-war-包" class="hash-link" aria-label="Direct link to 4. tomcat 等外部容器启动 war 包" title="Direct link to 4. tomcat 等外部容器启动 war 包">​</a></h3>
<p>在 springboo 刚开始推广的时候，我们还是习惯于将项目打成 war 包，然后部署到 tomcat 等 web 容器中运行。那 springboot 的 war 包是如何做到既能用 java 命令启动，又能放在 tomcat 容器中启动呢？这就是之前提到的<code>WEB-INF/lib-provided</code>目录的功能了。</p>
<p>传统的<code>servlet</code>应用的<code>class path</code>路径仅关注<code>WEB-INF/classes/</code>和<code>WEB-INF/lib/</code>，<code>WEB-INF/lib-provided/</code>目录下的 jar 包将被<code>servlet</code>容器忽略，如<code>servlet api</code>，该 api 由<code>servlet</code>容器提供。我们在打包时，可以把<code>servlet</code>相关 jar 包的<code>scope</code>设置成<code>provided</code>，这样就完美实现了<code>servlet</code>容器启动与<code>java</code>命令启动的兼容：</p>
<ul>
<li>当部署到<code>servlet</code>容器中时，<code>WEB-INF/lib-provided/</code>目录下的 jar 包就被容器忽略了（由于<code>servlet</code>容器本身就提供了<code>servlet</code>的相关 jar 包，如果不忽略，就会出现 jar 包重复引入问题）；</li>
<li>当使用<code>java</code>命令执行时，此时无<code>servlet</code>容器提供<code>servlet</code>的相关 jar 包，而<code>WarLauncher</code>在运行过程中会加载<code>WEB-INF/lib-provided/</code>目录下的 jar 包。</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Spring全家桶/SpringBoot/SpringBoot打包与启动.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_EYjg" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_eevz"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot常见注解"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">SpringBoot常见注解</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/code-note-blog/docs/Spring全家桶/SpringBoot/SpringBoot的基本使用"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">快速构建SpringBoot应用</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_lc2k thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-parent-方式引入打成-jar-包" class="table-of-contents__link toc-highlight">1. parent 方式引入，打成 jar 包</a></li><li><a href="#2-非-parent-方式引入打成-jar-包" class="table-of-contents__link toc-highlight">2. 非 parent 方式引入，打成 jar 包</a></li><li><a href="#3-parent-方式引入打成-war-包" class="table-of-contents__link toc-highlight">3. parent 方式引入，打成 war 包</a></li><li><a href="#4-非-parent-方式引入打成-war-包" class="table-of-contents__link toc-highlight">4. 非 parent 方式引入，打成 war 包</a></li><li><a href="#5-总结" class="table-of-contents__link toc-highlight">5. 总结</a></li><li><a href="#1-开发时启动" class="table-of-contents__link toc-highlight">1. 开发时启动</a></li><li><a href="#2-jar-包启动" class="table-of-contents__link toc-highlight">2. jar 包启动</a></li><li><a href="#3-war-包启动" class="table-of-contents__link toc-highlight">3. war 包启动</a></li><li><a href="#4-总结" class="table-of-contents__link toc-highlight">4. 总结</a></li><li><a href="#1-maven-打包后的文件" class="table-of-contents__link toc-highlight">1. maven 打包后的文件</a></li><li><a href="#2java--jar启动-springboot-jar-包" class="table-of-contents__link toc-highlight">2.<code>java -jar</code>启动 springboot jar 包</a></li><li><a href="#3java--jar启动-springboot-war-包" class="table-of-contents__link toc-highlight">3.<code>java -jar</code>启动 springboot war 包</a></li><li><a href="#4-tomcat-等外部容器启动-war-包" class="table-of-contents__link toc-highlight">4. tomcat 等外部容器启动 war 包</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/code-note-blog/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/code-note-blog/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_B3Gq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>