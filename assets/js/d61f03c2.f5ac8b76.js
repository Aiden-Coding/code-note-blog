"use strict";(self.webpackChunkcode_note_blog=self.webpackChunkcode_note_blog||[]).push([[2699],{28097:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var t=r(11527),a=r(88672);const i={},o=void 0,s={id:"Java/collection/Java\u96c6\u5408\u8be6\u89e3\uff1aIterator\uff0cfail-fast\u673a\u5236\u4e0e\u6bd4\u8f83\u5668",title:"Java\u96c6\u5408\u8be6\u89e3\uff1aIterator\uff0cfail-fast\u673a\u5236\u4e0e\u6bd4\u8f83\u5668",description:"\u672c\u6587\u53c2\u8003 cmsblogs.com/p=1185",source:"@site/docs/Java/collection/Java\u96c6\u5408\u8be6\u89e3\uff1aIterator\uff0cfail-fast\u673a\u5236\u4e0e\u6bd4\u8f83\u5668.md",sourceDirName:"Java/collection",slug:"/Java/collection/Java\u96c6\u5408\u8be6\u89e3\uff1aIterator\uff0cfail-fast\u673a\u5236\u4e0e\u6bd4\u8f83\u5668",permalink:"/code-note-blog/docs/Java/collection/Java\u96c6\u5408\u8be6\u89e3\uff1aIterator\uff0cfail-fast\u673a\u5236\u4e0e\u6bd4\u8f83\u5668",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Java/collection/Java\u96c6\u5408\u8be6\u89e3\uff1aIterator\uff0cfail-fast\u673a\u5236\u4e0e\u6bd4\u8f83\u5668.md",tags:[],version:"current",frontMatter:{},sidebar:"java",previous:{title:"Java\u96c6\u5408\u8be6\u89e3\uff1aHashSet\uff0cTreeSet\u4e0eLinkedHashSet",permalink:"/code-note-blog/docs/Java/collection/Java\u96c6\u5408\u8be6\u89e3\uff1aHashSet\uff0cTreeSet\u4e0eLinkedHashSet"},next:{title:"Java\u96c6\u5408\u8be6\u89e3\uff1aJava\u96c6\u5408\u7c7b\u7ec6\u8282\u7cbe\u8bb2",permalink:"/code-note-blog/docs/Java/collection/Java\u96c6\u5408\u8be6\u89e3\uff1aJava\u96c6\u5408\u7c7b\u7ec6\u8282\u7cbe\u8bb2"}},l={},c=[{value:"Iterator",id:"iterator",level:2},{value:"java.util.Iterator",id:"javautiliterator",level:3},{value:"\u5404\u4e2a\u96c6\u5408\u7684Iterator\u7684\u5b9e\u73b0",id:"\u5404\u4e2a\u96c6\u5408\u7684iterator\u7684\u5b9e\u73b0",level:3},{value:"fail-fast\u673a\u5236",id:"fail-fast\u673a\u5236",level:3},{value:"fail-fast\u793a\u4f8b",id:"fail-fast\u793a\u4f8b",level:4},{value:"fail-fast\u4ea7\u751f\u539f\u56e0",id:"fail-fast\u4ea7\u751f\u539f\u56e0",level:4},{value:"fail-fast\u89e3\u51b3\u529e\u6cd5",id:"fail-fast\u89e3\u51b3\u529e\u6cd5",level:4},{value:"Comparable",id:"comparable",level:2},{value:"Comparator",id:"comparator",level:3},{value:"Java8\u4e2d\u4f7f\u7528lambda\u5b9e\u73b0\u6bd4\u8f83\u5668",id:"java8\u4e2d\u4f7f\u7528lambda\u5b9e\u73b0\u6bd4\u8f83\u5668",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2},{value:"\u53c2\u8003\u6587\u7ae0",id:"\u53c2\u8003\u6587\u7ae0",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"\u672c\u6587\u53c2\u8003 cmsblogs.com/p=1185"}),"\n",(0,t.jsx)(n.p,{children:"\u300aJava\u96c6\u5408\u8be6\u89e3\u7cfb\u5217\u300b\u662f\u6211\u5728\u5b8c\u6210\u592f\u5b9eJava\u57fa\u7840\u7bc7\u7684\u7cfb\u5217\u535a\u5ba2\u540e\u51c6\u5907\u5f00\u59cb\u6574\u7406\u7684\u65b0\u7cfb\u5217\u6587\u7ae0\u3002\n\u4e3a\u4e86\u66f4\u597d\u5730\u8be0\u91ca\u77e5\u8bc6\u70b9\uff0c\u5f62\u6210\u4f53\u7cfb\u6587\u7ae0\uff0c\u672c\u7cfb\u5217\u6587\u7ae0\u6574\u7406\u4e86\u5f88\u591a\u4f18\u8d28\u7684\u535a\u5ba2\u5185\u5bb9\uff0c\u5982\u6709\u4fb5\u6743\u8bf7\u8054\u7cfb\u6211\uff0c\u4e00\u5b9a\u5220\u9664\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u4e9b\u6587\u7ae0\u5c06\u6574\u7406\u5230\u6211\u5728GitHub\u4e0a\u7684\u300aJava\u9762\u8bd5\u6307\u5357\u300b\u4ed3\u5e93\uff0c\u66f4\u591a\u7cbe\u5f69\u5185\u5bb9\u8bf7\u5230\u6211\u7684\u4ed3\u5e93\u91cc\u67e5\u770b"}),"\n",(0,t.jsx)(n.p,{children:"\u5982\u679c\u5bf9\u672c\u7cfb\u5217\u6587\u7ae0\u6709\u4ec0\u4e48\u5efa\u8bae\uff0c\u6216\u8005\u662f\u6709\u4ec0\u4e48\u7591\u95ee\u7684\u8bdd\uff0c\u4e5f\u53ef\u4ee5\u5173\u6ce8\u516c\u4f17\u53f7\u3010Java\u6280\u672f\u6c5f\u6e56\u3011\u8054\u7cfb\u4f5c\u8005\uff0c\u6b22\u8fce\u4f60\u53c2\u4e0e\u672c\u7cfb\u5217\u535a\u6587\u7684\u521b\u4f5c\u548c\u4fee\u8ba2\u3002"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/h2pl/Java-Tutorial",children:"https://github.com/h2pl/Java-Tutorial"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u559c\u6b22\u7684\u8bdd\u9ebb\u70e6\u70b9\u4e0bStar\u3001fork\u54c8"}),"\n",(0,t.jsx)(n.p,{children:"\u672c\u7cfb\u5217\u6587\u7ae0\u5c06\u6574\u7406\u4e8e\u6211\u7684\u4e2a\u4eba\u535a\u5ba2\uff1a"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"http://www.how2playlife.com",children:"www.how2playlife.com"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u4eca\u5929\u6211\u4eec\u6765\u63a2\u7d22\u4e00\u4e0bLIterator\uff0cfail-fast\u673a\u5236\u4e0e\u6bd4\u8f83\u5668\u7684\u6e90\u7801\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"iterator",children:"Iterator"}),"\n",(0,t.jsx)(n.p,{children:"\u8fed\u4ee3\u5bf9\u4e8e\u6211\u4eec\u641eJava\u7684\u6765\u8bf4\u7edd\u5bf9\u4e0d\u964c\u751f\u3002\u6211\u4eec\u5e38\u5e38\u4f7f\u7528JDK\u63d0\u4f9b\u7684\u8fed\u4ee3\u63a5\u53e3\u8fdb\u884cJava\u96c6\u5408\u7684\u8fed\u4ee3\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Iterator iterator = list.iterator();\nwhile(iterator.hasNext()){\n    String string = iterator.next();\n    do something\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fed\u4ee3\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5730\u7406\u89e3\u4e3a\u904d\u5386\uff0c\u662f\u4e00\u4e2a\u6807\u51c6\u5316\u904d\u5386\u5404\u7c7b\u5bb9\u5668\u91cc\u9762\u7684\u6240\u6709\u5bf9\u8c61\u7684\u65b9\u6cd5\u7c7b\uff0c\u5b83\u662f\u4e00\u4e2a\u5f88\u5178\u578b\u7684\u8bbe\u8ba1\u6a21\u5f0f\u3002Iterator\u6a21\u5f0f\u662f\u7528\u4e8e\u904d\u5386\u96c6\u5408\u7c7b\u7684\u6807\u51c6\u8bbf\u95ee\u65b9\u6cd5\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5b83\u53ef\u4ee5\u628a\u8bbf\u95ee\u903b\u8f91\u4ece\u4e0d\u540c\u7c7b\u578b\u7684\u96c6\u5408\u7c7b\u4e2d\u62bd\u8c61\u51fa\u6765\uff0c\u4ece\u800c\u907f\u514d\u5411\u5ba2\u6237\u7aef\u66b4\u9732\u96c6\u5408\u7684\u5185\u90e8\u7ed3\u6784\u3002 \u5728\u6ca1\u6709\u8fed\u4ee3\u5668\u65f6\u6211\u4eec\u90fd\u662f\u8fd9\u4e48\u8fdb\u884c\u5904\u7406\u7684\u3002\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"\u5bf9\u4e8e\u6570\u7ec4\u6211\u4eec\u662f\u4f7f\u7528\u4e0b\u6807\u6765\u8fdb\u884c\u5904\u7406\u7684"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"int[] arrays = new int[10];\n   for(int i = 0 ; i  arrays.length ; i++){\n       int a = arrays[i];\n       do something\n   }\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5bf9\u4e8eArrayList\u662f\u8fd9\u4e48\u5904\u7406\u7684"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"ListString list = new ArrayListString();\nfor(int i = 0 ; i  list.size() ;  i++){\n  String string = list.get(i);\n  do something\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5bf9\u4e8e\u8fd9\u4e24\u79cd\u65b9\u5f0f\uff0c\u6211\u4eec\u603b\u662f\u90fd\u4e8b\u5148\u77e5\u9053\u96c6\u5408\u7684\u5185\u90e8\u7ed3\u6784\uff0c\u8bbf\u95ee\u4ee3\u7801\u548c\u96c6\u5408\u672c\u8eab\u662f\u7d27\u5bc6\u8026\u5408\u7684\uff0c\u65e0\u6cd5\u5c06\u8bbf\u95ee\u903b\u8f91\u4ece\u96c6\u5408\u7c7b\u548c\u5ba2\u6237\u7aef\u4ee3\u7801\u4e2d\u5206\u79bb\u51fa\u6765\u3002\u540c\u65f6\u6bcf\u4e00\u79cd\u96c6\u5408\u5bf9\u5e94\u4e00\u79cd\u904d\u5386\u65b9\u6cd5\uff0c\u5ba2\u6237\u7aef\u4ee3\u7801\u65e0\u6cd5\u590d\u7528\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u5982\u4f55\u9700\u8981\u5c06\u4e0a\u9762\u5c06\u4e24\u4e2a\u96c6\u5408\u8fdb\u884c\u6574\u5408\u662f\u76f8\u5f53\u9ebb\u70e6\u7684\u3002\u6240\u4ee5\u4e3a\u4e86\u89e3\u51b3\u4ee5\u4e0a\u95ee\u9898\uff0cIterator\u6a21\u5f0f\u817e\u7a7a\u51fa\u4e16\uff0c\u5b83\u603b\u662f\u7528\u540c\u4e00\u79cd\u903b\u8f91\u6765\u904d\u5386\u96c6\u5408\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u4f7f\u5f97\u5ba2\u6237\u7aef\u81ea\u8eab\u4e0d\u9700\u8981\u6765\u7ef4\u62a4\u96c6\u5408\u7684\u5185\u90e8\u7ed3\u6784\uff0c\u6240\u6709\u7684\u5185\u90e8\u72b6\u6001\u90fd\u7531Iterator\u6765\u7ef4\u62a4\u3002\u5ba2\u6237\u7aef\u4ece\u4e0d\u76f4\u63a5\u548c\u96c6\u5408\u7c7b\u6253\u4ea4\u9053\uff0c\u5b83\u603b\u662f\u63a7\u5236Iterator\uff0c\u5411\u5b83\u53d1\u9001\u5411\u524d\uff0c\u5411\u540e\uff0c\u53d6\u5f53\u524d\u5143\u7d20\u7684\u547d\u4ee4\uff0c\u5c31\u53ef\u4ee5\u95f4\u63a5\u904d\u5386\u6574\u4e2a\u96c6\u5408\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u4e0a\u9762\u53ea\u662f\u5bf9Iterator\u6a21\u5f0f\u8fdb\u884c\u7b80\u5355\u7684\u8bf4\u660e\uff0c\u4e0b\u9762\u6211\u4eec\u770b\u770bJava\u4e2dIterator\u63a5\u53e3\uff0c\u770b\u4ed6\u662f\u5982\u4f55\u6765\u8fdb\u884c\u5b9e\u73b0\u7684\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"javautiliterator",children:"java.util.Iterator"}),"\n",(0,t.jsx)(n.p,{children:"\u5728Java\u4e2dIterator\u4e3a\u4e00\u4e2a\u63a5\u53e3\uff0c\u5b83\u53ea\u63d0\u4f9b\u4e86\u8fed\u4ee3\u4e86\u57fa\u672c\u89c4\u5219\uff0c\u5728JDK\u4e2d\u4ed6\u662f\u8fd9\u6837\u5b9a\u4e49\u7684\uff1a\u5bf9 collection \u8fdb\u884c\u8fed\u4ee3\u7684\u8fed\u4ee3\u5668\u3002\u8fed\u4ee3\u5668\u53d6\u4ee3\u4e86 Java Collections Framework \u4e2d\u7684 Enumeration\u3002\u8fed\u4ee3\u5668\u4e0e\u679a\u4e3e\u6709\u4e24\u70b9\u4e0d\u540c\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"1\u3001\u8fed\u4ee3\u5668\u5141\u8bb8\u8c03\u7528\u8005\u5229\u7528\u5b9a\u4e49\u826f\u597d\u7684\u8bed\u4e49\u5728\u8fed\u4ee3\u671f\u95f4\u4ece\u8fed\u4ee3\u5668\u6240\u6307\u5411\u7684 collection \u79fb\u9664\u5143\u7d20\u3002"}),"\n",(0,t.jsx)(n.p,{children:"2\u3001\u65b9\u6cd5\u540d\u79f0\u5f97\u5230\u4e86\u6539\u8fdb\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5176\u63a5\u53e3\u5b9a\u4e49\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"public interface Iterator {\n\u3000\u3000boolean hasNext();\n\u3000\u3000Object next();\n\u3000\u3000void remove();\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5176\u4e2d\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"Object next()\uff1a\u8fd4\u56de\u8fed\u4ee3\u5668\u521a\u8d8a\u8fc7\u7684\u5143\u7d20\u7684\u5f15\u7528\uff0c\u8fd4\u56de\u503c\u662fObject\uff0c\u9700\u8981\u5f3a\u5236\u8f6c\u6362\u6210\u81ea\u5df1\u9700\u8981\u7684\u7c7b\u578b"}),"\n",(0,t.jsx)(n.p,{children:"boolean hasNext()\uff1a\u5224\u65ad\u5bb9\u5668\u5185\u662f\u5426\u8fd8\u6709\u53ef\u4f9b\u8bbf\u95ee\u7684\u5143\u7d20"}),"\n",(0,t.jsx)(n.p,{children:"void remove()\uff1a\u5220\u9664\u8fed\u4ee3\u5668\u521a\u8d8a\u8fc7\u7684\u5143\u7d20"}),"\n",(0,t.jsx)(n.p,{children:"\u5bf9\u4e8e\u6211\u4eec\u800c\u8a00\uff0c\u6211\u4eec\u53ea\u4e00\u822c\u53ea\u9700\u4f7f\u7528next()\u3001hasNext()\u4e24\u4e2a\u65b9\u6cd5\u5373\u53ef\u5b8c\u6210\u8fed\u4ee3\u3002\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"for(Iterator it = c.iterator(); it.hasNext(); ) {\n\u3000\u3000Object o = it.next();\n\u3000\u3000 do something\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"==\u524d\u9762\u9610\u8ff0\u4e86Iterator\u6709\u4e00\u4e2a\u5f88\u5927\u7684\u4f18\u70b9,\u5c31\u662f\u6211\u4eec\u4e0d\u5fc5\u77e5\u9053\u96c6\u5408\u7684\u5185\u90e8\u7ed3\u679c,\u96c6\u5408\u7684\u5185\u90e8\u7ed3\u6784\u3001\u72b6\u6001\u7531Iterator\u6765\u7ef4\u6301\uff0c\u901a\u8fc7\u7edf\u4e00\u7684\u65b9\u6cd5hasNext()\u3001next()\u6765\u5224\u65ad\u3001\u83b7\u53d6\u4e0b\u4e00\u4e2a\u5143\u7d20\uff0c\u81f3\u4e8e\u5177\u4f53\u7684\u5185\u90e8\u5b9e\u73b0\u6211\u4eec\u5c31\u4e0d\u7528\u5173\u5fc3\u4e86\u3002=="}),"\n",(0,t.jsx)(n.p,{children:"\u4f46\u662f\u4f5c\u4e3a\u4e00\u4e2a\u5408\u683c\u7684\u7a0b\u5e8f\u5458\u6211\u4eec\u975e\u5e38\u6709\u5fc5\u8981\u6765\u5f04\u6e05\u695aIterator\u7684\u5b9e\u73b0\u3002\u4e0b\u9762\u5c31ArrayList\u7684\u6e90\u7801\u8fdb\u884c\u5206\u6790\u5206\u6790\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u5404\u4e2a\u96c6\u5408\u7684iterator\u7684\u5b9e\u73b0",children:"\u5404\u4e2a\u96c6\u5408\u7684Iterator\u7684\u5b9e\u73b0"}),"\n",(0,t.jsx)(n.p,{children:"\u4e0b\u9762\u5c31ArrayList\u7684Iterator\u5b9e\u73b0\u6765\u5206\u6790\uff0c\u5176\u5b9e\u5982\u679c\u6211\u4eec\u7406\u89e3\u4e86ArrayList\u3001Hashset\u3001TreeSet\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5185\u90e8\u5b9e\u73b0\uff0c\u5bf9\u4e8e\u4ed6\u4eec\u662f\u5982\u4f55\u5b9e\u73b0Iterator\u4e5f\u4f1a\u80f8\u6709\u6210\u7af9\u7684\u3002\u56e0\u4e3aArrayList\u7684\u5185\u90e8\u5b9e\u73b0\u91c7\u7528\u6570\u7ec4\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u8bb0\u5f55\u76f8\u5e94\u4f4d\u7f6e\u7684\u7d22\u5f15\u5373\u53ef\uff0c\u5176\u65b9\u6cd5\u7684\u5b9e\u73b0\u6bd4\u8f83\u7b80\u5355\u3002"}),"\n",(0,t.jsx)(n.p,{children:"ArrayList\u7684Iterator\u5b9e\u73b0"}),"\n",(0,t.jsx)(n.p,{children:"\u5728ArrayList\u5185\u90e8\u9996\u5148\u662f\u5b9a\u4e49\u4e00\u4e2a\u5185\u90e8\u7c7bItr\uff0c\u8be5\u5185\u90e8\u7c7b\u5b9e\u73b0Iterator\u63a5\u53e3\uff0c\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"private class Itr implements IteratorE {\n    do something\n}\n\u800cArrayList\u7684iterator()\u65b9\u6cd5\u5b9e\u73b0\uff1a\n\npublic IteratorE iterator() {\n        return new Itr();\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6240\u4ee5\u901a\u8fc7\u4f7f\u7528ArrayList.iterator()\u65b9\u6cd5\u8fd4\u56de\u7684\u662fItr()\u5185\u90e8\u7c7b\uff0c\u6240\u4ee5\u73b0\u5728\u6211\u4eec\u9700\u8981\u5173\u5fc3\u7684\u5c31\u662fItr()\u5185\u90e8\u7c7b\u7684\u5b9e\u73b0\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"\u5728Itr\u5185\u90e8\u5b9a\u4e49\u4e86\u4e09\u4e2aint\u578b\u7684\u53d8\u91cf\uff1acursor\u3001lastRet\u3001expectedModCount\u3002\u5176\u4e2dcursor\u8868\u793a\u4e0b\u4e00\u4e2a\u5143\u7d20\u7684\u7d22\u5f15\u4f4d\u7f6e\uff0clastRet\u8868\u793a\u4e0a\u4e00\u4e2a\u5143\u7d20\u7684\u7d22\u5f15\u4f4d\u7f6e"}),"\n",(0,t.jsxs)(n.p,{children:["int cursor;",(0,t.jsx)(n.br,{}),"\n","int lastRet = -1;",(0,t.jsx)(n.br,{}),"\n","int expectedModCount = modCount;"]}),"\n",(0,t.jsx)(n.p,{children:"\u4ececursor\u3001lastRet\u5b9a\u4e49\u53ef\u4ee5\u770b\u51fa\uff0clastRet\u4e00\u76f4\u6bd4cursor\u5c11\u4e00\u6240\u4ee5hasNext()\u5b9e\u73b0\u65b9\u6cd5\u5f02\u5e38\u7b80\u5355\uff0c\u53ea\u9700\u8981\u5224\u65adcursor\u548clastRet\u662f\u5426\u76f8\u7b49\u5373\u53ef\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"public boolean hasNext() {\n    return cursor != size;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5bf9\u4e8enext()\u5b9e\u73b0\u5176\u5b9e\u4e5f\u662f\u6bd4\u8f83\u7b80\u5355\u7684\uff0c\u53ea\u8981\u8fd4\u56decursor\u7d22\u5f15\u4f4d\u7f6e\u5904\u7684\u5143\u7d20\u5373\u53ef\uff0c\u7136\u540e\u4fee\u6539cursor\u3001lastRet\u5373\u53ef\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"public E next() {\n    checkForComodification();\n    int i = cursor;    \u8bb0\u5f55\u7d22\u5f15\u4f4d\u7f6e\n    if (i = size)    \u5982\u679c\u83b7\u53d6\u5143\u7d20\u5927\u4e8e\u96c6\u5408\u5143\u7d20\u4e2a\u6570\uff0c\u5219\u629b\u51fa\u5f02\u5e38\n        throw new NoSuchElementException();\n    Object[] elementData = ArrayList.this.elementData;\n    if (i = elementData.length)\n        throw new ConcurrentModificationException();\n    cursor = i + 1;      cursor + 1\n    return (E) elementData[lastRet = i];  lastRet + 1 \u4e14\u8fd4\u56decursor\u5904\u5143\u7d20\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"checkForComodification()\u4e3b\u8981\u7528\u6765\u5224\u65ad\u96c6\u5408\u7684\u4fee\u6539\u6b21\u6570\u662f\u5426\u5408\u6cd5\uff0c\u5373\u7528\u6765\u5224\u65ad\u904d\u5386\u8fc7\u7a0b\u4e2d\u96c6\u5408\u662f\u5426\u88ab\u4fee\u6539\u8fc7\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u3002modCount\u7528\u4e8e\u8bb0\u5f55ArrayList\u96c6\u5408\u7684\u4fee\u6539\u6b21\u6570\uff0c\u521d\u59cb\u5316\u4e3a0\uff0c\uff0c\u6bcf\u5f53\u96c6\u5408\u88ab\u4fee\u6539\u4e00\u6b21\uff08\u7ed3\u6784\u4e0a\u9762\u7684\u4fee\u6539\uff0c\u5185\u90e8update\u4e0d\u7b97\uff09\uff0c\u5982add\u3001remove\u7b49\u65b9\u6cd5\uff0cmodCount + 1\uff0c\u6240\u4ee5\u5982\u679cmodCount\u4e0d\u53d8\uff0c\u5219\u8868\u793a\u96c6\u5408\u5185\u5bb9\u6ca1\u6709\u88ab\u4fee\u6539\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u8be5\u673a\u5236\u4e3b\u8981\u662f\u7528\u4e8e\u5b9e\u73b0ArrayList\u96c6\u5408\u7684\u5feb\u901f\u5931\u8d25\u673a\u5236\uff0c\u5728Java\u7684\u96c6\u5408\u4e2d\uff0c\u8f83\u5927\u4e00\u90e8\u5206\u96c6\u5408\u662f\u5b58\u5728\u5feb\u901f\u5931\u8d25\u673a\u5236\u7684\uff0c\u8fd9\u91cc\u5c31\u4e0d\u591a\u8bf4\uff0c\u540e\u9762\u4f1a\u8bb2\u5230\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6240\u4ee5\u8981\u4fdd\u8bc1\u5728\u904d\u5386\u8fc7\u7a0b\u4e2d\u4e0d\u51fa\u9519\u8bef\uff0c\u6211\u4eec\u5c31\u5e94\u8be5\u4fdd\u8bc1\u5728\u904d\u5386\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u5bf9\u96c6\u5408\u4ea7\u751f\u7ed3\u6784\u4e0a\u7684\u4fee\u6539\uff08\u5f53\u7136remove\u65b9\u6cd5\u9664\u5916\uff09\uff0c\u51fa\u73b0\u4e86\u5f02\u5e38\u9519\u8bef\uff0c\u6211\u4eec\u5c31\u5e94\u8be5\u8ba4\u771f\u68c0\u67e5\u7a0b\u5e8f\u662f\u5426\u51fa\u9519\u800c\u4e0d\u662fcatch\u540e\u4e0d\u505a\u5904\u7406\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"final void checkForComodification() {\n            if (modCount != expectedModCount)\n                throw new ConcurrentModificationException();\n        }\n        \n//\u5bf9\u4e8eremove()\u65b9\u6cd5\u7684\u662f\u5b9e\u73b0\uff0c\u5b83\u662f\u8c03\u7528ArrayList\u672c\u8eab\u7684remove()\u65b9\u6cd5\u5220\u9664lastRet\u4f4d\u7f6e\u5143\u7d20\uff0c\u7136\u540e\u4fee\u6539modCount\u5373\u53ef\u3002\n\npublic void remove() {\n    if (lastRet  0)\n        throw new IllegalStateException();\n    checkForComodification();\n\n    try {\n        ArrayList.this.remove(lastRet);\n        cursor = lastRet;\n        lastRet = -1;\n        expectedModCount = modCount;\n    } catch (IndexOutOfBoundsException ex) {\n        throw new ConcurrentModificationException();\n    }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u91cc\u5c31\u5bf9ArrayList\u7684Iterator\u5b9e\u73b0\u8bb2\u89e3\u5230\u8fd9\u91cc\uff0c\u5bf9\u4e8eHashset\u3001TreeSet\u7b49\u96c6\u5408\u7684Iterator\u5b9e\u73b0\uff0c\u5404\u4f4d\u5982\u679c\u611f\u5174\u8da3\u53ef\u4ee5\u7ee7\u7eed\u7814\u7a76\uff0c\u4e2a\u4eba\u8ba4\u4e3a\u5728\u7814\u7a76\u8fd9\u4e9b\u96c6\u5408\u7684\u6e90\u7801\u4e4b\u524d\uff0c\u6709\u5fc5\u8981\u5bf9\u8be5\u96c6\u5408\u7684\u6570\u636e\u7ed3\u6784\u6709\u6e05\u6670\u7684\u8ba4\u8bc6\uff0c\u8fd9\u6837\u4f1a\u8fbe\u5230\u4e8b\u534a\u529f\u500d\u7684\u6548\u679c\uff01\uff01\uff01\uff01"}),"\n",(0,t.jsx)(n.h3,{id:"fail-fast\u673a\u5236",children:"fail-fast\u673a\u5236"}),"\n",(0,t.jsxs)(n.p,{children:["\u8fd9\u90e8\u5206\u53c2\u8003",(0,t.jsx)(n.a,{href:"http://cmsblogs.com/p=1220",children:"http://cmsblogs.com/p=1220"})]}),"\n",(0,t.jsx)(n.p,{children:"\u5728JDK\u7684Collection\u4e2d\u6211\u4eec\u65f6\u5e38\u4f1a\u770b\u5230\u7c7b\u4f3c\u4e8e\u8fd9\u6837\u7684\u8bdd\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"\u4f8b\u5982\uff0cArrayList"}),"\n",(0,t.jsx)(n.p,{children:"\u6ce8\u610f\uff0c\u8fed\u4ee3\u5668\u7684\u5feb\u901f\u5931\u8d25\u884c\u4e3a\u65e0\u6cd5\u5f97\u5230\u4fdd\u8bc1\uff0c\u56e0\u4e3a\u4e00\u822c\u6765\u8bf4\uff0c\u4e0d\u53ef\u80fd\u5bf9\u662f\u5426\u51fa\u73b0\u4e0d\u540c\u6b65\u5e76\u53d1\u4fee\u6539\u505a\u51fa\u4efb\u4f55\u786c\u6027\u4fdd\u8bc1\u3002\u5feb\u901f\u5931\u8d25\u8fed\u4ee3\u5668\u4f1a\u5c3d\u6700\u5927\u52aa\u529b\u629b\u51faConcurrentModificationException\u3002\n\u56e0\u6b64\uff0c\u4e3a\u63d0\u9ad8\u8fd9\u7c7b\u8fed\u4ee3\u5668\u7684\u6b63\u786e\u6027\u800c\u7f16\u5199\u4e00\u4e2a\u4f9d\u8d56\u4e8e\u6b64\u5f02\u5e38\u7684\u7a0b\u5e8f\u662f\u9519\u8bef\u7684\u505a\u6cd5\uff1a\u8fed\u4ee3\u5668\u7684\u5feb\u901f\u5931\u8d25\u884c\u4e3a\u5e94\u8be5\u4ec5\u7528\u4e8e\u68c0\u6d4b bug\u3002"}),"\n",(0,t.jsx)(n.p,{children:"HashMap\u4e2d\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"\u6ce8\u610f\uff0c\u8fed\u4ee3\u5668\u7684\u5feb\u901f\u5931\u8d25\u884c\u4e3a\u4e0d\u80fd\u5f97\u5230\u4fdd\u8bc1\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u5b58\u5728\u975e\u540c\u6b65\u7684\u5e76\u53d1\u4fee\u6539\u65f6\uff0c\u4e0d\u53ef\u80fd\u4f5c\u51fa\u4efb\u4f55\u575a\u51b3\u7684\u4fdd\u8bc1\u3002\u5feb\u901f\u5931\u8d25\u8fed\u4ee3\u5668\u5c3d\u6700\u5927\u52aa\u529b\u629b\u51fa ConcurrentModificationException\u3002\u56e0\u6b64\uff0c\u7f16\u5199\u4f9d\u8d56\u4e8e\u6b64\u5f02\u5e38\u7684\u7a0b\u5e8f\u7684\u505a\u6cd5\u662f\u9519\u8bef\u7684\uff0c\u6b63\u786e\u505a\u6cd5\u662f\uff1a\u8fed\u4ee3\u5668\u7684\u5feb\u901f\u5931\u8d25\u884c\u4e3a\u5e94\u8be5\u4ec5\u7528\u4e8e\u68c0\u6d4b\u7a0b\u5e8f\u9519\u8bef\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u8fd9\u4e24\u6bb5\u8bdd\u4e2d\u53cd\u590d\u5730\u63d0\u5230\u201d\u5feb\u901f\u5931\u8d25\u201d\u3002\u90a3\u4e48\u4f55\u4e3a\u201d\u5feb\u901f\u5931\u8d25\u201d\u673a\u5236\u5462\uff1f"}),"\n",(0,t.jsx)(n.p,{children:"\u201c\u5feb\u901f\u5931\u8d25\u201d\u4e5f\u5c31\u662ffail-fast\uff0c\u5b83\u662fJava\u96c6\u5408\u7684\u4e00\u79cd\u9519\u8bef\u68c0\u6d4b\u673a\u5236\u3002\u5f53\u591a\u4e2a\u7ebf\u7a0b\u5bf9\u96c6\u5408\u8fdb\u884c\u7ed3\u6784\u4e0a\u7684\u6539\u53d8\u7684\u64cd\u4f5c\u65f6\uff0c\u6709\u53ef\u80fd\u4f1a\u4ea7\u751ffail-fast\u673a\u5236\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u8bb0\u4f4f\u662f\u6709\u53ef\u80fd\uff0c\u800c\u4e0d\u662f\u4e00\u5b9a\u3002\u4f8b\u5982\uff1a\u5047\u8bbe\u5b58\u5728\u4e24\u4e2a\u7ebf\u7a0b\uff08\u7ebf\u7a0b1\u3001\u7ebf\u7a0b2\uff09\uff0c\u7ebf\u7a0b1\u901a\u8fc7Iterator\u5728\u904d\u5386\u96c6\u5408A\u4e2d\u7684\u5143\u7d20\uff0c\u5728\u67d0\u4e2a\u65f6\u5019\u7ebf\u7a0b2\u4fee\u6539\u4e86\u96c6\u5408A\u7684\u7ed3\u6784\uff08\u662f\u7ed3\u6784\u4e0a\u9762\u7684\u4fee\u6539\uff0c\u800c\u4e0d\u662f\u7b80\u5355\u7684\u4fee\u6539\u96c6\u5408\u5143\u7d20\u7684\u5185\u5bb9\uff09\uff0c\u90a3\u4e48\u8fd9\u4e2a\u65f6\u5019\u7a0b\u5e8f\u5c31\u4f1a\u629b\u51fa ConcurrentModificationException\u5f02\u5e38\uff0c\u4ece\u800c\u4ea7\u751ffail-fast\u673a\u5236\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"fail-fast\u793a\u4f8b",children:"fail-fast\u793a\u4f8b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"public class FailFastTest {\n    private static ListInteger list = new ArrayList();    \n \n    private static class threadOne extends Thread{\n        public void run() {\n            IteratorInteger iterator = list.iterator();\n            while(iterator.hasNext()){\n                int i = iterator.next();\n                System.out.println(ThreadOne \u904d\u5386 + i);\n                try {\n                    Thread.sleep(10);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }    \n"})}),"\n",(0,t.jsx)(n.p,{children:"desc\u5f53i == 3\u65f6\uff0c\u4fee\u6539list"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"        private static class threadTwo extends Thread{\n            public void run(){\n                int i = 0 ; \n                while(i  6){\n                    System.out.println(ThreadTwo run\uff1a + i);\n                    if(i == 3){\n                        list.remove(i);\n                    }\n                    i++;\n                }\n            }\n        }\n        \n        public static void main(String[] args) {\n            for(int i = 0 ; i  10;i++){\n                list.add(i);\n            }\n            new threadOne().start();\n            new threadTwo().start();\n        }\n    }\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fd0\u884c\u7ed3\u679c\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"ThreadOne \u904d\u53860\nThreadTwo run\uff1a0\nThreadTwo run\uff1a1\nThreadTwo run\uff1a2\nThreadTwo run\uff1a3\nThreadTwo run\uff1a4\nThreadTwo run\uff1a5\nException in thread Thread-0 java.util.ConcurrentModificationException\nat java.util.ArrayList$Itr.checkForComodification(Unknown Source)\nat java.util.ArrayList$Itr.next(Unknown Source)\nat test.ArrayListTest$threadOne.run(ArrayListTest.java23)"}),"\n",(0,t.jsx)(n.h4,{id:"fail-fast\u4ea7\u751f\u539f\u56e0",children:"fail-fast\u4ea7\u751f\u539f\u56e0"}),"\n",(0,t.jsx)(n.p,{children:"\u901a\u8fc7\u4e0a\u9762\u7684\u793a\u4f8b\u548c\u8bb2\u89e3\uff0c\u6211\u521d\u6b65\u77e5\u9053fail-fast\u4ea7\u751f\u7684\u539f\u56e0\u5c31\u5728\u4e8e\u7a0b\u5e8f\u5728\u5bf9 collection \u8fdb\u884c\u8fed\u4ee3\u65f6\uff0c\u67d0\u4e2a\u7ebf\u7a0b\u5bf9\u8be5 collection \u5728\u7ed3\u6784\u4e0a\u5bf9\u5176\u505a\u4e86\u4fee\u6539\uff0c\u8fd9\u65f6\u8fed\u4ee3\u5668\u5c31\u4f1a\u629b\u51fa ConcurrentModificationException \u5f02\u5e38\u4fe1\u606f\uff0c\u4ece\u800c\u4ea7\u751f fail-fast\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u8981\u4e86\u89e3fail-fast\u673a\u5236\uff0c\u6211\u4eec\u9996\u5148\u8981\u5bf9ConcurrentModificationException \u5f02\u5e38\u6709\u6240\u4e86\u89e3\u3002\u5f53\u65b9\u6cd5\u68c0\u6d4b\u5230\u5bf9\u8c61\u7684\u5e76\u53d1\u4fee\u6539\uff0c\u4f46\u4e0d\u5141\u8bb8\u8fd9\u79cd\u4fee\u6539\u65f6\u5c31\u629b\u51fa\u8be5\u5f02\u5e38\u3002\u540c\u65f6\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8be5\u5f02\u5e38\u4e0d\u4f1a\u59cb\u7ec8\u6307\u51fa\u5bf9\u8c61\u5df2\u7ecf\u7531\u4e0d\u540c\u7ebf\u7a0b\u5e76\u53d1\u4fee\u6539\uff0c\u5982\u679c\u5355\u7ebf\u7a0b\u8fdd\u53cd\u4e86\u89c4\u5219\uff0c\u540c\u6837\u4e5f\u6709\u53ef\u80fd\u4f1a\u629b\u51fa\u6539\u5f02\u5e38\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u8bda\u7136\uff0c\u8fed\u4ee3\u5668\u7684\u5feb\u901f\u5931\u8d25\u884c\u4e3a\u65e0\u6cd5\u5f97\u5230\u4fdd\u8bc1\uff0c\u5b83\u4e0d\u80fd\u4fdd\u8bc1\u4e00\u5b9a\u4f1a\u51fa\u73b0\u8be5\u9519\u8bef\uff0c\u4f46\u662f\u5feb\u901f\u5931\u8d25\u64cd\u4f5c\u4f1a\u5c3d\u6700\u5927\u52aa\u529b\u629b\u51faConcurrentModificationException\u5f02\u5e38\uff0c\u6240\u4ee5\u56e0\u6b64\uff0c\u4e3a\u63d0\u9ad8\u6b64\u7c7b\u64cd\u4f5c\u7684\u6b63\u786e\u6027\u800c\u7f16\u5199\u4e00\u4e2a\u4f9d\u8d56\u4e8e\u6b64\u5f02\u5e38\u7684\u7a0b\u5e8f\u662f\u9519\u8bef\u7684\u505a\u6cd5\uff0c\u6b63\u786e\u505a\u6cd5\u662f\uff1aConcurrentModificationException \u5e94\u8be5\u4ec5\u7528\u4e8e\u68c0\u6d4b bug\u3002\u4e0b\u9762\u6211\u5c06\u4ee5ArrayList\u4e3a\u4f8b\u8fdb\u4e00\u6b65\u5206\u6790fail-fast\u4ea7\u751f\u7684\u539f\u56e0\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u4ece\u524d\u9762\u6211\u4eec\u77e5\u9053fail-fast\u662f\u5728\u64cd\u4f5c\u8fed\u4ee3\u5668\u65f6\u4ea7\u751f\u7684\u3002\u73b0\u5728\u6211\u4eec\u6765\u770b\u770bArrayList\u4e2d\u8fed\u4ee3\u5668\u7684\u6e90\u4ee3\u7801\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"private class Itr implements IteratorE {\n    int cursor;\n    int lastRet = -1;\n    int expectedModCount = ArrayList.this.modCount;\n\n    public boolean hasNext() {\n        return (this.cursor != ArrayList.this.size);\n    }\n\n    public E next() {\n        checkForComodification();\n         \u7701\u7565\u6b64\u5904\u4ee3\u7801 \n    }\n\n    public void remove() {\n        if (this.lastRet  0)\n            throw new IllegalStateException();\n        checkForComodification();\n         \u7701\u7565\u6b64\u5904\u4ee3\u7801 \n    }\n\n    final void checkForComodification() {\n        if (ArrayList.this.modCount == this.expectedModCount)\n            return;\n        throw new ConcurrentModificationException();\n    }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u4ece\u4e0a\u9762\u7684\u6e90\u4ee3\u7801\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u8fed\u4ee3\u5668\u5728\u8c03\u7528next()\u3001remove()\u65b9\u6cd5\u65f6\u90fd\u662f\u8c03\u7528checkForComodification()\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u4e3b\u8981\u5c31\u662f\u68c0\u6d4bmodCount == expectedModCount  \u82e5\u4e0d\u7b49\u5219\u629b\u51faConcurrentModificationException \u5f02\u5e38\uff0c\u4ece\u800c\u4ea7\u751ffail-fast\u673a\u5236\u3002\u6240\u4ee5\u8981\u5f04\u6e05\u695a\u4e3a\u4ec0\u4e48\u4f1a\u4ea7\u751ffail-fast\u673a\u5236\u6211\u4eec\u5c31\u5fc5\u987b\u8981\u7528\u5f04\u660e\u767d\u4e3a\u4ec0\u4e48modCount != expectedModCount \uff0c\u4ed6\u4eec\u7684\u503c\u5728\u4ec0\u4e48\u65f6\u5019\u53d1\u751f\u6539\u53d8\u7684\u3002"}),"\n",(0,t.jsx)(n.p,{children:"expectedModCount \u662f\u5728Itr\u4e2d\u5b9a\u4e49\u7684\uff1aint expectedModCount = ArrayList.this.modCount;\u6240\u4ee5\u4ed6\u7684\u503c\u662f\u4e0d\u53ef\u80fd\u4f1a\u4fee\u6539\u7684\uff0c\u6240\u4ee5\u4f1a\u53d8\u7684\u5c31\u662fmodCount\u3002modCount\u662f\u5728 AbstractList \u4e2d\u5b9a\u4e49\u7684\uff0c\u4e3a\u5168\u5c40\u53d8\u91cf\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"protected transient int modCount = 0;\n\u90a3\u4e48\u4ed6\u4ec0\u4e48\u65f6\u5019\u56e0\u4e3a\u4ec0\u4e48\u539f\u56e0\u800c\u53d1\u751f\u6539\u53d8\u5462\uff1f\u8bf7\u770bArrayList\u7684\u6e90\u7801\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"public boolean add(E paramE) {\n    ensureCapacityInternal(this.size + 1);\n     \u7701\u7565\u6b64\u5904\u4ee3\u7801 \n}\n\nprivate void ensureCapacityInternal(int paramInt) {\n    if (this.elementData == EMPTY_ELEMENTDATA)\n        paramInt = Math.max(10, paramInt);\n    ensureExplicitCapacity(paramInt);\n}\n\nprivate void ensureExplicitCapacity(int paramInt) {\n    this.modCount += 1;    \u4fee\u6539modCount\n     \u7701\u7565\u6b64\u5904\u4ee3\u7801 \n}\n\npublic boolean remove(Object paramObject) {\n    int i;\n    if (paramObject == null)\n        for (i = 0; i  this.size; ++i) {\n            if (this.elementData[i] != null)\n                continue;\n            fastRemove(i);\n            return true;\n        }\n    else\n        for (i = 0; i  this.size; ++i) {\n            if (!(paramObject.equals(this.elementData[i])))\n                continue;\n            fastRemove(i);\n            return true;\n        }\n    return false;\n}\n\nprivate void fastRemove(int paramInt) {\n    this.modCount += 1;   \u4fee\u6539modCount\n     \u7701\u7565\u6b64\u5904\u4ee3\u7801 \n}\n\npublic void clear() {\n    this.modCount += 1;    \u4fee\u6539modCount\n     \u7701\u7565\u6b64\u5904\u4ee3\u7801 \n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u4ece\u4e0a\u9762\u7684\u6e90\u4ee3\u7801\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0cArrayList\u4e2d\u65e0\u8bbaadd\u3001remove\u3001clear\u65b9\u6cd5\u53ea\u8981\u662f\u6d89\u53ca\u4e86\u6539\u53d8ArrayList\u5143\u7d20\u7684\u4e2a\u6570\u7684\u65b9\u6cd5\u90fd\u4f1a\u5bfc\u81f4modCount\u7684\u6539\u53d8\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u53ef\u4ee5\u521d\u6b65\u5224\u65ad\u7531\u4e8eexpectedModCount \u5f97\u503c\u4e0emodCount\u7684\u6539\u53d8\u4e0d\u540c\u6b65\uff0c\u5bfc\u81f4\u4e24\u8005\u4e4b\u95f4\u4e0d\u7b49\u4ece\u800c\u4ea7\u751ffail-fast\u673a\u5236\u3002\u77e5\u9053\u4ea7\u751ffail-fast\u4ea7\u751f\u7684\u6839\u672c\u539f\u56e0\u4e86\uff0c\u6211\u4eec\u53ef\u4ee5\u6709\u5982\u4e0b\u573a\u666f\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"\u6709\u4e24\u4e2a\u7ebf\u7a0b\uff08\u7ebf\u7a0bA\uff0c\u7ebf\u7a0bB\uff09\uff0c\u5176\u4e2d\u7ebf\u7a0bA\u8d1f\u8d23\u904d\u5386list\u3001\u7ebf\u7a0bB\u4fee\u6539list\u3002\u7ebf\u7a0bA\u5728\u904d\u5386list\u8fc7\u7a0b\u7684\u67d0\u4e2a\u65f6\u5019\uff08\u6b64\u65f6expectedModCount = modCount=N\uff09\uff0c\u7ebf\u7a0b\u542f\u52a8\uff0c\u540c\u65f6\u7ebf\u7a0bB\u589e\u52a0\u4e00\u4e2a\u5143\u7d20\uff0c\u8fd9\u662fmodCount\u7684\u503c\u53d1\u751f\u6539\u53d8\uff08modCount + 1 = N + 1\uff09\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u7ebf\u7a0bA\u7ee7\u7eed\u904d\u5386\u6267\u884cnext\u65b9\u6cd5\u65f6\uff0c\u901a\u544acheckForComodification\u65b9\u6cd5\u53d1\u73b0expectedModCount  = N  \uff0c\u800cmodCount = N + 1\uff0c\u4e24\u8005\u4e0d\u7b49\uff0c\u8fd9\u65f6\u5c31\u629b\u51faConcurrentModificationException \u5f02\u5e38\uff0c\u4ece\u800c\u4ea7\u751ffail-fast\u673a\u5236\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6240\u4ee5\uff0c\u76f4\u5230\u8fd9\u91cc\u6211\u4eec\u5df2\u7ecf\u5b8c\u5168\u4e86\u89e3\u4e86fail-fast\u4ea7\u751f\u7684\u6839\u672c\u539f\u56e0\u4e86\u3002\u77e5\u9053\u4e86\u539f\u56e0\u5c31\u597d\u627e\u89e3\u51b3\u529e\u6cd5\u4e86\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"fail-fast\u89e3\u51b3\u529e\u6cd5",children:"fail-fast\u89e3\u51b3\u529e\u6cd5"}),"\n",(0,t.jsx)(n.p,{children:"\u901a\u8fc7\u524d\u9762\u7684\u5b9e\u4f8b\u3001\u6e90\u7801\u5206\u6790\uff0c\u6211\u60f3\u5404\u4f4d\u5df2\u7ecf\u57fa\u672c\u4e86\u89e3\u4e86fail-fast\u7684\u673a\u5236\uff0c\u4e0b\u9762\u6211\u5c31\u4ea7\u751f\u7684\u539f\u56e0\u63d0\u51fa\u89e3\u51b3\u65b9\u6848\u3002\u8fd9\u91cc\u6709\u4e24\u79cd\u89e3\u51b3\u65b9\u6848\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"\u65b9\u6848\u4e00\uff1a\u5728\u904d\u5386\u8fc7\u7a0b\u4e2d\u6240\u6709\u6d89\u53ca\u5230\u6539\u53d8modCount\u503c\u5f97\u5730\u65b9\u5168\u90e8\u52a0\u4e0asynchronized\u6216\u8005\u76f4\u63a5\u4f7f\u7528Collections.synchronizedList\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u89e3\u51b3\u3002\u4f46\u662f\u4e0d\u63a8\u8350\uff0c\u56e0\u4e3a\u589e\u5220\u9020\u6210\u7684\u540c\u6b65\u9501\u53ef\u80fd\u4f1a\u963b\u585e\u904d\u5386\u64cd\u4f5c\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u65b9\u6848\u4e8c\uff1a\u4f7f\u7528CopyOnWriteArrayList\u6765\u66ff\u6362ArrayList\u3002\u63a8\u8350\u4f7f\u7528\u8be5\u65b9\u6848\u3002"}),"\n",(0,t.jsx)(n.p,{children:"CopyOnWriteArrayList\u4e3a\u4f55\u7269\uff1fArrayList \u7684\u4e00\u4e2a\u7ebf\u7a0b\u5b89\u5168\u7684\u53d8\u4f53\uff0c\u5176\u4e2d\u6240\u6709\u53ef\u53d8\u64cd\u4f5c\uff08add\u3001set \u7b49\u7b49\uff09\u90fd\u662f\u901a\u8fc7\u5bf9\u5e95\u5c42\u6570\u7ec4\u8fdb\u884c\u4e00\u6b21\u65b0\u7684\u590d\u5236\u6765\u5b9e\u73b0\u7684\u3002 \u8be5\u7c7b\u4ea7\u751f\u7684\u5f00\u9500\u6bd4\u8f83\u5927\uff0c\u4f46\u662f\u5728\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u975e\u5e38\u9002\u5408\u4f7f\u7528\u3002"}),"\n",(0,t.jsx)(n.p,{children:"1\uff1a\u5728\u4e0d\u80fd\u6216\u4e0d\u60f3\u8fdb\u884c\u540c\u6b65\u904d\u5386\uff0c\u4f46\u53c8\u9700\u8981\u4ece\u5e76\u53d1\u7ebf\u7a0b\u4e2d\u6392\u9664\u51b2\u7a81\u65f6\u3002"}),"\n",(0,t.jsx)(n.p,{children:"2\uff1a\u5f53\u904d\u5386\u64cd\u4f5c\u7684\u6570\u91cf\u5927\u5927\u8d85\u8fc7\u53ef\u53d8\u64cd\u4f5c\u7684\u6570\u91cf\u65f6\u3002\u9047\u5230\u8fd9\u4e24\u79cd\u60c5\u51b5\u4f7f\u7528CopyOnWriteArrayList\u6765\u66ff\u4ee3ArrayList\u518d\u9002\u5408\u4e0d\u8fc7\u4e86\u3002\u90a3\u4e48\u4e3a\u4ec0\u4e48CopyOnWriterArrayList\u53ef\u4ee5\u66ff\u4ee3ArrayList\u5462\uff1f"}),"\n",(0,t.jsx)(n.p,{children:"\u7b2c\u4e00\u3001CopyOnWriterArrayList\u7684\u65e0\u8bba\u662f\u4ece\u6570\u636e\u7ed3\u6784\u3001\u5b9a\u4e49\u90fd\u548cArrayList\u4e00\u6837\u3002\u5b83\u548cArrayList\u4e00\u6837\uff0c\u540c\u6837\u662f\u5b9e\u73b0List\u63a5\u53e3\uff0c\u5e95\u5c42\u4f7f\u7528\u6570\u7ec4\u5b9e\u73b0\u3002\u5728\u65b9\u6cd5\u4e0a\u4e5f\u5305\u542badd\u3001remove\u3001clear\u3001iterator\u7b49\u65b9\u6cd5\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u7b2c\u4e8c\u3001CopyOnWriterArrayList\u6839\u672c\u5c31\u4e0d\u4f1a\u4ea7\u751fConcurrentModificationException\u5f02\u5e38\uff0c\u4e5f\u5c31\u662f\u5b83\u4f7f\u7528\u8fed\u4ee3\u5668\u5b8c\u5168\u4e0d\u4f1a\u4ea7\u751ffail-fast\u673a\u5236\u3002\u8bf7\u770b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"private static class COWIteratorE implements ListIteratorE {\n    public E next() {\n        if (!(hasNext()))\n            throw new NoSuchElementException();\n        return this.snapshot[(this.cursor++)];\n    }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"CopyOnWriterArrayList\u7684\u65b9\u6cd5\u6839\u672c\u5c31\u6ca1\u6709\u50cfArrayList\u4e2d\u4f7f\u7528checkForComodification\u65b9\u6cd5\u6765\u5224\u65adexpectedModCount \u4e0e modCount \u662f\u5426\u76f8\u7b49\u3002\u5b83\u4e3a\u4ec0\u4e48\u4f1a\u8fd9\u4e48\u505a\uff0c\u51ed\u4ec0\u4e48\u53ef\u4ee5\u8fd9\u4e48\u505a\u5462\uff1f\u6211\u4eec\u4ee5add\u65b9\u6cd5\u4e3a\u4f8b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"public boolean add(E paramE) {\n        ReentrantLock localReentrantLock = this.lock;\n        localReentrantLock.lock();\n        try {\n            Object[] arrayOfObject1 = getArray();\n            int i = arrayOfObject1.length;\n            Object[] arrayOfObject2 = Arrays.copyOf(arrayOfObject1, i + 1);\n            arrayOfObject2[i] = paramE;\n            setArray(arrayOfObject2);\n            int j = 1;\n            return j;\n        } finally {\n            localReentrantLock.unlock();\n        }\n    }\n\n    final void setArray(Object[] paramArrayOfObject) {\n        this.array = paramArrayOfObject;\n    }\n"})}),"\n",(0,t.jsx)(n.p,{children:"CopyOnWriterArrayList\u7684add\u65b9\u6cd5\u4e0eArrayList\u7684add\u65b9\u6cd5\u6709\u4e00\u4e2a\u6700\u5927\u7684\u4e0d\u540c\u70b9\u5c31\u5728\u4e8e\uff0c\u4e0b\u9762\u4e09\u53e5\u4ee3\u7801\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"Object[] arrayOfObject2 = Arrays.copyOf(arrayOfObject1, i + 1);\narrayOfObject2[i] = paramE;\nsetArray(arrayOfObject2);\n\u5c31\u662f\u8fd9\u4e09\u53e5\u4ee3\u7801\u4f7f\u5f97CopyOnWriterArrayList\u4e0d\u4f1a\u629bConcurrentModificationException\u5f02\u5e38\u3002\u4ed6\u4eec\u6240\u5c55\u73b0\u7684\u9b45\u529b\u5c31\u5728\u4e8ecopy\u539f\u6765\u7684array\uff0c\u518d\u5728copy\u6570\u7ec4\u4e0a\u8fdb\u884cadd\u64cd\u4f5c\uff0c\u8fd9\u6837\u505a\u5c31\u5b8c\u5168\u4e0d\u4f1a\u5f71\u54cdCOWIterator\u4e2d\u7684array\u4e86\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6240\u4ee5CopyOnWriterArrayList\u6240\u4ee3\u8868\u7684\u6838\u5fc3\u6982\u5ff5\u5c31\u662f\uff1a\u4efb\u4f55\u5bf9array\u5728\u7ed3\u6784\u4e0a\u6709\u6240\u6539\u53d8\u7684\u64cd\u4f5c\uff08add\u3001remove\u3001clear\u7b49\uff09\uff0cCopyOnWriterArrayList\u90fd\u4f1acopy\u73b0\u6709\u7684\u6570\u636e\uff0c\u518d\u5728copy\u7684\u6570\u636e\u4e0a\u4fee\u6539\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u5f71\u54cdCOWIterator\u4e2d\u7684\u6570\u636e\u4e86\uff0c\u4fee\u6539\u5b8c\u6210\u4e4b\u540e\u6539\u53d8\u539f\u6709\u6570\u636e\u7684\u5f15\u7528\u5373\u53ef\u3002\u540c\u65f6\u8fd9\u6837\u9020\u6210\u7684\u4ee3\u4ef7\u5c31\u662f\u4ea7\u751f\u5927\u91cf\u7684\u5bf9\u8c61\uff0c\u540c\u65f6\u6570\u7ec4\u7684copy\u4e5f\u662f\u76f8\u5f53\u6709\u635f\u8017\u7684\u3002"}),"\n",(0,t.jsx)(n.h1,{id:"comparable-\u548c-comparator",children:"Comparable \u548c Comparator"}),"\n",(0,t.jsx)(n.p,{children:"Java \u4e2d\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e24\u79cd\u6bd4\u8f83\u673a\u5236\uff1aComparable \u548c Comparator\uff0c\u4ed6\u4eec\u4e4b\u95f4\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f\u4eca\u5929\u6765\u4e86\u89e3\u4e00\u4e0b\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"comparable",children:"Comparable"}),"\n",(0,t.jsx)(n.p,{children:"Comparable \u5728 java.lang\u5305\u4e0b\uff0c\u662f\u4e00\u4e2a\u63a5\u53e3\uff0c\u5185\u90e8\u53ea\u6709\u4e00\u4e2a\u65b9\u6cd5 compareTo()\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"    public interface ComparableT {\n        public int compareTo(T o);\n    }\n"})}),"\n",(0,t.jsx)(n.p,{children:"Comparable \u53ef\u4ee5\u8ba9\u5b9e\u73b0\u5b83\u7684\u7c7b\u7684\u5bf9\u8c61\u8fdb\u884c\u6bd4\u8f83\uff0c\u5177\u4f53\u7684\u6bd4\u8f83\u89c4\u5219\u662f\u6309\u7167 compareTo \u65b9\u6cd5\u4e2d\u7684\u89c4\u5219\u8fdb\u884c\u3002\u8fd9\u79cd\u987a\u5e8f\u79f0\u4e3a \u81ea\u7136\u987a\u5e8f\u3002"}),"\n",(0,t.jsx)(n.p,{children:"compareTo \u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u6709\u4e09\u79cd\u60c5\u51b5\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"e1.compareTo(e2)  0 \u5373 e1  e2\ne1.compareTo(e2) = 0 \u5373 e1 = e2\ne1.compareTo(e2)  0 \u5373 e1  e2"}),"\n",(0,t.jsx)(n.p,{children:"\u6ce8\u610f\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"1.\u7531\u4e8e null \u4e0d\u662f\u4e00\u4e2a\u7c7b\uff0c\u4e5f\u4e0d\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u56e0\u6b64\u5728\u91cd\u5199 compareTo \u65b9\u6cd5\u65f6\u5e94\u8be5\u6ce8\u610f e.compareTo(null) \u7684\u60c5\u51b5\uff0c\u5373\u4f7f e.equals(null) \u8fd4\u56de false\uff0ccompareTo \u65b9\u6cd5\u4e5f\u5e94\u8be5\u4e3b\u52a8\u629b\u51fa\u4e00\u4e2a\u7a7a\u6307\u9488\u5f02\u5e38 NullPointerException\u3002"}),"\n",(0,t.jsx)(n.p,{children:"2.Comparable \u5b9e\u73b0\u7c7b\u91cd\u5199 compareTo \u65b9\u6cd5\u65f6\u4e00\u822c\u8981\u6c42 e1.compareTo(e2) == 0 \u7684\u7ed3\u679c\u8981\u548c e1.equals(e2) \u4e00\u81f4\u3002\u8fd9\u6837\u5c06\u6765\u4f7f\u7528 SortedSet \u7b49\u6839\u636e\u7c7b\u7684\u81ea\u7136\u6392\u5e8f\u8fdb\u884c\u6392\u5e8f\u7684\u96c6\u5408\u5bb9\u5668\u65f6\u53ef\u4ee5\u4fdd\u8bc1\u4fdd\u5b58\u7684\u6570\u636e\u7684\u987a\u5e8f\u548c\u60f3\u8c61\u4e2d\u4e00\u81f4\u3002\n\u6709\u4eba\u53ef\u80fd\u597d\u5947\u4e0a\u9762\u7684\u7b2c\u4e8c\u70b9\u5982\u679c\u8fdd\u53cd\u4e86\u4f1a\u600e\u6837\u5462\uff1f"}),"\n",(0,t.jsx)(n.p,{children:"\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u4f60\u5f80\u4e00\u4e2a SortedSet \u4e2d\u5148\u540e\u6dfb\u52a0\u4e24\u4e2a\u5bf9\u8c61 a \u548c b\uff0ca b \u6ee1\u8db3 (!a.equals(b) && a.compareTo(b) == 0)\uff0c\u540c\u65f6\u4e5f\u6ca1\u6709\u53e6\u5916\u6307\u5b9a\u4e2a Comparator\uff0c\u90a3\u5f53\u4f60\u6dfb\u52a0\u5b8c a \u518d\u6dfb\u52a0 b \u65f6\u4f1a\u6dfb\u52a0\u5931\u8d25\u8fd4\u56de false, SortedSet \u7684 size \u4e5f\u4e0d\u4f1a\u589e\u52a0\uff0c\u56e0\u4e3a\u5728 SortedSet \u770b\u6765\u5b83\u4eec\u662f\u76f8\u540c\u7684\uff0c\u800c SortedSet \u4e2d\u662f\u4e0d\u5141\u8bb8\u91cd\u590d\u7684\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5b9e\u9645\u4e0a\u6240\u6709\u5b9e\u73b0\u4e86 Comparable \u63a5\u53e3\u7684 Java \u6838\u5fc3\u7c7b\u7684\u7ed3\u679c\u90fd\u548c equlas \u65b9\u6cd5\u4fdd\u6301\u4e00\u81f4\u3002\n\u5b9e\u73b0\u4e86 Comparable \u63a5\u53e3\u7684 List \u6216\u5219\u6570\u7ec4\u53ef\u4ee5\u4f7f\u7528 Collections.sort() \u6216\u8005 Arrays.sort() \u65b9\u6cd5\u8fdb\u884c\u6392\u5e8f\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5b9e\u73b0\u4e86 Comparable \u63a5\u53e3\u7684\u5bf9\u8c61\u624d\u80fd\u591f\u76f4\u63a5\u88ab\u7528\u4f5c SortedMap (SortedSet) \u7684 key\uff0c\u8981\u4e0d\u7136\u5f97\u5728\u5916\u8fb9\u6307\u5b9a Comparator \u6392\u5e8f\u89c4\u5219\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u56e0\u6b64\u81ea\u5df1\u5b9a\u4e49\u7684\u7c7b\u5982\u679c\u60f3\u8981\u4f7f\u7528\u6709\u5e8f\u7684\u96c6\u5408\u7c7b\uff0c\u9700\u8981\u5b9e\u73b0 Comparable \u63a5\u53e3\uff0c\u6bd4\u5982\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"description \u6d4b\u8bd5\u7528\u7684\u5b9e\u4f53\u7c7b \u4e66, \u5b9e\u73b0\u4e86 Comparable \u63a5\u53e3\uff0c\u81ea\u7136\u6392\u5e8f"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"    public class BookBean implements Serializable, Comparable {\n        private String name;\n        private int count;\n\n\n    public BookBean(String name, int count) {\n        this.name = name;\n        this.count = count;\n    }\n    \n    public String getName() {\n        return name;\n    }\n    \n    public void setName(String name) {\n        this.name = name;\n    }\n    \n    public int getCount() {\n        return count;\n    }\n    \n    public void setCount(int count) {\n        this.count = count;\n    }\n     \n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (!(o instanceof BookBean)) return false;\n    \n        BookBean bean = (BookBean) o;\n    \n        if (getCount() != bean.getCount()) return false;\n        return getName().equals(bean.getName());\n    \n    }\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u91cd\u5199 hashCode \u7684\u8ba1\u7b97\u65b9\u6cd5\n\u6839\u636e\u6240\u6709\u5c5e\u6027\u8fdb\u884c \u8fed\u4ee3\u8ba1\u7b97\uff0c\u907f\u514d\u91cd\u590d\n\u8ba1\u7b97 hashCode \u65f6 \u8ba1\u7b97\u56e0\u5b50 31 \u89c1\u5f97\u5f88\u591a\uff0c\u662f\u4e00\u4e2a\u8d28\u6570\uff0c\u4e0d\u80fd\u518d\u88ab\u9664"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"    @Override\n    public int hashCode() {\n        \u8c03\u7528 String \u7684 hashCode(), \u552f\u4e00\u8868\u793a\u4e00\u4e2a\u5b57\u7b26\u4e32\u5185\u5bb9\n        int result = getName().hashCode();\n        \u4e58\u4ee5 31, \u518d\u52a0\u4e0a count\n        result = 31  result + getCount();\n        return result;\n    }\n    \n    @Override\n    public String toString() {\n        return BookBean{ +\n                name=' + name + ''' +\n                , count= + count +\n                '}';\n    }\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5f53\u5411 TreeSet \u4e2d\u6dfb\u52a0 BookBean \u65f6\uff0c\u4f1a\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u8fdb\u884c\u6392\u5e8f"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"    @Override\n    public int compareTo(Object another) {\n        if (another instanceof BookBean){\n            BookBean anotherBook = (BookBean) another;\n            int result;\n    \n            \u6bd4\u5982\u8fd9\u91cc\u6309\u7167\u4e66\u4ef7\u6392\u5e8f\n            result = getCount() - anotherBook.getCount();     \n    \n          \u6216\u8005\u6309\u7167 String \u7684\u6bd4\u8f83\u987a\u5e8f\n          result = getName().compareTo(anotherBook.getName());\n    \n            if (result == 0){   \u5f53\u4e66\u4ef7\u4e00\u81f4\u65f6\uff0c\u518d\u5bf9\u6bd4\u4e66\u540d\u3002 \u4fdd\u8bc1\u6240\u6709\u5c5e\u6027\u6bd4\u8f83\u4e00\u904d\n                result = getName().compareTo(anotherBook.getName());\n            }\n            return result;\n        }\n         \u4e00\u6837\u5c31\u8fd4\u56de 0\n        return 0;\n    }\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u4e0a\u8ff0\u4ee3\u7801\u8fd8\u91cd\u5199\u4e86 equlas(), hashCode() \u65b9\u6cd5\uff0c\u81ea\u5b9a\u4e49\u7684\u7c7b\u5c06\u6765\u53ef\u80fd\u4f1a\u8fdb\u884c\u6bd4\u8f83\u65f6\uff0c\u5efa\u8bae\u91cd\u5199\u8fd9\u4e9b\u65b9\u6cd5\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u91cc\u6211\u60f3\u8868\u8fbe\u7684\u662f\u5728\u6709\u4e9b\u573a\u666f\u4e0b equals \u548c compareTo \u7ed3\u679c\u8981\u4fdd\u6301\u4e00\u81f4\uff0c\u8fd9\u65f6\u5019\u4e0d\u91cd\u5199 equals\uff0c\u4f7f\u7528 Object.equals \u65b9\u6cd5\u5f97\u5230\u7684\u7ed3\u679c\u4f1a\u6709\u95ee\u9898\uff0c\u6bd4\u5982\u8bf4 HashMap.put() \u65b9\u6cd5\uff0c\u4f1a\u5148\u8c03\u7528 key \u7684 equals \u65b9\u6cd5\u8fdb\u884c\u6bd4\u8f83\uff0c\u7136\u540e\u624d\u8c03\u7528 compareTo\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u540e\u9762\u91cd\u5199 compareTo \u65f6\uff0c\u8981\u5224\u65ad\u67d0\u4e2a\u76f8\u540c\u65f6\u5bf9\u6bd4\u4e0b\u4e00\u4e2a\u5c5e\u6027\uff0c\u628a\u6240\u6709\u5c5e\u6027\u90fd\u6bd4\u8f83\u4e00\u6b21\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"comparator",children:"Comparator"}),"\n",(0,t.jsx)(n.p,{children:"\u9996\u5148\u8ba4\u8bc6\u4e00\u4e0bComparator\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"Comparator \u662fjavase\u4e2d\u7684\u63a5\u53e3\uff0c\u4f4d\u4e8ejava.util\u5305\u4e0b\uff0c\u8be5\u63a5\u53e3\u62bd\u8c61\u5ea6\u6781\u9ad8\uff0c\u6709\u5fc5\u8981\u638c\u63e1\u8be5\u63a5\u53e3\u7684\u4f7f\u7528\n\u5927\u591a\u6570\u6587\u7ae0\u544a\u8bc9\u5927\u5bb6Comparator\u662f\u7528\u6765\u6392\u5e8f\uff0c\u4f46\u6211\u60f3\u8bf4\u6392\u5e8f\u662fComparator\u80fd\u5b9e\u73b0\u7684\u529f\u80fd\u4e4b\u4e00\uff0c\u4ed6\u4e0d\u4ec5\u9650\u4e8e\u6392\u5e8f"}),"\n",(0,t.jsxs)(n.p,{children:["\u6392\u5e8f\u4f8b\u5b50\uff1a\n\u9898\u76ee\u63cf\u8ff0\n\u8f93\u5165\u4e00\u4e2a\u6b63\u6574\u6570\u6570\u7ec4\uff0c\u628a\u6570\u7ec4\u91cc\u6240\u6709\u6570\u5b57\u62fc\u63a5\u8d77\u6765\u6392\u6210\u4e00\u4e2a\u6570\uff0c\u6253\u5370\u80fd\u62fc\u63a5\u51fa\u7684\u6240\u6709\u6570\u5b57\u4e2d\u6700\u5c0f\u7684\u4e00\u4e2a\u3002\u4f8b\u5982\u8f93\u5165\u6570\u7ec4",(0,t.jsx)(n.code,{children:"{3\uff0c32\uff0c321}"}),"\uff0c\u5219\u6253\u5370\u51fa\u8fd9\u4e09\u4e2a\u6570\u5b57\u80fd\u6392\u6210\u7684\u6700\u5c0f\u6570\u5b57\u4e3a321323\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u4ee3\u7801\u5b9e\u73b0\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Comparator;\n \npublic class Solution {\n    public String PrintMinNumber(int [] s) {\n        if(s==null) return null;\n        String s1="";\n        ArrayList<Integer> list=new ArrayList<Integer>();\n        for(int i=0;i<s.length;i++){\n             list.add(s[i]);\n        }\n        Collections.sort(list,new Comparator<Integer>(){\n            public int compare(Integer str1,Integer str2){\n                String s1=str1+""+str2;\n                String s2=str2+""+str1;\n                return s1.compareTo(s2);\n            }\n        });\n         for(int j:list){\n                s1+=j;\n             }\n        return s1;\n    }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u4e00\u822c\u9700\u8981\u505a\u6bd4\u8f83\u7684\u903b\u8f91\u90fd\u53ef\u4ee5\u4f7f\u7528\u7684\u4e0aComparator\uff0c\u6700\u5e38\u7528\u7684\u573a\u666f\u5c31\u662f\u6392\u5e8f\u548c\u5206\u7ec4\uff0c\u6392\u5e8f\u5e38\u4f7f\u7528Arrays\u548cCollections\u7684sort\u65b9\u6cd5\uff0c\u800c\u5206\u7ec4\u5219\u53ef\u4ee5\u4f7f\u7528\u63d0\u4f9b\u7684divider\u65b9\u6cd5\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6392\u5e8f\u548c\u5206\u7ec4\u7684\u533a\u522b\u5728\u4e8e:\n\u6392\u5e8f\u65f6\uff0c\u4e24\u4e2a\u5bf9\u8c61\u6bd4\u8f83\u7684\u7ed3\u679c\u6709\u4e09\u79cd\uff1a\u5927\u4e8e\uff0c\u7b49\u4e8e\uff0c\u5c0f\u4e8e\u3002\n\u5206\u7ec4\u65f6\uff0c\u4e24\u4e2a\u5bf9\u8c61\u6bd4\u8f83\u7684\u7ed3\u679c\u53ea\u6709\u4e24\u79cd\uff1a\u7b49\u4e8e(\u4e24\u4e2a\u5bf9\u8c61\u5c5e\u4e8e\u540c\u4e00\u7ec4)\uff0c\u4e0d\u7b49\u4e8e(\u4e24\u4e2a\u5bf9\u8c61\u5c5e\u4e8e\u4e0d\u540c\u7ec4)"}),"\n",(0,t.jsx)(n.h3,{id:"java8\u4e2d\u4f7f\u7528lambda\u5b9e\u73b0\u6bd4\u8f83\u5668",children:"Java8\u4e2d\u4f7f\u7528lambda\u5b9e\u73b0\u6bd4\u8f83\u5668"}),"\n",(0,t.jsx)(n.p,{children:"\u4eca\u5929\u5148\u770b\u770bLambda \u8868\u8fbe\u5f0f\u7684\u7b80\u5355\u4f7f\u7528\uff1a\n\u9996\u5148\uff1aLambda\u8868\u8fbe\u5f0f\u7684\u57fa\u672c\u8bed\u6cd5\uff1a(parameters) -> expression\u6216\uff08\u8bf7\u6ce8\u610f\u8bed\u53e5\u7684\u82b1\u62ec\u53f7\uff09"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"(parameters) -> { statements; }\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u7b2c\u4e00\u611f\u89c9\u5c31\u662f\u8fd9\u4e2a\u7bad\u5934\u611f\u89c9\u6709\u70b9\u602a\uff0c\u4e0d\u8fc7\u591a\u7528\u51e0\u6b21\u4e60\u60ef\u5c31\u597d\uff0c\u5b83\u4e3b\u8981\u662f\u4e3a\u4e86\u628a\u53c2\u6570\u5217\u8868\u4e0eLambda\u4e3b\u4f53\u5206\u9694\u5f00\uff0c\u7bad\u5934\u5de6\u8fb9\u7684\u662f\u53c2\u6570\u5217\u8868\uff0c\u53f3\u8fb9\u7684\u662fLambda\u4e3b\u4f53\u3002\u6ce8\u610f\uff1aLambda\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5305\u542b\u591a\u884c\u8bed\u53e5\u3002\n\u5728\u7528Lambda \u4e4b\u524d\uff0c\u6211\u4eec\u5148\u770b\u770b\u4e4b\u524d\u5199\u6bd4\u8f83\u5668\u7684\u5199\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"    Comparator<Developer> byName = new Comparator<Developer>() {\n        @Override\n        public int compare(Developer o1, Developer o2) {\n            return o1.getName().compareTo(o2.getName());\n        }\n    };\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u611f\u89c9\u4e5f\u4e0d\u662f\u5f88\u590d\u6742\uff0c\u6ca1\u51e0\u884c\u4ee3\u7801\uff0c\u518d\u6765\u770b\u770bLambda \u8868\u8fbe\u5f0f\u7684\u5199\u6cd5\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"    Comparator<Developer> byName =\n        (Developer o1, Developer o2)->o1.getName().compareTo(o2.getName());\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6bd4\u4e4b\u524d\u8981\u7b80\u5355\u8bb8\u591a\u6709\u6728\u6709\u3002\n\u4e0b\u9762\u518d\u6765\u770b\u770b\u6392\u5e8f\u529f\u80fd\u793a\u4f8b\uff1a\n\u5148\u7528Collections.sort\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'    public class TestSorting {\n        public static void main(String[] args) {\n            List<Developer> listDevs = getDevelopers();\n            System.out.println("Before Sort");\n            for (Developer developer : listDevs) {\n                System.out.println(developer);\n            }\n            //\u5b89\u88c5\u5e74\u9f84\u6392\u5e8f\n            Collections.sort(listDevs, new Comparator<Developer>() {\n                @Override\n                public int compare(Developer o1, Developer o2) {\n                    return o1.getAge() - o2.getAge();\n                }\n            });\n            System.out.println("After Sort");\n            for (Developer developer : listDevs) {\n                System.out.println(developer);\n            }\n        }\n        private static List<Developer> getDevelopers() {\n            List<Developer> result = new ArrayList<Developer>();\n            result.add(new Developer("mkyong", new BigDecimal("70000"), 33));\n            result.add(new Developer("alvin", new BigDecimal("80000"), 20));\n            result.add(new Developer("jason", new BigDecimal("100000"), 10));\n            result.add(new Developer("iris", new BigDecimal("170000"), 55));\n            return result;\n        }\n    }\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u8f93\u51fa\u7ed3\u679c\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"Before Sort\nDeveloper [name=mkyong, salary=70000, age=33]\nDeveloper [name=alvin, salary=80000, age=20]\nDeveloper [name=jason, salary=100000, age=10]\nDeveloper [name=iris, salary=170000, age=55]"}),"\n",(0,t.jsx)(n.p,{children:"After Sort\nDeveloper [name=jason, salary=100000, age=10]\nDeveloper [name=alvin, salary=80000, age=20]\nDeveloper [name=mkyong, salary=70000, age=33]\nDeveloper [name=iris, salary=170000, age=55]"}),"\n",(0,t.jsx)(n.p,{children:"\u770b\u8d77\u6765\u6574\u4e2a\u6d41\u7a0b\u5b8c\u5168\u6ca1\u6bdb\u75c5\uff0c\u4e0b\u9762\u518d\u6765\u770b\u770bLambda\u7684\u65b9\u5f0f:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'    public class TestSorting {\n        public static void main(String[] args) {\n            List<Developer> listDevs = getDevelopers();\n            System.out.println("Before Sort");\n            for (Developer developer : listDevs) {\n                System.out.println(developer);\n            }\n            System.out.println("After Sort");\n            //\u5bf9\u6bd4\u4e0a\u9762\u7684\u4ee3\u7801\n            listDevs.sort((Developer o1, Developer o2)->o1.getAge()-o2.getAge());\n            //\u8fd9\u6837\u6253\u5370\u611f\u89c9\u4e5f\u4e0d\u9519\n            listDevs.forEach((developer)->System.out.println(developer));\n        }\n        private static List<Developer> getDevelopers() {\n            List<Developer> result = new ArrayList<Developer>();\n            result.add(new Developer("mkyong", new BigDecimal("70000"), 33));\n            result.add(new Developer("alvin", new BigDecimal("80000"), 20));\n            result.add(new Developer("jason", new BigDecimal("100000"), 10));\n            result.add(new Developer("iris", new BigDecimal("170000"), 55));\n            return result;\n        }\n    }\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u8f93\u51fa\u7ed3\u679c\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"Before Sort\nDeveloper [name=mkyong, salary=70000, age=33]\nDeveloper [name=alvin, salary=80000, age=20]\nDeveloper [name=jason, salary=100000, age=10]\nDeveloper [name=iris, salary=170000, age=55]"}),"\n",(0,t.jsx)(n.p,{children:"After Sort\nDeveloper [name=jason, salary=100000, age=10]\nDeveloper [name=alvin, salary=80000, age=20]\nDeveloper [name=mkyong, salary=70000, age=33]\nDeveloper [name=iris, salary=170000, age=55]"}),"\n",(0,t.jsx)(n.p,{children:"\u603b\u4f53\u6765\u8bf4\uff0c\u5199\u6cd5\u4e0e\u4e4b\u524d\u6709\u8f83\u5927\u7684\u6539\u53d8\uff0c\u5199\u7684\u4ee3\u7801\u66f4\u5c11\uff0c\u66f4\u7b80\u4fbf\uff0c\u611f\u89c9\u8fd8\u4e0d\u9519\u3002\n\u540e\u7eed\u4f1a\u5e26\u6765\u66f4\u591a\u6709\u5173Java8\u76f8\u5173\u7684\u4e1c\u897f\uff0c\u6bd5\u7adf\u4f5c\u4e3a\u4e00\u53ea\u7a0b\u5e8f\u72d7\uff0c\u5f97\u4e0d\u505c\u7684\u5b66\u4e60\u624d\u80fd\u4e0d\u88ab\u6dd8\u6c70\u3002Java\u8bed\u8a00\u90fd\u5728\u4e0d\u505c\u7684\u6539\u8fdb\u66f4\u65b0\uff0c\u6211\u4eec\u6709\u5565\u7406\u7531\u4e0d\u8ddf\u4e0a\u8282\u594f\u5462\uff1f\n\u7531\u4e8e\u65f6\u95f4\u95ee\u9898\u8fd9\u91cc\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u5e94\u7528\uff0c\u60f3\u4e86\u89e3\u66f4\u591a\u53ef\u5230\u5b98\u7f51\u67e5\u627e\u76f8\u5173\u793a\u4f8b\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,t.jsx)(n.p,{children:"Java \u4e2d\u7684\u4e24\u79cd\u6392\u5e8f\u65b9\u5f0f\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"Comparable \u81ea\u7136\u6392\u5e8f\u3002\uff08\u5b9e\u4f53\u7c7b\u5b9e\u73b0\uff09\nComparator \u662f\u5b9a\u5236\u6392\u5e8f\u3002\uff08\u65e0\u6cd5\u4fee\u6539\u5b9e\u4f53\u7c7b\u65f6\uff0c\u76f4\u63a5\u5728\u8c03\u7528\u65b9\u521b\u5efa\uff09\n\u540c\u65f6\u5b58\u5728\u65f6\u91c7\u7528 Comparator\uff08\u5b9a\u5236\u6392\u5e8f\uff09\u7684\u89c4\u5219\u8fdb\u884c\u6bd4\u8f83\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5bf9\u4e8e\u4e00\u4e9b\u666e\u901a\u7684\u6570\u636e\u7c7b\u578b\uff08\u6bd4\u5982 String, Integer, Double\u2026\uff09\uff0c\u5b83\u4eec\u9ed8\u8ba4\u5b9e\u73b0\u4e86Comparable \u63a5\u53e3\uff0c\u5b9e\u73b0\u4e86 compareTo \u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u800c\u5bf9\u4e8e\u4e00\u4e9b\u81ea\u5b9a\u4e49\u7c7b\uff0c\u5b83\u4eec\u53ef\u80fd\u5728\u4e0d\u540c\u60c5\u51b5\u4e0b\u9700\u8981\u5b9e\u73b0\u4e0d\u540c\u7684\u6bd4\u8f83\u7b56\u7565\uff0c\u6211\u4eec\u53ef\u4ee5\u65b0\u521b\u5efa Comparator \u63a5\u53e3\uff0c\u7136\u540e\u4f7f\u7528\u7279\u5b9a\u7684 Comparator \u5b9e\u73b0\u8fdb\u884c\u6bd4\u8f83\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u5c31\u662f Comparable \u548c Comparator \u7684\u533a\u522b\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u53c2\u8003\u6587\u7ae0",children:"\u53c2\u8003\u6587\u7ae0"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://blog.csdn.net/weixin_30363263/article/details/80867590",children:"https://blog.csdn.net/weixin_30363263/article/details/80867590"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://www.cnblogs.com/shizhijie/p/7657049.html",children:"https://www.cnblogs.com/shizhijie/p/7657049.html"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://www.cnblogs.com/xiaweicn/p/8688216.html",children:"https://www.cnblogs.com/xiaweicn/p/8688216.html"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://cmsblogs.com/p=1185",children:"https://cmsblogs.com/p=1185"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://blog.csdn.net/android_hl/article/details/53228348",children:"https://blog.csdn.net/android_hl/article/details/53228348"})})]})}function p(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},88672:(e,n,r)=>{r.d(n,{Z:()=>s,a:()=>o});var t=r(50959);const a={},i=t.createContext(a);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);