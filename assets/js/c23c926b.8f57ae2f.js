"use strict";(self.webpackChunkcode_note_blog=self.webpackChunkcode_note_blog||[]).push([[102],{97270:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>x,frontMatter:()=>r,metadata:()=>d,toc:()=>h});var s=i(11527),l=i(88672);const r={title:"Java\u5e76\u53d1\u7f16\u7a0b",description:"Java\u5e76\u53d1\u7f16\u7a0b\u9762\u8bd5\u9898\uff0c60\u9053Java\u591a\u7ebf\u7a0b\u516b\u80a1\u6587\uff082.1\u4e07\u5b5792\u5f20\u624b\u7ed8\u56fe\uff09\uff0c\u9762\u6e23\u9006\u88ad\u5fc5\u770b\ud83d\udc4d",head:[["meta",{name:"keywords",content:"Java,Thread,Java\u5e76\u53d1\u7f16\u7a0b,Java\u591a\u7ebf\u7a0b,Java\u9762\u8bd5\u9898,Java\u5e76\u53d1\u7f16\u7a0b\u9762\u8bd5\u9898,\u9762\u8bd5\u9898,\u516b\u80a1\u6587,java"}]]},c=void 0,d={id:"mianshi/javathread",title:"Java\u5e76\u53d1\u7f16\u7a0b",description:"Java\u5e76\u53d1\u7f16\u7a0b\u9762\u8bd5\u9898\uff0c60\u9053Java\u591a\u7ebf\u7a0b\u516b\u80a1\u6587\uff082.1\u4e07\u5b5792\u5f20\u624b\u7ed8\u56fe\uff09\uff0c\u9762\u6e23\u9006\u88ad\u5fc5\u770b\ud83d\udc4d",source:"@site/docs/mianshi/javathread.md",sourceDirName:"mianshi",slug:"/mianshi/javathread",permalink:"/code-note-blog/docs/mianshi/javathread",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/mianshi/javathread.md",tags:[],version:"current",frontMatter:{title:"Java\u5e76\u53d1\u7f16\u7a0b",description:"Java\u5e76\u53d1\u7f16\u7a0b\u9762\u8bd5\u9898\uff0c60\u9053Java\u591a\u7ebf\u7a0b\u516b\u80a1\u6587\uff082.1\u4e07\u5b5792\u5f20\u624b\u7ed8\u56fe\uff09\uff0c\u9762\u6e23\u9006\u88ad\u5fc5\u770b\ud83d\udc4d",head:[["meta",{name:"keywords",content:"Java,Thread,Java\u5e76\u53d1\u7f16\u7a0b,Java\u591a\u7ebf\u7a0b,Java\u9762\u8bd5\u9898,Java\u5e76\u53d1\u7f16\u7a0b\u9762\u8bd5\u9898,\u9762\u8bd5\u9898,\u516b\u80a1\u6587,java"}]]},sidebar:"mianshi",previous:{title:"Java SE",permalink:"/code-note-blog/docs/mianshi/javase"},next:{title:"JVM",permalink:"/code-note-blog/docs/mianshi/jvm"}},a={},h=[{value:"\u57fa\u7840",id:"\u57fa\u7840",level:2},{value:"1.\u5e76\u884c\u8ddf\u5e76\u53d1\u6709\u4ec0\u4e48\u533a\u522b\uff1f",id:"1\u5e76\u884c\u8ddf\u5e76\u53d1\u6709\u4ec0\u4e48\u533a\u522b",level:3},{value:"2.\u8bf4\u8bf4\u4ec0\u4e48\u662f\u8fdb\u7a0b\u548c\u7ebf\u7a0b\uff1f",id:"2\u8bf4\u8bf4\u4ec0\u4e48\u662f\u8fdb\u7a0b\u548c\u7ebf\u7a0b",level:3},{value:"3.\u8bf4\u8bf4\u7ebf\u7a0b\u6709\u51e0\u79cd\u521b\u5efa\u65b9\u5f0f\uff1f",id:"3\u8bf4\u8bf4\u7ebf\u7a0b\u6709\u51e0\u79cd\u521b\u5efa\u65b9\u5f0f",level:3},{value:"4.\u4e3a\u4ec0\u4e48\u8c03\u7528start()\u65b9\u6cd5\u65f6\u4f1a\u6267\u884crun()\u65b9\u6cd5\uff0c\u90a3\u600e\u4e48\u4e0d\u76f4\u63a5\u8c03\u7528run()\u65b9\u6cd5\uff1f",id:"4\u4e3a\u4ec0\u4e48\u8c03\u7528start\u65b9\u6cd5\u65f6\u4f1a\u6267\u884crun\u65b9\u6cd5\u90a3\u600e\u4e48\u4e0d\u76f4\u63a5\u8c03\u7528run\u65b9\u6cd5",level:3},{value:"5.\u7ebf\u7a0b\u6709\u54ea\u4e9b\u5e38\u7528\u7684\u8c03\u5ea6\u65b9\u6cd5\uff1f",id:"5\u7ebf\u7a0b\u6709\u54ea\u4e9b\u5e38\u7528\u7684\u8c03\u5ea6\u65b9\u6cd5",level:3},{value:"6.\u7ebf\u7a0b\u6709\u51e0\u79cd\u72b6\u6001\uff1f",id:"6\u7ebf\u7a0b\u6709\u51e0\u79cd\u72b6\u6001",level:3},{value:"7.\u4ec0\u4e48\u662f\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\uff1f",id:"7\u4ec0\u4e48\u662f\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362",level:3},{value:"8.\u5b88\u62a4\u7ebf\u7a0b\u4e86\u89e3\u5417\uff1f",id:"8\u5b88\u62a4\u7ebf\u7a0b\u4e86\u89e3\u5417",level:3},{value:"9.\u7ebf\u7a0b\u95f4\u6709\u54ea\u4e9b\u901a\u4fe1\u65b9\u5f0f\uff1f",id:"9\u7ebf\u7a0b\u95f4\u6709\u54ea\u4e9b\u901a\u4fe1\u65b9\u5f0f",level:3},{value:"ThreadLocal",id:"threadlocal",level:2},{value:"10.ThreadLocal\u662f\u4ec0\u4e48\uff1f",id:"10threadlocal\u662f\u4ec0\u4e48",level:3},{value:"11.\u4f60\u5728\u5de5\u4f5c\u4e2d\u7528\u5230\u8fc7ThreadLocal\u5417\uff1f",id:"11\u4f60\u5728\u5de5\u4f5c\u4e2d\u7528\u5230\u8fc7threadlocal\u5417",level:3},{value:"12.ThreadLocal\u600e\u4e48\u5b9e\u73b0\u7684\u5462\uff1f",id:"12threadlocal\u600e\u4e48\u5b9e\u73b0\u7684\u5462",level:3},{value:"13.ThreadLocal \u5185\u5b58\u6cc4\u9732\u662f\u600e\u4e48\u56de\u4e8b\uff1f",id:"13threadlocal-\u5185\u5b58\u6cc4\u9732\u662f\u600e\u4e48\u56de\u4e8b",level:3},{value:"14.ThreadLocalMap\u7684\u7ed3\u6784\u4e86\u89e3\u5417\uff1f",id:"14threadlocalmap\u7684\u7ed3\u6784\u4e86\u89e3\u5417",level:3},{value:"15.ThreadLocalMap\u600e\u4e48\u89e3\u51b3Hash\u51b2\u7a81\u7684\uff1f",id:"15threadlocalmap\u600e\u4e48\u89e3\u51b3hash\u51b2\u7a81\u7684",level:3},{value:"16.ThreadLocalMap\u6269\u5bb9\u673a\u5236\u4e86\u89e3\u5417\uff1f",id:"16threadlocalmap\u6269\u5bb9\u673a\u5236\u4e86\u89e3\u5417",level:3},{value:"17.\u7236\u5b50\u7ebf\u7a0b\u600e\u4e48\u5171\u4eab\u6570\u636e\uff1f",id:"17\u7236\u5b50\u7ebf\u7a0b\u600e\u4e48\u5171\u4eab\u6570\u636e",level:3},{value:"Java\u5185\u5b58\u6a21\u578b",id:"java\u5185\u5b58\u6a21\u578b",level:2},{value:"18.\u8bf4\u4e00\u4e0b\u4f60\u5bf9Java\u5185\u5b58\u6a21\u578b\uff08JMM\uff09\u7684\u7406\u89e3\uff1f",id:"18\u8bf4\u4e00\u4e0b\u4f60\u5bf9java\u5185\u5b58\u6a21\u578bjmm\u7684\u7406\u89e3",level:3},{value:"19.\u8bf4\u8bf4\u4f60\u5bf9\u539f\u5b50\u6027\u3001\u53ef\u89c1\u6027\u3001\u6709\u5e8f\u6027\u7684\u7406\u89e3\uff1f",id:"19\u8bf4\u8bf4\u4f60\u5bf9\u539f\u5b50\u6027\u53ef\u89c1\u6027\u6709\u5e8f\u6027\u7684\u7406\u89e3",level:3},{value:"20.\u90a3\u8bf4\u8bf4\u4ec0\u4e48\u662f\u6307\u4ee4\u91cd\u6392\uff1f",id:"20\u90a3\u8bf4\u8bf4\u4ec0\u4e48\u662f\u6307\u4ee4\u91cd\u6392",level:3},{value:"21.\u6307\u4ee4\u91cd\u6392\u6709\u9650\u5236\u5417\uff1fhappens-before\u4e86\u89e3\u5417\uff1f",id:"21\u6307\u4ee4\u91cd\u6392\u6709\u9650\u5236\u5417happens-before\u4e86\u89e3\u5417",level:3},{value:"22.as-if-serial\u53c8\u662f\u4ec0\u4e48\uff1f\u5355\u7ebf\u7a0b\u7684\u7a0b\u5e8f\u4e00\u5b9a\u662f\u987a\u5e8f\u7684\u5417\uff1f",id:"22as-if-serial\u53c8\u662f\u4ec0\u4e48\u5355\u7ebf\u7a0b\u7684\u7a0b\u5e8f\u4e00\u5b9a\u662f\u987a\u5e8f\u7684\u5417",level:3},{value:"23.volatile\u5b9e\u73b0\u539f\u7406\u4e86\u89e3\u5417\uff1f",id:"23volatile\u5b9e\u73b0\u539f\u7406\u4e86\u89e3\u5417",level:3},{value:"\u9501",id:"\u9501",level:2},{value:"24.synchronized\u7528\u8fc7\u5417\uff1f\u600e\u4e48\u4f7f\u7528\uff1f",id:"24synchronized\u7528\u8fc7\u5417\u600e\u4e48\u4f7f\u7528",level:3},{value:"25.synchronized\u7684\u5b9e\u73b0\u539f\u7406\uff1f",id:"25synchronized\u7684\u5b9e\u73b0\u539f\u7406",level:3},{value:"26.\u9664\u4e86\u539f\u5b50\u6027\uff0csynchronized\u53ef\u89c1\u6027\uff0c\u6709\u5e8f\u6027\uff0c\u53ef\u91cd\u5165\u6027\u600e\u4e48\u5b9e\u73b0\uff1f",id:"26\u9664\u4e86\u539f\u5b50\u6027synchronized\u53ef\u89c1\u6027\u6709\u5e8f\u6027\u53ef\u91cd\u5165\u6027\u600e\u4e48\u5b9e\u73b0",level:3},{value:"27.\u9501\u5347\u7ea7\uff1fsynchronized\u4f18\u5316\u4e86\u89e3\u5417\uff1f",id:"27\u9501\u5347\u7ea7synchronized\u4f18\u5316\u4e86\u89e3\u5417",level:3},{value:"\u504f\u5411\u9501\uff1a",id:"\u504f\u5411\u9501",level:4},{value:"\u8f7b\u91cf\u7ea7\u9501\uff1a",id:"\u8f7b\u91cf\u7ea7\u9501",level:4},{value:"28.\u8bf4\u8bf4synchronized\u548cReentrantLock\u7684\u533a\u522b\uff1f",id:"28\u8bf4\u8bf4synchronized\u548creentrantlock\u7684\u533a\u522b",level:3},{value:"29.AQS\u4e86\u89e3\u591a\u5c11\uff1f",id:"29aqs\u4e86\u89e3\u591a\u5c11",level:3},{value:"30.<strong>ReentrantLock</strong>\u5b9e\u73b0\u539f\u7406\uff1f",id:"30reentrantlock\u5b9e\u73b0\u539f\u7406",level:3},{value:"31.ReentrantLock\u600e\u4e48\u5b9e\u73b0\u516c\u5e73\u9501\u7684\uff1f",id:"31reentrantlock\u600e\u4e48\u5b9e\u73b0\u516c\u5e73\u9501\u7684",level:3},{value:"32.CAS\u5462\uff1fCAS\u4e86\u89e3\u591a\u5c11\uff1f",id:"32cas\u5462cas\u4e86\u89e3\u591a\u5c11",level:3},{value:"33.CAS \u6709\u4ec0\u4e48\u95ee\u9898\uff1f\u5982\u4f55\u89e3\u51b3\uff1f",id:"33cas-\u6709\u4ec0\u4e48\u95ee\u9898\u5982\u4f55\u89e3\u51b3",level:3},{value:"ABA \u95ee\u9898",id:"aba-\u95ee\u9898",level:4},{value:"\u5faa\u73af\u6027\u80fd\u5f00\u9500",id:"\u5faa\u73af\u6027\u80fd\u5f00\u9500",level:4},{value:"\u53ea\u80fd\u4fdd\u8bc1\u4e00\u4e2a\u53d8\u91cf\u7684\u539f\u5b50\u64cd\u4f5c",id:"\u53ea\u80fd\u4fdd\u8bc1\u4e00\u4e2a\u53d8\u91cf\u7684\u539f\u5b50\u64cd\u4f5c",level:4},{value:"34.Java\u6709\u54ea\u4e9b\u4fdd\u8bc1\u539f\u5b50\u6027\u7684\u65b9\u6cd5\uff1f\u5982\u4f55\u4fdd\u8bc1\u591a\u7ebf\u7a0b\u4e0bi++ \u7ed3\u679c\u6b63\u786e\uff1f",id:"34java\u6709\u54ea\u4e9b\u4fdd\u8bc1\u539f\u5b50\u6027\u7684\u65b9\u6cd5\u5982\u4f55\u4fdd\u8bc1\u591a\u7ebf\u7a0b\u4e0bi-\u7ed3\u679c\u6b63\u786e",level:3},{value:"35.\u539f\u5b50\u64cd\u4f5c\u7c7b\u4e86\u89e3\u591a\u5c11\uff1f",id:"35\u539f\u5b50\u64cd\u4f5c\u7c7b\u4e86\u89e3\u591a\u5c11",level:3},{value:"36.AtomicInteger \u7684\u539f\u7406\uff1f",id:"36atomicinteger-\u7684\u539f\u7406",level:3},{value:"37.\u7ebf\u7a0b\u6b7b\u9501\u4e86\u89e3\u5417\uff1f\u8be5\u5982\u4f55\u907f\u514d\uff1f",id:"37\u7ebf\u7a0b\u6b7b\u9501\u4e86\u89e3\u5417\u8be5\u5982\u4f55\u907f\u514d",level:3},{value:"38.\u90a3\u6b7b\u9501\u95ee\u9898\u600e\u4e48\u6392\u67e5\u5462\uff1f",id:"38\u90a3\u6b7b\u9501\u95ee\u9898\u600e\u4e48\u6392\u67e5\u5462",level:3},{value:"\u5e76\u53d1\u5de5\u5177\u7c7b",id:"\u5e76\u53d1\u5de5\u5177\u7c7b",level:2},{value:"39.CountDownLatch\uff08\u5012\u8ba1\u6570\u5668\uff09\u4e86\u89e3\u5417\uff1f",id:"39countdownlatch\u5012\u8ba1\u6570\u5668\u4e86\u89e3\u5417",level:3},{value:"40.CyclicBarrier\uff08\u540c\u6b65\u5c4f\u969c\uff09\u4e86\u89e3\u5417\uff1f",id:"40cyclicbarrier\u540c\u6b65\u5c4f\u969c\u4e86\u89e3\u5417",level:3},{value:"41.CyclicBarrier\u548cCountDownLatch\u6709\u4ec0\u4e48\u533a\u522b\uff1f",id:"41cyclicbarrier\u548ccountdownlatch\u6709\u4ec0\u4e48\u533a\u522b",level:3},{value:"42.Semaphore\uff08\u4fe1\u53f7\u91cf\uff09\u4e86\u89e3\u5417\uff1f",id:"42semaphore\u4fe1\u53f7\u91cf\u4e86\u89e3\u5417",level:3},{value:"43.Exchanger \u4e86\u89e3\u5417\uff1f",id:"43exchanger-\u4e86\u89e3\u5417",level:3},{value:"\u7ebf\u7a0b\u6c60",id:"\u7ebf\u7a0b\u6c60",level:2},{value:"44.\u4ec0\u4e48\u662f\u7ebf\u7a0b\u6c60\uff1f",id:"44\u4ec0\u4e48\u662f\u7ebf\u7a0b\u6c60",level:3},{value:"45.\u80fd\u8bf4\u8bf4\u5de5\u4f5c\u4e2d\u7ebf\u7a0b\u6c60\u7684\u5e94\u7528\u5417\uff1f",id:"45\u80fd\u8bf4\u8bf4\u5de5\u4f5c\u4e2d\u7ebf\u7a0b\u6c60\u7684\u5e94\u7528\u5417",level:3},{value:"46.\u80fd\u7b80\u5355\u8bf4\u4e00\u4e0b\u7ebf\u7a0b\u6c60\u7684\u5de5\u4f5c\u6d41\u7a0b\u5417\uff1f",id:"46\u80fd\u7b80\u5355\u8bf4\u4e00\u4e0b\u7ebf\u7a0b\u6c60\u7684\u5de5\u4f5c\u6d41\u7a0b\u5417",level:3},{value:"47.\u7ebf\u7a0b\u6c60\u4e3b\u8981\u53c2\u6570\u6709\u54ea\u4e9b\uff1f",id:"47\u7ebf\u7a0b\u6c60\u4e3b\u8981\u53c2\u6570\u6709\u54ea\u4e9b",level:3},{value:"48.\u7ebf\u7a0b\u6c60\u7684\u62d2\u7edd\u7b56\u7565\u6709\u54ea\u4e9b\uff1f",id:"48\u7ebf\u7a0b\u6c60\u7684\u62d2\u7edd\u7b56\u7565\u6709\u54ea\u4e9b",level:3},{value:"49.\u7ebf\u7a0b\u6c60\u6709\u54ea\u51e0\u79cd\u5de5\u4f5c\u961f\u5217\uff1f",id:"49\u7ebf\u7a0b\u6c60\u6709\u54ea\u51e0\u79cd\u5de5\u4f5c\u961f\u5217",level:3},{value:"50.\u7ebf\u7a0b\u6c60\u63d0\u4ea4execute\u548csubmit\u6709\u4ec0\u4e48\u533a\u522b\uff1f",id:"50\u7ebf\u7a0b\u6c60\u63d0\u4ea4execute\u548csubmit\u6709\u4ec0\u4e48\u533a\u522b",level:3},{value:"51.\u7ebf\u7a0b\u6c60\u600e\u4e48\u5173\u95ed\u77e5\u9053\u5417\uff1f",id:"51\u7ebf\u7a0b\u6c60\u600e\u4e48\u5173\u95ed\u77e5\u9053\u5417",level:3},{value:"52.\u7ebf\u7a0b\u6c60\u7684\u7ebf\u7a0b\u6570\u5e94\u8be5\u600e\u4e48\u914d\u7f6e\uff1f",id:"52\u7ebf\u7a0b\u6c60\u7684\u7ebf\u7a0b\u6570\u5e94\u8be5\u600e\u4e48\u914d\u7f6e",level:3},{value:"53.\u6709\u54ea\u51e0\u79cd\u5e38\u89c1\u7684\u7ebf\u7a0b\u6c60\uff1f",id:"53\u6709\u54ea\u51e0\u79cd\u5e38\u89c1\u7684\u7ebf\u7a0b\u6c60",level:3},{value:"54.\u80fd\u8bf4\u4e00\u4e0b\u56db\u79cd\u5e38\u89c1\u7ebf\u7a0b\u6c60\u7684\u539f\u7406\u5417\uff1f",id:"54\u80fd\u8bf4\u4e00\u4e0b\u56db\u79cd\u5e38\u89c1\u7ebf\u7a0b\u6c60\u7684\u539f\u7406\u5417",level:3},{value:"newSingleThreadExecutor",id:"newsinglethreadexecutor",level:4},{value:"newFixedThreadPool",id:"newfixedthreadpool",level:4},{value:"newCachedThreadPool",id:"newcachedthreadpool",level:4},{value:"newScheduledThreadPool",id:"newscheduledthreadpool",level:4},{value:"55.\u7ebf\u7a0b\u6c60\u5f02\u5e38\u600e\u4e48\u5904\u7406\u77e5\u9053\u5417\uff1f",id:"55\u7ebf\u7a0b\u6c60\u5f02\u5e38\u600e\u4e48\u5904\u7406\u77e5\u9053\u5417",level:3},{value:"56.\u80fd\u8bf4\u4e00\u4e0b\u7ebf\u7a0b\u6c60\u6709\u51e0\u79cd\u72b6\u6001\u5417\uff1f",id:"56\u80fd\u8bf4\u4e00\u4e0b\u7ebf\u7a0b\u6c60\u6709\u51e0\u79cd\u72b6\u6001\u5417",level:3},{value:"57.\u7ebf\u7a0b\u6c60\u5982\u4f55\u5b9e\u73b0\u53c2\u6570\u7684\u52a8\u6001\u4fee\u6539\uff1f",id:"57\u7ebf\u7a0b\u6c60\u5982\u4f55\u5b9e\u73b0\u53c2\u6570\u7684\u52a8\u6001\u4fee\u6539",level:3},{value:"\u7ebf\u7a0b\u6c60\u8c03\u4f18\u4e86\u89e3\u5417\uff1f",id:"\u7ebf\u7a0b\u6c60\u8c03\u4f18\u4e86\u89e3\u5417",level:3},{value:"58.\u4f60\u80fd\u8bbe\u8ba1\u5b9e\u73b0\u4e00\u4e2a\u7ebf\u7a0b\u6c60\u5417\uff1f",id:"58\u4f60\u80fd\u8bbe\u8ba1\u5b9e\u73b0\u4e00\u4e2a\u7ebf\u7a0b\u6c60\u5417",level:3},{value:"59.\u5355\u673a\u7ebf\u7a0b\u6c60\u6267\u884c\u65ad\u7535\u4e86\u5e94\u8be5\u600e\u4e48\u5904\u7406\uff1f",id:"59\u5355\u673a\u7ebf\u7a0b\u6c60\u6267\u884c\u65ad\u7535\u4e86\u5e94\u8be5\u600e\u4e48\u5904\u7406",level:3},{value:"\u5e76\u53d1\u5bb9\u5668\u548c\u6846\u67b6",id:"\u5e76\u53d1\u5bb9\u5668\u548c\u6846\u67b6",level:2},{value:"60.Fork/Join\u6846\u67b6\u4e86\u89e3\u5417\uff1f",id:"60forkjoin\u6846\u67b6\u4e86\u89e3\u5417",level:3}];function t(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{id:"\u57fa\u7840",children:"\u57fa\u7840"}),"\n",(0,s.jsx)(e.h3,{id:"1\u5e76\u884c\u8ddf\u5e76\u53d1\u6709\u4ec0\u4e48\u533a\u522b",children:"1.\u5e76\u884c\u8ddf\u5e76\u53d1\u6709\u4ec0\u4e48\u533a\u522b\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u4ece\u64cd\u4f5c\u7cfb\u7edf\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u7ebf\u7a0b\u662fCPU\u5206\u914d\u7684\u6700\u5c0f\u5355\u4f4d\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5e76\u884c\u5c31\u662f\u540c\u4e00\u65f6\u523b\uff0c\u4e24\u4e2a\u7ebf\u7a0b\u90fd\u5728\u6267\u884c\u3002\u8fd9\u5c31\u8981\u6c42\u6709\u4e24\u4e2aCPU\u53bb\u5206\u522b\u6267\u884c\u4e24\u4e2a\u7ebf\u7a0b\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5e76\u53d1\u5c31\u662f\u540c\u4e00\u65f6\u523b\uff0c\u53ea\u6709\u4e00\u4e2a\u6267\u884c\uff0c\u4f46\u662f\u4e00\u4e2a\u65f6\u95f4\u6bb5\u5185\uff0c\u4e24\u4e2a\u7ebf\u7a0b\u90fd\u6267\u884c\u4e86\u3002\u5e76\u53d1\u7684\u5b9e\u73b0\u4f9d\u8d56\u4e8eCPU\u5207\u6362\u7ebf\u7a0b\uff0c\u56e0\u4e3a\u5207\u6362\u7684\u65f6\u95f4\u7279\u522b\u77ed\uff0c\u6240\u4ee5\u57fa\u672c\u5bf9\u4e8e\u7528\u6237\u662f\u65e0\u611f\u77e5\u7684\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(38142).Z+"",width:"707",height:"427"})}),"\n",(0,s.jsx)(e.p,{children:"\u5c31\u597d\u50cf\u6211\u4eec\u53bb\u98df\u5802\u6253\u996d\uff0c\u5e76\u884c\u5c31\u662f\u6211\u4eec\u5728\u591a\u4e2a\u7a97\u53e3\u6392\u961f\uff0c\u51e0\u4e2a\u963f\u59e8\u540c\u65f6\u6253\u83dc\uff1b\u5e76\u53d1\u5c31\u662f\u6211\u4eec\u6324\u5728\u4e00\u4e2a\u7a97\u53e3\uff0c\u963f\u59e8\u7ed9\u8fd9\u4e2a\u6253\u4e00\u52fa\uff0c\u53c8\u624b\u5fd9\u811a\u4e71\u5730\u7ed9\u90a3\u4e2a\u6253\u4e00\u52fa\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(60403).Z+"",width:"948",height:"320"})}),"\n",(0,s.jsx)(e.h3,{id:"2\u8bf4\u8bf4\u4ec0\u4e48\u662f\u8fdb\u7a0b\u548c\u7ebf\u7a0b",children:"2.\u8bf4\u8bf4\u4ec0\u4e48\u662f\u8fdb\u7a0b\u548c\u7ebf\u7a0b\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u8981\u8bf4\u7ebf\u7a0b\uff0c\u5fc5\u987b\u5f97\u5148\u8bf4\u8bf4\u8fdb\u7a0b\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8fdb\u7a0b\uff1a\u8fdb\u7a0b\u662f\u4ee3\u7801\u5728\u6570\u636e\u96c6\u5408\u4e0a\u7684\u4e00\u6b21\u8fd0\u884c\u6d3b\u52a8\uff0c\u662f\u7cfb\u7edf\u8fdb\u884c\u8d44\u6e90\u5206\u914d\u548c\u8c03\u5ea6\u7684\u57fa\u672c\u5355\u4f4d\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u7ebf\u7a0b\uff1a\u7ebf\u7a0b\u662f\u8fdb\u7a0b\u7684\u4e00\u4e2a\u6267\u884c\u8def\u5f84\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u8fdb\u7a0b\u4e2d\u7684\u591a\u4e2a\u7ebf\u7a0b\u5171\u4eab\u8fdb\u7a0b\u7684\u8d44\u6e90\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u64cd\u4f5c\u7cfb\u7edf\u5728\u5206\u914d\u8d44\u6e90\u65f6\u662f\u628a\u8d44\u6e90\u5206\u914d\u7ed9\u8fdb\u7a0b\u7684\uff0c \u4f46\u662f CPU \u8d44\u6e90\u6bd4\u8f83\u7279\u6b8a\uff0c\u5b83\u662f\u88ab\u5206\u914d\u5230\u7ebf\u7a0b\u7684\uff0c\u56e0\u4e3a\u771f\u6b63\u8981\u5360\u7528CPU\u8fd0\u884c\u7684\u662f\u7ebf\u7a0b\uff0c\u6240\u4ee5\u4e5f\u8bf4\u7ebf\u7a0b\u662f CPU\u5206\u914d\u7684\u57fa\u672c\u5355\u4f4d\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u6bd4\u5982\u5728Java\u4e2d\uff0c\u5f53\u6211\u4eec\u542f\u52a8 main \u51fd\u6570\u5176\u5b9e\u5c31\u542f\u52a8\u4e86\u4e00\u4e2aJVM\u8fdb\u7a0b\uff0c\u800c main \u51fd\u6570\u5728\u7684\u7ebf\u7a0b\u5c31\u662f\u8fd9\u4e2a\u8fdb\u7a0b\u4e2d\u7684\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u4e5f\u79f0\u4e3b\u7ebf\u7a0b\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(27505).Z+"",width:"744",height:"454"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u6709\u591a\u4e2a\u7ebf\u7a0b\uff0c\u591a\u4e2a\u7ebf\u7a0b\u5171\u7528\u8fdb\u7a0b\u7684\u5806\u548c\u65b9\u6cd5\u533a\u8d44\u6e90\uff0c\u4f46\u662f\u6bcf\u4e2a\u7ebf\u7a0b\u6709\u81ea\u5df1\u7684\u7a0b\u5e8f\u8ba1\u6570\u5668\u548c\u6808\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"3\u8bf4\u8bf4\u7ebf\u7a0b\u6709\u51e0\u79cd\u521b\u5efa\u65b9\u5f0f",children:"3.\u8bf4\u8bf4\u7ebf\u7a0b\u6709\u51e0\u79cd\u521b\u5efa\u65b9\u5f0f\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"Java\u4e2d\u521b\u5efa\u7ebf\u7a0b\u4e3b\u8981\u6709\u4e09\u79cd\u65b9\u5f0f\uff0c\u5206\u522b\u4e3a\u7ee7\u627fThread\u7c7b\u3001\u5b9e\u73b0Runnable\u63a5\u53e3\u3001\u5b9e\u73b0Callable\u63a5\u53e3\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(76346).Z+"",width:"687",height:"321"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7ee7\u627fThread\u7c7b\uff0c\u91cd\u5199run()\u65b9\u6cd5\uff0c\u8c03\u7528start()\u65b9\u6cd5\u542f\u52a8\u7ebf\u7a0b"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'public class ThreadTest {\n\n    /**\n     * \u7ee7\u627fThread\u7c7b\n     */\n    public static class MyThread extends Thread {\n        @Override\n        public void run() {\n            System.out.println("This is child thread");\n        }\n    }\n\n    public static void main(String[] args) {\n        MyThread thread = new MyThread();\n        thread.start();\n    }\n}\n\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5b9e\u73b0 Runnable \u63a5\u53e3\uff0c\u91cd\u5199run()\u65b9\u6cd5"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'public class RunnableTask implements Runnable {\n    public void run() {\n        System.out.println("Runnable!");\n    }\n\n    public static void main(String[] args) {\n        RunnableTask task = new RunnableTask();\n        new Thread(task).start();\n    }\n}\n\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0a\u9762\u4e24\u79cd\u90fd\u662f\u6ca1\u6709\u8fd4\u56de\u503c\u7684\uff0c\u4f46\u662f\u5982\u679c\u6211\u4eec\u9700\u8981\u83b7\u53d6\u7ebf\u7a0b\u7684\u6267\u884c\u7ed3\u679c\uff0c\u8be5\u600e\u4e48\u529e\u5462\uff1f"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5b9e\u73b0Callable\u63a5\u53e3\uff0c\u91cd\u5199call()\u65b9\u6cd5\uff0c\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u901a\u8fc7FutureTask\u83b7\u53d6\u4efb\u52a1\u6267\u884c\u7684\u8fd4\u56de\u503c"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'public class CallerTask implements Callable<String> {\n    public String call() throws Exception {\n        return "Hello,i am running!";\n    }\n\n    public static void main(String[] args) {\n        //\u521b\u5efa\u5f02\u6b65\u4efb\u52a1\n        FutureTask<String> task=new FutureTask<String>(new CallerTask());\n        //\u542f\u52a8\u7ebf\u7a0b\n        new Thread(task).start();\n        try {\n            //\u7b49\u5f85\u6267\u884c\u5b8c\u6210\uff0c\u5e76\u83b7\u53d6\u8fd4\u56de\u7ed3\u679c\n            String result=task.get();\n            System.out.println(result);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        } catch (ExecutionException e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n'})}),"\n",(0,s.jsx)(e.h3,{id:"4\u4e3a\u4ec0\u4e48\u8c03\u7528start\u65b9\u6cd5\u65f6\u4f1a\u6267\u884crun\u65b9\u6cd5\u90a3\u600e\u4e48\u4e0d\u76f4\u63a5\u8c03\u7528run\u65b9\u6cd5",children:"4.\u4e3a\u4ec0\u4e48\u8c03\u7528start()\u65b9\u6cd5\u65f6\u4f1a\u6267\u884crun()\u65b9\u6cd5\uff0c\u90a3\u600e\u4e48\u4e0d\u76f4\u63a5\u8c03\u7528run()\u65b9\u6cd5\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"JVM\u6267\u884cstart\u65b9\u6cd5\uff0c\u4f1a\u5148\u521b\u5efa\u4e00\u6761\u7ebf\u7a0b\uff0c\u7531\u521b\u5efa\u51fa\u6765\u7684\u65b0\u7ebf\u7a0b\u53bb\u6267\u884cthread\u7684run\u65b9\u6cd5\uff0c\u8fd9\u624d\u8d77\u5230\u591a\u7ebf\u7a0b\u7684\u6548\u679c\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(68222).Z+"",width:"559",height:"422"})}),"\n",(0,s.jsx)(e.p,{children:"**\u4e3a\u4ec0\u4e48\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u8c03\u7528run()\u65b9\u6cd5\uff1f**\u4e5f\u5f88\u6e05\u695a\uff0c \u5982\u679c\u76f4\u63a5\u8c03\u7528Thread\u7684run()\u65b9\u6cd5\uff0c\u90a3\u4e48run\u65b9\u6cd5\u8fd8\u662f\u8fd0\u884c\u5728\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u76f8\u5f53\u4e8e\u987a\u5e8f\u6267\u884c\uff0c\u5c31\u8d77\u4e0d\u5230\u591a\u7ebf\u7a0b\u7684\u6548\u679c\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"5\u7ebf\u7a0b\u6709\u54ea\u4e9b\u5e38\u7528\u7684\u8c03\u5ea6\u65b9\u6cd5",children:"5.\u7ebf\u7a0b\u6709\u54ea\u4e9b\u5e38\u7528\u7684\u8c03\u5ea6\u65b9\u6cd5\uff1f"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(93639).Z+"",width:"617",height:"532"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ebf\u7a0b\u7b49\u5f85\u4e0e\u901a\u77e5"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728Object\u7c7b\u4e2d\u6709\u4e00\u4e9b\u51fd\u6570\u53ef\u4ee5\u7528\u4e8e\u7ebf\u7a0b\u7684\u7b49\u5f85\u4e0e\u901a\u77e5\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"wait()\uff1a\u5f53\u4e00\u4e2a\u7ebf\u7a0bA\u8c03\u7528\u4e00\u4e2a\u5171\u4eab\u53d8\u91cf\u7684 wait()\u65b9\u6cd5\u65f6\uff0c \u7ebf\u7a0bA\u4f1a\u88ab\u963b\u585e\u6302\u8d77\uff0c \u53d1\u751f\u4e0b\u9762\u51e0\u79cd\u60c5\u51b5\u624d\u4f1a\u8fd4\u56de \uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\uff081\uff09 \u7ebf\u7a0bA\u8c03\u7528\u4e86\u5171\u4eab\u5bf9\u8c61 notify()\u6216\u8005 notifyAll()\u65b9\u6cd5\uff1b"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\uff082\uff09\u5176\u4ed6\u7ebf\u7a0b\u8c03\u7528\u4e86\u7ebf\u7a0bA\u7684 interrupt() \u65b9\u6cd5\uff0c\u7ebf\u7a0bA\u629b\u51faInterruptedException\u5f02\u5e38\u8fd4\u56de\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"wait(long timeout) \uff1a\u8fd9\u4e2a\u65b9\u6cd5\u76f8\u6bd4 wait() \u65b9\u6cd5\u591a\u4e86\u4e00\u4e2a\u8d85\u65f6\u53c2\u6570\uff0c\u5b83\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\u5982\u679c\u7ebf\u7a0bA\u8c03\u7528\u5171\u4eab\u5bf9\u8c61\u7684wait(long timeout)\u65b9\u6cd5\u540e\uff0c\u6ca1\u6709\u5728\u6307\u5b9a\u7684 timeout ms\u65f6\u95f4\u5185\u88ab\u5176\u5b83\u7ebf\u7a0b\u5524\u9192\uff0c\u90a3\u4e48\u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u662f\u4f1a\u56e0\u4e3a\u8d85\u65f6\u800c\u8fd4\u56de\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"wait(long timeout, int nanos)\uff0c\u5176\u5185\u90e8\u8c03\u7528\u7684\u662f wait(long timout\uff09\u51fd\u6570\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u4e0a\u9762\u662f\u7ebf\u7a0b\u7b49\u5f85\u7684\u65b9\u6cd5\uff0c\u800c\u5524\u9192\u7ebf\u7a0b\u4e3b\u8981\u662f\u4e0b\u9762\u4e24\u4e2a\u65b9\u6cd5\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"notify() : \u4e00\u4e2a\u7ebf\u7a0bA\u8c03\u7528\u5171\u4eab\u5bf9\u8c61\u7684 notify() \u65b9\u6cd5\u540e\uff0c\u4f1a\u5524\u9192\u4e00\u4e2a\u5728\u8fd9\u4e2a\u5171\u4eab\u53d8\u91cf\u4e0a\u8c03\u7528 wait \u7cfb\u5217\u65b9\u6cd5\u540e\u88ab\u6302\u8d77\u7684\u7ebf\u7a0b\u3002 \u4e00\u4e2a\u5171\u4eab\u53d8\u91cf\u4e0a\u53ef\u80fd\u4f1a\u6709\u591a\u4e2a\u7ebf\u7a0b\u5728\u7b49\u5f85\uff0c\u5177\u4f53\u5524\u9192\u54ea\u4e2a\u7b49\u5f85\u7684\u7ebf\u7a0b\u662f\u968f\u673a\u7684\u3002"}),"\n",(0,s.jsx)(e.li,{children:"notifyAll() \uff1a\u4e0d\u540c\u4e8e\u5728\u5171\u4eab\u53d8\u91cf\u4e0a\u8c03\u7528 notify() \u51fd\u6570\u4f1a\u5524\u9192\u88ab\u963b\u585e\u5230\u8be5\u5171\u4eab\u53d8\u91cf\u4e0a\u7684\u4e00\u4e2a\u7ebf\u7a0b\uff0cnotifyAll()\u65b9\u6cd5\u5219\u4f1a\u5524\u9192\u6240\u6709\u5728\u8be5\u5171\u4eab\u53d8\u91cf\u4e0a\u7531\u4e8e\u8c03\u7528 wait \u7cfb\u5217\u65b9\u6cd5\u800c\u88ab\u6302\u8d77\u7684\u7ebf\u7a0b\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"Thread\u7c7b\u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u65b9\u6cd5\u7528\u4e8e\u7b49\u5f85\u7684\u65b9\u6cd5\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"join()\uff1a\u5982\u679c\u4e00\u4e2a\u7ebf\u7a0bA\u6267\u884c\u4e86thread.join()\u8bed\u53e5\uff0c\u5176\u542b\u4e49\u662f\uff1a\u5f53\u524d\u7ebf\u7a0bA\u7b49\u5f85thread\u7ebf\u7a0b\u7ec8\u6b62\u4e4b\u540e\u624d"}),"\n",(0,s.jsx)(e.p,{children:"\u4ecethread.join()\u8fd4\u56de\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ebf\u7a0b\u4f11\u7720"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["sleep(long millis)  ",":Thread","\u7c7b\u4e2d\u7684\u9759\u6001\u65b9\u6cd5\uff0c\u5f53\u4e00\u4e2a\u6267\u884c\u4e2d\u7684\u7ebf\u7a0bA\u8c03\u7528\u4e86Thread \u7684sleep\u65b9\u6cd5\u540e\uff0c\u7ebf\u7a0bA\u4f1a\u6682\u65f6\u8ba9\u51fa\u6307\u5b9a\u65f6\u95f4\u7684\u6267\u884c\u6743\uff0c\u4f46\u662f\u7ebf\u7a0bA\u6240\u62e5\u6709\u7684\u76d1\u89c6\u5668\u8d44\u6e90\uff0c\u6bd4\u5982\u9501\u8fd8\u662f\u6301\u6709\u4e0d\u8ba9\u51fa\u7684\u3002\u6307\u5b9a\u7684\u7761\u7720\u65f6\u95f4\u5230\u4e86\u540e\u8be5\u51fd\u6570\u4f1a\u6b63\u5e38\u8fd4\u56de\uff0c\u63a5\u7740\u53c2\u4e0e CPU \u7684\u8c03\u5ea6\uff0c\u83b7\u53d6\u5230 CPU \u8d44\u6e90\u540e\u5c31\u53ef\u4ee5\u7ee7\u7eed\u8fd0\u884c\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u8ba9\u51fa\u4f18\u5148\u6743"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"yield() \uff1aThread\u7c7b\u4e2d\u7684\u9759\u6001\u65b9\u6cd5\uff0c\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528 yield \u65b9\u6cd5\u65f6\uff0c\u5b9e\u9645\u5c31\u662f\u5728\u6697\u793a\u7ebf\u7a0b\u8c03\u5ea6\u5668\u5f53\u524d\u7ebf\u7a0b\u8bf7\u6c42\u8ba9\u51fa\u81ea\u5df1\u7684CPU \uff0c\u4f46\u662f\u7ebf\u7a0b\u8c03\u5ea6\u5668\u53ef\u4ee5\u65e0\u6761\u4ef6\u5ffd\u7565\u8fd9\u4e2a\u6697\u793a\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ebf\u7a0b\u4e2d\u65ad"})}),"\n",(0,s.jsx)(e.p,{children:"Java \u4e2d\u7684\u7ebf\u7a0b\u4e2d\u65ad\u662f\u4e00\u79cd\u7ebf\u7a0b\u95f4\u7684\u534f\u4f5c\u6a21\u5f0f\uff0c\u901a\u8fc7\u8bbe\u7f6e\u7ebf\u7a0b\u7684\u4e2d\u65ad\u6807\u5fd7\u5e76\u4e0d\u80fd\u76f4\u63a5\u7ec8\u6b62\u8be5\u7ebf\u7a0b\u7684\u6267\u884c\uff0c\u800c\u662f\u88ab\u4e2d\u65ad\u7684\u7ebf\u7a0b\u6839\u636e\u4e2d\u65ad\u72b6\u6001\u81ea\u884c\u5904\u7406\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"void interrupt() \uff1a\u4e2d\u65ad\u7ebf\u7a0b\uff0c\u4f8b\u5982\uff0c\u5f53\u7ebf\u7a0bA\u8fd0\u884c\u65f6\uff0c\u7ebf\u7a0bB\u53ef\u4ee5\u8c03\u7528\u7ebf\u7a0binterrupt() \u65b9\u6cd5\u6765\u8bbe\u7f6e\u7ebf\u7a0b\u7684\u4e2d\u65ad\u6807\u5fd7\u4e3atrue \u5e76\u7acb\u5373\u8fd4\u56de\u3002\u8bbe\u7f6e\u6807\u5fd7\u4ec5\u4ec5\u662f\u8bbe\u7f6e\u6807\u5fd7, \u7ebf\u7a0bA\u5b9e\u9645\u5e76\u6ca1\u6709\u88ab\u4e2d\u65ad\uff0c \u4f1a\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\u3002"}),"\n",(0,s.jsx)(e.li,{children:"boolean isInterrupted() \u65b9\u6cd5\uff1a \u68c0\u6d4b\u5f53\u524d\u7ebf\u7a0b\u662f\u5426\u88ab\u4e2d\u65ad\u3002"}),"\n",(0,s.jsx)(e.li,{children:"boolean interrupted() \u65b9\u6cd5\uff1a \u68c0\u6d4b\u5f53\u524d\u7ebf\u7a0b\u662f\u5426\u88ab\u4e2d\u65ad\uff0c\u4e0e isInterrupted \u4e0d\u540c\u7684\u662f\uff0c\u8be5\u65b9\u6cd5\u5982\u679c\u53d1\u73b0\u5f53\u524d\u7ebf\u7a0b\u88ab\u4e2d\u65ad\uff0c\u5219\u4f1a\u6e05\u9664\u4e2d\u65ad\u6807\u5fd7\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"6\u7ebf\u7a0b\u6709\u51e0\u79cd\u72b6\u6001",children:"6.\u7ebf\u7a0b\u6709\u51e0\u79cd\u72b6\u6001\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u5728Java\u4e2d\uff0c\u7ebf\u7a0b\u5171\u6709\u516d\u79cd\u72b6\u6001\uff1a"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u72b6\u6001"}),(0,s.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"NEW"}),(0,s.jsx)(e.td,{children:"\u521d\u59cb\u72b6\u6001\uff1a\u7ebf\u7a0b\u88ab\u521b\u5efa\uff0c\u4f46\u8fd8\u6ca1\u6709\u8c03\u7528start()\u65b9\u6cd5"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"RUNNABLE"}),(0,s.jsx)(e.td,{children:"\u8fd0\u884c\u72b6\u6001\uff1aJava\u7ebf\u7a0b\u5c06\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u5c31\u7eea\u548c\u8fd0\u884c\u4e24\u79cd\u72b6\u6001\u7b3c\u7edf\u7684\u79f0\u4f5c\u201c\u8fd0\u884c\u201d"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"BLOCKED"}),(0,s.jsx)(e.td,{children:"\u963b\u585e\u72b6\u6001\uff1a\u8868\u793a\u7ebf\u7a0b\u963b\u585e\u4e8e\u9501"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"WAITING"}),(0,s.jsx)(e.td,{children:"\u7b49\u5f85\u72b6\u6001\uff1a\u8868\u793a\u7ebf\u7a0b\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\uff0c\u8fdb\u5165\u8be5\u72b6\u6001\u8868\u793a\u5f53\u524d\u7ebf\u7a0b\u9700\u8981\u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b\u505a\u51fa\u4e00\u4e9b\u7279\u5b9a\u52a8\u4f5c\uff08\u901a\u77e5\u6216\u4e2d\u65ad\uff09"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"TIME_WAITING"}),(0,s.jsx)(e.td,{children:"\u8d85\u65f6\u7b49\u5f85\u72b6\u6001\uff1a\u8be5\u72b6\u6001\u4e0d\u540c\u4e8e WAITIND\uff0c\u5b83\u662f\u53ef\u4ee5\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u81ea\u884c\u8fd4\u56de\u7684"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"TERMINATED"}),(0,s.jsx)(e.td,{children:"\u7ec8\u6b62\u72b6\u6001\uff1a\u8868\u793a\u5f53\u524d\u7ebf\u7a0b\u5df2\u7ecf\u6267\u884c\u5b8c\u6bd5"})]})]})]}),"\n",(0,s.jsx)(e.p,{children:"\u7ebf\u7a0b\u5728\u81ea\u8eab\u7684\u751f\u547d\u5468\u671f\u4e2d\uff0c \u5e76\u4e0d\u662f\u56fa\u5b9a\u5730\u5904\u4e8e\u67d0\u4e2a\u72b6\u6001\uff0c\u800c\u662f\u968f\u7740\u4ee3\u7801\u7684\u6267\u884c\u5728\u4e0d\u540c\u7684\u72b6\u6001\u4e4b\u95f4\u8fdb\u884c\u5207\u6362\uff0cJava\u7ebf\u7a0b\u72b6\u6001\u53d8\u5316\u5982\u56fe\u793a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(70471).Z+"",width:"1037",height:"708"})}),"\n",(0,s.jsx)(e.h3,{id:"7\u4ec0\u4e48\u662f\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362",children:"7.\u4ec0\u4e48\u662f\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u4f7f\u7528\u591a\u7ebf\u7a0b\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u5145\u5206\u5229\u7528CPU\uff0c\u4f46\u662f\u6211\u4eec\u77e5\u9053\uff0c\u5e76\u53d1\u5176\u5b9e\u662f\u4e00\u4e2aCPU\u6765\u5e94\u4ed8\u591a\u4e2a\u7ebf\u7a0b\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(10912).Z+"",width:"677",height:"397"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e3a\u4e86\u8ba9\u7528\u6237\u611f\u89c9\u591a\u4e2a\u7ebf\u7a0b\u662f\u5728\u540c\u65f6\u6267\u884c\u7684\uff0c CPU \u8d44\u6e90\u7684\u5206\u914d\u91c7\u7528\u4e86\u65f6\u95f4\u7247\u8f6e\u8f6c\u4e5f\u5c31\u662f\u7ed9\u6bcf\u4e2a\u7ebf\u7a0b\u5206\u914d\u4e00\u4e2a\u65f6\u95f4\u7247\uff0c\u7ebf\u7a0b\u5728\u65f6\u95f4\u7247\u5185\u5360\u7528 CPU \u6267\u884c\u4efb\u52a1\u3002\u5f53\u7ebf\u7a0b\u4f7f\u7528\u5b8c\u65f6\u95f4\u7247\u540e\uff0c\u5c31\u4f1a\u5904\u4e8e\u5c31\u7eea\u72b6\u6001\u5e76\u8ba9\u51fa CPU \u8ba9\u5176\u4ed6\u7ebf\u7a0b\u5360\u7528\uff0c\u8fd9\u5c31\u662f\u4e0a\u4e0b\u6587\u5207\u6362\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(73099).Z+"",width:"755",height:"423"})}),"\n",(0,s.jsx)(e.h3,{id:"8\u5b88\u62a4\u7ebf\u7a0b\u4e86\u89e3\u5417",children:"8.\u5b88\u62a4\u7ebf\u7a0b\u4e86\u89e3\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"Java\u4e2d\u7684\u7ebf\u7a0b\u5206\u4e3a\u4e24\u7c7b\uff0c\u5206\u522b\u4e3a daemon \u7ebf\u7a0b\uff08\u5b88\u62a4\u7ebf\u7a0b\uff09\u548c user \u7ebf\u7a0b\uff08\u7528\u6237\u7ebf\u7a0b\uff09\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5728JVM \u542f\u52a8\u65f6\u4f1a\u8c03\u7528 main \u51fd\u6570\uff0cmain\u51fd\u6570\u6240\u5728\u7684\u7ebf\u7a0b\u5c31\u662f\u4e00\u4e2a\u7528\u6237\u7ebf\u7a0b\u3002\u5176\u5b9e\u5728 JVM \u5185\u90e8\u540c\u65f6\u8fd8\u542f\u52a8\u4e86\u5f88\u591a\u5b88\u62a4\u7ebf\u7a0b\uff0c \u6bd4\u5982\u5783\u573e\u56de\u6536\u7ebf\u7a0b\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u90a3\u4e48\u5b88\u62a4\u7ebf\u7a0b\u548c\u7528\u6237\u7ebf\u7a0b\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f\u533a\u522b\u4e4b\u4e00\u662f\u5f53\u6700\u540e\u4e00\u4e2a\u975e\u5b88\u62a4\u7ebf\u7a0b\u675f\u65f6\uff0c JVM\u4f1a\u6b63\u5e38\u9000\u51fa\uff0c\u800c\u4e0d\u7ba1\u5f53\u524d\u662f\u5426\u5b58\u5728\u5b88\u62a4\u7ebf\u7a0b\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b88\u62a4\u7ebf\u7a0b\u662f\u5426\u7ed3\u675f\u5e76\u4e0d\u5f71\u54cd JVM\u9000\u51fa\u3002\u6362\u800c\u8a00\u4e4b\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u7528\u6237\u7ebf\u7a0b\u8fd8\u6ca1\u7ed3\u675f\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0bJVM\u5c31\u4e0d\u4f1a\u9000\u51fa\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"9\u7ebf\u7a0b\u95f4\u6709\u54ea\u4e9b\u901a\u4fe1\u65b9\u5f0f",children:"9.\u7ebf\u7a0b\u95f4\u6709\u54ea\u4e9b\u901a\u4fe1\u65b9\u5f0f\uff1f"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(99926).Z+"",width:"770",height:"523"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"volatile\u548csynchronized\u5173\u952e\u5b57"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5173\u952e\u5b57volatile\u53ef\u4ee5\u7528\u6765\u4fee\u9970\u5b57\u6bb5\uff08\u6210\u5458\u53d8\u91cf\uff09\uff0c\u5c31\u662f\u544a\u77e5\u7a0b\u5e8f\u4efb\u4f55\u5bf9\u8be5\u53d8\u91cf\u7684\u8bbf\u95ee\u5747\u9700\u8981\u4ece\u5171\u4eab\u5185\u5b58\u4e2d\u83b7\u53d6\uff0c\u800c\u5bf9\u5b83\u7684\u6539\u53d8\u5fc5\u987b\u540c\u6b65\u5237\u65b0\u56de\u5171\u4eab\u5185\u5b58\uff0c\u5b83\u80fd\u4fdd\u8bc1\u6240\u6709\u7ebf\u7a0b\u5bf9\u53d8\u91cf\u8bbf\u95ee\u7684\u53ef\u89c1\u6027\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5173\u952e\u5b57synchronized\u53ef\u4ee5\u4fee\u9970\u65b9\u6cd5\u6216\u8005\u4ee5\u540c\u6b65\u5757\u7684\u5f62\u5f0f\u6765\u8fdb\u884c\u4f7f\u7528\uff0c\u5b83\u4e3b\u8981\u786e\u4fdd\u591a\u4e2a\u7ebf\u7a0b\u5728\u540c\u4e00\u4e2a\u65f6\u523b\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u7ebf\u7a0b\u5904\u4e8e\u65b9\u6cd5\u6216\u8005\u540c\u6b65\u5757\u4e2d\uff0c\u5b83\u4fdd\u8bc1\u4e86\u7ebf\u7a0b\u5bf9\u53d8\u91cf\u8bbf\u95ee\u7684\u53ef\u89c1\u6027\u548c\u6392\u4ed6\u6027\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"\u7b49\u5f85/\u901a\u77e5\u673a\u5236"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u53ef\u4ee5\u901a\u8fc7Java\u5185\u7f6e\u7684\u7b49\u5f85/\u901a\u77e5\u673a\u5236\uff08wait()/notify()\uff09\u5b9e\u73b0\u4e00\u4e2a\u7ebf\u7a0b\u4fee\u6539\u4e00\u4e2a\u5bf9\u8c61\u7684\u503c\uff0c\u800c\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u611f\u77e5\u5230\u4e86\u53d8\u5316\uff0c\u7136\u540e\u8fdb\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"\u7ba1\u9053\u8f93\u5165/\u8f93\u51fa\u6d41"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7ba1\u9053\u8f93\u5165/\u8f93\u51fa\u6d41\u548c\u666e\u901a\u7684\u6587\u4ef6\u8f93\u5165/\u8f93\u51fa\u6d41\u6216\u8005\u7f51\u7edc\u8f93\u5165/\u8f93\u51fa\u6d41\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\u5b83\u4e3b\u8981\u7528\u4e8e\u7ebf\u7a0b\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\uff0c\u800c\u4f20\u8f93\u7684\u5a92\u4ecb\u4e3a\u5185\u5b58\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u7ba1\u9053\u8f93\u5165/\u8f93\u51fa\u6d41\u4e3b\u8981\u5305\u62ec\u4e86\u5982\u4e0b4\u79cd\u5177\u4f53\u5b9e\u73b0\uff1aPipedOutputStream\u3001PipedInputStream\u3001 PipedReader\u548cPipedWriter\uff0c\u524d\u4e24\u79cd\u9762\u5411\u5b57\u8282\uff0c\u800c\u540e\u4e24\u79cd\u9762\u5411\u5b57\u7b26\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"\u4f7f\u7528Thread.join()"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u4e00\u4e2a\u7ebf\u7a0bA\u6267\u884c\u4e86thread.join()\u8bed\u53e5\uff0c\u5176\u542b\u4e49\u662f\uff1a\u5f53\u524d\u7ebf\u7a0bA\u7b49\u5f85thread\u7ebf\u7a0b\u7ec8\u6b62\u4e4b\u540e\u624d\u4ecethread.join()\u8fd4\u56de\u3002\u3002\u7ebf\u7a0bThread\u9664\u4e86\u63d0\u4f9bjoin()\u65b9\u6cd5\u4e4b\u5916\uff0c\u8fd8\u63d0\u4f9b\u4e86join(long millis)\u548cjoin(long millis,int nanos)\u4e24\u4e2a\u5177\u5907\u8d85\u65f6\u7279\u6027\u7684\u65b9\u6cd5\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"\u4f7f\u7528ThreadLocal"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"ThreadLocal\uff0c\u5373\u7ebf\u7a0b\u53d8\u91cf\uff0c\u662f\u4e00\u4e2a\u4ee5ThreadLocal\u5bf9\u8c61\u4e3a\u952e\u3001\u4efb\u610f\u5bf9\u8c61\u4e3a\u503c\u7684\u5b58\u50a8\u7ed3\u6784\u3002\u8fd9\u4e2a\u7ed3\u6784\u88ab\u9644\u5e26\u5728\u7ebf\u7a0b\u4e0a\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u6839\u636e\u4e00\u4e2aThreadLocal\u5bf9\u8c61\u67e5\u8be2\u5230\u7ed1\u5b9a\u5728\u8fd9\u4e2a\u7ebf\u7a0b\u4e0a\u7684\u4e00\u4e2a\u503c\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u53ef\u4ee5\u901a\u8fc7set(T)\u65b9\u6cd5\u6765\u8bbe\u7f6e\u4e00\u4e2a\u503c\uff0c\u5728\u5f53\u524d\u7ebf\u7a0b\u4e0b\u518d\u901a\u8fc7get()\u65b9\u6cd5\u83b7\u53d6\u5230\u539f\u5148\u8bbe\u7f6e\u7684\u503c\u3002"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u5173\u4e8e\u591a\u7ebf\u7a0b\uff0c\u5176\u5b9e\u5f88\u5927\u6982\u7387\u8fd8\u4f1a\u51fa\u4e00\u4e9b\u7b14\u8bd5\u9898\uff0c\u6bd4\u5982\u4ea4\u66ff\u6253\u5370\u3001\u94f6\u884c\u8f6c\u8d26\u3001\u751f\u4ea7\u6d88\u8d39\u6a21\u578b\u7b49\u7b49\uff0c\u540e\u9762\u8001\u4e09\u4f1a\u5355\u72ec\u51fa\u4e00\u671f\u6765\u76d8\u70b9\u4e00\u4e0b\u5e38\u89c1\u7684\u591a\u7ebf\u7a0b\u7b14\u8bd5\u9898\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"threadlocal",children:"ThreadLocal"}),"\n",(0,s.jsx)(e.p,{children:"ThreadLocal\u5176\u5b9e\u5e94\u7528\u573a\u666f\u4e0d\u662f\u5f88\u591a\uff0c\u4f46\u5374\u662f\u88ab\u70b8\u4e86\u5343\u767e\u904d\u7684\u9762\u8bd5\u8001\u6cb9\u6761\uff0c\u6d89\u53ca\u5230\u591a\u7ebf\u7a0b\u3001\u6570\u636e\u7ed3\u6784\u3001JVM\uff0c\u53ef\u95ee\u7684\u70b9\u6bd4\u8f83\u591a\uff0c\u4e00\u5b9a\u8981\u62ff\u4e0b\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"10threadlocal\u662f\u4ec0\u4e48",children:"10.ThreadLocal\u662f\u4ec0\u4e48\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"ThreadLocal\uff0c\u4e5f\u5c31\u662f\u7ebf\u7a0b\u672c\u5730\u53d8\u91cf\u3002\u5982\u679c\u4f60\u521b\u5efa\u4e86\u4e00\u4e2aThreadLocal\u53d8\u91cf\uff0c\u90a3\u4e48\u8bbf\u95ee\u8fd9\u4e2a\u53d8\u91cf\u7684\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u4f1a\u6709\u8fd9\u4e2a\u53d8\u91cf\u7684\u4e00\u4e2a\u672c\u5730\u62f7\u8d1d\uff0c\u591a\u4e2a\u7ebf\u7a0b\u64cd\u4f5c\u8fd9\u4e2a\u53d8\u91cf\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u662f\u64cd\u4f5c\u81ea\u5df1\u672c\u5730\u5185\u5b58\u91cc\u9762\u7684\u53d8\u91cf\uff0c\u4ece\u800c\u8d77\u5230\u7ebf\u7a0b\u9694\u79bb\u7684\u4f5c\u7528\uff0c\u907f\u514d\u4e86\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(60772).Z+"",width:"666",height:"468"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u521b\u5efa"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u521b\u5efa\u4e86\u4e00\u4e2aThreadLoca\u53d8\u91cflocalVariable\uff0c\u4efb\u4f55\u4e00\u4e2a\u7ebf\u7a0b\u90fd\u80fd\u5e76\u53d1\u8bbf\u95eelocalVariable\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"//\u521b\u5efa\u4e00\u4e2aThreadLocal\u53d8\u91cf\npublic static ThreadLocal<String> localVariable = new ThreadLocal<>();\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5199\u5165"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7ebf\u7a0b\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u4f7f\u7528localVariable\uff0c\u5199\u5165\u53d8\u91cf\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'localVariable.set("\u9119\u4eba\u4e09\u67d0\u201d);\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8bfb\u53d6"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7ebf\u7a0b\u5728\u4efb\u4f55\u5730\u65b9\u8bfb\u53d6\u7684\u90fd\u662f\u5b83\u5199\u5165\u7684\u53d8\u91cf\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"localVariable.get();\n"})}),"\n",(0,s.jsx)(e.h3,{id:"11\u4f60\u5728\u5de5\u4f5c\u4e2d\u7528\u5230\u8fc7threadlocal\u5417",children:"11.\u4f60\u5728\u5de5\u4f5c\u4e2d\u7528\u5230\u8fc7ThreadLocal\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u6709\u7528\u5230\u8fc7\u7684\uff0c\u7528\u6765\u505a\u7528\u6237\u4fe1\u606f\u4e0a\u4e0b\u6587\u7684\u5b58\u50a8\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u7684\u7cfb\u7edf\u5e94\u7528\u662f\u4e00\u4e2a\u5178\u578b\u7684MVC\u67b6\u6784\uff0c\u767b\u5f55\u540e\u7684\u7528\u6237\u6bcf\u6b21\u8bbf\u95ee\u63a5\u53e3\uff0c\u90fd\u4f1a\u5728\u8bf7\u6c42\u5934\u4e2d\u643a\u5e26\u4e00\u4e2atoken\uff0c\u5728\u63a7\u5236\u5c42\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2atoken\uff0c\u89e3\u6790\u51fa\u7528\u6237\u7684\u57fa\u672c\u4fe1\u606f\u3002\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u5047\u5982\u5728\u670d\u52a1\u5c42\u548c\u6301\u4e45\u5c42\u90fd\u8981\u7528\u5230\u7528\u6237\u4fe1\u606f\uff0c\u6bd4\u5982rpc\u8c03\u7528\u3001\u66f4\u65b0\u7528\u6237\u83b7\u53d6\u7b49\u7b49\uff0c\u90a3\u5e94\u8be5\u600e\u4e48\u529e\u5462\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u4e00\u79cd\u529e\u6cd5\u662f\u663e\u5f0f\u5b9a\u4e49\u7528\u6237\u76f8\u5173\u7684\u53c2\u6570\uff0c\u6bd4\u5982\u8d26\u53f7\u3001\u7528\u6237\u540d\u2026\u2026\u8fd9\u6837\u4e00\u6765\uff0c\u6211\u4eec\u53ef\u80fd\u9700\u8981\u5927\u9762\u79ef\u5730\u4fee\u6539\u4ee3\u7801\uff0c\u591a\u5c11\u6709\u70b9\u74dc\u76ae\uff0c\u90a3\u8be5\u600e\u4e48\u529e\u5462\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u65f6\u5019\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u5230ThreadLocal\uff0c\u5728\u63a7\u5236\u5c42\u62e6\u622a\u8bf7\u6c42\u628a\u7528\u6237\u4fe1\u606f\u5b58\u5165ThreadLocal\uff0c\u8fd9\u6837\u6211\u4eec\u5728\u4efb\u4f55\u4e00\u4e2a\u5730\u65b9\uff0c\u90fd\u53ef\u4ee5\u53d6\u51faThreadLocal\u4e2d\u5b58\u7684\u7528\u6237\u6570\u636e\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(94987).Z+"",width:"462",height:"538"})}),"\n",(0,s.jsx)(e.p,{children:"\u5f88\u591a\u5176\u5b83\u573a\u666f\u7684cookie\u3001session\u7b49\u7b49\u6570\u636e\u9694\u79bb\u4e5f\u90fd\u53ef\u4ee5\u901a\u8fc7ThreadLocal\u53bb\u5b9e\u73b0\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u5e38\u7528\u7684\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e5f\u7528\u5230\u4e86ThreadLocal\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u7684\u8fde\u63a5\u4ea4\u7ed9ThreadLoca\u8fdb\u884c\u7ba1\u7406\uff0c\u4fdd\u8bc1\u5f53\u524d\u7ebf\u7a0b\u7684\u64cd\u4f5c\u90fd\u662f\u540c\u4e00\u4e2aConnnection\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"12threadlocal\u600e\u4e48\u5b9e\u73b0\u7684\u5462",children:"12.ThreadLocal\u600e\u4e48\u5b9e\u73b0\u7684\u5462\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:["\u6211\u4eec\u770b\u4e00\u4e0bThreadLocal\u7684set(T)\u65b9\u6cd5\uff0c\u53d1\u73b0\u5148\u83b7\u53d6\u5230\u5f53\u524d\u7ebf\u7a0b\uff0c\u518d\u83b7\u53d6",(0,s.jsx)(e.code,{children:"ThreadLocalMap"}),"\uff0c\u7136\u540e\u628a\u5143\u7d20\u5b58\u5230\u8fd9\u4e2amap\u4e2d\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"    public void set(T value) {\n        //\u83b7\u53d6\u5f53\u524d\u7ebf\u7a0b\n        Thread t = Thread.currentThread();\n        //\u83b7\u53d6ThreadLocalMap\n        ThreadLocalMap map = getMap(t);\n        //\u8bb2\u5f53\u524d\u5143\u7d20\u5b58\u5165map\n        if (map != null)\n            map.set(this, value);\n        else\n            createMap(t, value);\n    }\n"})}),"\n",(0,s.jsxs)(e.p,{children:["ThreadLocal\u5b9e\u73b0\u7684\u79d8\u5bc6\u90fd\u5728\u8fd9\u4e2a",(0,s.jsx)(e.code,{children:"ThreadLocalMap"}),"\u4e86\uff0c\u53ef\u4ee5Thread\u7c7b\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7c7b\u578b\u4e3a",(0,s.jsx)(e.code,{children:"ThreadLocal.ThreadLocalMap"}),"\u7684\u6210\u5458\u53d8\u91cf",(0,s.jsx)(e.code,{children:"threadLocals"}),"\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"public class Thread implements Runnable {\n   //ThreadLocal.ThreadLocalMap\u662fThread\u7684\u5c5e\u6027\n   ThreadLocal.ThreadLocalMap threadLocals = null;\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["ThreadLocalMap\u65e2\u7136\u88ab\u79f0\u4e3aMap\uff0c\u90a3\u4e48\u6beb\u65e0\u7591\u95ee\u5b83\u662f",(0,s.jsx)(e.code,{children:"<key,value>"}),"\u578b\u7684\u6570\u636e\u7ed3\u6784\u3002\u6211\u4eec\u90fd\u77e5\u9053map\u7684\u672c\u8d28\u662f\u4e00\u4e2a\u4e2a",(0,s.jsx)(e.code,{children:"<key,value>"}),"\u5f62\u5f0f\u7684\u8282\u70b9\u7ec4\u6210\u7684\u6570\u7ec4\uff0c\u90a3ThreadLocalMap\u7684\u8282\u70b9\u662f\u4ec0\u4e48\u6837\u7684\u5462\uff1f"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"static class Entry extends WeakReference<ThreadLocal<?>> {\n    /** The value associated with this ThreadLocal. */\n    Object value;\n\n    //\u8282\u70b9\u7c7b\n    Entry(ThreadLocal<?> k, Object v) {\n        //key\u8d4b\u503c\n        super(k);\n        //value\u8d4b\u503c\n        value = v;\n    }\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u8fd9\u91cc\u7684\u8282\u70b9\uff0ckey\u53ef\u4ee5\u7b80\u5355\u4f4e\u89c6\u4f5cThreadLocal\uff0cvalue\u4e3a\u4ee3\u7801\u4e2d\u653e\u5165\u7684\u503c\uff0c\u5f53\u7136\u5b9e\u9645\u4e0akey\u5e76\u4e0d\u662fThreadLocal\u672c\u8eab\uff0c\u800c\u662f\u5b83\u7684\u4e00\u4e2a",(0,s.jsx)(e.strong,{children:"\u5f31\u5f15\u7528"}),"\uff0c\u53ef\u4ee5\u770b\u5230Entry\u7684key\u7ee7\u627f\u4e86 WeakReference\uff08\u5f31\u5f15\u7528\uff09\uff0c\u518d\u6765\u770b\u4e00\u4e0bkey\u600e\u4e48\u8d4b\u503c\u7684\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"public WeakReference(T referent) {\n    super(referent);\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"key\u7684\u8d4b\u503c\uff0c\u4f7f\u7528\u7684\u662fWeakReference\u7684\u8d4b\u503c\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(52783).Z+"",width:"776",height:"467"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u6240\u4ee5\uff0c\u600e\u4e48\u56de\u7b54ThreadLocal\u539f\u7406\uff1f\u8981\u7b54\u51fa\u8fd9\u51e0\u4e2a\u70b9\uff1a"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Thread\u7c7b\u6709\u4e00\u4e2a\u7c7b\u578b\u4e3aThreadLocal.ThreadLocalMap\u7684\u5b9e\u4f8b\u53d8\u91cfthreadLocals\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u6709\u4e00\u4e2a\u5c5e\u4e8e\u81ea\u5df1\u7684ThreadLocalMap\u3002"}),"\n",(0,s.jsx)(e.li,{children:"ThreadLocalMap\u5185\u90e8\u7ef4\u62a4\u7740Entry\u6570\u7ec4\uff0c\u6bcf\u4e2aEntry\u4ee3\u8868\u4e00\u4e2a\u5b8c\u6574\u7684\u5bf9\u8c61\uff0ckey\u662fThreadLocal\u7684\u5f31\u5f15\u7528\uff0cvalue\u662fThreadLocal\u7684\u6cdb\u578b\u503c\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u6bcf\u4e2a\u7ebf\u7a0b\u5728\u5f80ThreadLocal\u91cc\u8bbe\u7f6e\u503c\u7684\u65f6\u5019\uff0c\u90fd\u662f\u5f80\u81ea\u5df1\u7684ThreadLocalMap\u91cc\u5b58\uff0c\u8bfb\u4e5f\u662f\u4ee5\u67d0\u4e2aThreadLocal\u4f5c\u4e3a\u5f15\u7528\uff0c\u5728\u81ea\u5df1\u7684map\u91cc\u627e\u5bf9\u5e94\u7684key\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u7ebf\u7a0b\u9694\u79bb\u3002"}),"\n",(0,s.jsx)(e.li,{children:"ThreadLocal\u672c\u8eab\u4e0d\u5b58\u50a8\u503c\uff0c\u5b83\u53ea\u662f\u4f5c\u4e3a\u4e00\u4e2akey\u6765\u8ba9\u7ebf\u7a0b\u5f80ThreadLocalMap\u91cc\u5b58\u53d6\u503c\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"13threadlocal-\u5185\u5b58\u6cc4\u9732\u662f\u600e\u4e48\u56de\u4e8b",children:"13.ThreadLocal \u5185\u5b58\u6cc4\u9732\u662f\u600e\u4e48\u56de\u4e8b\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u5148\u6765\u5206\u6790\u4e00\u4e0b\u4f7f\u7528ThreadLocal\u65f6\u7684\u5185\u5b58\uff0c\u6211\u4eec\u90fd\u77e5\u9053\uff0c\u5728JVM\u4e2d\uff0c\u6808\u5185\u5b58\u7ebf\u7a0b\u79c1\u6709\uff0c\u5b58\u50a8\u4e86\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u5806\u5185\u5b58\u7ebf\u7a0b\u5171\u4eab\uff0c\u5b58\u50a8\u4e86\u5bf9\u8c61\u5b9e\u4f8b\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u6240\u4ee5\u5462\uff0c\u6808\u4e2d\u5b58\u50a8\u4e86ThreadLocal\u3001Thread\u7684\u5f15\u7528\uff0c\u5806\u4e2d\u5b58\u50a8\u4e86\u5b83\u4eec\u7684\u5177\u4f53\u5b9e\u4f8b\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(38681).Z+"",width:"930",height:"404"})}),"\n",(0,s.jsx)(e.p,{children:"ThreadLocalMap\u4e2d\u4f7f\u7528\u7684 key \u4e3a ThreadLocal \u7684\u5f31\u5f15\u7528\u3002"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u201c\u5f31\u5f15\u7528\uff1a\u53ea\u8981\u5783\u573e\u56de\u6536\u673a\u5236\u4e00\u8fd0\u884c\uff0c\u4e0d\u7ba1JVM\u7684\u5185\u5b58\u7a7a\u95f4\u662f\u5426\u5145\u8db3\uff0c\u90fd\u4f1a\u56de\u6536\u8be5\u5bf9\u8c61\u5360\u7528\u7684\u5185\u5b58\u3002\u201d"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u90a3\u4e48\u73b0\u5728\u95ee\u9898\u5c31\u6765\u4e86\uff0c\u5f31\u5f15\u7528\u5f88\u5bb9\u6613\u88ab\u56de\u6536\uff0c\u5982\u679cThreadLocal\uff08ThreadLocalMap\u7684Key\uff09\u88ab\u5783\u573e\u56de\u6536\u5668\u56de\u6536\u4e86\uff0c\u4f46\u662fThreadLocalMap\u751f\u547d\u5468\u671f\u548cThread\u662f\u4e00\u6837\u7684\uff0c\u5b83\u8fd9\u65f6\u5019\u5982\u679c\u4e0d\u88ab\u56de\u6536\uff0c\u5c31\u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\uff1aThreadLocalMap\u7684key\u6ca1\u4e86\uff0cvalue\u8fd8\u5728\uff0c\u8fd9\u5c31\u4f1a",(0,s.jsx)(e.strong,{children:"\u9020\u6210\u4e86\u5185\u5b58\u6cc4\u6f0f\u95ee\u9898"}),"\u3002"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u90a3\u600e\u4e48\u89e3\u51b3\u5185\u5b58\u6cc4\u6f0f\u95ee\u9898\u5462\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5f88\u7b80\u5355\uff0c\u4f7f\u7528\u5b8cThreadLocal\u540e\uff0c\u53ca\u65f6\u8c03\u7528remove()\u65b9\u6cd5\u91ca\u653e\u5185\u5b58\u7a7a\u95f4\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'ThreadLocal<String> localVariable = new ThreadLocal();\ntry {\n    localVariable.set("\u9119\u4eba\u4e09\u67d0\u201d);\n    \u2026\u2026\n} finally {\n    localVariable.remove();\n}\n'})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u90a3\u4e3a\u4ec0\u4e48key\u8fd8\u8981\u8bbe\u8ba1\u6210\u5f31\u5f15\u7528\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"key\u8bbe\u8ba1\u6210\u5f31\u5f15\u7528\u540c\u6837\u662f\u4e3a\u4e86\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5047\u5982key\u88ab\u8bbe\u8ba1\u6210\u5f3a\u5f15\u7528\uff0c\u5982\u679cThreadLocal Reference\u88ab\u9500\u6bc1\uff0c\u6b64\u65f6\u5b83\u6307\u5411ThreadLoca\u7684\u5f3a\u5f15\u7528\u5c31\u6ca1\u6709\u4e86\uff0c\u4f46\u662f\u6b64\u65f6key\u8fd8\u5f3a\u5f15\u7528\u6307\u5411ThreadLoca\uff0c\u5c31\u4f1a\u5bfc\u81f4ThreadLocal\u4e0d\u80fd\u88ab\u56de\u6536\uff0c\u8fd9\u65f6\u5019\u5c31\u53d1\u751f\u4e86\u5185\u5b58\u6cc4\u6f0f\u7684\u95ee\u9898\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"14threadlocalmap\u7684\u7ed3\u6784\u4e86\u89e3\u5417",children:"14.ThreadLocalMap\u7684\u7ed3\u6784\u4e86\u89e3\u5417\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:["ThreadLocalMap\u867d\u7136\u88ab\u53eb\u505aMap\uff0c\u5176\u5b9e\u5b83\u662f\u6ca1\u6709\u5b9e\u73b0Map\u63a5\u53e3\u7684\uff0c\u4f46\u662f\u7ed3\u6784\u8fd8\u662f\u548cHashMap\u6bd4\u8f83\u7c7b\u4f3c\u7684\uff0c\u4e3b\u8981\u5173\u6ce8\u7684\u662f\u4e24\u4e2a\u8981\u7d20\uff1a",(0,s.jsx)(e.code,{children:"\u5143\u7d20\u6570\u7ec4"}),"\u548c",(0,s.jsx)(e.code,{children:"\u6563\u5217\u65b9\u6cd5"}),"\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(2954).Z+"",width:"1208",height:"474"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5143\u7d20\u6570\u7ec4"}),"\n",(0,s.jsx)(e.p,{children:"\u4e00\u4e2atable\u6570\u7ec4\uff0c\u5b58\u50a8Entry\u7c7b\u578b\u7684\u5143\u7d20\uff0cEntry\u662fThreaLocal\u5f31\u5f15\u7528\u4f5c\u4e3akey\uff0cObject\u4f5c\u4e3avalue\u7684\u7ed3\u6784\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:" private Entry[] table;\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u6563\u5217\u65b9\u6cd5"}),"\n",(0,s.jsx)(e.p,{children:"\u6563\u5217\u65b9\u6cd5\u5c31\u662f\u600e\u4e48\u628a\u5bf9\u5e94\u7684key\u6620\u5c04\u5230table\u6570\u7ec4\u7684\u76f8\u5e94\u4e0b\u6807\uff0cThreadLocalMap\u7528\u7684\u662f\u54c8\u5e0c\u53d6\u4f59\u6cd5\uff0c\u53d6\u51fakey\u7684threadLocalHashCode\uff0c\u7136\u540e\u548ctable\u6570\u7ec4\u957f\u5ea6\u51cf\u4e00&\u8fd0\u7b97\uff08\u76f8\u5f53\u4e8e\u53d6\u4f59\uff09\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"int i = key.threadLocalHashCode & (table.length - 1);\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u8fd9\u91cc\u7684threadLocalHashCode\u8ba1\u7b97\u6709\u70b9\u4e1c\u897f\uff0c\u6bcf\u521b\u5efa\u4e00\u4e2aThreadLocal\u5bf9\u8c61\uff0c\u5b83\u5c31\u4f1a\u65b0\u589e",(0,s.jsx)(e.code,{children:"0x61c88647"}),"\uff0c\u8fd9\u4e2a\u503c\u5f88\u7279\u6b8a\uff0c\u5b83\u662f",(0,s.jsx)(e.strong,{children:"\u6590\u6ce2\u90a3\u5951\u6570"}),"  \u4e5f\u53eb ",(0,s.jsx)(e.strong,{children:"\u9ec4\u91d1\u5206\u5272\u6570"}),"\u3002",(0,s.jsx)(e.code,{children:"hash"}),"\u589e\u91cf\u4e3a \u8fd9\u4e2a\u6570\u5b57\uff0c\u5e26\u6765\u7684\u597d\u5904\u5c31\u662f ",(0,s.jsx)(e.code,{children:"hash"})," ",(0,s.jsx)(e.strong,{children:"\u5206\u5e03\u975e\u5e38\u5747\u5300"}),"\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"    private static final int HASH_INCREMENT = 0x61c88647;\n    \n    private static int nextHashCode() {\n        return nextHashCode.getAndAdd(HASH_INCREMENT);\n    }\n"})}),"\n",(0,s.jsx)(e.h3,{id:"15threadlocalmap\u600e\u4e48\u89e3\u51b3hash\u51b2\u7a81\u7684",children:"15.ThreadLocalMap\u600e\u4e48\u89e3\u51b3Hash\u51b2\u7a81\u7684\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u53ef\u80fd\u90fd\u77e5\u9053HashMap\u4f7f\u7528\u4e86\u94fe\u8868\u6765\u89e3\u51b3\u51b2\u7a81\uff0c\u4e5f\u5c31\u662f\u6240\u8c13\u7684\u94fe\u5730\u5740\u6cd5\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["ThreadLocalMap\u6ca1\u6709\u4f7f\u7528\u94fe\u8868\uff0c\u81ea\u7136\u4e5f\u4e0d\u662f\u7528\u94fe\u5730\u5740\u6cd5\u6765\u89e3\u51b3\u51b2\u7a81\u4e86\uff0c\u5b83\u7528\u7684\u662f\u53e6\u5916\u4e00\u79cd\u65b9\u5f0f\u2014\u2014",(0,s.jsx)(e.strong,{children:"\u5f00\u653e\u5b9a\u5740\u6cd5"}),"\u3002\u5f00\u653e\u5b9a\u5740\u6cd5\u662f\u4ec0\u4e48\u610f\u601d\u5462\uff1f\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u8fd9\u4e2a\u5751\u88ab\u4eba\u5360\u4e86\uff0c\u90a3\u5c31\u63a5\u7740\u53bb\u627e\u7a7a\u7740\u7684\u5751\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(92815).Z+"",width:"1002",height:"448"})}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5982\u679c\u6211\u4eec\u63d2\u5165\u4e00\u4e2avalue=27\u7684\u6570\u636e\uff0c\u901a\u8fc7 hash\u8ba1\u7b97\u540e\u5e94\u8be5\u843d\u5165\u7b2c 4 \u4e2a\u69fd\u4f4d\u4e2d\uff0c\u800c\u69fd\u4f4d 4 \u5df2\u7ecf\u6709\u4e86 Entry\u6570\u636e\uff0c\u800c\u4e14Entry\u6570\u636e\u7684key\u548c\u5f53\u524d\u4e0d\u76f8\u7b49\u3002\u6b64\u65f6\u5c31\u4f1a\u7ebf\u6027\u5411\u540e\u67e5\u627e\uff0c\u4e00\u76f4\u627e\u5230 Entry\u4e3a null\u7684\u69fd\u4f4d\u624d\u4f1a\u505c\u6b62\u67e5\u627e\uff0c\u628a\u5143\u7d20\u653e\u5230\u7a7a\u7684\u69fd\u4e2d\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5728get\u7684\u65f6\u5019\uff0c\u4e5f\u4f1a\u6839\u636eThreadLocal\u5bf9\u8c61\u7684hash\u503c\uff0c\u5b9a\u4f4d\u5230table\u4e2d\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u5224\u65ad\u8be5\u69fd\u4f4dEntry\u5bf9\u8c61\u4e2d\u7684key\u662f\u5426\u548cget\u7684key\u4e00\u81f4\uff0c\u5982\u679c\u4e0d\u4e00\u81f4\uff0c\u5c31\u5224\u65ad\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"16threadlocalmap\u6269\u5bb9\u673a\u5236\u4e86\u89e3\u5417",children:"16.ThreadLocalMap\u6269\u5bb9\u673a\u5236\u4e86\u89e3\u5417\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728ThreadLocalMap.set()\u65b9\u6cd5\u7684\u6700\u540e\uff0c\u5982\u679c\u6267\u884c\u5b8c\u542f\u53d1\u5f0f\u6e05\u7406\u5de5\u4f5c\u540e\uff0c\u672a\u6e05\u7406\u5230\u4efb\u4f55\u6570\u636e\uff0c\u4e14\u5f53\u524d\u6563\u5217\u6570\u7ec4\u4e2d",(0,s.jsx)(e.code,{children:"Entry"}),"\u7684\u6570\u91cf\u5df2\u7ecf\u8fbe\u5230\u4e86\u5217\u8868\u7684\u6269\u5bb9\u9608\u503c",(0,s.jsx)(e.code,{children:"(len*2/3)"}),"\uff0c\u5c31\u5f00\u59cb\u6267\u884c",(0,s.jsx)(e.code,{children:"rehash()"}),"\u903b\u8f91\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"if (!cleanSomeSlots(i, sz) && sz >= threshold)\n    rehash();\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u518d\u7740\u770brehash()\u5177\u4f53\u5b9e\u73b0\uff1a\u8fd9\u91cc\u4f1a\u5148\u53bb\u6e05\u7406\u8fc7\u671f\u7684Entry\uff0c\u7136\u540e\u8fd8\u8981\u6839\u636e\u6761\u4ef6\u5224\u65ad",(0,s.jsx)(e.code,{children:"size >= threshold - threshold / 4"})," \u4e5f\u5c31\u662f",(0,s.jsx)(e.code,{children:"size >= threshold* 3/4"}),"\u6765\u51b3\u5b9a\u662f\u5426\u9700\u8981\u6269\u5bb9\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"private void rehash() {\n    //\u6e05\u7406\u8fc7\u671fEntry\n    expungeStaleEntries();\n\n    //\u6269\u5bb9\n    if (size >= threshold - threshold / 4)\n        resize();\n}\n\n//\u6e05\u7406\u8fc7\u671fEntry\nprivate void expungeStaleEntries() {\n    Entry[] tab = table;\n    int len = tab.length;\n    for (int j = 0; j < len; j++) {\n        Entry e = tab[j];\n        if (e != null && e.get() == null)\n            expungeStaleEntry(j);\n    }\n}\n\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u63a5\u7740\u770b\u770b\u5177\u4f53\u7684",(0,s.jsx)(e.code,{children:"resize()"}),"\u65b9\u6cd5\uff0c\u6269\u5bb9\u540e\u7684",(0,s.jsx)(e.code,{children:"newTab"}),"\u7684\u5927\u5c0f\u4e3a\u8001\u6570\u7ec4\u7684\u4e24\u500d\uff0c\u7136\u540e\u904d\u5386\u8001\u7684table\u6570\u7ec4\uff0c\u6563\u5217\u65b9\u6cd5\u91cd\u65b0\u8ba1\u7b97\u4f4d\u7f6e\uff0c\u5f00\u653e\u5730\u5740\u89e3\u51b3\u51b2\u7a81\uff0c\u7136\u540e\u653e\u5230\u65b0\u7684",(0,s.jsx)(e.code,{children:"newTab"}),"\uff0c\u904d\u5386\u5b8c\u6210\u4e4b\u540e\uff0c",(0,s.jsx)(e.code,{children:"oldTab"}),"\u4e2d\u6240\u6709\u7684",(0,s.jsx)(e.code,{children:"entry"}),"\u6570\u636e\u90fd\u5df2\u7ecf\u653e\u5165\u5230",(0,s.jsx)(e.code,{children:"newTab"}),"\u4e2d\u4e86\uff0c\u7136\u540etable\u5f15\u7528\u6307\u5411",(0,s.jsx)(e.code,{children:"newTab"})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(22101).Z+"",width:"1006",height:"358"})}),"\n",(0,s.jsx)(e.p,{children:"\u5177\u4f53\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(67178).Z+"",width:"1464",height:"1378"})}),"\n",(0,s.jsx)(e.h3,{id:"17\u7236\u5b50\u7ebf\u7a0b\u600e\u4e48\u5171\u4eab\u6570\u636e",children:"17.\u7236\u5b50\u7ebf\u7a0b\u600e\u4e48\u5171\u4eab\u6570\u636e\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u7236\u7ebf\u7a0b\u80fd\u7528ThreadLocal\u6765\u7ed9\u5b50\u7ebf\u7a0b\u4f20\u503c\u5417\uff1f\u6beb\u65e0\u7591\u95ee\uff0c\u4e0d\u80fd\u3002\u90a3\u8be5\u600e\u4e48\u529e\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:["\u8fd9\u65f6\u5019\u53ef\u4ee5\u7528\u5230\u53e6\u5916\u4e00\u4e2a\u7c7b\u2014\u2014",(0,s.jsx)(e.code,{children:"InheritableThreadLocal "}),"\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u4f7f\u7528\u8d77\u6765\u5f88\u7b80\u5355\uff0c\u5728\u4e3b\u7ebf\u7a0b\u7684InheritableThreadLocal\u5b9e\u4f8b\u8bbe\u7f6e\u503c\uff0c\u5728\u5b50\u7ebf\u7a0b\u4e2d\u5c31\u53ef\u4ee5\u62ff\u5230\u4e86\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'public class InheritableThreadLocalTest {\n    \n    public static void main(String[] args) {\n        final ThreadLocal threadLocal = new InheritableThreadLocal();\n        // \u4e3b\u7ebf\u7a0b\n        threadLocal.set("\u4e0d\u64c5\u6280\u672f");\n        //\u5b50\u7ebf\u7a0b\n        Thread t = new Thread() {\n            @Override\n            public void run() {\n                super.run();\n                System.out.println("\u9119\u4eba\u4e09\u67d0 \uff0c" + threadLocal.get());\n            }\n        };\n        t.start();\n    }\n}\n'})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u90a3\u539f\u7406\u662f\u4ec0\u4e48\u5462\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u539f\u7406\u5f88\u7b80\u5355\uff0c\u5728Thread\u7c7b\u91cc\u8fd8\u6709\u53e6\u5916\u4e00\u4e2a\u53d8\u91cf\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"ThreadLocal.ThreadLocalMap inheritableThreadLocals = null;\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5728Thread.init\u7684\u65f6\u5019\uff0c\u5982\u679c\u7236\u7ebf\u7a0b\u7684",(0,s.jsx)(e.code,{children:"inheritableThreadLocals"}),"\u4e0d\u4e3a\u7a7a\uff0c\u5c31\u628a\u5b83\u8d4b\u7ed9\u5f53\u524d\u7ebf\u7a0b\uff08\u5b50\u7ebf\u7a0b\uff09\u7684",(0,s.jsx)(e.code,{children:"inheritableThreadLocals "}),"\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"if (inheritThreadLocals && parent.inheritableThreadLocals != null)\n    this.inheritableThreadLocals =\n        ThreadLocal.createInheritedMap(parent.inheritableThreadLocals);\n"})}),"\n",(0,s.jsx)(e.h2,{id:"java\u5185\u5b58\u6a21\u578b",children:"Java\u5185\u5b58\u6a21\u578b"}),"\n",(0,s.jsx)(e.h3,{id:"18\u8bf4\u4e00\u4e0b\u4f60\u5bf9java\u5185\u5b58\u6a21\u578bjmm\u7684\u7406\u89e3",children:"18.\u8bf4\u4e00\u4e0b\u4f60\u5bf9Java\u5185\u5b58\u6a21\u578b\uff08JMM\uff09\u7684\u7406\u89e3\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"Java\u5185\u5b58\u6a21\u578b\uff08Java Memory Model\uff0cJMM\uff09\uff0c\u662f\u4e00\u79cd\u62bd\u8c61\u7684\u6a21\u578b\uff0c\u88ab\u5b9a\u4e49\u51fa\u6765\u5c4f\u853d\u5404\u79cd\u786c\u4ef6\u548c\u64cd\u4f5c\u7cfb\u7edf\u7684\u5185\u5b58\u8bbf\u95ee\u5dee\u5f02\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["JMM\u5b9a\u4e49\u4e86\u7ebf\u7a0b\u548c\u4e3b\u5185\u5b58\u4e4b\u95f4\u7684\u62bd\u8c61\u5173\u7cfb\uff1a\u7ebf\u7a0b\u4e4b\u95f4\u7684\u5171\u4eab\u53d8\u91cf\u5b58\u50a8\u5728",(0,s.jsx)(e.code,{children:"\u4e3b\u5185\u5b58"}),"\uff08Main Memory\uff09\u4e2d\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u6709\u4e00\u4e2a\u79c1\u6709\u7684",(0,s.jsx)(e.code,{children:"\u672c\u5730\u5185\u5b58"}),"\uff08Local Memory\uff09\uff0c\u672c\u5730\u5185\u5b58\u4e2d\u5b58\u50a8\u4e86\u8be5\u7ebf\u7a0b\u4ee5\u8bfb/\u5199\u5171\u4eab\u53d8\u91cf\u7684\u526f\u672c\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"Java\u5185\u5b58\u6a21\u578b\u7684\u62bd\u8c61\u56fe\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(9021).Z+"",width:"649",height:"547"})}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u5730\u5185\u5b58\u662fJMM\u7684 \u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\uff0c\u5e76\u4e0d\u771f\u5b9e\u5b58\u5728\u3002\u5b83\u5176\u5b9e\u6db5\u76d6\u4e86\u7f13\u5b58\u3001\u5199\u7f13\u51b2\u533a\u3001\u5bc4\u5b58\u5668\u4ee5\u53ca\u5176\u4ed6\u7684\u786c\u4ef6\u548c\u7f16\u8bd1\u5668\u4f18\u5316\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(96619).Z+"",width:"654",height:"610"})}),"\n",(0,s.jsx)(e.p,{children:"\u56fe\u91cc\u9762\u7684\u662f\u4e00\u4e2a\u53cc\u6838 CPU \u7cfb\u7edf\u67b6\u6784 \uff0c\u6bcf\u4e2a\u6838\u6709\u81ea\u5df1\u7684\u63a7\u5236\u5668\u548c\u8fd0\u7b97\u5668\uff0c\u5176\u4e2d\u63a7\u5236\u5668\u5305\u542b\u4e00\u7ec4\u5bc4\u5b58\u5668\u548c\u64cd\u4f5c\u63a7\u5236\u5668\uff0c\u8fd0\u7b97\u5668\u6267\u884c\u7b97\u672f\u903b\u8f85\u8fd0\u7b97\u3002\u6bcf\u4e2a\u6838\u90fd\u6709\u81ea\u5df1\u7684\u4e00\u7ea7\u7f13\u5b58\uff0c\u5728\u6709\u4e9b\u67b6\u6784\u91cc\u9762\u8fd8\u6709\u4e00\u4e2a\u6240\u6709 CPU \u5171\u4eab\u7684\u4e8c\u7ea7\u7f13\u5b58\u3002 \u90a3\u4e48 Java \u5185\u5b58\u6a21\u578b\u91cc\u9762\u7684\u5de5\u4f5c\u5185\u5b58\uff0c\u5c31\u5bf9\u5e94\u8fd9\u91cc\u7684 Ll \u7f13\u5b58\u6216\u8005 L2 \u7f13\u5b58\u6216\u8005 CPU \u5bc4\u5b58\u5668\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"19\u8bf4\u8bf4\u4f60\u5bf9\u539f\u5b50\u6027\u53ef\u89c1\u6027\u6709\u5e8f\u6027\u7684\u7406\u89e3",children:"19.\u8bf4\u8bf4\u4f60\u5bf9\u539f\u5b50\u6027\u3001\u53ef\u89c1\u6027\u3001\u6709\u5e8f\u6027\u7684\u7406\u89e3\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u539f\u5b50\u6027\u3001\u6709\u5e8f\u6027\u3001\u53ef\u89c1\u6027\u662f\u5e76\u53d1\u7f16\u7a0b\u4e2d\u975e\u5e38\u91cd\u8981\u7684\u57fa\u7840\u6982\u5ff5\uff0cJMM\u7684\u5f88\u591a\u6280\u672f\u90fd\u662f\u56f4\u7ed5\u7740\u8fd9\u4e09\u5927\u7279\u6027\u5c55\u5f00\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u539f\u5b50\u6027"}),"\uff1a\u539f\u5b50\u6027\u6307\u7684\u662f\u4e00\u4e2a\u64cd\u4f5c\u662f\u4e0d\u53ef\u5206\u5272\u3001\u4e0d\u53ef\u4e2d\u65ad\u7684\uff0c\u8981\u4e48\u5168\u90e8\u6267\u884c\u5e76\u4e14\u6267\u884c\u7684\u8fc7\u7a0b\u4e0d\u4f1a\u88ab\u4efb\u4f55\u56e0\u7d20\u6253\u65ad\uff0c\u8981\u4e48\u5c31\u5168\u4e0d\u6267\u884c\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u53ef\u89c1\u6027"}),"\uff1a\u53ef\u89c1\u6027\u6307\u7684\u662f\u4e00\u4e2a\u7ebf\u7a0b\u4fee\u6539\u4e86\u67d0\u4e00\u4e2a\u5171\u4eab\u53d8\u91cf\u7684\u503c\u65f6\uff0c\u5176\u5b83\u7ebf\u7a0b\u80fd\u591f\u7acb\u5373\u77e5\u9053\u8fd9\u4e2a\u4fee\u6539\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u6709\u5e8f\u6027"}),"\uff1a\u6709\u5e8f\u6027\u6307\u7684\u662f\u5bf9\u4e8e\u4e00\u4e2a\u7ebf\u7a0b\u7684\u6267\u884c\u4ee3\u7801\uff0c\u4ece\u524d\u5f80\u540e\u4f9d\u6b21\u6267\u884c\uff0c\u5355\u7ebf\u7a0b\u4e0b\u53ef\u4ee5\u8ba4\u4e3a\u7a0b\u5e8f\u662f\u6709\u5e8f\u7684\uff0c\u4f46\u662f\u5e76\u53d1\u65f6\u6709\u53ef\u80fd\u4f1a\u53d1\u751f\u6307\u4ee4\u91cd\u6392\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u5206\u6790\u4e0b\u9762\u51e0\u884c\u4ee3\u7801\u7684\u539f\u5b50\u6027\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"int i = 2;\nint j = i;\ni++;\ni = i + 1;\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7b2c1\u53e5\u662f\u57fa\u672c\u7c7b\u578b\u8d4b\u503c\uff0c\u662f\u539f\u5b50\u6027\u64cd\u4f5c\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u7b2c2\u53e5\u5148\u8bfbi\u7684\u503c\uff0c\u518d\u8d4b\u503c\u5230j\uff0c\u4e24\u6b65\u64cd\u4f5c\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u539f\u5b50\u6027\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u7b2c3\u548c\u7b2c4\u53e5\u5176\u5b9e\u662f\u7b49\u6548\u7684\uff0c\u5148\u8bfb\u53d6i\u7684\u503c\uff0c\u518d+1\uff0c\u6700\u540e\u8d4b\u503c\u5230i\uff0c\u4e09\u6b65\u64cd\u4f5c\u4e86\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u539f\u5b50\u6027\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u539f\u5b50\u6027\u3001\u53ef\u89c1\u6027\u3001\u6709\u5e8f\u6027\u90fd\u5e94\u8be5\u600e\u4e48\u4fdd\u8bc1\u5462\uff1f"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u539f\u5b50\u6027\uff1aJMM\u53ea\u80fd\u4fdd\u8bc1\u57fa\u672c\u7684\u539f\u5b50\u6027\uff0c\u5982\u679c\u8981\u4fdd\u8bc1\u4e00\u4e2a\u4ee3\u7801\u5757\u7684\u539f\u5b50\u6027\uff0c\u9700\u8981\u4f7f\u7528",(0,s.jsx)(e.code,{children:"synchronized "}),"\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:["\u53ef\u89c1\u6027\uff1aJava\u662f\u5229\u7528",(0,s.jsx)(e.code,{children:"volatile"}),"\u5173\u952e\u5b57\u6765\u4fdd\u8bc1\u53ef\u89c1\u6027\u7684\uff0c\u9664\u6b64\u4e4b\u5916\uff0c",(0,s.jsx)(e.code,{children:"final"}),"\u548c",(0,s.jsx)(e.code,{children:"synchronized"}),"\u4e5f\u80fd\u4fdd\u8bc1\u53ef\u89c1\u6027\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:["\u6709\u5e8f\u6027\uff1a",(0,s.jsx)(e.code,{children:"synchronized"}),"\u6216\u8005",(0,s.jsx)(e.code,{children:"volatile"}),"\u90fd\u53ef\u4ee5\u4fdd\u8bc1\u591a\u7ebf\u7a0b\u4e4b\u95f4\u64cd\u4f5c\u7684\u6709\u5e8f\u6027\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"20\u90a3\u8bf4\u8bf4\u4ec0\u4e48\u662f\u6307\u4ee4\u91cd\u6392",children:"20.\u90a3\u8bf4\u8bf4\u4ec0\u4e48\u662f\u6307\u4ee4\u91cd\u6392\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\uff0c\u4e3a\u4e86\u63d0\u9ad8\u6027\u80fd\uff0c\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u5e38\u5e38\u4f1a\u5bf9\u6307\u4ee4\u505a\u91cd\u6392\u5e8f\u3002\u91cd\u6392\u5e8f\u52063\u79cd\u7c7b\u578b\u3002"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u7f16\u8bd1\u5668\u4f18\u5316\u7684\u91cd\u6392\u5e8f\u3002\u7f16\u8bd1\u5668\u5728\u4e0d\u6539\u53d8\u5355\u7ebf\u7a0b\u7a0b\u5e8f\u8bed\u4e49\u7684\u524d\u63d0\u4e0b\uff0c\u53ef\u4ee5\u91cd\u65b0\u5b89\u6392\u8bed\u53e5\u7684\u6267\u884c\u987a\u5e8f\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u6307\u4ee4\u7ea7\u5e76\u884c\u7684\u91cd\u6392\u5e8f\u3002\u73b0\u4ee3\u5904\u7406\u5668\u91c7\u7528\u4e86\u6307\u4ee4\u7ea7\u5e76\u884c\u6280\u672f\uff08Instruction-Level Parallelism\uff0cILP\uff09\u6765\u5c06\u591a\u6761\u6307\u4ee4\u91cd\u53e0\u6267\u884c\u3002\u5982\u679c\u4e0d\u5b58\u5728\u6570\u636e\u4f9d\u8d56\u6027\uff0c\u5904\u7406\u5668\u53ef\u4ee5\u6539\u53d8\u8bed\u53e5\u5bf9\u5e94 \u673a\u5668\u6307\u4ee4\u7684\u6267\u884c\u987a\u5e8f\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5185\u5b58\u7cfb\u7edf\u7684\u91cd\u6392\u5e8f\u3002\u7531\u4e8e\u5904\u7406\u5668\u4f7f\u7528\u7f13\u5b58\u548c\u8bfb/\u5199\u7f13\u51b2\u533a\uff0c\u8fd9\u4f7f\u5f97\u52a0\u8f7d\u548c\u5b58\u50a8\u64cd\u4f5c\u770b\u4e0a\u53bb\u53ef\u80fd\u662f\u5728\u4e71\u5e8f\u6267\u884c\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u4eceJava\u6e90\u4ee3\u7801\u5230\u6700\u7ec8\u5b9e\u9645\u6267\u884c\u7684\u6307\u4ee4\u5e8f\u5217\uff0c\u4f1a\u5206\u522b\u7ecf\u5386\u4e0b\u97623\u79cd\u91cd\u6392\u5e8f\uff0c\u5982\u56fe\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(44051).Z+"",width:"1035",height:"195"})}),"\n",(0,s.jsxs)(e.p,{children:["\u6211\u4eec\u6bd4\u8f83\u719f\u6089\u7684\u53cc\u91cd\u6821\u9a8c\u5355\u4f8b\u6a21\u5f0f\u5c31\u662f\u4e00\u4e2a\u7ecf\u5178\u7684\u6307\u4ee4\u91cd\u6392\u7684\u4f8b\u5b50\uff0c",(0,s.jsx)(e.code,{children:"Singleton instance=new Singleton()\uff1b"}),"\u5bf9\u5e94\u7684JVM\u6307\u4ee4\u5206\u4e3a\u4e09\u6b65\uff1a\u5206\u914d\u5185\u5b58\u7a7a\u95f4--\x3e\u521d\u59cb\u5316\u5bf9\u8c61---\x3e\u5bf9\u8c61\u6307\u5411\u5206\u914d\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u4f46\u662f\u7ecf\u8fc7\u4e86\u7f16\u8bd1\u5668\u7684\u6307\u4ee4\u91cd\u6392\u5e8f\uff0c\u7b2c\u4e8c\u6b65\u548c\u7b2c\u4e09\u6b65\u5c31\u53ef\u80fd\u4f1a\u91cd\u6392\u5e8f\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(3983).Z+"",width:"901",height:"604"})}),"\n",(0,s.jsx)(e.p,{children:"JMM\u5c5e\u4e8e\u8bed\u8a00\u7ea7\u7684\u5185\u5b58\u6a21\u578b\uff0c\u5b83\u786e\u4fdd\u5728\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u548c\u4e0d\u540c\u7684\u5904\u7406\u5668\u5e73\u53f0\u4e4b\u4e0a\uff0c\u901a\u8fc7\u7981\u6b62\u7279\u5b9a\u7c7b\u578b\u7684\u7f16\u8bd1\u5668\u91cd\u6392\u5e8f\u548c\u5904\u7406\u5668\u91cd\u6392\u5e8f\uff0c\u4e3a\u7a0b\u5e8f\u5458\u63d0\u4f9b\u4e00\u81f4\u7684\u5185\u5b58\u53ef\u89c1\u6027\u4fdd\u8bc1\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"21\u6307\u4ee4\u91cd\u6392\u6709\u9650\u5236\u5417happens-before\u4e86\u89e3\u5417",children:"21.\u6307\u4ee4\u91cd\u6392\u6709\u9650\u5236\u5417\uff1fhappens-before\u4e86\u89e3\u5417\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:["\u6307\u4ee4\u91cd\u6392\u4e5f\u662f\u6709\u4e00\u4e9b\u9650\u5236\u7684\uff0c\u6709\u4e24\u4e2a\u89c4\u5219",(0,s.jsx)(e.code,{children:"happens-before"}),"\u548c",(0,s.jsx)(e.code,{children:"as-if-serial"}),"\u6765\u7ea6\u675f\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"happens-before\u7684\u5b9a\u4e49\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u4e00\u4e2a\u64cd\u4f5chappens-before\u53e6\u4e00\u4e2a\u64cd\u4f5c\uff0c\u90a3\u4e48\u7b2c\u4e00\u4e2a\u64cd\u4f5c\u7684\u6267\u884c\u7ed3\u679c\u5c06\u5bf9\u7b2c\u4e8c\u4e2a\u64cd\u4f5c\u53ef\u89c1\uff0c\u800c\u4e14\u7b2c\u4e00\u4e2a\u64cd\u4f5c\u7684\u6267\u884c\u987a\u5e8f\u6392\u5728\u7b2c\u4e8c\u4e2a\u64cd\u4f5c\u4e4b\u524d\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u4e24\u4e2a\u64cd\u4f5c\u4e4b\u95f4\u5b58\u5728happens-before\u5173\u7cfb\uff0c\u5e76\u4e0d\u610f\u5473\u7740Java\u5e73\u53f0\u7684\u5177\u4f53\u5b9e\u73b0\u5fc5\u987b\u8981\u6309\u7167 happens-before\u5173\u7cfb\u6307\u5b9a\u7684\u987a\u5e8f\u6765\u6267\u884c\u3002\u5982\u679c\u91cd\u6392\u5e8f\u4e4b\u540e\u7684\u6267\u884c\u7ed3\u679c\uff0c\u4e0e\u6309happens-before\u5173\u7cfb\u6765\u6267\u884c\u7684\u7ed3\u679c\u4e00\u81f4\uff0c\u90a3\u4e48\u8fd9\u79cd\u91cd\u6392\u5e8f\u5e76\u4e0d\u975e\u6cd5"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"happens-before\u548c\u6211\u4eec\u606f\u606f\u76f8\u5173\u7684\u6709\u516d\u5927\u89c4\u5219\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(63227).Z+"",width:"825",height:"578"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u7a0b\u5e8f\u987a\u5e8f\u89c4\u5219"}),"\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u7684\u6bcf\u4e2a\u64cd\u4f5c\uff0chappens-before\u4e8e\u8be5\u7ebf\u7a0b\u4e2d\u7684\u4efb\u610f\u540e\u7eed\u64cd\u4f5c\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u76d1\u89c6\u5668\u9501\u89c4\u5219"}),"\uff1a\u5bf9\u4e00\u4e2a\u9501\u7684\u89e3\u9501\uff0chappens-before\u4e8e\u968f\u540e\u5bf9\u8fd9\u4e2a\u9501\u7684\u52a0\u9501\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"volatile\u53d8\u91cf\u89c4\u5219"}),"\uff1a\u5bf9\u4e00\u4e2avolatile\u57df\u7684\u5199\uff0chappens-before\u4e8e\u4efb\u610f\u540e\u7eed\u5bf9\u8fd9\u4e2avolatile\u57df\u7684\u8bfb\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u4f20\u9012\u6027"}),"\uff1a\u5982\u679cA happens-before B\uff0c\u4e14B happens-before C\uff0c\u90a3\u4e48A happens-before C\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"start()\u89c4\u5219"}),"\uff1a\u5982\u679c\u7ebf\u7a0bA\u6267\u884c\u64cd\u4f5cThreadB.start()\uff08\u542f\u52a8\u7ebf\u7a0bB\uff09\uff0c\u90a3\u4e48A\u7ebf\u7a0b\u7684 ThreadB.start()\u64cd\u4f5chappens-before\u4e8e\u7ebf\u7a0bB\u4e2d\u7684\u4efb\u610f\u64cd\u4f5c\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"join()\u89c4\u5219"}),"\uff1a\u5982\u679c\u7ebf\u7a0bA\u6267\u884c\u64cd\u4f5cThreadB.join()\u5e76\u6210\u529f\u8fd4\u56de\uff0c\u90a3\u4e48\u7ebf\u7a0bB\u4e2d\u7684\u4efb\u610f\u64cd\u4f5c happens-before\u4e8e\u7ebf\u7a0bA\u4eceThreadB.join()\u64cd\u4f5c\u6210\u529f\u8fd4\u56de\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"22as-if-serial\u53c8\u662f\u4ec0\u4e48\u5355\u7ebf\u7a0b\u7684\u7a0b\u5e8f\u4e00\u5b9a\u662f\u987a\u5e8f\u7684\u5417",children:"22.as-if-serial\u53c8\u662f\u4ec0\u4e48\uff1f\u5355\u7ebf\u7a0b\u7684\u7a0b\u5e8f\u4e00\u5b9a\u662f\u987a\u5e8f\u7684\u5417\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:["as-if-serial\u8bed\u4e49\u7684\u610f\u601d\u662f\uff1a\u4e0d\u7ba1\u600e\u4e48\u91cd\u6392\u5e8f\uff08\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u4e3a\u4e86\u63d0\u9ad8\u5e76\u884c\u5ea6\uff09\uff0c",(0,s.jsx)(e.strong,{children:"\u5355\u7ebf\u7a0b\u7a0b\u5e8f\u7684\u6267\u884c\u7ed3\u679c\u4e0d\u80fd\u88ab\u6539\u53d8"}),"\u3002\u7f16\u8bd1\u5668\u3001runtime\u548c\u5904\u7406\u5668\u90fd\u5fc5\u987b\u9075\u5b88as-if-serial\u8bed\u4e49\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u4e3a\u4e86\u9075\u5b88as-if-serial\u8bed\u4e49\uff0c\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u4e0d\u4f1a\u5bf9\u5b58\u5728\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\u7684\u64cd\u4f5c\u505a\u91cd\u6392\u5e8f\uff0c\u56e0\u4e3a\u8fd9\u79cd\u91cd\u6392\u5e8f\u4f1a\u6539\u53d8\u6267\u884c\u7ed3\u679c\u3002\u4f46\u662f\uff0c\u5982\u679c\u64cd\u4f5c\u4e4b\u95f4\u4e0d\u5b58\u5728\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u5c31\u53ef\u80fd\u88ab\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u91cd\u6392\u5e8f\u3002\u4e3a\u4e86\u5177\u4f53\u8bf4\u660e\uff0c\u8bf7\u770b\u4e0b\u9762\u8ba1\u7b97\u5706\u9762\u79ef\u7684\u4ee3\u7801\u793a\u4f8b\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"double pi = 3.14;   // A\ndouble r = 1.0;   // B \ndouble area = pi * r * r;   // C\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0a\u97623\u4e2a\u64cd\u4f5c\u7684\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(86592).Z+"",width:"432",height:"229"})}),"\n",(0,s.jsx)(e.p,{children:"A\u548cC\u4e4b\u95f4\u5b58\u5728\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\uff0c\u540c\u65f6B\u548cC\u4e4b\u95f4\u4e5f\u5b58\u5728\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\u3002\u56e0\u6b64\u5728\u6700\u7ec8\u6267\u884c\u7684\u6307\u4ee4\u5e8f\u5217\u4e2d\uff0cC\u4e0d\u80fd\u88ab\u91cd\u6392\u5e8f\u5230A\u548cB\u7684\u524d\u9762\uff08C\u6392\u5230A\u548cB\u7684\u524d\u9762\uff0c\u7a0b\u5e8f\u7684\u7ed3\u679c\u5c06\u4f1a\u88ab\u6539\u53d8\uff09\u3002\u4f46A\u548cB\u4e4b\u95f4\u6ca1\u6709\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\uff0c\u7f16\u8bd1\u5668\u548c\u5904\u7406\u5668\u53ef\u4ee5\u91cd\u6392\u5e8fA\u548cB\u4e4b\u95f4\u7684\u6267\u884c\u987a\u5e8f\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u6240\u4ee5\u6700\u7ec8\uff0c\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u6709\u4e24\u79cd\u6267\u884c\u987a\u5e8f\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(5961).Z+"",width:"989",height:"364"})}),"\n",(0,s.jsx)(e.p,{children:"as-if-serial\u8bed\u4e49\u628a\u5355\u7ebf\u7a0b\u7a0b\u5e8f\u4fdd\u62a4\u4e86\u8d77\u6765\uff0c\u9075\u5b88as-if-serial\u8bed\u4e49\u7684\u7f16\u8bd1\u5668\u3001runtime\u548c\u5904\u7406\u5668\u5171\u540c\u7f16\u7ec7\u4e86\u8fd9\u4e48\u4e00\u4e2a\u201c\u695a\u95e8\u7684\u4e16\u754c\u201d\uff1a\u5355\u7ebf\u7a0b\u7a0b\u5e8f\u662f\u6309\u7a0b\u5e8f\u7684\u201c\u987a\u5e8f\u201d\u6765\u6267\u884c\u7684\u3002as- if-serial\u8bed\u4e49\u4f7f\u5355\u7ebf\u7a0b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u62c5\u5fc3\u91cd\u6392\u5e8f\u7684\u95ee\u9898\uff0c\u53ef\u89c1\u6027\u7684\u95ee\u9898\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"23volatile\u5b9e\u73b0\u539f\u7406\u4e86\u89e3\u5417",children:"23.volatile\u5b9e\u73b0\u539f\u7406\u4e86\u89e3\u5417\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:["volatile\u6709\u4e24\u4e2a\u4f5c\u7528\uff0c\u4fdd\u8bc1",(0,s.jsx)(e.strong,{children:"\u53ef\u89c1\u6027"}),"\u548c",(0,s.jsx)(e.strong,{children:"\u6709\u5e8f\u6027"}),"\u3002"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"volatile\u600e\u4e48\u4fdd\u8bc1\u53ef\u89c1\u6027\u7684\u5462\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u76f8\u6bd4synchronized\u7684\u52a0\u9501\u65b9\u5f0f\u6765\u89e3\u51b3\u5171\u4eab\u53d8\u91cf\u7684\u5185\u5b58\u53ef\u89c1\u6027\u95ee\u9898\uff0cvolatile\u5c31\u662f\u66f4\u8f7b\u91cf\u7684\u9009\u62e9\uff0c\u5b83\u6ca1\u6709\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u989d\u5916\u5f00\u9500\u6210\u672c\u3002"}),"\n",(0,s.jsx)(e.p,{children:"volatile\u53ef\u4ee5\u786e\u4fdd\u5bf9\u67d0\u4e2a\u53d8\u91cf\u7684\u66f4\u65b0\u5bf9\u5176\u4ed6\u7ebf\u7a0b\u9a6c\u4e0a\u53ef\u89c1\uff0c\u4e00\u4e2a\u53d8\u91cf\u88ab\u58f0\u660e\u4e3avolatile \u65f6\uff0c\u7ebf\u7a0b\u5728\u5199\u5165\u53d8\u91cf\u65f6\u4e0d\u4f1a\u628a\u503c\u7f13\u5b58\u5728\u5bc4\u5b58\u5668\u6216\u8005\u5176\u4ed6\u5730\u65b9\uff0c\u800c\u662f\u4f1a\u628a\u503c\u5237\u65b0\u56de\u4e3b\u5185\u5b58 \u5f53\u5176\u5b83\u7ebf\u7a0b\u8bfb\u53d6\u8be5\u5171\u4eab\u53d8\u91cf \uff0c\u4f1a\u4ece\u4e3b\u5185\u5b58\u91cd\u65b0\u83b7\u53d6\u6700\u65b0\u503c\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u5f53\u524d\u7ebf\u7a0b\u7684\u672c\u5730\u5185\u5b58\u4e2d\u7684\u503c\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u4f8b\u5982\uff0c\u6211\u4eec\u58f0\u660e\u4e00\u4e2a volatile \u53d8\u91cf volatile int x = 0\uff0c\u7ebf\u7a0bA\u4fee\u6539x=1\uff0c\u4fee\u6539\u5b8c\u4e4b\u540e\u5c31\u4f1a\u628a\u65b0\u7684\u503c\u5237\u65b0\u56de\u4e3b\u5185\u5b58\uff0c\u7ebf\u7a0bB\u8bfb\u53d6x\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u6e05\u7a7a\u672c\u5730\u5185\u5b58\u53d8\u91cf\uff0c\u7136\u540e\u518d\u4ece\u4e3b\u5185\u5b58\u83b7\u53d6\u6700\u65b0\u503c\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(99948).Z+"",width:"1136",height:"432"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"volatile\u600e\u4e48\u4fdd\u8bc1\u6709\u5e8f\u6027\u7684\u5462\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u91cd\u6392\u5e8f\u53ef\u4ee5\u5206\u4e3a\u7f16\u8bd1\u5668\u91cd\u6392\u5e8f\u548c\u5904\u7406\u5668\u91cd\u6392\u5e8f\uff0cvalatile\u4fdd\u8bc1\u6709\u5e8f\u6027\uff0c\u5c31\u662f\u901a\u8fc7\u5206\u522b\u9650\u5236\u8fd9\u4e24\u79cd\u7c7b\u578b\u7684\u91cd\u6392\u5e8f\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(20066).Z+"",width:"781",height:"405"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e3a\u4e86\u5b9e\u73b0volatile\u7684\u5185\u5b58\u8bed\u4e49\uff0c\u7f16\u8bd1\u5668\u5728\u751f\u6210\u5b57\u8282\u7801\u65f6\uff0c\u4f1a\u5728\u6307\u4ee4\u5e8f\u5217\u4e2d\u63d2\u5165\u5185\u5b58\u5c4f\u969c\u6765\u7981\u6b62\u7279\u5b9a\u7c7b\u578b\u7684\u5904\u7406\u5668\u91cd\u6392\u5e8f\u3002"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5728\u6bcf\u4e2avolatile\u5199\u64cd\u4f5c\u7684\u524d\u9762\u63d2\u5165\u4e00\u4e2a",(0,s.jsx)(e.code,{children:"StoreStore"}),"\u5c4f\u969c"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5728\u6bcf\u4e2avolatile\u5199\u64cd\u4f5c\u7684\u540e\u9762\u63d2\u5165\u4e00\u4e2a",(0,s.jsx)(e.code,{children:"StoreLoad"}),"\u5c4f\u969c"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5728\u6bcf\u4e2avolatile\u8bfb\u64cd\u4f5c\u7684\u540e\u9762\u63d2\u5165\u4e00\u4e2a",(0,s.jsx)(e.code,{children:"LoadLoad"}),"\u5c4f\u969c"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5728\u6bcf\u4e2avolatile\u8bfb\u64cd\u4f5c\u7684\u540e\u9762\u63d2\u5165\u4e00\u4e2a",(0,s.jsx)(e.code,{children:"LoadStore"}),"\u5c4f\u969c"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(90108).Z+"",width:"796",height:"592"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(34657).Z+"",width:"795",height:"593"})}),"\n",(0,s.jsx)(e.h2,{id:"\u9501",children:"\u9501"}),"\n",(0,s.jsx)(e.h3,{id:"24synchronized\u7528\u8fc7\u5417\u600e\u4e48\u4f7f\u7528",children:"24.synchronized\u7528\u8fc7\u5417\uff1f\u600e\u4e48\u4f7f\u7528\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"synchronized\u7ecf\u5e38\u7528\u7684\uff0c\u7528\u6765\u4fdd\u8bc1\u4ee3\u7801\u7684\u539f\u5b50\u6027\u3002"}),"\n",(0,s.jsx)(e.p,{children:"synchronized\u4e3b\u8981\u6709\u4e09\u79cd\u7528\u6cd5\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u4fee\u9970\u5b9e\u4f8b\u65b9\u6cd5:"})," \u4f5c\u7528\u4e8e\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u52a0\u9501\uff0c\u8fdb\u5165\u540c\u6b65\u4ee3\u7801\u524d\u8981\u83b7\u5f97 ",(0,s.jsx)(e.strong,{children:"\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u7684\u9501"})]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"synchronized void method() {\n  //\u4e1a\u52a1\u4ee3\u7801\n}\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u4fee\u9970\u9759\u6001\u65b9\u6cd5"}),"\uff1a\u4e5f\u5c31\u662f\u7ed9\u5f53\u524d\u7c7b\u52a0\u9501\uff0c\u4f1a\u4f5c\u2f64\u4e8e\u7c7b\u7684\u6240\u6709\u5bf9\u8c61\u5b9e\u4f8b \uff0c\u8fdb\u2f0a\u540c\u6b65\u4ee3\u7801\u524d\u8981\u83b7\u5f97\u5f53\u524d class \u7684\u9501\u3002\u56e0\u4e3a\u9759\u6001\u6210\u5458\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u2f00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u662f\u7c7b\u6210\u5458\uff08 static \u8868\u660e\u8fd9\u662f\u8be5\u7c7b\u7684\u2f00\u4e2a\u9759\u6001\u8d44\u6e90\uff0c\u4e0d\u7ba1 new \u4e86\u591a\u5c11\u4e2a\u5bf9\u8c61\uff0c\u53ea\u6709\u2f00\u4efd\uff09\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u2f00\u4e2a\u7ebf\u7a0b A \u8c03\u2f64\u2f00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\u7684\u2fae\u9759\u6001 synchronized \u2f45\u6cd5\uff0c\u2f7d\u7ebf\u7a0b B \u9700\u8981\u8c03\u2f64\u8fd9\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\u6240\u5c5e\u7c7b\u7684\u9759\u6001 synchronized \u2f45\u6cd5\uff0c\u662f\u5141\u8bb8\u7684\uff0c\u4e0d\u4f1a\u53d1\u2f63\u4e92\u65a5\u73b0\u8c61\uff0c\u56e0\u4e3a\u8bbf\u95ee\u9759\u6001 synchronized \u2f45\u6cd5\u5360\u2f64\u7684\u9501\u662f\u5f53\u524d\u7c7b\u7684\u9501\uff0c\u2f7d\u8bbf\u95ee\u2fae\u9759\u6001 synchronized \u2f45\u6cd5\u5360\u2f64\u7684\u9501\u662f\u5f53\u524d\u5b9e\u4f8b\u5bf9\u8c61\u9501\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"synchronized void staic method() {\n //\u4e1a\u52a1\u4ee3\u7801\n}\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u4fee\u9970\u4ee3\u7801\u5757"})," \uff1a\u6307\u5b9a\u52a0\u9501\u5bf9\u8c61\uff0c\u5bf9\u7ed9\u5b9a\u5bf9\u8c61/\u7c7b\u52a0\u9501\u3002 synchronized(this|object) \u8868\u793a\u8fdb\u2f0a\u540c\u6b65\u4ee3\u7801\u5e93\u524d\u8981\u83b7\u5f97\u7ed9\u5b9a\u5bf9\u8c61\u7684\u9501\u3002 synchronized(\u7c7b.class) \u8868\u793a\u8fdb\u2f0a\u540c\u6b65\u4ee3\u7801\u524d\u8981\u83b7\u5f97 \u5f53\u524d ",(0,s.jsx)(e.strong,{children:"class"})," \u7684\u9501"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"synchronized(this) {\n //\u4e1a\u52a1\u4ee3\u7801\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"25synchronized\u7684\u5b9e\u73b0\u539f\u7406",children:"25.synchronized\u7684\u5b9e\u73b0\u539f\u7406\uff1f"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"synchronized\u662f\u600e\u4e48\u52a0\u9501\u7684\u5462\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u4f7f\u7528synchronized\u7684\u65f6\u5019\uff0c\u53d1\u73b0\u4e0d\u7528\u81ea\u5df1\u53bblock\u548cunlock\uff0c\u662f\u56e0\u4e3aJVM\u5e2e\u6211\u4eec\u628a\u8fd9\u4e2a\u4e8b\u60c5\u505a\u4e86\u3002"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["synchronized\u4fee\u9970\u4ee3\u7801\u5757\u65f6\uff0cJVM\u91c7\u7528",(0,s.jsx)(e.code,{children:"monitorenter"}),"\u3001",(0,s.jsx)(e.code,{children:"monitorexit"}),"\u4e24\u4e2a\u6307\u4ee4\u6765\u5b9e\u73b0\u540c\u6b65\uff0c",(0,s.jsx)(e.code,{children:"monitorenter"})," \u6307\u4ee4\u6307\u5411\u540c\u6b65\u4ee3\u7801\u5757\u7684\u5f00\u59cb\u4f4d\u7f6e\uff0c ",(0,s.jsx)(e.code,{children:"monitorexit"})," \u6307\u4ee4\u5219\u6307\u5411\u540c\u6b65\u4ee3\u7801\u5757\u7684\u7ed3\u675f\u4f4d\u7f6e\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u53cd\u7f16\u8bd1\u4e00\u6bb5synchronized\u4fee\u9970\u4ee3\u7801\u5757\u4ee3\u7801\uff0c",(0,s.jsx)(e.code,{children:"javap -c -s -v -l SynchronizedDemo.class"}),"\uff0c\u53ef\u4ee5\u770b\u5230\u76f8\u5e94\u7684\u5b57\u8282\u7801\u6307\u4ee4\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(54703).Z+"",width:"957",height:"698"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsxs)(e.li,{children:["synchronized\u4fee\u9970\u540c\u6b65\u65b9\u6cd5\u65f6\uff0cJVM\u91c7\u7528",(0,s.jsx)(e.code,{children:"ACC_SYNCHRONIZED"}),"\u6807\u8bb0\u7b26\u6765\u5b9e\u73b0\u540c\u6b65\uff0c\u8fd9\u4e2a\u6807\u8bc6\u6307\u660e\u4e86\u8be5\u65b9\u6cd5\u662f\u4e00\u4e2a\u540c\u6b65\u65b9\u6cd5\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u540c\u6837\u53ef\u4ee5\u5199\u6bb5\u4ee3\u7801\u53cd\u7f16\u8bd1\u770b\u4e00\u4e0b\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(84831).Z+"",width:"943",height:"448"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"synchronized\u9501\u4f4f\u7684\u662f\u4ec0\u4e48\u5462\uff1f"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["monitorenter\u3001monitorexit\u6216\u8005ACC_SYNCHRONIZED\u90fd\u662f",(0,s.jsx)(e.strong,{children:"\u57fa\u4e8eMonitor\u5b9e\u73b0"}),"\u7684\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u5b9e\u4f8b\u5bf9\u8c61\u7ed3\u6784\u91cc\u6709\u5bf9\u8c61\u5934\uff0c\u5bf9\u8c61\u5934\u91cc\u9762\u6709\u4e00\u5757\u7ed3\u6784\u53ebMark Word\uff0cMark Word\u6307\u9488\u6307\u5411\u4e86",(0,s.jsx)(e.strong,{children:"monitor"}),"\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u6240\u8c13\u7684Monitor\u5176\u5b9e\u662f\u4e00\u79cd",(0,s.jsx)(e.strong,{children:"\u540c\u6b65\u5de5\u5177"}),"\uff0c\u4e5f\u53ef\u4ee5\u8bf4\u662f\u4e00\u79cd",(0,s.jsx)(e.strong,{children:"\u540c\u6b65\u673a\u5236"}),"\u3002\u5728Java\u865a\u62df\u673a\uff08HotSpot\uff09\u4e2d\uff0cMonitor\u662f\u7531",(0,s.jsx)(e.strong,{children:"ObjectMonitor\u5b9e\u73b0"}),"\u7684\uff0c\u53ef\u4ee5\u53eb\u505a\u5185\u90e8\u9501\uff0c\u6216\u8005Monitor\u9501\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"ObjectMonitor\u7684\u5de5\u4f5c\u539f\u7406\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ObjectMonitor\u6709\u4e24\u4e2a\u961f\u5217\uff1a_WaitSet\u3001_EntryList\uff0c\u7528\u6765\u4fdd\u5b58ObjectWaiter \u5bf9\u8c61\u5217\u8868\u3002"}),"\n",(0,s.jsx)(e.li,{children:"_owner\uff0c\u83b7\u53d6 Monitor \u5bf9\u8c61\u7684\u7ebf\u7a0b\u8fdb\u5165 _owner \u533a\u65f6\uff0c _count + 1\u3002\u5982\u679c\u7ebf\u7a0b\u8c03\u7528\u4e86 wait() \u65b9\u6cd5\uff0c\u6b64\u65f6\u4f1a\u91ca\u653e Monitor \u5bf9\u8c61\uff0c _owner \u6062\u590d\u4e3a\u7a7a\uff0c _count - 1\u3002\u540c\u65f6\u8be5\u7b49\u5f85\u7ebf\u7a0b\u8fdb\u5165 _WaitSet \u4e2d\uff0c\u7b49\u5f85\u88ab\u5524\u9192\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"ObjectMonitor() {\n    _header       = NULL;\n    _count        = 0; // \u8bb0\u5f55\u7ebf\u7a0b\u83b7\u53d6\u9501\u7684\u6b21\u6570\n    _waiters      = 0,\n    _recursions   = 0;  //\u9501\u7684\u91cd\u5165\u6b21\u6570\n    _object       = NULL;\n    _owner        = NULL;  // \u6307\u5411\u6301\u6709ObjectMonitor\u5bf9\u8c61\u7684\u7ebf\u7a0b\n    _WaitSet      = NULL;  // \u5904\u4e8ewait\u72b6\u6001\u7684\u7ebf\u7a0b\uff0c\u4f1a\u88ab\u52a0\u5165\u5230_WaitSet\n    _WaitSetLock  = 0 ;\n    _Responsible  = NULL ;\n    _succ         = NULL ;\n    _cxq          = NULL ;\n    FreeNext      = NULL ;\n    _EntryList    = NULL ;  // \u5904\u4e8e\u7b49\u5f85\u9501block\u72b6\u6001\u7684\u7ebf\u7a0b\uff0c\u4f1a\u88ab\u52a0\u5165\u5230\u8be5\u5217\u8868\n    _SpinFreq     = 0 ;\n    _SpinClock    = 0 ;\n    OwnerIsThread = 0 ;\n  }\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u53ef\u4ee5\u7c7b\u6bd4\u4e00\u4e2a\u53bb\u533b\u9662\u5c31\u8bca\u7684\u4f8b\u5b50[18]\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["\u9996\u5148\uff0c\u60a3\u8005\u5728",(0,s.jsx)(e.strong,{children:"\u95e8\u8bca\u5927\u5385"}),"\u524d\u53f0\u6216\u81ea\u52a9\u6302\u53f7\u673a",(0,s.jsx)(e.strong,{children:"\u8fdb\u884c\u6302\u53f7"}),"\uff1b"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["\u968f\u540e\uff0c\u6302\u53f7\u7ed3\u675f\u540e\u60a3\u8005\u627e\u5230\u5bf9\u5e94\u7684",(0,s.jsx)(e.strong,{children:"\u8bca\u5ba4\u5c31\u8bca"}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8bca\u5ba4\u6bcf\u6b21\u53ea\u80fd\u6709\u4e00\u4e2a\u60a3\u8005\u5c31\u8bca\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u6b64\u65f6\u8bca\u5ba4\u7a7a\u95f2\uff0c\u76f4\u63a5\u8fdb\u5165\u5c31\u8bca\uff1b"}),"\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c\u6b64\u65f6\u8bca\u5ba4\u5185\u6709\u5176\u5b83\u60a3\u8005\u5c31\u8bca\uff0c\u90a3\u4e48\u5f53\u524d\u60a3\u8005\u8fdb\u5165",(0,s.jsx)(e.strong,{children:"\u5019\u8bca\u5ba4"}),"\uff0c\u7b49\u5f85\u53eb\u53f7\uff1b"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["\u5c31\u8bca\u7ed3\u675f\u540e\uff0c",(0,s.jsx)(e.strong,{children:"\u8d70\u51fa\u5c31\u8bca\u5ba4"}),"\uff0c\u5019\u8bca\u5ba4\u7684",(0,s.jsx)(e.strong,{children:"\u4e0b\u4e00\u4f4d\u5019\u8bca\u60a3\u8005"}),"\u8fdb\u5165\u5c31\u8bca\u5ba4\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(47237).Z+"",width:"1242",height:"552"})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u548cMonitor\u673a\u5236\u6bd4\u8f83\u76f8\u4f3c\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u95e8\u8bca\u5927\u5385"}),"\uff1a\u6240\u6709\u5f85\u8fdb\u5165\u7684\u7ebf\u7a0b\u90fd\u5fc5\u987b\u5148\u5728",(0,s.jsx)(e.strong,{children:"\u5165\u53e3Entry Set"}),"\u6302\u53f7\u624d\u6709\u8d44\u683c\uff1b"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u5c31\u8bca\u5ba4"}),"\uff1a\u5c31\u8bca\u5ba4",(0,s.jsx)(e.strong,{children:"_Owner"}),"\u91cc\u91cc\u53ea\u80fd\u6709\u4e00\u4e2a\u7ebf\u7a0b\u5c31\u8bca\uff0c\u5c31\u8bca\u5b8c\u7ebf\u7a0b\u5c31\u81ea\u884c\u79bb\u5f00"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u5019\u8bca\u5ba4"}),"\uff1a\u5c31\u8bca\u5ba4\u7e41\u5fd9\u65f6\uff0c\u8fdb\u5165",(0,s.jsx)(e.strong,{children:"\u7b49\u5f85\u533a\uff08Wait Set\uff09"}),"\uff0c\u5c31\u8bca\u5ba4\u7a7a\u95f2\u7684\u65f6\u5019\u5c31\u4ece**\u7b49\u5f85\u533a\uff08Wait Set\uff09**\u53eb\u65b0\u7684\u7ebf\u7a0b"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(63004).Z+"",width:"945",height:"434"})}),"\n",(0,s.jsx)(e.p,{children:"\u6240\u4ee5\u6211\u4eec\u5c31\u77e5\u9053\u4e86\uff0c\u540c\u6b65\u662f\u9501\u4f4f\u7684\u4ec0\u4e48\u4e1c\u897f\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"monitorenter\uff0c\u5728\u5224\u65ad\u62e5\u6709\u540c\u6b65\u6807\u8bc6 ACC_SYNCHRONIZED \u62a2\u5148\u8fdb\u5165\u6b64\u65b9\u6cd5\u7684\u7ebf\u7a0b\u4f1a\u4f18\u5148\u62e5\u6709 Monitor \u7684 owner \uff0c\u6b64\u65f6\u8ba1\u6570\u5668 +1\u3002"}),"\n",(0,s.jsx)(e.li,{children:"monitorexit\uff0c\u5f53\u6267\u884c\u5b8c\u9000\u51fa\u540e\uff0c\u8ba1\u6570\u5668 -1\uff0c\u5f52 0 \u540e\u88ab\u5176\u4ed6\u8fdb\u5165\u7684\u7ebf\u7a0b\u83b7\u5f97\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"26\u9664\u4e86\u539f\u5b50\u6027synchronized\u53ef\u89c1\u6027\u6709\u5e8f\u6027\u53ef\u91cd\u5165\u6027\u600e\u4e48\u5b9e\u73b0",children:"26.\u9664\u4e86\u539f\u5b50\u6027\uff0csynchronized\u53ef\u89c1\u6027\uff0c\u6709\u5e8f\u6027\uff0c\u53ef\u91cd\u5165\u6027\u600e\u4e48\u5b9e\u73b0\uff1f"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"synchronized\u600e\u4e48\u4fdd\u8bc1\u53ef\u89c1\u6027\uff1f"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7ebf\u7a0b\u52a0\u9501\u524d\uff0c\u5c06\u6e05\u7a7a\u5de5\u4f5c\u5185\u5b58\u4e2d\u5171\u4eab\u53d8\u91cf\u7684\u503c\uff0c\u4ece\u800c\u4f7f\u7528\u5171\u4eab\u53d8\u91cf\u65f6\u9700\u8981\u4ece\u4e3b\u5185\u5b58\u4e2d\u91cd\u65b0\u8bfb\u53d6\u6700\u65b0\u7684\u503c\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u7ebf\u7a0b\u52a0\u9501\u540e\uff0c\u5176\u5b83\u7ebf\u7a0b\u65e0\u6cd5\u83b7\u53d6\u4e3b\u5185\u5b58\u4e2d\u7684\u5171\u4eab\u53d8\u91cf\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u7ebf\u7a0b\u89e3\u9501\u524d\uff0c\u5fc5\u987b\u628a\u5171\u4eab\u53d8\u91cf\u7684\u6700\u65b0\u503c\u5237\u65b0\u5230\u4e3b\u5185\u5b58\u4e2d\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"synchronized\u600e\u4e48\u4fdd\u8bc1\u6709\u5e8f\u6027\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"synchronized\u540c\u6b65\u7684\u4ee3\u7801\u5757\uff0c\u5177\u6709\u6392\u4ed6\u6027\uff0c\u4e00\u6b21\u53ea\u80fd\u88ab\u4e00\u4e2a\u7ebf\u7a0b\u62e5\u6709\uff0c\u6240\u4ee5synchronized\u4fdd\u8bc1\u540c\u4e00\u65f6\u523b\uff0c\u4ee3\u7801\u662f\u5355\u7ebf\u7a0b\u6267\u884c\u7684\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u56e0\u4e3aas-if-serial\u8bed\u4e49\u7684\u5b58\u5728\uff0c\u5355\u7ebf\u7a0b\u7684\u7a0b\u5e8f\u80fd\u4fdd\u8bc1\u6700\u7ec8\u7ed3\u679c\u662f\u6709\u5e8f\u7684\uff0c\u4f46\u662f\u4e0d\u4fdd\u8bc1\u4e0d\u4f1a\u6307\u4ee4\u91cd\u6392\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u6240\u4ee5synchronized\u4fdd\u8bc1\u7684\u6709\u5e8f\u662f\u6267\u884c\u7ed3\u679c\u7684\u6709\u5e8f\u6027\uff0c\u800c\u4e0d\u662f\u9632\u6b62\u6307\u4ee4\u91cd\u6392\u7684\u6709\u5e8f\u6027\u3002"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"synchronized\u600e\u4e48\u5b9e\u73b0\u53ef\u91cd\u5165\u7684\u5462\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"synchronized \u662f\u53ef\u91cd\u5165\u9501\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u4e8c\u6b21\u8bf7\u6c42\u81ea\u5df1\u6301\u6709\u5bf9\u8c61\u9501\u7684\u4e34\u754c\u8d44\u6e90\uff0c\u8fd9\u79cd\u60c5\u51b5\u79f0\u4e3a\u53ef\u91cd\u5165\u9501\u3002"}),"\n",(0,s.jsx)(e.p,{children:"synchronized \u9501\u5bf9\u8c61\u7684\u65f6\u5019\u6709\u4e2a\u8ba1\u6570\u5668\uff0c\u4ed6\u4f1a\u8bb0\u5f55\u4e0b\u7ebf\u7a0b\u83b7\u53d6\u9501\u7684\u6b21\u6570\uff0c\u5728\u6267\u884c\u5b8c\u5bf9\u5e94\u7684\u4ee3\u7801\u5757\u4e4b\u540e\uff0c\u8ba1\u6570\u5668\u5c31\u4f1a-1\uff0c\u76f4\u5230\u8ba1\u6570\u5668\u6e05\u96f6\uff0c\u5c31\u91ca\u653e\u9501\u4e86\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u4e4b\u6240\u4ee5\uff0c\u662f\u53ef\u91cd\u5165\u7684\u3002\u662f\u56e0\u4e3a synchronized \u9501\u5bf9\u8c61\u6709\u4e2a\u8ba1\u6570\u5668\uff0c\u4f1a\u968f\u7740\u7ebf\u7a0b\u83b7\u53d6\u9501\u540e +1 \u8ba1\u6570\uff0c\u5f53\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\u540e -1\uff0c\u76f4\u5230\u6e05\u96f6\u91ca\u653e\u9501\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"27\u9501\u5347\u7ea7synchronized\u4f18\u5316\u4e86\u89e3\u5417",children:"27.\u9501\u5347\u7ea7\uff1fsynchronized\u4f18\u5316\u4e86\u89e3\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u4e86\u89e3\u9501\u5347\u7ea7\uff0c\u5f97\u5148\u77e5\u9053\uff0c\u4e0d\u540c\u9501\u7684\u72b6\u6001\u662f\u4ec0\u4e48\u6837\u7684\u3002\u8fd9\u4e2a\u72b6\u6001\u6307\u7684\u662f\u4ec0\u4e48\u5462\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:["Java\u5bf9\u8c61\u5934\u91cc\uff0c\u6709\u4e00\u5757\u7ed3\u6784\uff0c\u53eb",(0,s.jsx)(e.code,{children:"Mark Word"}),"\u6807\u8bb0\u5b57\u6bb5\uff0c\u8fd9\u5757\u7ed3\u6784\u4f1a\u968f\u7740\u9501\u7684\u72b6\u6001\u53d8\u5316\u800c\u53d8\u5316\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"64 \u4f4d\u865a\u62df\u673a Mark Word \u662f 64bit\uff0c\u6211\u4eec\u6765\u770b\u770b\u5b83\u7684\u72b6\u6001\u53d8\u5316\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(26736).Z+"",width:"1063",height:"462"})}),"\n",(0,s.jsxs)(e.p,{children:["Mark Word\u5b58\u50a8\u5bf9\u8c61\u81ea\u8eab\u7684\u8fd0\u884c\u6570\u636e\uff0c\u5982",(0,s.jsx)(e.strong,{children:"\u54c8\u5e0c\u7801\u3001GC\u5206\u4ee3\u5e74\u9f84\u3001\u9501\u72b6\u6001\u6807\u5fd7\u3001\u504f\u5411\u65f6\u95f4\u6233\uff08Epoch\uff09"})," \u7b49\u3002"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"synchronized\u505a\u4e86\u54ea\u4e9b\u4f18\u5316\uff1f"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u5728JDK1.6\u4e4b\u524d\uff0csynchronized\u7684\u5b9e\u73b0\u76f4\u63a5\u8c03\u7528ObjectMonitor\u7684enter\u548cexit\uff0c\u8fd9\u79cd\u9501\u88ab\u79f0\u4e4b\u4e3a",(0,s.jsx)(e.strong,{children:"\u91cd\u91cf\u7ea7\u9501"}),"\u3002\u4eceJDK6\u5f00\u59cb\uff0cHotSpot\u865a\u62df\u673a\u5f00\u53d1\u56e2\u961f\u5bf9Java\u4e2d\u7684\u9501\u8fdb\u884c\u4f18\u5316\uff0c\u5982\u589e\u52a0\u4e86\u9002\u5e94\u6027\u81ea\u65cb\u3001\u9501\u6d88\u9664\u3001\u9501\u7c97\u5316\u3001\u8f7b\u91cf\u7ea7\u9501\u548c\u504f\u5411\u9501\u7b49\u4f18\u5316\u7b56\u7565\uff0c\u63d0\u5347\u4e86synchronized\u7684\u6027\u80fd\u3002"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u504f\u5411\u9501\uff1a\u5728\u65e0\u7ade\u4e89\u7684\u60c5\u51b5\u4e0b\uff0c\u53ea\u662f\u5728Mark Word\u91cc\u5b58\u50a8\u5f53\u524d\u7ebf\u7a0b\u6307\u9488\uff0cCAS\u64cd\u4f5c\u90fd\u4e0d\u505a\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u8f7b\u91cf\u7ea7\u9501\uff1a\u5728\u6ca1\u6709\u591a\u7ebf\u7a0b\u7ade\u4e89\u65f6\uff0c\u76f8\u5bf9\u91cd\u91cf\u7ea7\u9501\uff0c\u51cf\u5c11\u64cd\u4f5c\u7cfb\u7edf\u4e92\u65a5\u91cf\u5e26\u6765\u7684\u6027\u80fd\u6d88\u8017\u3002\u4f46\u662f\uff0c\u5982\u679c\u5b58\u5728\u9501\u7ade\u4e89\uff0c\u9664\u4e86\u4e92\u65a5\u91cf\u672c\u8eab\u5f00\u9500\uff0c\u8fd8\u989d\u5916\u6709CAS\u64cd\u4f5c\u7684\u5f00\u9500\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u81ea\u65cb\u9501\uff1a\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684CPU\u4e0a\u4e0b\u6587\u5207\u6362\u3002\u5728\u8f7b\u91cf\u7ea7\u9501\u5347\u7ea7\u4e3a\u91cd\u91cf\u7ea7\u9501\u65f6\uff0c\u5c31\u4f7f\u7528\u4e86\u81ea\u65cb\u52a0\u9501\u7684\u65b9\u5f0f"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u9501\u7c97\u5316\uff1a\u5c06\u591a\u4e2a\u8fde\u7eed\u7684\u52a0\u9501\u3001\u89e3\u9501\u64cd\u4f5c\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u6269\u5c55\u6210\u4e00\u4e2a\u8303\u56f4\u66f4\u5927\u7684\u9501\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u9501\u6d88\u9664\uff1a\u865a\u62df\u673a\u5373\u65f6\u7f16\u8bd1\u5668\u5728\u8fd0\u884c\u65f6\uff0c\u5bf9\u4e00\u4e9b\u4ee3\u7801\u4e0a\u8981\u6c42\u540c\u6b65\uff0c\u4f46\u662f\u88ab\u68c0\u6d4b\u5230\u4e0d\u53ef\u80fd\u5b58\u5728\u5171\u4eab\u6570\u636e\u7ade\u4e89\u7684\u9501\u8fdb\u884c\u6d88\u9664\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u9501\u5347\u7ea7\u7684\u8fc7\u7a0b\u662f\u4ec0\u4e48\u6837\u7684\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u9501\u5347\u7ea7\u65b9\u5411\uff1a\u65e0\u9501--\x3e\u504f\u5411\u9501---\x3e \u8f7b\u91cf\u7ea7\u9501----\x3e\u91cd\u91cf\u7ea7\u9501\uff0c\u8fd9\u4e2a\u65b9\u5411\u57fa\u672c\u4e0a\u662f\u4e0d\u53ef\u9006\u7684\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(51722).Z+"",width:"525",height:"168"})}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u770b\u4e00\u4e0b\u5347\u7ea7\u7684\u8fc7\u7a0b\uff1a"}),"\n",(0,s.jsx)(e.h4,{id:"\u504f\u5411\u9501",children:"\u504f\u5411\u9501\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u504f\u5411\u9501\u7684\u83b7\u53d6\uff1a"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u5224\u65ad\u662f\u5426\u4e3a\u53ef\u504f\u5411\u72b6\u6001--MarkWord\u4e2d\u9501\u6807\u5fd7\u662f\u5426\u4e3a\u201801\u2019\uff0c\u662f\u5426\u504f\u5411\u9501\u662f\u5426\u4e3a\u20181\u2019"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u662f\u53ef\u504f\u5411\u72b6\u6001\uff0c\u5219\u67e5\u770b\u7ebf\u7a0bID\u662f\u5426\u4e3a\u5f53\u524d\u7ebf\u7a0b\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fdb\u5165\u6b65\u9aa4'5'\uff0c\u5426\u5219\u8fdb\u5165\u6b65\u9aa4\u20183\u2019"}),"\n",(0,s.jsx)(e.li,{children:"\u901a\u8fc7CAS\u64cd\u4f5c\u7ade\u4e89\u9501\uff0c\u5982\u679c\u7ade\u4e89\u6210\u529f\uff0c\u5219\u5c06MarkWord\u4e2d\u7ebf\u7a0bID\u8bbe\u7f6e\u4e3a\u5f53\u524d\u7ebf\u7a0bID\uff0c\u7136\u540e\u6267\u884c\u20185\u2019\uff1b\u7ade\u4e89\u5931\u8d25\uff0c\u5219\u6267\u884c\u20184\u2019"}),"\n",(0,s.jsxs)(e.li,{children:["CAS\u83b7\u53d6\u504f\u5411\u9501\u5931\u8d25\u8868\u793a\u6709\u7ade\u4e89\u3002\u5f53\u8fbe\u5230safepoint\u65f6\u83b7\u5f97\u504f\u5411\u9501\u7684\u7ebf\u7a0b\u88ab\u6302\u8d77\uff0c",(0,s.jsx)(e.strong,{children:"\u504f\u5411\u9501\u5347\u7ea7\u4e3a\u8f7b\u91cf\u7ea7\u9501"}),"\uff0c\u7136\u540e\u88ab\u963b\u585e\u5728\u5b89\u5168\u70b9\u7684\u7ebf\u7a0b\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\u540c\u6b65\u4ee3\u7801\u5757"]}),"\n",(0,s.jsx)(e.li,{children:"\u6267\u884c\u540c\u6b65\u4ee3\u7801"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u504f\u5411\u9501\u7684\u64a4\u9500\uff1a"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u504f\u5411\u9501\u4e0d\u4f1a\u4e3b\u52a8\u91ca\u653e(\u64a4\u9500)\uff0c\u53ea\u6709\u9047\u5230\u5176\u4ed6\u7ebf\u7a0b\u7ade\u4e89\u65f6\u624d\u4f1a\u6267\u884c\u64a4\u9500\uff0c\u7531\u4e8e\u64a4\u9500\u9700\u8981\u77e5\u9053\u5f53\u524d\u6301\u6709\u8be5\u504f\u5411\u9501\u7684\u7ebf\u7a0b\u6808\u72b6\u6001\uff0c\u56e0\u6b64\u8981\u7b49\u5230safepoint\u65f6\u6267\u884c\uff0c\u6b64\u65f6\u6301\u6709\u8be5\u504f\u5411\u9501\u7684\u7ebf\u7a0b\uff08T\uff09\u6709\u20182\u2019\uff0c\u20183\u2019\u4e24\u79cd\u60c5\u51b5\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"\u64a4\u9500----T\u7ebf\u7a0b\u5df2\u7ecf\u9000\u51fa\u540c\u6b65\u4ee3\u7801\u5757\uff0c\u6216\u8005\u5df2\u7ecf\u4e0d\u518d\u5b58\u6d3b\uff0c\u5219\u76f4\u63a5\u64a4\u9500\u504f\u5411\u9501\uff0c\u53d8\u6210\u65e0\u9501\u72b6\u6001----\u8be5\u72b6\u6001\u8fbe\u5230\u9608\u503c20\u5219\u6267\u884c\u6279\u91cf\u91cd\u504f\u5411"}),"\n",(0,s.jsxs)(e.li,{children:["\u5347\u7ea7----T\u7ebf\u7a0b\u8fd8\u5728\u540c\u6b65\u4ee3\u7801\u5757\u4e2d\uff0c\u5219\u5c06T\u7ebf\u7a0b\u7684\u504f\u5411\u9501",(0,s.jsx)(e.strong,{children:"\u5347\u7ea7\u4e3a\u8f7b\u91cf\u7ea7\u9501"}),"\uff0c\u5f53\u524d\u7ebf\u7a0b\u6267\u884c\u8f7b\u91cf\u7ea7\u9501\u72b6\u6001\u4e0b\u7684\u9501\u83b7\u53d6\u6b65\u9aa4----\u8be5\u72b6\u6001\u8fbe\u5230\u9608\u503c40\u5219\u6267\u884c\u6279\u91cf\u64a4\u9500"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u8f7b\u91cf\u7ea7\u9501",children:"\u8f7b\u91cf\u7ea7\u9501\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u8f7b\u91cf\u7ea7\u9501\u7684\u83b7\u53d6\uff1a"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u8fdb\u884c\u52a0\u9501\u64cd\u4f5c\u65f6\uff0cjvm\u4f1a\u5224\u65ad\u662f\u5426\u5df2\u7ecf\u65f6\u91cd\u91cf\u7ea7\u9501\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u5219\u4f1a\u5728\u5f53\u524d\u7ebf\u7a0b\u6808\u5e27\u4e2d\u5212\u51fa\u4e00\u5757\u7a7a\u95f4\uff0c\u4f5c\u4e3a\u8be5\u9501\u7684\u9501\u8bb0\u5f55\uff0c\u5e76\u4e14\u5c06\u9501\u5bf9\u8c61MarkWord\u590d\u5236\u5230\u8be5\u9501\u8bb0\u5f55\u4e2d"}),"\n",(0,s.jsx)(e.li,{children:"\u590d\u5236\u6210\u529f\u4e4b\u540e\uff0cjvm\u4f7f\u7528CAS\u64cd\u4f5c\u5c06\u5bf9\u8c61\u5934MarkWord\u66f4\u65b0\u4e3a\u6307\u5411\u9501\u8bb0\u5f55\u7684\u6307\u9488\uff0c\u5e76\u5c06\u9501\u8bb0\u5f55\u91cc\u7684owner\u6307\u9488\u6307\u5411\u5bf9\u8c61\u5934\u7684MarkWord\u3002\u5982\u679c\u6210\u529f\uff0c\u5219\u6267\u884c\u20183\u2019\uff0c\u5426\u5219\u6267\u884c\u20184\u2019"}),"\n",(0,s.jsx)(e.li,{children:"\u66f4\u65b0\u6210\u529f\uff0c\u5219\u5f53\u524d\u7ebf\u7a0b\u6301\u6709\u8be5\u5bf9\u8c61\u9501\uff0c\u5e76\u4e14\u5bf9\u8c61MarkWord\u9501\u6807\u5fd7\u8bbe\u7f6e\u4e3a\u201800\u2019\uff0c\u5373\u8868\u793a\u6b64\u5bf9\u8c61\u5904\u4e8e\u8f7b\u91cf\u7ea7\u9501\u72b6\u6001"}),"\n",(0,s.jsx)(e.li,{children:"\u66f4\u65b0\u5931\u8d25\uff0cjvm\u5148\u68c0\u67e5\u5bf9\u8c61MarkWord\u662f\u5426\u6307\u5411\u5f53\u524d\u7ebf\u7a0b\u6808\u5e27\u4e2d\u7684\u9501\u8bb0\u5f55\uff0c\u5982\u679c\u662f\u5219\u6267\u884c\u20185\u2019\uff0c\u5426\u5219\u6267\u884c\u20184\u2019"}),"\n",(0,s.jsx)(e.li,{children:"\u8868\u793a\u9501\u91cd\u5165\uff1b\u7136\u540e\u5f53\u524d\u7ebf\u7a0b\u6808\u5e27\u4e2d\u589e\u52a0\u4e00\u4e2a\u9501\u8bb0\u5f55\u7b2c\u4e00\u90e8\u5206\uff08Displaced Mark Word\uff09\u4e3anull\uff0c\u5e76\u6307\u5411Mark Word\u7684\u9501\u5bf9\u8c61\uff0c\u8d77\u5230\u4e00\u4e2a\u91cd\u5165\u8ba1\u6570\u5668\u7684\u4f5c\u7528\u3002"}),"\n",(0,s.jsxs)(e.li,{children:["\u8868\u793a\u8be5\u9501\u5bf9\u8c61\u5df2\u7ecf\u88ab\u5176\u4ed6\u7ebf\u7a0b\u62a2\u5360\uff0c\u5219\u8fdb\u884c",(0,s.jsx)(e.strong,{children:"\u81ea\u65cb\u7b49\u5f85"}),"\uff08\u9ed8\u8ba410\u6b21\uff09\uff0c\u7b49\u5f85\u6b21\u6570\u8fbe\u5230\u9608\u503c\u4ecd\u672a\u83b7\u53d6\u5230\u9501\uff0c\u5219",(0,s.jsx)(e.strong,{children:"\u5347\u7ea7\u4e3a\u91cd\u91cf\u7ea7\u9501"})]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5927\u4f53\u4e0a\u7701\u7b80\u7684\u5347\u7ea7\u8fc7\u7a0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(68253).Z+"",width:"1493",height:"299"})}),"\n",(0,s.jsx)(e.p,{children:"\u5b8c\u6574\u7684\u5347\u7ea7\u8fc7\u7a0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(23370).Z+"",width:"1890",height:"902"})}),"\n",(0,s.jsx)(e.h3,{id:"28\u8bf4\u8bf4synchronized\u548creentrantlock\u7684\u533a\u522b",children:"28.\u8bf4\u8bf4synchronized\u548cReentrantLock\u7684\u533a\u522b\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u53ef\u4ee5\u4ece\u9501\u7684\u5b9e\u73b0\u3001\u529f\u80fd\u7279\u70b9\u3001\u6027\u80fd\u7b49\u51e0\u4e2a\u7ef4\u5ea6\u53bb\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u9501\u7684\u5b9e\u73b0\uff1a"})," synchronized\u662fJava\u8bed\u8a00\u7684\u5173\u952e\u5b57\uff0c\u57fa\u4e8eJVM\u5b9e\u73b0\u3002\u800cReentrantLock\u662f\u57fa\u4e8eJDK\u7684API\u5c42\u9762\u5b9e\u73b0\u7684\uff08\u4e00\u822c\u662flock()\u548cunlock()\u65b9\u6cd5\u914d\u5408try/finally \u8bed\u53e5\u5757\u6765\u5b8c\u6210\u3002\uff09"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u6027\u80fd\uff1a"})," \u5728JDK1.6\u9501\u4f18\u5316\u4ee5\u524d\uff0csynchronized\u7684\u6027\u80fd\u6bd4ReenTrantLock\u5dee\u5f88\u591a\u3002\u4f46\u662fJDK6\u5f00\u59cb\uff0c\u589e\u52a0\u4e86\u9002\u5e94\u6027\u81ea\u65cb\u3001\u9501\u6d88\u9664\u7b49\uff0c\u4e24\u8005\u6027\u80fd\u5c31\u5dee\u4e0d\u591a\u4e86\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u529f\u80fd\u7279\u70b9\uff1a"})," ReentrantLock \u6bd4 synchronized \u589e\u52a0\u4e86\u4e00\u4e9b\u9ad8\u7ea7\u529f\u80fd\uff0c\u5982\u7b49\u5f85\u53ef\u4e2d\u65ad\u3001\u53ef\u5b9e\u73b0\u516c\u5e73\u9501\u3001\u53ef\u5b9e\u73b0\u9009\u62e9\u6027\u901a\u77e5\u3002","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ReentrantLock\u63d0\u4f9b\u4e86\u4e00\u79cd\u80fd\u591f\u4e2d\u65ad\u7b49\u5f85\u9501\u7684\u7ebf\u7a0b\u7684\u673a\u5236\uff0c\u901a\u8fc7lock.lockInterruptibly()\u6765\u5b9e\u73b0\u8fd9\u4e2a\u673a\u5236"}),"\n",(0,s.jsx)(e.li,{children:"ReentrantLock\u53ef\u4ee5\u6307\u5b9a\u662f\u516c\u5e73\u9501\u8fd8\u662f\u975e\u516c\u5e73\u9501\u3002\u800csynchronized\u53ea\u80fd\u662f\u975e\u516c\u5e73\u9501\u3002\u6240\u8c13\u7684\u516c\u5e73\u9501\u5c31\u662f\u5148\u7b49\u5f85\u7684\u7ebf\u7a0b\u5148\u83b7\u5f97\u9501\u3002"}),"\n",(0,s.jsx)(e.li,{children:"synchronized\u4e0ewait()\u548cnotify()/notifyAll()\u65b9\u6cd5\u7ed3\u5408\u5b9e\u73b0\u7b49\u5f85/\u901a\u77e5\u673a\u5236\uff0cReentrantLock\u7c7b\u501f\u52a9Condition\u63a5\u53e3\u4e0enewCondition()\u65b9\u6cd5\u5b9e\u73b0\u3002"}),"\n",(0,s.jsx)(e.li,{children:"ReentrantLock\u9700\u8981\u624b\u5de5\u58f0\u660e\u6765\u52a0\u9501\u548c\u91ca\u653e\u9501\uff0c\u4e00\u822c\u8ddffinally\u914d\u5408\u91ca\u653e\u9501\u3002\u800csynchronized\u4e0d\u7528\u624b\u52a8\u91ca\u653e\u9501\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u4e0b\u9762\u7684\u8868\u683c\u5217\u51fa\u51fa\u4e86\u4e24\u79cd\u9501\u4e4b\u95f4\u7684\u533a\u522b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(68390).Z+"",width:"756",height:"422"})}),"\n",(0,s.jsx)(e.h3,{id:"29aqs\u4e86\u89e3\u591a\u5c11",children:"29.AQS\u4e86\u89e3\u591a\u5c11\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"AbstractQueuedSynchronizer \u62bd\u8c61\u540c\u6b65\u961f\u5217\uff0c\u7b80\u79f0 AQS \uff0c\u5b83\u662fJava\u5e76\u53d1\u5305\u7684\u6839\u57fa\uff0c\u5e76\u53d1\u5305\u4e2d\u7684\u9501\u5c31\u662f\u57fa\u4e8eAQS\u5b9e\u73b0\u7684\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"AQS\u662f\u57fa\u4e8e\u4e00\u4e2aFIFO\u7684\u53cc\u5411\u961f\u5217\uff0c\u5176\u5185\u90e8\u5b9a\u4e49\u4e86\u4e00\u4e2a\u8282\u70b9\u7c7bNode\uff0cNode \u8282\u70b9\u5185\u90e8\u7684 SHARED \u7528\u6765\u6807\u8bb0\u8be5\u7ebf\u7a0b\u662f\u83b7\u53d6\u5171\u4eab\u8d44\u6e90\u65f6\u88ab\u963b\u6302\u8d77\u540e\u653e\u5165AQS \u961f\u5217\u7684\uff0c EXCLUSIVE \u7528\u6765\u6807\u8bb0\u7ebf\u7a0b\u662f \u53d6\u72ec\u5360\u8d44\u6e90\u65f6\u88ab\u6302\u8d77\u540e\u653e\u5165AQS \u961f\u5217"}),"\n",(0,s.jsx)(e.li,{children:"AQS \u4f7f\u7528\u4e00\u4e2a volatile \u4fee\u9970\u7684 int \u7c7b\u578b\u7684\u6210\u5458\u53d8\u91cf state \u6765\u8868\u793a\u540c\u6b65\u72b6\u6001\uff0c\u4fee\u6539\u540c\u6b65\u72b6\u6001\u6210\u529f\u5373\u4e3a\u83b7\u5f97\u9501\uff0cvolatile \u4fdd\u8bc1\u4e86\u53d8\u91cf\u5728\u591a\u7ebf\u7a0b\u4e4b\u95f4\u7684\u53ef\u89c1\u6027\uff0c\u4fee\u6539 State \u503c\u65f6\u901a\u8fc7 CAS \u673a\u5236\u6765\u4fdd\u8bc1\u4fee\u6539\u7684\u539f\u5b50\u6027"}),"\n",(0,s.jsx)(e.li,{children:"\u83b7\u53d6state\u7684\u65b9\u5f0f\u5206\u4e3a\u4e24\u79cd\uff0c\u72ec\u5360\u65b9\u5f0f\u548c\u5171\u4eab\u65b9\u5f0f\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u4f7f\u7528\u72ec\u5360\u65b9\u5f0f\u83b7\u53d6\u4e86\u8d44\u6e90\uff0c\u5176\u5b83\u7ebf\u7a0b\u5c31\u4f1a\u5728\u83b7\u53d6\u5931\u8d25\u540e\u88ab\u963b\u585e\u3002\u4e00\u4e2a\u7ebf\u7a0b\u4f7f\u7528\u5171\u4eab\u65b9\u5f0f\u83b7\u53d6\u4e86\u8d44\u6e90\uff0c\u53e6\u5916\u4e00\u4e2a\u7ebf\u7a0b\u8fd8\u53ef\u4ee5\u901a\u8fc7CAS\u7684\u65b9\u5f0f\u8fdb\u884c\u83b7\u53d6\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u5171\u4eab\u8d44\u6e90\u88ab\u5360\u7528\uff0c\u9700\u8981\u4e00\u5b9a\u7684\u963b\u585e\u7b49\u5f85\u5524\u9192\u673a\u5236\u6765\u4fdd\u8bc1\u9501\u7684\u5206\u914d\uff0cAQS \u4e2d\u4f1a\u5c06\u7ade\u4e89\u5171\u4eab\u8d44\u6e90\u5931\u8d25\u7684\u7ebf\u7a0b\u6dfb\u52a0\u5230\u4e00\u4e2a\u53d8\u4f53\u7684 CLH \u961f\u5217\u4e2d\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(46125).Z+"",width:"1291",height:"461"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(67185).Z+"",width:"1200",height:"331"})}),"\n",(0,s.jsx)(e.p,{children:"AQS \u4e2d\u7684\u961f\u5217\u662f CLH \u53d8\u4f53\u7684\u865a\u62df\u53cc\u5411\u961f\u5217\uff0c\u901a\u8fc7\u5c06\u6bcf\u6761\u8bf7\u6c42\u5171\u4eab\u8d44\u6e90\u7684\u7ebf\u7a0b\u5c01\u88c5\u6210\u4e00\u4e2a\u8282\u70b9\u6765\u5b9e\u73b0\u9501\u7684\u5206\u914d\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(58823).Z+"",width:"1215",height:"357"})}),"\n",(0,s.jsx)(e.p,{children:"AQS \u4e2d\u7684 CLH \u53d8\u4f53\u7b49\u5f85\u961f\u5217\u62e5\u6709\u4ee5\u4e0b\u7279\u6027\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"AQS \u4e2d\u961f\u5217\u662f\u4e2a\u53cc\u5411\u94fe\u8868\uff0c\u4e5f\u662f FIFO \u5148\u8fdb\u5148\u51fa\u7684\u7279\u6027"}),"\n",(0,s.jsx)(e.li,{children:"\u901a\u8fc7 Head\u3001Tail \u5934\u5c3e\u4e24\u4e2a\u8282\u70b9\u6765\u7ec4\u6210\u961f\u5217\u7ed3\u6784\uff0c\u901a\u8fc7 volatile \u4fee\u9970\u4fdd\u8bc1\u53ef\u89c1\u6027"}),"\n",(0,s.jsx)(e.li,{children:"Head \u6307\u5411\u8282\u70b9\u4e3a\u5df2\u83b7\u5f97\u9501\u7684\u8282\u70b9\uff0c\u662f\u4e00\u4e2a\u865a\u62df\u8282\u70b9\uff0c\u8282\u70b9\u672c\u8eab\u4e0d\u6301\u6709\u5177\u4f53\u7ebf\u7a0b"}),"\n",(0,s.jsx)(e.li,{children:"\u83b7\u53d6\u4e0d\u5230\u540c\u6b65\u72b6\u6001\uff0c\u4f1a\u5c06\u8282\u70b9\u8fdb\u884c\u81ea\u65cb\u83b7\u53d6\u9501\uff0c\u81ea\u65cb\u4e00\u5b9a\u6b21\u6570\u5931\u8d25\u540e\u4f1a\u5c06\u7ebf\u7a0b\u963b\u585e\uff0c\u76f8\u5bf9\u4e8e CLH \u961f\u5217\u6027\u80fd\u8f83\u597d"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["ps",":AQS","\u6e90\u7801\u91cc\u9762\u6709\u5f88\u591a\u7ec6\u8282\u53ef\u95ee\uff0c\u5efa\u8bae\u6709\u65f6\u95f4\u597d\u597d\u770b\u770bAQS\u6e90\u7801\u3002"]}),"\n",(0,s.jsxs)(e.h3,{id:"30reentrantlock\u5b9e\u73b0\u539f\u7406",children:["30.",(0,s.jsx)(e.strong,{children:"ReentrantLock"}),"\u5b9e\u73b0\u539f\u7406\uff1f"]}),"\n",(0,s.jsx)(e.p,{children:"ReentrantLock \u662f\u53ef\u91cd\u5165\u7684\u72ec\u5360\u9501\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u83b7\u53d6\u8be5\u9501\uff0c\u5176\u5b83\u83b7\u53d6\u8be5\u9501\u7684\u7ebf\u7a0b\u4f1a\u88ab\u963b\u585e\u800c\u88ab\u653e\u5165\u8be5\u9501\u7684\u963b\u585e\u961f\u5217\u91cc\u9762\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u770b\u770bReentrantLock\u7684\u52a0\u9501\u64cd\u4f5c\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"// \u521b\u5efa\u975e\u516c\u5e73\u9501\nReentrantLock lock = new ReentrantLock();\n// \u83b7\u53d6\u9501\u64cd\u4f5c\nlock.lock();\ntry {\n    // \u6267\u884c\u4ee3\u7801\u903b\u8f91\n} catch (Exception ex) {\n    // ...\n} finally {\n    // \u89e3\u9501\u64cd\u4f5c\n    lock.unlock();\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"new ReentrantLock() "}),"\u6784\u9020\u51fd\u6570\u9ed8\u8ba4\u521b\u5efa\u7684\u662f\u975e\u516c\u5e73\u9501 NonfairSync\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u516c\u5e73\u9501 FairSync"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u516c\u5e73\u9501\u662f\u6307\u591a\u4e2a\u7ebf\u7a0b\u6309\u7167\u7533\u8bf7\u9501\u7684\u987a\u5e8f\u6765\u83b7\u53d6\u9501\uff0c\u7ebf\u7a0b\u76f4\u63a5\u8fdb\u5165\u961f\u5217\u4e2d\u6392\u961f\uff0c\u961f\u5217\u4e2d\u7684\u7b2c\u4e00\u4e2a\u7ebf\u7a0b\u624d\u80fd\u83b7\u5f97\u9501"}),"\n",(0,s.jsx)(e.li,{children:"\u516c\u5e73\u9501\u7684\u4f18\u70b9\u662f\u7b49\u5f85\u9501\u7684\u7ebf\u7a0b\u4e0d\u4f1a\u997f\u6b7b\u3002\u7f3a\u70b9\u662f\u6574\u4f53\u541e\u5410\u6548\u7387\u76f8\u5bf9\u975e\u516c\u5e73\u9501\u8981\u4f4e\uff0c\u7b49\u5f85\u961f\u5217\u4e2d\u9664\u7b2c\u4e00\u4e2a\u7ebf\u7a0b\u4ee5\u5916\u7684\u6240\u6709\u7ebf\u7a0b\u90fd\u4f1a\u963b\u585e\uff0cCPU \u5524\u9192\u963b\u585e\u7ebf\u7a0b\u7684\u5f00\u9500\u6bd4\u975e\u516c\u5e73\u9501\u5927"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u975e\u516c\u5e73\u9501 NonfairSync"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u975e\u516c\u5e73\u9501\u662f\u591a\u4e2a\u7ebf\u7a0b\u52a0\u9501\u65f6\u76f4\u63a5\u5c1d\u8bd5\u83b7\u53d6\u9501\uff0c\u83b7\u53d6\u4e0d\u5230\u624d\u4f1a\u5230\u7b49\u5f85\u961f\u5217\u7684\u961f\u5c3e\u7b49\u5f85\u3002\u4f46\u5982\u679c\u6b64\u65f6\u9501\u521a\u597d\u53ef\u7528\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u65e0\u9700\u963b\u585e\u76f4\u63a5\u83b7\u53d6\u5230\u9501"}),"\n",(0,s.jsx)(e.li,{children:"\u975e\u516c\u5e73\u9501\u7684\u4f18\u70b9\u662f\u53ef\u4ee5\u51cf\u5c11\u5524\u8d77\u7ebf\u7a0b\u7684\u5f00\u9500\uff0c\u6574\u4f53\u7684\u541e\u5410\u6548\u7387\u9ad8\uff0c\u56e0\u4e3a\u7ebf\u7a0b\u6709\u51e0\u7387\u4e0d\u963b\u585e\u76f4\u63a5\u83b7\u5f97\u9501\uff0cCPU \u4e0d\u5fc5\u5524\u9192\u6240\u6709\u7ebf\u7a0b\u3002\u7f3a\u70b9\u662f\u5904\u4e8e\u7b49\u5f85\u961f\u5217\u4e2d\u7684\u7ebf\u7a0b\u53ef\u80fd\u4f1a\u997f\u6b7b\uff0c\u6216\u8005\u7b49\u5f88\u4e45\u624d\u4f1a\u83b7\u5f97\u9501"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u9ed8\u8ba4\u521b\u5efa\u7684\u5bf9\u8c61lock()\u7684\u65f6\u5019\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u9501\u5f53\u524d\u6ca1\u6709\u88ab\u5176\u5b83\u7ebf\u7a0b\u5360\u7528\uff0c\u5e76\u4e14\u5f53\u524d\u7ebf\u7a0b\u4e4b\u524d\u6ca1\u6709\u83b7\u53d6\u8fc7\u8be5\u9501\uff0c\u5219\u5f53\u524d\u7ebf\u7a0b\u4f1a\u83b7\u53d6\u5230\u8be5\u9501\uff0c\u7136\u540e\u8bbe\u7f6e\u5f53\u524d\u9501\u7684\u62e5\u6709\u8005\u4e3a\u5f53\u524d\u7ebf\u7a0b\uff0c\u5e76\u8bbe\u7f6e AQS \u7684\u72b6\u6001\u503c\u4e3a1 \uff0c\u7136\u540e\u76f4\u63a5\u8fd4\u56de\u3002\u5982\u679c\u5f53\u524d\u7ebf\u7a0b\u4e4b\u524d\u5df1\u7ecf\u83b7\u53d6\u8fc7\u8be5\u9501\uff0c\u5219\u8fd9\u6b21\u53ea\u662f\u7b80\u5355\u5730\u628a AQS \u7684\u72b6\u6001\u503c\u52a01\u540e\u8fd4\u56de\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u8be5\u9501\u5df1\u7ecf\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6301\u6709\uff0c\u975e\u516c\u5e73\u9501\u4f1a\u5c1d\u8bd5\u53bb\u83b7\u53d6\u9501\uff0c\u83b7\u53d6\u5931\u8d25\u7684\u8bdd\uff0c\u5219\u8c03\u7528\u8be5\u65b9\u6cd5\u7ebf\u7a0b\u4f1a\u88ab\u653e\u5165 AQS \u961f\u5217\u963b\u585e\u6302\u8d77\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(79511).Z+"",width:"686",height:"478"})}),"\n",(0,s.jsx)(e.h3,{id:"31reentrantlock\u600e\u4e48\u5b9e\u73b0\u516c\u5e73\u9501\u7684",children:"31.ReentrantLock\u600e\u4e48\u5b9e\u73b0\u516c\u5e73\u9501\u7684\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"new ReentrantLock() "}),"\u6784\u9020\u51fd\u6570\u9ed8\u8ba4\u521b\u5efa\u7684\u662f\u975e\u516c\u5e73\u9501 NonfairSync"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"public ReentrantLock() {\n    sync = new NonfairSync();\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u540c\u65f6\u4e5f\u53ef\u4ee5\u5728\u521b\u5efa\u9501\u6784\u9020\u51fd\u6570\u4e2d\u4f20\u5165\u5177\u4f53\u53c2\u6570\u521b\u5efa\u516c\u5e73\u9501 FairSync"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"ReentrantLock lock = new ReentrantLock(true);\n--- ReentrantLock\n// true \u4ee3\u8868\u516c\u5e73\u9501\uff0cfalse \u4ee3\u8868\u975e\u516c\u5e73\u9501\npublic ReentrantLock(boolean fair) {\n    sync = fair ? new FairSync() : new NonfairSync();\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"FairSync\u3001NonfairSync \u4ee3\u8868\u516c\u5e73\u9501\u548c\u975e\u516c\u5e73\u9501\uff0c\u4e24\u8005\u90fd\u662f ReentrantLock \u9759\u6001\u5185\u90e8\u7c7b\uff0c\u53ea\u4e0d\u8fc7\u5b9e\u73b0\u4e0d\u540c\u9501\u8bed\u4e49\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u975e\u516c\u5e73\u9501\u548c\u516c\u5e73\u9501\u7684\u4e24\u5904\u4e0d\u540c\uff1a"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u975e\u516c\u5e73\u9501\u5728\u8c03\u7528 lock \u540e\uff0c\u9996\u5148\u5c31\u4f1a\u8c03\u7528 CAS \u8fdb\u884c\u4e00\u6b21\u62a2\u9501\uff0c\u5982\u679c\u8fd9\u4e2a\u65f6\u5019\u6070\u5de7\u9501\u6ca1\u6709\u88ab\u5360\u7528\uff0c\u90a3\u4e48\u76f4\u63a5\u5c31\u83b7\u53d6\u5230\u9501\u8fd4\u56de\u4e86\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u975e\u516c\u5e73\u9501\u5728 CAS \u5931\u8d25\u540e\uff0c\u548c\u516c\u5e73\u9501\u4e00\u6837\u90fd\u4f1a\u8fdb\u5165\u5230 tryAcquire \u65b9\u6cd5\uff0c\u5728 tryAcquire \u65b9\u6cd5\u4e2d\uff0c\u5982\u679c\u53d1\u73b0\u9501\u8fd9\u4e2a\u65f6\u5019\u88ab\u91ca\u653e\u4e86\uff08state == 0\uff09\uff0c\u975e\u516c\u5e73\u9501\u4f1a\u76f4\u63a5 CAS \u62a2\u9501\uff0c\u4f46\u662f\u516c\u5e73\u9501\u4f1a\u5224\u65ad\u7b49\u5f85\u961f\u5217\u662f\u5426\u6709\u7ebf\u7a0b\u5904\u4e8e\u7b49\u5f85\u72b6\u6001\uff0c\u5982\u679c\u6709\u5219\u4e0d\u53bb\u62a2\u9501\uff0c\u4e56\u4e56\u6392\u5230\u540e\u9762\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(9176).Z+"",width:"1296",height:"1414"})}),"\n",(0,s.jsx)(e.p,{children:"\u76f8\u5bf9\u6765\u8bf4\uff0c\u975e\u516c\u5e73\u9501\u4f1a\u6709\u66f4\u597d\u7684\u6027\u80fd\uff0c\u56e0\u4e3a\u5b83\u7684\u541e\u5410\u91cf\u6bd4\u8f83\u5927\u3002\u5f53\u7136\uff0c\u975e\u516c\u5e73\u9501\u8ba9\u83b7\u53d6\u9501\u7684\u65f6\u95f4\u53d8\u5f97\u66f4\u52a0\u4e0d\u786e\u5b9a\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5728\u963b\u585e\u961f\u5217\u4e2d\u7684\u7ebf\u7a0b\u957f\u671f\u5904\u4e8e\u9965\u997f\u72b6\u6001\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"32cas\u5462cas\u4e86\u89e3\u591a\u5c11",children:"32.CAS\u5462\uff1fCAS\u4e86\u89e3\u591a\u5c11\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"CAS\u53eb\u505aCompareAndSwap\uff0c\u2f50\u8f83\u5e76\u4ea4\u6362\uff0c\u4e3b\u8981\u662f\u901a\u8fc7\u5904\u7406\u5668\u7684\u6307\u4ee4\u6765\u4fdd\u8bc1\u64cd\u4f5c\u7684\u539f\u2f26\u6027\u7684\u3002"}),"\n",(0,s.jsx)(e.p,{children:"CAS \u6307\u4ee4\u5305\u542b 3 \u4e2a\u53c2\u6570\uff1a\u5171\u4eab\u53d8\u91cf\u7684\u5185\u5b58\u5730\u5740 A\u3001\u9884\u671f\u7684\u503c B \u548c\u5171\u4eab\u53d8\u91cf\u7684\u65b0\u503c C\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u53ea\u6709\u5f53\u5185\u5b58\u4e2d\u5730\u5740 A \u5904\u7684\u503c\u7b49\u4e8e B \u65f6\uff0c\u624d\u80fd\u5c06\u5185\u5b58\u4e2d\u5730\u5740 A \u5904\u7684\u503c\u66f4\u65b0\u4e3a\u65b0\u503c C\u3002\u4f5c\u4e3a\u4e00\u6761 CPU \u6307\u4ee4\uff0cCAS \u6307\u4ee4\u672c\u8eab\u662f\u80fd\u591f\u4fdd\u8bc1\u539f\u5b50\u6027\u7684 \u3002"}),"\n",(0,s.jsx)(e.h3,{id:"33cas-\u6709\u4ec0\u4e48\u95ee\u9898\u5982\u4f55\u89e3\u51b3",children:"33.CAS \u6709\u4ec0\u4e48\u95ee\u9898\uff1f\u5982\u4f55\u89e3\u51b3\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"CAS\u7684\u7ecf\u5178\u4e09\u5927\u95ee\u9898\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(88309).Z+"",width:"836",height:"336"})}),"\n",(0,s.jsx)(e.h4,{id:"aba-\u95ee\u9898",children:"ABA \u95ee\u9898"}),"\n",(0,s.jsx)(e.p,{children:"\u5e76\u53d1\u73af\u5883\u4e0b\uff0c\u5047\u8bbe\u521d\u59cb\u6761\u4ef6\u662fA\uff0c\u53bb\u4fee\u6539\u6570\u636e\u65f6\uff0c\u53d1\u73b0\u662fA\u5c31\u4f1a\u6267\u884c\u4fee\u6539\u3002\u4f46\u662f\u770b\u5230\u7684\u867d\u7136\u662fA\uff0c\u4e2d\u95f4\u53ef\u80fd\u53d1\u751f\u4e86A\u53d8B\uff0cB\u53c8\u53d8\u56deA\u7684\u60c5\u51b5\u3002\u6b64\u65f6A\u5df2\u7ecf\u975e\u5f7cA\uff0c\u6570\u636e\u5373\u4f7f\u6210\u529f\u4fee\u6539\uff0c\u4e5f\u53ef\u80fd\u6709\u95ee\u9898\u3002"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u600e\u4e48\u89e3\u51b3ABA\u95ee\u9898\uff1f"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u52a0\u7248\u672c\u53f7"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6bcf\u6b21\u4fee\u6539\u53d8\u91cf\uff0c\u90fd\u5728\u8fd9\u4e2a\u53d8\u91cf\u7684\u7248\u672c\u53f7\u4e0a\u52a01\uff0c\u8fd9\u6837\uff0c\u521a\u521aA->B->A\uff0c\u867d\u7136A\u7684\u503c\u6ca1\u53d8\uff0c\u4f46\u662f\u5b83\u7684\u7248\u672c\u53f7\u5df2\u7ecf\u53d8\u4e86\uff0c\u518d\u5224\u65ad\u7248\u672c\u53f7\u5c31\u4f1a\u53d1\u73b0\u6b64\u65f6\u7684A\u5df2\u7ecf\u88ab\u6539\u8fc7\u4e86\u3002\u53c2\u8003\u4e50\u89c2\u9501\u7684\u7248\u672c\u53f7\uff0c\u8fd9\u79cd\u505a\u6cd5\u53ef\u4ee5\u7ed9\u6570\u636e\u5e26\u4e0a\u4e86\u4e00\u79cd\u5b9e\u6548\u6027\u7684\u68c0\u9a8c\u3002"}),"\n",(0,s.jsx)(e.p,{children:"Java\u63d0\u4f9b\u4e86AtomicStampReference\u7c7b\uff0c\u5b83\u7684compareAndSet\u65b9\u6cd5\u9996\u5148\u68c0\u67e5\u5f53\u524d\u7684\u5bf9\u8c61\u5f15\u7528\u503c\u662f\u5426\u7b49\u4e8e\u9884\u671f\u5f15\u7528\uff0c\u5e76\u4e14\u5f53\u524d\u5370\u6233\uff08Stamp\uff09\u6807\u5fd7\u662f\u5426\u7b49\u4e8e\u9884\u671f\u6807\u5fd7\uff0c\u5982\u679c\u5168\u90e8\u76f8\u7b49\uff0c\u5219\u4ee5\u539f\u5b50\u65b9\u5f0f\u5c06\u5f15\u7528\u503c\u548c\u5370\u6233\u6807\u5fd7\u7684\u503c\u66f4\u65b0\u4e3a\u7ed9\u5b9a\u7684\u66f4\u65b0\u503c\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"\u5faa\u73af\u6027\u80fd\u5f00\u9500",children:"\u5faa\u73af\u6027\u80fd\u5f00\u9500"}),"\n",(0,s.jsx)(e.p,{children:"\u81ea\u65cbCAS\uff0c\u5982\u679c\u4e00\u76f4\u5faa\u73af\u6267\u884c\uff0c\u4e00\u76f4\u4e0d\u6210\u529f\uff0c\u4f1a\u7ed9CPU\u5e26\u6765\u975e\u5e38\u5927\u7684\u6267\u884c\u5f00\u9500\u3002"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u600e\u4e48\u89e3\u51b3\u5faa\u73af\u6027\u80fd\u5f00\u9500\u95ee\u9898\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5728Java\u4e2d\uff0c\u5f88\u591a\u4f7f\u7528\u81ea\u65cbCAS\u7684\u5730\u65b9\uff0c\u4f1a\u6709\u4e00\u4e2a\u81ea\u65cb\u6b21\u6570\u7684\u9650\u5236\uff0c\u8d85\u8fc7\u4e00\u5b9a\u6b21\u6570\uff0c\u5c31\u505c\u6b62\u81ea\u65cb\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"\u53ea\u80fd\u4fdd\u8bc1\u4e00\u4e2a\u53d8\u91cf\u7684\u539f\u5b50\u64cd\u4f5c",children:"\u53ea\u80fd\u4fdd\u8bc1\u4e00\u4e2a\u53d8\u91cf\u7684\u539f\u5b50\u64cd\u4f5c"}),"\n",(0,s.jsx)(e.p,{children:"CAS \u4fdd\u8bc1\u7684\u662f\u5bf9\u4e00\u4e2a\u53d8\u91cf\u6267\u884c\u64cd\u4f5c\u7684\u539f\u5b50\u6027\uff0c\u5982\u679c\u5bf9\u591a\u4e2a\u53d8\u91cf\u64cd\u4f5c\u65f6\uff0cCAS \u76ee\u524d\u65e0\u6cd5\u76f4\u63a5\u4fdd\u8bc1\u64cd\u4f5c\u7684\u539f\u5b50\u6027\u7684\u3002"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u600e\u4e48\u89e3\u51b3\u53ea\u80fd\u4fdd\u8bc1\u4e00\u4e2a\u53d8\u91cf\u7684\u539f\u5b50\u64cd\u4f5c\u95ee\u9898\uff1f"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u53ef\u4ee5\u8003\u8651\u6539\u7528\u9501\u6765\u4fdd\u8bc1\u64cd\u4f5c\u7684\u539f\u5b50\u6027"}),"\n",(0,s.jsx)(e.li,{children:"\u53ef\u4ee5\u8003\u8651\u5408\u5e76\u591a\u4e2a\u53d8\u91cf\uff0c\u5c06\u591a\u4e2a\u53d8\u91cf\u5c01\u88c5\u6210\u4e00\u4e2a\u5bf9\u8c61\uff0c\u901a\u8fc7AtomicReference\u6765\u4fdd\u8bc1\u539f\u5b50\u6027\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"34java\u6709\u54ea\u4e9b\u4fdd\u8bc1\u539f\u5b50\u6027\u7684\u65b9\u6cd5\u5982\u4f55\u4fdd\u8bc1\u591a\u7ebf\u7a0b\u4e0bi-\u7ed3\u679c\u6b63\u786e",children:"34.Java\u6709\u54ea\u4e9b\u4fdd\u8bc1\u539f\u5b50\u6027\u7684\u65b9\u6cd5\uff1f\u5982\u4f55\u4fdd\u8bc1\u591a\u7ebf\u7a0b\u4e0bi++ \u7ed3\u679c\u6b63\u786e\uff1f"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(71030).Z+"",width:"666",height:"274"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4f7f\u7528\u5faa\u73af\u539f\u5b50\u7c7b\uff0c\u4f8b\u5982AtomicInteger\uff0c\u5b9e\u73b0i++\u539f\u5b50\u64cd\u4f5c"}),"\n",(0,s.jsx)(e.li,{children:"\u4f7f\u7528juc\u5305\u4e0b\u7684\u9501\uff0c\u5982ReentrantLock \uff0c\u5bf9i++\u64cd\u4f5c\u52a0\u9501lock.lock()\u6765\u5b9e\u73b0\u539f\u5b50\u6027"}),"\n",(0,s.jsx)(e.li,{children:"\u4f7f\u7528synchronized\uff0c\u5bf9i++\u64cd\u4f5c\u52a0\u9501"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"35\u539f\u5b50\u64cd\u4f5c\u7c7b\u4e86\u89e3\u591a\u5c11",children:"35.\u539f\u5b50\u64cd\u4f5c\u7c7b\u4e86\u89e3\u591a\u5c11\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u5f53\u7a0b\u5e8f\u66f4\u65b0\u4e00\u4e2a\u53d8\u91cf\u65f6\uff0c\u5982\u679c\u591a\u7ebf\u7a0b\u540c\u65f6\u66f4\u65b0\u8fd9\u4e2a\u53d8\u91cf\uff0c\u53ef\u80fd\u5f97\u5230\u671f\u671b\u4e4b\u5916\u7684\u503c\uff0c\u6bd4\u5982\u53d8\u91cfi=1\uff0cA\u7ebf\u7a0b\u66f4\u65b0i+1\uff0cB\u7ebf\u7a0b\u4e5f\u66f4\u65b0i+1\uff0c\u7ecf\u8fc7\u4e24\u4e2a\u7ebf\u7a0b\u64cd\u4f5c\u4e4b\u540e\u53ef\u80fdi\u4e0d\u7b49\u4e8e3\uff0c\u800c\u662f\u7b49\u4e8e2\u3002\u56e0\u4e3aA\u548cB\u7ebf\u7a0b\u5728\u66f4\u65b0\u53d8\u91cfi\u7684\u65f6\u5019\u62ff\u5230\u7684i\u90fd\u662f1\uff0c\u8fd9\u5c31\u662f\u7ebf\u7a0b\u4e0d\u5b89\u5168\u7684\u66f4\u65b0\u64cd\u4f5c\uff0c\u4e00\u822c\u6211\u4eec\u4f1a\u4f7f\u7528synchronized\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0csynchronized\u4f1a\u4fdd\u8bc1\u591a\u7ebf\u7a0b\u4e0d\u4f1a\u540c\u65f6\u66f4\u65b0\u53d8\u91cfi\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5176\u5b9e\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u6709\u66f4\u8f7b\u91cf\u7ea7\u7684\u9009\u62e9\uff0cJava\u4eceJDK 1.5\u5f00\u59cb\u63d0\u4f9b\u4e86java.util.concurrent.atomic\u5305\uff0c\u8fd9\u4e2a\u5305\u4e2d\u7684\u539f\u5b50\u64cd\u4f5c\u7c7b\u63d0\u4f9b\u4e86\u4e00\u79cd\u7528\u6cd5\u7b80\u5355\u3001\u6027\u80fd\u9ad8\u6548\u3001\u7ebf\u7a0b\u5b89\u5168\u5730\u66f4\u65b0\u4e00\u4e2a\u53d8\u91cf\u7684\u65b9\u5f0f\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u56e0\u4e3a\u53d8\u91cf\u7684\u7c7b\u578b\u6709\u5f88\u591a\u79cd\uff0c\u6240\u4ee5\u5728Atomic\u5305\u91cc\u4e00\u5171\u63d0\u4f9b\u4e8613\u4e2a\u7c7b\uff0c\u5c5e\u4e8e4\u79cd\u7c7b\u578b\u7684\u539f\u5b50\u66f4\u65b0\u65b9\u5f0f\uff0c\u5206\u522b\u662f\u539f\u5b50\u66f4\u65b0\u57fa\u672c\u7c7b\u578b\u3001\u539f\u5b50\u66f4\u65b0\u6570\u7ec4\u3001\u539f\u5b50\u66f4\u65b0\u5f15\u7528\u548c\u539f\u5b50\u66f4\u65b0\u5c5e\u6027\uff08\u5b57\u6bb5\uff09\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(37796).Z+"",width:"981",height:"815"})}),"\n",(0,s.jsx)(e.p,{children:"Atomic\u5305\u91cc\u7684\u7c7b\u57fa\u672c\u90fd\u662f\u4f7f\u7528Unsafe\u5b9e\u73b0\u7684\u5305\u88c5\u7c7b\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u4f7f\u7528\u539f\u5b50\u7684\u65b9\u5f0f\u66f4\u65b0\u57fa\u672c\u7c7b\u578b\uff0cAtomic\u5305\u63d0\u4f9b\u4e86\u4ee5\u4e0b3\u4e2a\u7c7b\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"AtomicBoolean\uff1a\u539f\u5b50\u66f4\u65b0\u5e03\u5c14\u7c7b\u578b\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"AtomicInteger\uff1a\u539f\u5b50\u66f4\u65b0\u6574\u578b\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"AtomicLong\uff1a\u539f\u5b50\u66f4\u65b0\u957f\u6574\u578b\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u901a\u8fc7\u539f\u5b50\u7684\u65b9\u5f0f\u66f4\u65b0\u6570\u7ec4\u91cc\u7684\u67d0\u4e2a\u5143\u7d20\uff0cAtomic\u5305\u63d0\u4f9b\u4e86\u4ee5\u4e0b4\u4e2a\u7c7b\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"AtomicIntegerArray\uff1a\u539f\u5b50\u66f4\u65b0\u6574\u578b\u6570\u7ec4\u91cc\u7684\u5143\u7d20\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"AtomicLongArray\uff1a\u539f\u5b50\u66f4\u65b0\u957f\u6574\u578b\u6570\u7ec4\u91cc\u7684\u5143\u7d20\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"AtomicReferenceArray\uff1a\u539f\u5b50\u66f4\u65b0\u5f15\u7528\u7c7b\u578b\u6570\u7ec4\u91cc\u7684\u5143\u7d20\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"AtomicIntegerArray\u7c7b\u4e3b\u8981\u662f\u63d0\u4f9b\u539f\u5b50\u7684\u65b9\u5f0f\u66f4\u65b0\u6570\u7ec4\u91cc\u7684\u6574\u578b"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u539f\u5b50\u66f4\u65b0\u57fa\u672c\u7c7b\u578b\u7684AtomicInteger\uff0c\u53ea\u80fd\u66f4\u65b0\u4e00\u4e2a\u53d8\u91cf\uff0c\u5982\u679c\u8981\u539f\u5b50\u66f4\u65b0\u591a\u4e2a\u53d8\u91cf\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u8fd9\u4e2a\u539f\u5b50\u66f4\u65b0\u5f15\u7528\u7c7b\u578b\u63d0\u4f9b\u7684\u7c7b\u3002Atomic\u5305\u63d0\u4f9b\u4e86\u4ee5\u4e0b3\u4e2a\u7c7b\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"AtomicReference\uff1a\u539f\u5b50\u66f4\u65b0\u5f15\u7528\u7c7b\u578b\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"AtomicReferenceFieldUpdater\uff1a\u539f\u5b50\u66f4\u65b0\u5f15\u7528\u7c7b\u578b\u91cc\u7684\u5b57\u6bb5\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"AtomicMarkableReference\uff1a\u539f\u5b50\u66f4\u65b0\u5e26\u6709\u6807\u8bb0\u4f4d\u7684\u5f15\u7528\u7c7b\u578b\u3002\u53ef\u4ee5\u539f\u5b50\u66f4\u65b0\u4e00\u4e2a\u5e03\u5c14\u7c7b\u578b\u7684\u6807\u8bb0\u4f4d\u548c\u5f15\u7528\u7c7b\u578b\u3002\u6784\u9020\u65b9\u6cd5\u662fAtomicMarkableReference\uff08V initialRef\uff0cboolean initialMark\uff09\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u9700\u539f\u5b50\u5730\u66f4\u65b0\u67d0\u4e2a\u7c7b\u91cc\u7684\u67d0\u4e2a\u5b57\u6bb5\u65f6\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u539f\u5b50\u66f4\u65b0\u5b57\u6bb5\u7c7b\uff0cAtomic\u5305\u63d0\u4f9b\u4e86\u4ee5\u4e0b3\u4e2a\u7c7b\u8fdb\u884c\u539f\u5b50\u5b57\u6bb5\u66f4\u65b0\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"AtomicIntegerFieldUpdater\uff1a\u539f\u5b50\u66f4\u65b0\u6574\u578b\u7684\u5b57\u6bb5\u7684\u66f4\u65b0\u5668\u3002"}),"\n",(0,s.jsx)(e.li,{children:"AtomicLongFieldUpdater\uff1a\u539f\u5b50\u66f4\u65b0\u957f\u6574\u578b\u5b57\u6bb5\u7684\u66f4\u65b0\u5668\u3002"}),"\n",(0,s.jsx)(e.li,{children:"AtomicStampedReference\uff1a\u539f\u5b50\u66f4\u65b0\u5e26\u6709\u7248\u672c\u53f7\u7684\u5f15\u7528\u7c7b\u578b\u3002\u8be5\u7c7b\u5c06\u6574\u6570\u503c\u4e0e\u5f15\u7528\u5173\u8054\u8d77\u6765\uff0c\u53ef\u7528\u4e8e\u539f\u5b50\u7684\u66f4\u65b0\u6570\u636e\u548c\u6570\u636e\u7684\u7248\u672c\u53f7\uff0c\u53ef\u4ee5\u89e3\u51b3\u4f7f\u7528CAS\u8fdb\u884c\u539f\u5b50\u66f4\u65b0\u65f6\u53ef\u80fd\u51fa\u73b0\u7684 ABA\u95ee\u9898\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"36atomicinteger-\u7684\u539f\u7406",children:"36.AtomicInteger \u7684\u539f\u7406\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:["\u4e00\u53e5\u8bdd\u6982\u62ec\uff1a",(0,s.jsx)(e.strong,{children:"\u4f7f\u7528CAS\u5b9e\u73b0"}),"\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u4ee5AtomicInteger\u7684\u6dfb\u52a0\u65b9\u6cd5\u4e3a\u4f8b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"    public final int getAndIncrement() {\n        return unsafe.getAndAddInt(this, valueOffset, 1);\n    }\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u901a\u8fc7",(0,s.jsx)(e.code,{children:"Unsafe"}),"\u7c7b\u7684\u5b9e\u4f8b\u6765\u8fdb\u884c\u6dfb\u52a0\u64cd\u4f5c\uff0c\u6765\u770b\u770b\u5177\u4f53\u7684CAS\u64cd\u4f5c\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"public final int getAndAddInt(Object var1, long var2, int var4) {\n    int var5;\n    do {\n        var5 = this.getIntVolatile(var1, var2);\n    } while(!this.compareAndSwapInt(var1, var2, var5, var5 + var4));\n\n    return var5;\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"compareAndSwapInt \u662f\u4e00\u4e2anative\u65b9\u6cd5\uff0c\u57fa\u4e8eCAS\u6765\u64cd\u4f5cint\u7c7b\u578b\u53d8\u91cf\u3002\u5176\u5b83\u7684\u539f\u5b50\u64cd\u4f5c\u7c7b\u57fa\u672c\u90fd\u662f\u5927\u540c\u5c0f\u5f02\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"37\u7ebf\u7a0b\u6b7b\u9501\u4e86\u89e3\u5417\u8be5\u5982\u4f55\u907f\u514d",children:"37.\u7ebf\u7a0b\u6b7b\u9501\u4e86\u89e3\u5417\uff1f\u8be5\u5982\u4f55\u907f\u514d\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u6b7b\u9501\u662f\u6307\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u7684\u7ebf\u7a0b\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u56e0\u4e89\u593a\u8d44\u6e90\u800c\u9020\u6210\u7684\u4e92\u76f8\u7b49\u5f85\u7684\u73b0\u8c61\uff0c\u5728\u65e0\u5916\u529b\u4f5c\u7528\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b\u7ebf\u7a0b\u4f1a\u4e00\u76f4\u76f8\u4e92\u7b49\u5f85\u800c\u65e0\u6cd5\u7ee7\u7eed\u8fd0\u884c\u4e0b\u53bb\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(15672).Z+"",width:"411",height:"213"})}),"\n",(0,s.jsx)(e.p,{children:"\u90a3\u4e48\u4e3a\u4ec0\u4e48\u4f1a\u4ea7\u751f\u6b7b\u9501\u5462\uff1f \u6b7b\u9501\u7684\u4ea7\u751f\u5fc5\u987b\u5177\u5907\u4ee5\u4e0b\u56db\u4e2a\u6761\u4ef6\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(3256).Z+"",width:"593",height:"283"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e92\u65a5\u6761\u4ef6\uff1a\u6307\u7ebf\u7a0b\u5bf9\u5df1\u7ecf\u83b7\u53d6\u5230\u7684\u8d44\u6e90\u8fdb\u884c\u5b83\u6027\u4f7f\u7528\uff0c\u5373\u8be5\u8d44\u6e90\u540c\u65f6\u53ea\u7531\u4e00\u4e2a\u7ebf\u7a0b\u5360\u7528\u3002\u5982\u679c\u6b64\u65f6\u8fd8\u6709\u5176\u5b83\u7ebf\u7a0b\u8bf7\u6c42\u83b7\u53d6\u83b7\u53d6\u8be5\u8d44\u6e90\uff0c\u5219\u8bf7\u6c42\u8005\u53ea\u80fd\u7b49\u5f85\uff0c\u76f4\u81f3\u5360\u6709\u8d44\u6e90\u7684\u7ebf\u7a0b\u91ca\u653e\u8be5\u8d44\u6e90\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u8bf7\u6c42\u5e76\u6301\u6709\u6761\u4ef6\uff1a\u6307\u4e00\u4e2a \u7ebf\u7a0b\u5df1\u7ecf\u6301\u6709\u4e86\u81f3\u5c11\u4e00\u4e2a\u8d44\u6e90\uff0c\u4f46\u53c8\u63d0\u51fa\u4e86\u65b0\u7684\u8d44\u6e90\u8bf7\u6c42\uff0c\u800c\u65b0\u8d44\u6e90\u5df1\u88ab\u5176\u5b83\u7ebf\u7a0b\u5360\u6709\uff0c\u6240\u4ee5\u5f53\u524d\u7ebf\u7a0b\u4f1a\u88ab\u963b\u585e\uff0c\u4f46\u963b\u585e \u7684\u540c\u65f6\u5e76\u4e0d\u91ca\u653e\u81ea\u5df1\u5df2\u7ecf\u83b7\u53d6\u7684\u8d44\u6e90\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u4e0d\u53ef\u5265\u593a\u6761\u4ef6\uff1a\u6307\u7ebf\u7a0b\u83b7\u53d6\u5230\u7684\u8d44\u6e90\u5728\u81ea\u5df1\u4f7f\u7528\u5b8c\u4e4b\u524d\u4e0d\u80fd\u88ab\u5176\u5b83\u7ebf\u7a0b\u62a2\u5360\uff0c\u53ea\u6709\u5728\u81ea\u5df1\u4f7f\u7528\u5b8c\u6bd5\u540e\u624d\u7531\u81ea\u5df1\u91ca\u653e\u8be5\u8d44\u6e90\u3002"}),"\n",(0,s.jsxs)(e.li,{children:["\u73af\u8def\u7b49\u5f85\u6761\u4ef6\uff1a\u6307\u5728\u53d1\u751f\u6b7b\u9501\u65f6\uff0c\u5fc5\u7136\u5b58\u5728\u4e00\u4e2a\u7ebf\u7a0b\u2014\u2014\u8d44\u6e90\u7684\u73af\u5f62\u94fe\uff0c\u5373\u7ebf\u7a0b\u96c6\u5408 ",(0,s.jsx)(e.code,{children:"{T0\uff0cT1\uff0cT2,\u2026\u2026 \uff0cTn}"})," \u4e2d T0 \u6b63\u5728\u7b49\u5f85\u4e00 T1 \u5360\u7528\u7684\u8d44\u6e90\uff0cTl1\u6b63\u5728\u7b49\u5f85 T2\u7528\u7684\u8d44\u6e90\uff0c\u2026\u2026 Tn \u5728\u7b49\u5f85\u5df1\u88ab T0\u5360\u7528\u7684\u8d44\u6e90\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u8be5\u5982\u4f55\u907f\u514d\u6b7b\u9501\u5462\uff1f\u7b54\u6848\u662f",(0,s.jsx)(e.strong,{children:"\u81f3\u5c11\u7834\u574f\u6b7b\u9501\u53d1\u751f\u7684\u4e00\u4e2a\u6761\u4ef6"}),"\u3002"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5176\u4e2d\uff0c\u4e92\u65a5\u8fd9\u4e2a\u6761\u4ef6\u6211\u4eec\u6ca1\u6709\u529e\u6cd5\u7834\u574f\uff0c\u56e0\u4e3a\u7528\u9501\u4e3a\u7684\u5c31\u662f\u4e92\u65a5\u3002\u4e0d\u8fc7\u5176\u4ed6\u4e09\u4e2a\u6761\u4ef6\u90fd\u662f\u6709\u529e\u6cd5\u7834\u574f\u6389\u7684\uff0c\u5230\u5e95\u5982\u4f55\u505a\u5462\uff1f"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5bf9\u4e8e\u201c\u8bf7\u6c42\u5e76\u6301\u6709\u201d\u8fd9\u4e2a\u6761\u4ef6\uff0c\u53ef\u4ee5\u4e00\u6b21\u6027\u8bf7\u6c42\u6240\u6709\u7684\u8d44\u6e90\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5bf9\u4e8e\u201c\u4e0d\u53ef\u5265\u593a\u201d\u8fd9\u4e2a\u6761\u4ef6\uff0c\u5360\u7528\u90e8\u5206\u8d44\u6e90\u7684\u7ebf\u7a0b\u8fdb\u4e00\u6b65\u7533\u8bf7\u5176\u4ed6\u8d44\u6e90\u65f6\uff0c\u5982\u679c\u7533\u8bf7\u4e0d\u5230\uff0c\u53ef\u4ee5\u4e3b\u52a8\u91ca\u653e\u5b83\u5360\u6709\u7684\u8d44\u6e90\uff0c\u8fd9\u6837\u4e0d\u53ef\u62a2\u5360\u8fd9\u4e2a\u6761\u4ef6\u5c31\u7834\u574f\u6389\u4e86\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5bf9\u4e8e\u201c\u73af\u8def\u7b49\u5f85\u201d\u8fd9\u4e2a\u6761\u4ef6\uff0c\u53ef\u4ee5\u9760\u6309\u5e8f\u7533\u8bf7\u8d44\u6e90\u6765\u9884\u9632\u3002\u6240\u8c13\u6309\u5e8f\u7533\u8bf7\uff0c\u662f\u6307\u8d44\u6e90\u662f\u6709\u7ebf\u6027\u987a\u5e8f\u7684\uff0c\u7533\u8bf7\u7684\u65f6\u5019\u53ef\u4ee5\u5148\u7533\u8bf7\u8d44\u6e90\u5e8f\u53f7\u5c0f\u7684\uff0c\u518d\u7533\u8bf7\u8d44\u6e90\u5e8f\u53f7\u5927\u7684\uff0c\u8fd9\u6837\u7ebf\u6027\u5316\u540e\u5c31\u4e0d\u5b58\u5728\u73af\u8def\u4e86\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"38\u90a3\u6b7b\u9501\u95ee\u9898\u600e\u4e48\u6392\u67e5\u5462",children:"38.\u90a3\u6b7b\u9501\u95ee\u9898\u600e\u4e48\u6392\u67e5\u5462\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u53ef\u4ee5\u4f7f\u7528jdk\u81ea\u5e26\u7684\u547d\u4ee4\u884c\u5de5\u5177\u6392\u67e5\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u4f7f\u7528jps\u67e5\u627e\u8fd0\u884c\u7684Java\u8fdb\u7a0b\uff1ajps -l"}),"\n",(0,s.jsx)(e.li,{children:"\u4f7f\u7528jstack\u67e5\u770b\u7ebf\u7a0b\u5806\u6808\u4fe1\u606f\uff1ajstack -l  \u8fdb\u7a0bid"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u57fa\u672c\u5c31\u53ef\u4ee5\u770b\u5230\u6b7b\u9501\u7684\u4fe1\u606f\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["\u8fd8\u53ef\u4ee5\u5229\u7528\u56fe\u5f62\u5316\u5de5\u5177\uff0c\u6bd4\u5982JConsole\u3002\u51fa\u73b0\u7ebf\u7a0b\u6b7b\u9501\u4ee5\u540e\uff0c\u70b9\u51fbJConsole\u7ebf\u7a0b\u9762\u677f\u7684",(0,s.jsx)(e.code,{children:"\u68c0\u6d4b\u5230\u6b7b\u9501"}),"\u6309\u94ae\uff0c\u5c06\u4f1a\u770b\u5230\u7ebf\u7a0b\u7684\u6b7b\u9501\u4fe1\u606f\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(3333).Z+"",width:"1356",height:"885"})}),"\n",(0,s.jsx)(e.h2,{id:"\u5e76\u53d1\u5de5\u5177\u7c7b",children:"\u5e76\u53d1\u5de5\u5177\u7c7b"}),"\n",(0,s.jsx)(e.h3,{id:"39countdownlatch\u5012\u8ba1\u6570\u5668\u4e86\u89e3\u5417",children:"39.CountDownLatch\uff08\u5012\u8ba1\u6570\u5668\uff09\u4e86\u89e3\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"CountDownLatch\uff0c\u5012\u8ba1\u6570\u5668\uff0c\u6709\u4e24\u4e2a\u5e38\u89c1\u7684\u5e94\u7528\u573a\u666f[18]\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u573a\u666f1\uff1a\u534f\u8c03\u5b50\u7ebf\u7a0b\u7ed3\u675f\u52a8\u4f5c\uff1a\u7b49\u5f85\u6240\u6709\u5b50\u7ebf\u7a0b\u8fd0\u884c\u7ed3\u675f"})}),"\n",(0,s.jsx)(e.p,{children:"CountDownLatch\u5141\u8bb8\u4e00\u4e2a\u6216\u591a\u4e2a\u7ebf\u7a0b\u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b\u5b8c\u6210\u64cd\u4f5c\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u4f8b\u5982\uff0c\u6211\u4eec\u5f88\u591a\u4eba\u559c\u6b22\u73a9\u7684\u738b\u8005\u8363\u8000\uff0c\u5f00\u9ed1\u7684\u65f6\u5019\uff0c\u5f97\u7b49\u6240\u6709\u4eba\u90fd\u4e0a\u7ebf\u4e4b\u540e\uff0c\u624d\u80fd\u5f00\u6253\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(45694).Z+"",width:"1796",height:"954"})}),"\n",(0,s.jsx)(e.p,{children:"CountDownLatch\u6a21\u4eff\u8fd9\u4e2a\u573a\u666f(\u53c2\u8003[18])\uff1a"}),"\n",(0,s.jsx)(e.p,{children:"\u521b\u5efa\u5927\u4e54\u3001\u5170\u9675\u738b\u3001\u5b89\u5176\u62c9\u3001\u54ea\u5412\u548c\u94e0\u7b49\u4e94\u4e2a\u73a9\u5bb6\uff0c\u4e3b\u7ebf\u7a0b\u5fc5\u987b\u5728\u4ed6\u4eec\u90fd\u5b8c\u6210\u786e\u8ba4\u540e\uff0c\u624d\u53ef\u4ee5\u7ee7\u7eed\u8fd0\u884c\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728\u8fd9\u6bb5\u4ee3\u7801\u4e2d\uff0c",(0,s.jsx)(e.code,{children:"new CountDownLatch(5)"}),"\u7528\u6237\u521b\u5efa\u521d\u59cb\u7684latch\u6570\u91cf\uff0c\u5404\u73a9\u5bb6\u901a\u8fc7",(0,s.jsx)(e.code,{children:"countDownLatch.countDown()"}),"\u5b8c\u6210\u72b6\u6001\u786e\u8ba4\uff0c\u4e3b\u7ebf\u7a0b\u901a\u8fc7",(0,s.jsx)(e.code,{children:"countDownLatch.await()"}),"\u7b49\u5f85\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'public static void main(String[] args) throws InterruptedException {\n    CountDownLatch countDownLatch = new CountDownLatch(5);\n\n    Thread \u5927\u4e54 = new Thread(countDownLatch::countDown);\n    Thread \u5170\u9675\u738b = new Thread(countDownLatch::countDown);\n    Thread \u5b89\u5176\u62c9 = new Thread(countDownLatch::countDown);\n    Thread \u54ea\u5412 = new Thread(countDownLatch::countDown);\n    Thread \u94e0 = new Thread(() -> {\n        try {\n            // \u7a0d\u7b49\uff0c\u4e0a\u4e2a\u536b\u751f\u95f4\uff0c\u9a6c\u4e0a\u5230...\n            Thread.sleep(1500);\n            countDownLatch.countDown();\n        } catch (InterruptedException ignored) {}\n    });\n\n    \u5927\u4e54.start();\n    \u5170\u9675\u738b.start();\n    \u5b89\u5176\u62c9.start();\n    \u54ea\u5412.start();\n    \u94e0.start();\n    countDownLatch.await();\n    System.out.println("\u6240\u6709\u73a9\u5bb6\u5df2\u7ecf\u5c31\u4f4d\uff01");\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u573a\u666f2. \u534f\u8c03\u5b50\u7ebf\u7a0b\u5f00\u59cb\u52a8\u4f5c\uff1a\u7edf\u4e00\u5404\u7ebf\u7a0b\u52a8\u4f5c\u5f00\u59cb\u7684\u65f6\u673a"})}),"\n",(0,s.jsx)(e.p,{children:"\u738b\u8005\u6e38\u620f\u4e2d\u4e5f\u6709\u7c7b\u4f3c\u7684\u573a\u666f\uff0c\u6e38\u620f\u5f00\u59cb\u65f6\uff0c\u5404\u73a9\u5bb6\u7684\u521d\u59cb\u72b6\u6001\u5fc5\u987b\u4e00\u81f4\u3002\u4e0d\u80fd\u6709\u7684\u73a9\u5bb6\u90fd\u51fa\u5b8c\u88c5\u4e86\uff0c\u6709\u7684\u624d\u964d\u751f\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u6240\u4ee5\u5927\u5bb6\u5f97\u4e00\u5757\u51fa\u751f\uff0c\u5728"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(97045).Z+"",width:"1792",height:"828"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5728\u8fd9\u4e2a\u573a\u666f\u4e2d\uff0c\u4ecd\u7136\u7528\u4e94\u4e2a\u7ebf\u7a0b\u4ee3\u8868\u5927\u4e54\u3001\u5170\u9675\u738b\u3001\u5b89\u5176\u62c9\u3001\u54ea\u5412\u548c\u94e0\u7b49\u4e94\u4e2a\u73a9\u5bb6\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5404\u73a9\u5bb6\u867d\u7136\u90fd\u8c03\u7528\u4e86",(0,s.jsx)(e.code,{children:"start()"}),"\u7ebf\u7a0b\uff0c\u4f46\u662f\u5b83\u4eec\u5728\u8fd0\u884c\u65f6\u90fd\u5728\u7b49\u5f85",(0,s.jsx)(e.code,{children:"countDownLatch"}),"\u7684\u4fe1\u53f7\uff0c\u5728\u4fe1\u53f7\u672a\u6536\u5230\u524d\uff0c\u5b83\u4eec\u4e0d\u4f1a\u5f80\u4e0b\u6267\u884c\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'public static void main(String[] args) throws InterruptedException {\n    CountDownLatch countDownLatch = new CountDownLatch(1);\n\n    Thread \u5927\u4e54 = new Thread(() -> waitToFight(countDownLatch));\n    Thread \u5170\u9675\u738b = new Thread(() -> waitToFight(countDownLatch));\n    Thread \u5b89\u5176\u62c9 = new Thread(() -> waitToFight(countDownLatch));\n    Thread \u54ea\u5412 = new Thread(() -> waitToFight(countDownLatch));\n    Thread \u94e0 = new Thread(() -> waitToFight(countDownLatch));\n\n    \u5927\u4e54.start();\n    \u5170\u9675\u738b.start();\n    \u5b89\u5176\u62c9.start();\n    \u54ea\u5412.start();\n    \u94e0.start();\n    Thread.sleep(1000);\n    countDownLatch.countDown();\n    System.out.println("\u654c\u65b9\u8fd8\u67095\u79d2\u8fbe\u5230\u6218\u573a\uff0c\u5168\u519b\u51fa\u51fb\uff01");\n}\n\nprivate static void waitToFight(CountDownLatch countDownLatch) {\n    try {\n        countDownLatch.await(); // \u5728\u6b64\u7b49\u5f85\u4fe1\u53f7\u518d\u7ee7\u7eed\n        System.out.println("\u6536\u5230\uff0c\u53d1\u8d77\u8fdb\u653b\uff01");\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n}\n'})}),"\n",(0,s.jsxs)(e.p,{children:["CountDownLatch\u7684",(0,s.jsx)(e.strong,{children:"\u6838\u5fc3\u65b9\u6cd5"}),"\u4e5f\u4e0d\u591a\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"await()"}),"\uff1a\u7b49\u5f85latch\u964d\u4e3a0\uff1b"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"boolean await(long timeout, TimeUnit unit)"}),"\uff1a\u7b49\u5f85latch\u964d\u4e3a0\uff0c\u4f46\u662f\u53ef\u4ee5\u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4\u3002\u6bd4\u5982\u6709\u73a9\u5bb6\u8d85\u65f6\u672a\u786e\u8ba4\uff0c\u90a3\u5c31\u91cd\u65b0\u5339\u914d\uff0c\u603b\u4e0d\u80fd\u4e3a\u4e86\u67d0\u4e2a\u73a9\u5bb6\u7b49\u5230\u5929\u8352\u5730\u8001\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"countDown()"}),"\uff1alatch\u6570\u91cf\u51cf1\uff1b"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"getCount()"}),"\uff1a\u83b7\u53d6\u5f53\u524d\u7684latch\u6570\u91cf\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"40cyclicbarrier\u540c\u6b65\u5c4f\u969c\u4e86\u89e3\u5417",children:"40.CyclicBarrier\uff08\u540c\u6b65\u5c4f\u969c\uff09\u4e86\u89e3\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"CyclicBarrier\u7684\u5b57\u9762\u610f\u601d\u662f\u53ef\u5faa\u73af\u4f7f\u7528\uff08Cyclic\uff09\u7684\u5c4f\u969c\uff08Barrier\uff09\u3002\u5b83\u8981\u505a\u7684\u4e8b\u60c5\u662f\uff0c\u8ba9\u4e00 \u7ec4\u7ebf\u7a0b\u5230\u8fbe\u4e00\u4e2a\u5c4f\u969c\uff08\u4e5f\u53ef\u4ee5\u53eb\u540c\u6b65\u70b9\uff09\u65f6\u88ab\u963b\u585e\uff0c\u76f4\u5230\u6700\u540e\u4e00\u4e2a\u7ebf\u7a0b\u5230\u8fbe\u5c4f\u969c\u65f6\uff0c\u5c4f\u969c\u624d\u4f1a\u5f00\u95e8\uff0c\u6240\u6709\u88ab\u5c4f\u969c\u62e6\u622a\u7684\u7ebf\u7a0b\u624d\u4f1a\u7ee7\u7eed\u8fd0\u884c\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5b83\u548cCountDownLatch\u7c7b\u4f3c\uff0c\u90fd\u53ef\u4ee5\u534f\u8c03\u591a\u7ebf\u7a0b\u7684\u7ed3\u675f\u52a8\u4f5c\uff0c\u5728\u5b83\u4eec\u7ed3\u675f\u540e\u90fd\u53ef\u4ee5\u6267\u884c\u7279\u5b9a\u52a8\u4f5c\uff0c\u4f46\u662f\u4e3a\u4ec0\u4e48\u8981\u6709CyclicBarrier\uff0c\u81ea\u7136\u662f\u5b83\u6709\u548cCountDownLatch\u4e0d\u540c\u7684\u5730\u65b9\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u4e0d\u77e5\u9053\u4f60\u542c\u6ca1\u542c\u8fc7\u4e00\u4e2a\u65b0\u4ebaUP\u4e3b\u5c0f\u7ea6\u7ff0\u53ef\u6c57\uff0c\u5c0f\u7ea6\u7ff0\u751f\u5e73\u6709\u4e24\u5927\u6068\u2014\u2014\u201c\u60f3\u7ed3\u8863\u7ed3\u8863\u4e0d\u4f9d,\u8ff7\u7231\u7406\u7231\u7406\u4e0d\u7406\u3002\u201d\u6211\u4eec\u6765\u8fd8\u539f\u4e00\u4e0b\u4e8b\u60c5\u7684\u7ecf\u8fc7\uff1a\u5c0f\u7ea6\u7ff0\u5728\u4eb2\u653f\u540e\u8ba4\u8bc6\u4e86\u65b0\u57a3\u7ed3\u8863\uff0c\u4e8e\u662f\u51b3\u5b9a\u7b2c\u4e00\u6b21\u9009\u5983\uff0c\u5411\u7ed3\u8863\u8868\u767d\uff0c\u7b49\u5f85\u56de\u5e94\u3002\u7136\u800c\u65b0\u57a3\u7ed3\u8863\u56de\u5e94\u5ac1\u7ed9\u4e86\u661f\u91ce\u6e90\uff0c\u5c0f\u7ea6\u7ff0\u4f24\u5fc3\u6b32\u7edd\uff0c\u53d1\u8a93\u751f\u5e73\u4e0d\u5a36\uff0c\u7a81\u7136\u53d1\u73b0\u4e86\u94c3\u6728\u7231\u7406\uff0c\u4e8e\u662f\u5c0f\u7ea6\u7ff0\u51b3\u5b9a\u7b2c\u4e8c\u6b21\u9009\u5983\uff0c\u6c42\u7231\u7406\u642d\u7406\uff0c\u7b49\u5f85\u56de\u5e94\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(6211).Z+"",width:"1282",height:"642"})}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u62ff\u4ee3\u7801\u6a21\u62df\u8fd9\u4e00\u573a\u666f\uff0c\u53d1\u73b0CountDownLatch\u65e0\u80fd\u4e3a\u529b\u4e86\uff0c\u56e0\u4e3aCountDownLatch\u7684\u4f7f\u7528\u662f\u4e00\u6b21\u6027\u7684\uff0c\u65e0\u6cd5\u91cd\u590d\u5229\u7528\uff0c\u800c\u8fd9\u91cc\u7b49\u5f85\u4e86\u4e24\u6b21\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u7528CyclicBarrier\u5c31\u53ef\u4ee5\u5b9e\u73b0\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u91cd\u590d\u5229\u7528\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(48226).Z+"",width:"2048",height:"2606"})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd0\u884c\u7ed3\u679c\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(42183).Z+"",width:"1188",height:"744"})}),"\n",(0,s.jsx)(e.p,{children:"CyclicBarrier\u6700\u6700\u6838\u5fc3\u7684\u65b9\u6cd5\uff0c\u4ecd\u7136\u662fawait()\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c\u5f53\u524d\u7ebf\u7a0b\u4e0d\u662f\u7b2c\u4e00\u4e2a\u5230\u8fbe\u5c4f\u969c\u7684\u8bdd\uff0c\u5b83\u5c06\u4f1a\u8fdb\u5165\u7b49\u5f85\uff0c\u76f4\u5230\u5176\u4ed6\u7ebf\u7a0b\u90fd\u5230\u8fbe\uff0c\u9664\u975e\u53d1\u751f",(0,s.jsx)(e.strong,{children:"\u88ab\u4e2d\u65ad"}),"\u3001",(0,s.jsx)(e.strong,{children:"\u5c4f\u969c\u88ab\u62c6\u9664"}),"\u3001",(0,s.jsx)(e.strong,{children:"\u5c4f\u969c\u88ab\u91cd\u8bbe"}),"\u7b49\u60c5\u51b5\uff1b"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u4e0a\u9762\u7684\u4f8b\u5b50\u62bd\u8c61\u4e00\u4e0b\uff0c\u672c\u8d28\u4e0a\u5b83\u7684\u6d41\u7a0b\u5c31\u662f\u8fd9\u6837\u5c31\u662f\u8fd9\u6837\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(64466).Z+"",width:"1321",height:"536"})}),"\n",(0,s.jsx)(e.h3,{id:"41cyclicbarrier\u548ccountdownlatch\u6709\u4ec0\u4e48\u533a\u522b",children:"41.CyclicBarrier\u548cCountDownLatch\u6709\u4ec0\u4e48\u533a\u522b\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u4e24\u8005\u6700\u6838\u5fc3\u7684\u533a\u522b[18]\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"CountDownLatch\u662f\u4e00\u6b21\u6027\u7684\uff0c\u800cCyclicBarrier\u5219\u53ef\u4ee5\u591a\u6b21\u8bbe\u7f6e\u5c4f\u969c\uff0c\u5b9e\u73b0\u91cd\u590d\u5229\u7528\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"CountDownLatch\u4e2d\u7684\u5404\u4e2a\u5b50\u7ebf\u7a0b\u4e0d\u53ef\u4ee5\u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b\uff0c\u53ea\u80fd\u5b8c\u6210\u81ea\u5df1\u7684\u4efb\u52a1\uff1b\u800cCyclicBarrier\u4e2d\u7684\u5404\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u7b49\u5f85\u5176\u4ed6\u7ebf\u7a0b"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5b83\u4eec\u533a\u522b\u7528\u4e00\u4e2a\u8868\u683c\u6574\u7406\uff1a"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"CyclicBarrier"}),(0,s.jsx)(e.th,{children:"CountDownLatch"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"CyclicBarrier\u662f\u53ef\u91cd\u7528\u7684\uff0c\u5176\u4e2d\u7684\u7ebf\u7a0b\u4f1a\u7b49\u5f85\u6240\u6709\u7684\u7ebf\u7a0b\u5b8c\u6210\u4efb\u52a1\u3002\u5c4a\u65f6\uff0c\u5c4f\u969c\u5c06\u88ab\u62c6\u9664\uff0c\u5e76\u53ef\u4ee5\u9009\u62e9\u6027\u5730\u505a\u4e00\u4e9b\u7279\u5b9a\u7684\u52a8\u4f5c\u3002"}),(0,s.jsx)(e.td,{children:"CountDownLatch\u662f\u4e00\u6b21\u6027\u7684\uff0c\u4e0d\u540c\u7684\u7ebf\u7a0b\u5728\u540c\u4e00\u4e2a\u8ba1\u6570\u5668\u4e0a\u5de5\u4f5c\uff0c\u76f4\u5230\u8ba1\u6570\u5668\u4e3a0."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"CyclicBarrier\u9762\u5411\u7684\u662f\u7ebf\u7a0b\u6570"}),(0,s.jsx)(e.td,{children:"CountDownLatch\u9762\u5411\u7684\u662f\u4efb\u52a1\u6570"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u5728\u4f7f\u7528CyclicBarrier\u65f6\uff0c\u4f60\u5fc5\u987b\u5728\u6784\u9020\u4e2d\u6307\u5b9a\u53c2\u4e0e\u534f\u4f5c\u7684\u7ebf\u7a0b\u6570\uff0c\u8fd9\u4e9b\u7ebf\u7a0b\u5fc5\u987b\u8c03\u7528await()\u65b9\u6cd5"}),(0,s.jsx)(e.td,{children:"\u4f7f\u7528CountDownLatch\u65f6\uff0c\u5219\u5fc5\u987b\u8981\u6307\u5b9a\u4efb\u52a1\u6570\uff0c\u81f3\u4e8e\u8fd9\u4e9b\u4efb\u52a1\u7531\u54ea\u4e9b\u7ebf\u7a0b\u5b8c\u6210\u65e0\u5173\u7d27\u8981"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"CyclicBarrier\u53ef\u4ee5\u5728\u6240\u6709\u7684\u7ebf\u7a0b\u91ca\u653e\u540e\u91cd\u65b0\u4f7f\u7528"}),(0,s.jsx)(e.td,{children:"CountDownLatch\u5728\u8ba1\u6570\u5668\u4e3a0\u65f6\u4e0d\u80fd\u518d\u4f7f\u7528"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u5728CyclicBarrier\u4e2d\uff0c\u5982\u679c\u67d0\u4e2a\u7ebf\u7a0b\u9047\u5230\u4e86\u4e2d\u65ad\u3001\u8d85\u65f6\u7b49\u95ee\u9898\u65f6\uff0c\u5219\u5904\u4e8eawait\u7684\u7ebf\u7a0b\u90fd\u4f1a\u51fa\u73b0\u95ee\u9898"}),(0,s.jsx)(e.td,{children:"\u5728CountDownLatch\u4e2d\uff0c\u5982\u679c\u67d0\u4e2a\u7ebf\u7a0b\u51fa\u73b0\u95ee\u9898\uff0c\u5176\u4ed6\u7ebf\u7a0b\u4e0d\u53d7\u5f71\u54cd"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"42semaphore\u4fe1\u53f7\u91cf\u4e86\u89e3\u5417",children:"42.Semaphore\uff08\u4fe1\u53f7\u91cf\uff09\u4e86\u89e3\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"Semaphore\uff08\u4fe1\u53f7\u91cf\uff09\u662f\u7528\u6765\u63a7\u5236\u540c\u65f6\u8bbf\u95ee\u7279\u5b9a\u8d44\u6e90\u7684\u7ebf\u7a0b\u6570\u91cf\uff0c\u5b83\u901a\u8fc7\u534f\u8c03\u5404\u4e2a\u7ebf\u7a0b\uff0c\u4ee5\u4fdd\u8bc1\u5408\u7406\u7684\u4f7f\u7528\u516c\u5171\u8d44\u6e90\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u542c\u8d77\u6765\u4f3c\u4e4e\u5f88\u62bd\u8c61\uff0c\u73b0\u5728\u6c7d\u8f66\u591a\u4e86\uff0c\u5f00\u8f66\u51fa\u95e8\u5728\u5916\u7684\u4e00\u4e2a\u8001\u5927\u96be\u95ee\u9898\u5c31\u662f\u505c\u8f66 \u3002\u505c\u8f66\u573a\u7684\u8f66\u4f4d\u662f\u6709\u9650\u7684\uff0c\u53ea\u80fd\u5141\u8bb8\u82e5\u5e72\u8f66\u8f86\u505c\u6cca\uff0c\u5982\u679c\u505c\u8f66\u573a\u8fd8\u6709\u7a7a\u4f4d\uff0c\u90a3\u4e48\u663e\u793a\u724c\u663e\u793a\u7684\u5c31\u662f\u7eff\u706f\u548c\u5269\u4f59\u7684\u8f66\u4f4d\uff0c\u8f66\u8f86\u5c31\u53ef\u4ee5\u9a76\u5165\uff1b\u5982\u679c\u505c\u8f66\u573a\u6ca1\u4f4d\u4e86\uff0c\u90a3\u4e48\u663e\u793a\u724c\u663e\u793a\u7684\u5c31\u662f\u7eff\u706f\u548c\u6570\u5b570\uff0c\u8f66\u8f86\u5c31\u5f97\u7b49\u5f85\u3002\u5982\u679c\u6ee1\u4e86\u7684\u505c\u8f66\u573a\u6709\u8f66\u79bb\u5f00\uff0c\u90a3\u4e48\u663e\u793a\u724c\u5c31\u53c8\u53d8\u7eff\uff0c\u663e\u793a\u7a7a\u8f66\u4f4d\u6570\u91cf\uff0c\u7b49\u5f85\u7684\u8f66\u8f86\u5c31\u80fd\u8fdb\u505c\u8f66\u573a\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(2494).Z+"",width:"577",height:"497"})}),"\n",(0,s.jsxs)(e.p,{children:["\u6211\u4eec\u628a\u8fd9\u4e2a\u4f8b\u5b50\u7c7b\u6bd4\u4e00\u4e0b\uff0c\u8f66\u8f86\u5c31\u662f\u7ebf\u7a0b\uff0c\u8fdb\u5165\u505c\u8f66\u573a\u5c31\u662f\u7ebf\u7a0b\u5728\u6267\u884c\uff0c\u79bb\u5f00\u505c\u8f66\u573a\u5c31\u662f\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\uff0c\u770b\u89c1\u7ea2\u706f\u5c31\u8868\u793a\u7ebf\u7a0b\u88ab\u963b\u585e\uff0c\u4e0d\u80fd\u6267\u884c\uff0cSemaphore\u7684\u672c\u8d28\u5c31\u662f",(0,s.jsx)(e.strong,{children:"\u534f\u8c03\u591a\u4e2a\u7ebf\u7a0b\u5bf9\u5171\u4eab\u8d44\u6e90\u7684\u83b7\u53d6"}),"\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(41473).Z+"",width:"2240",height:"1398"})}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u518d\u6765\u770b\u4e00\u4e2aSemaphore\u7684\u7528\u9014\uff1a\u5b83\u53ef\u4ee5\u7528\u4e8e\u505a\u6d41\u91cf\u63a7\u5236\uff0c\u7279\u522b\u662f\u516c\u7528\u8d44\u6e90\u6709\u9650\u7684\u5e94\u7528\u573a\u666f\uff0c\u6bd4\u5982\u6570\u636e\u5e93\u8fde\u63a5\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5047\u5982\u6709\u4e00\u4e2a\u9700\u6c42\uff0c\u8981\u8bfb\u53d6\u51e0\u4e07\u4e2a\u6587\u4ef6\u7684\u6570\u636e\uff0c\u56e0\u4e3a\u90fd\u662fIO\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u6211\u4eec\u53ef\u4ee5\u542f\u52a8\u51e0\u5341\u4e2a\u7ebf\u7a0b\u5e76\u53d1\u5730\u8bfb\u53d6\uff0c\u4f46\u662f\u5982\u679c\u8bfb\u5230\u5185\u5b58\u540e\uff0c\u8fd8\u9700\u8981\u5b58\u50a8\u5230\u6570\u636e\u5e93\u4e2d\uff0c\u800c\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u53ea\u670910\u4e2a\uff0c\u8fd9\u65f6\u6211\u4eec\u5fc5\u987b\u63a7\u5236\u53ea\u670910\u4e2a\u7ebf\u7a0b\u540c\u65f6\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u4fdd\u5b58\u6570\u636e\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u65e0\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8fd9\u4e2a\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528Semaphore\u6765\u505a\u6d41\u91cf\u63a7\u5236\uff0c\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'public class SemaphoreTest {\n    private static final int THREAD_COUNT = 30;\n    private static ExecutorService threadPool = Executors.newFixedThreadPool(THREAD_COUNT);\n    private static Semaphore s = new Semaphore(10);\n\n    public static void main(String[] args) {\n        for (int i = 0; i < THREAD_COUNT; i++) {\n            threadPool.execute(new Runnable() {\n                @Override\n                public void run() {\n                    try {\n                        s.acquire();\n                        System.out.println("save data");\n                        s.release();\n                    } catch (InterruptedException e) {\n                    }\n                }\n            });\n        }\n        threadPool.shutdown();\n    }\n}\n'})}),"\n",(0,s.jsxs)(e.p,{children:["\u5728\u4ee3\u7801\u4e2d\uff0c\u867d\u7136\u670930\u4e2a\u7ebf\u7a0b\u5728\u6267\u884c\uff0c\u4f46\u662f\u53ea\u5141\u8bb810\u4e2a\u5e76\u53d1\u6267\u884c\u3002Semaphore\u7684\u6784\u9020\u65b9\u6cd5",(0,s.jsx)(e.code,{children:" Semaphore\uff08int permits"}),"\uff09\u63a5\u53d7\u4e00\u4e2a\u6574\u578b\u7684\u6570\u5b57\uff0c\u8868\u793a\u53ef\u7528\u7684\u8bb8\u53ef\u8bc1\u6570\u91cf\u3002",(0,s.jsx)(e.code,{children:"Semaphore\uff0810\uff09"}),"\u8868\u793a\u5141\u8bb810\u4e2a\u7ebf\u7a0b\u83b7\u53d6\u8bb8\u53ef\u8bc1\uff0c\u4e5f\u5c31\u662f\u6700\u5927\u5e76\u53d1\u6570\u662f10\u3002Semaphore\u7684\u7528\u6cd5\u4e5f\u5f88\u7b80\u5355\uff0c\u9996\u5148\u7ebf\u7a0b\u4f7f\u7528 Semaphore\u7684acquire()\u65b9\u6cd5\u83b7\u53d6\u4e00\u4e2a\u8bb8\u53ef\u8bc1\uff0c\u4f7f\u7528\u5b8c\u4e4b\u540e\u8c03\u7528release()\u65b9\u6cd5\u5f52\u8fd8\u8bb8\u53ef\u8bc1\u3002\u8fd8\u53ef\u4ee5\u7528tryAcquire()\u65b9\u6cd5\u5c1d\u8bd5\u83b7\u53d6\u8bb8\u53ef\u8bc1\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"43exchanger-\u4e86\u89e3\u5417",children:"43.Exchanger \u4e86\u89e3\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"Exchanger\uff08\u4ea4\u6362\u8005\uff09\u662f\u4e00\u4e2a\u7528\u4e8e\u7ebf\u7a0b\u95f4\u534f\u4f5c\u7684\u5de5\u5177\u7c7b\u3002Exchanger\u7528\u4e8e\u8fdb\u884c\u7ebf\u7a0b\u95f4\u7684\u6570\u636e\u4ea4\u6362\u3002\u5b83\u63d0\u4f9b\u4e00\u4e2a\u540c\u6b65\u70b9\uff0c\u5728\u8fd9\u4e2a\u540c\u6b65\u70b9\uff0c\u4e24\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u4ea4\u6362\u5f7c\u6b64\u7684\u6570\u636e\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(51858).Z+"",width:"2260",height:"782"})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u4e24\u4e2a\u7ebf\u7a0b\u901a\u8fc7 exchange\u65b9\u6cd5\u4ea4\u6362\u6570\u636e\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u7ebf\u7a0b\u5148\u6267\u884cexchange()\u65b9\u6cd5\uff0c\u5b83\u4f1a\u4e00\u76f4\u7b49\u5f85\u7b2c\u4e8c\u4e2a\u7ebf\u7a0b\u4e5f\u6267\u884cexchange\u65b9\u6cd5\uff0c\u5f53\u4e24\u4e2a\u7ebf\u7a0b\u90fd\u5230\u8fbe\u540c\u6b65\u70b9\u65f6\uff0c\u8fd9\u4e24\u4e2a\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u4ea4\u6362\u6570\u636e\uff0c\u5c06\u672c\u7ebf\u7a0b\u751f\u4ea7\u51fa\u6765\u7684\u6570\u636e\u4f20\u9012\u7ed9\u5bf9\u65b9\u3002"}),"\n",(0,s.jsx)(e.p,{children:"Exchanger\u53ef\u4ee5\u7528\u4e8e\u9057\u4f20\u7b97\u6cd5\uff0c\u9057\u4f20\u7b97\u6cd5\u91cc\u9700\u8981\u9009\u51fa\u4e24\u4e2a\u4eba\u4f5c\u4e3a\u4ea4\u914d\u5bf9\u8c61\uff0c\u8fd9\u65f6\u5019\u4f1a\u4ea4\u6362\u4e24\u4eba\u7684\u6570\u636e\uff0c\u5e76\u4f7f\u7528\u4ea4\u53c9\u89c4\u5219\u5f97\u51fa2\u4e2a\u4ea4\u914d\u7ed3\u679c\u3002Exchanger\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6821\u5bf9\u5de5\u4f5c\uff0c\u6bd4\u5982\u6211\u4eec\u9700\u8981\u5c06\u7eb8\u5236\u94f6\u884c\u6d41\u6c34\u901a\u8fc7\u4eba\u5de5\u7684\u65b9\u5f0f\u5f55\u5165\u6210\u7535\u5b50\u94f6\u884c\u6d41\u6c34\uff0c\u4e3a\u4e86\u907f\u514d\u9519\u8bef\uff0c\u91c7\u7528AB\u5c97\u4e24\u4eba\u8fdb\u884c\u5f55\u5165\uff0c\u5f55\u5165\u5230Excel\u4e4b\u540e\uff0c\u7cfb\u7edf\u9700\u8981\u52a0\u8f7d\u8fd9\u4e24\u4e2aExcel\uff0c\u5e76\u5bf9\u4e24\u4e2aExcel\u6570\u636e\u8fdb\u884c\u6821\u5bf9\uff0c\u770b\u770b\u662f\u5426\u5f55\u5165\u4e00\u81f4\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'public class ExchangerTest {\n    private static final Exchanger<String> exgr = new Exchanger<String>();\n    private static ExecutorService threadPool = Executors.newFixedThreadPool(2);\n\n    public static void main(String[] args) {\n        threadPool.execute(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    String A = "\u94f6\u884c\u6d41\u6c34A"; // A\u5f55\u5165\u94f6\u884c\u6d41\u6c34\u6570\u636e \n                    exgr.exchange(A);\n                } catch (InterruptedException e) {\n                }\n            }\n        });\n        threadPool.execute(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    String B = "\u94f6\u884c\u6d41\u6c34B"; // B\u5f55\u5165\u94f6\u884c\u6d41\u6c34\u6570\u636e \n                    String A = exgr.exchange("B");\n                    System.out.println("A\u548cB\u6570\u636e\u662f\u5426\u4e00\u81f4\uff1a" + A.equals(B) + "\uff0cA\u5f55\u5165\u7684\u662f\uff1a"\n                            + A + "\uff0cB\u5f55\u5165\u662f\uff1a" + B);\n                } catch (InterruptedException e) {\n                }\n            }\n        });\n        threadPool.shutdown();\n    }\n}\n'})}),"\n",(0,s.jsxs)(e.p,{children:["\u5047\u5982\u4e24\u4e2a\u7ebf\u7a0b\u6709\u4e00\u4e2a\u6ca1\u6709\u6267\u884cexchange()\u65b9\u6cd5\uff0c\u5219\u4f1a\u4e00\u76f4\u7b49\u5f85\uff0c\u5982\u679c\u62c5\u5fc3\u6709\u7279\u6b8a\u60c5\u51b5\u53d1\u751f\uff0c\u907f\u514d\u4e00\u76f4\u7b49\u5f85\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,s.jsx)(e.code,{children:"exchange(V x, long timeOut, TimeUnit unit) "}),"\u8bbe\u7f6e\u6700\u5927\u7b49\u5f85\u65f6\u957f\u3002"]}),"\n",(0,s.jsx)(e.h2,{id:"\u7ebf\u7a0b\u6c60",children:"\u7ebf\u7a0b\u6c60"}),"\n",(0,s.jsx)(e.h3,{id:"44\u4ec0\u4e48\u662f\u7ebf\u7a0b\u6c60",children:"44.\u4ec0\u4e48\u662f\u7ebf\u7a0b\u6c60\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u7ebf\u7a0b\u6c60\uff1a"})," \u7b80\u5355\u7406\u89e3\uff0c\u5b83\u5c31\u662f\u4e00\u4e2a\u7ba1\u7406\u7ebf\u7a0b\u7684\u6c60\u5b50\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(59494).Z+"",width:"574",height:"222"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u5b83\u5e2e\u6211\u4eec\u7ba1\u7406\u7ebf\u7a0b\uff0c\u907f\u514d\u589e\u52a0\u521b\u5efa\u7ebf\u7a0b\u548c\u9500\u6bc1\u7ebf\u7a0b\u7684\u8d44\u6e90\u635f\u8017"}),"\u3002\u56e0\u4e3a\u7ebf\u7a0b\u5176\u5b9e\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\uff0c\u9700\u8981\u7ecf\u8fc7\u7c7b\u52a0\u8f7d\u8fc7\u7a0b\uff0c\u9500\u6bc1\u4e00\u4e2a\u5bf9\u8c61\uff0c\u9700\u8981\u8d70GC\u5783\u573e\u56de\u6536\u6d41\u7a0b\uff0c\u90fd\u662f\u9700\u8981\u8d44\u6e90\u5f00\u9500\u7684\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u63d0\u9ad8\u54cd\u5e94\u901f\u5ea6\u3002"})," \u5982\u679c\u4efb\u52a1\u5230\u8fbe\u4e86\uff0c\u76f8\u5bf9\u4e8e\u4ece\u7ebf\u7a0b\u6c60\u62ff\u7ebf\u7a0b\uff0c\u91cd\u65b0\u53bb\u521b\u5efa\u4e00\u6761\u7ebf\u7a0b\u6267\u884c\uff0c\u901f\u5ea6\u80af\u5b9a\u6162\u5f88\u591a\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u91cd\u590d\u5229\u7528\u3002"})," \u7ebf\u7a0b\u7528\u5b8c\uff0c\u518d\u653e\u56de\u6c60\u5b50\uff0c\u53ef\u4ee5\u8fbe\u5230\u91cd\u590d\u5229\u7528\u7684\u6548\u679c\uff0c\u8282\u7701\u8d44\u6e90\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"45\u80fd\u8bf4\u8bf4\u5de5\u4f5c\u4e2d\u7ebf\u7a0b\u6c60\u7684\u5e94\u7528\u5417",children:"45.\u80fd\u8bf4\u8bf4\u5de5\u4f5c\u4e2d\u7ebf\u7a0b\u6c60\u7684\u5e94\u7528\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u4e4b\u524d\u6211\u4eec\u6709\u4e00\u4e2a\u548c\u7b2c\u4e09\u65b9\u5bf9\u63a5\u7684\u9700\u6c42\uff0c\u9700\u8981\u5411\u7b2c\u4e09\u65b9\u63a8\u9001\u6570\u636e\uff0c\u5f15\u5165\u4e86\u591a\u7ebf\u7a0b\u6765\u63d0\u5347\u6570\u636e\u63a8\u9001\u7684\u6548\u7387\uff0c\u5176\u4e2d\u7528\u5230\u4e86\u7ebf\u7a0b\u6c60\u6765\u7ba1\u7406\u7ebf\u7a0b\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(10594).Z+"",width:"1016",height:"339"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e3b\u8981\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(9665).Z+"",width:"2048",height:"3946"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5b8c\u6574\u53ef\u8fd0\u884c\u4ee3\u7801\u5730\u5740\uff1a",(0,s.jsx)(e.a,{href:"https://gitee.com/fighter3/thread-demo.git",children:"https://gitee.com/fighter3/thread-demo.git"})]}),"\n",(0,s.jsx)(e.p,{children:"\u7ebf\u7a0b\u6c60\u7684\u53c2\u6570\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"corePoolSize\uff1a\u7ebf\u7a0b\u6838\u5fc3\u53c2\u6570\u9009\u62e9\u4e86CPU\u6570\xd72"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"maximumPoolSize\uff1a\u6700\u5927\u7ebf\u7a0b\u6570\u9009\u62e9\u4e86\u548c\u6838\u5fc3\u7ebf\u7a0b\u6570\u76f8\u540c"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"keepAliveTime\uff1a\u975e\u6838\u5fc3\u95f2\u7f6e\u7ebf\u7a0b\u5b58\u6d3b\u65f6\u95f4\u76f4\u63a5\u7f6e\u4e3a0"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"unit\uff1a\u975e\u6838\u5fc3\u7ebf\u7a0b\u4fdd\u6301\u5b58\u6d3b\u7684\u65f6\u95f4\u9009\u62e9\u4e86 TimeUnit.SECONDS \u79d2"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"workQueue\uff1a\u7ebf\u7a0b\u6c60\u7b49\u5f85\u961f\u5217\uff0c\u4f7f\u7528 LinkedBlockingQueue\u963b\u585e\u961f\u5217"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u540c\u65f6\u8fd8\u7528\u4e86synchronized \u6765\u52a0\u9501\uff0c\u4fdd\u8bc1\u6570\u636e\u4e0d\u4f1a\u88ab\u91cd\u590d\u63a8\u9001\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"  synchronized (PushProcessServiceImpl.class) {}\n"})}),"\n",(0,s.jsx)(e.p,{children:"ps:\u8fd9\u4e2a\u4f8b\u5b50\u53ea\u662f\u7b80\u5355\u5730\u8fdb\u884c\u4e86\u6570\u636e\u63a8\u9001\uff0c\u5b9e\u9645\u4e0a\u8fd8\u53ef\u4ee5\u7ed3\u5408\u5176\u4ed6\u7684\u4e1a\u52a1\uff0c\u50cf\u4ec0\u4e48\u6570\u636e\u6e05\u6d17\u554a\u3001\u6570\u636e\u7edf\u8ba1\u554a\uff0c\u90fd\u53ef\u4ee5\u5957\u7528\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"46\u80fd\u7b80\u5355\u8bf4\u4e00\u4e0b\u7ebf\u7a0b\u6c60\u7684\u5de5\u4f5c\u6d41\u7a0b\u5417",children:"46.\u80fd\u7b80\u5355\u8bf4\u4e00\u4e0b\u7ebf\u7a0b\u6c60\u7684\u5de5\u4f5c\u6d41\u7a0b\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u7528\u4e00\u4e2a\u901a\u4fd7\u7684\u6bd4\u55bb\uff1a"}),"\n",(0,s.jsx)(e.p,{children:"\u6709\u4e00\u4e2a\u8425\u4e1a\u5385\uff0c\u603b\u5171\u6709\u516d\u4e2a\u7a97\u53e3\uff0c\u73b0\u5728\u5f00\u653e\u4e86\u4e09\u4e2a\u7a97\u53e3\uff0c\u73b0\u5728\u6709\u4e09\u4e2a\u7a97\u53e3\u5750\u7740\u4e09\u4e2a\u8425\u4e1a\u5458\u5c0f\u59d0\u59d0\u5728\u8425\u4e1a\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u8001\u4e09\u53bb\u529e\u4e1a\u52a1\uff0c\u53ef\u80fd\u4f1a\u9047\u5230\u4ec0\u4e48\u60c5\u51b5\u5462\uff1f"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u8001\u4e09\u53d1\u73b0\u6709\u7a7a\u95f4\u7684\u5728\u8425\u4e1a\u7684\u7a97\u53e3\uff0c\u76f4\u63a5\u53bb\u627e\u5c0f\u59d0\u59d0\u529e\u7406\u4e1a\u52a1\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(12532).Z+"",width:"686",height:"197"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsx)(e.li,{children:"\u8001\u4e09\u53d1\u73b0\u6ca1\u6709\u7a7a\u95f2\u7684\u7a97\u53e3\uff0c\u5c31\u5728\u6392\u961f\u533a\u6392\u961f\u7b49\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(89709).Z+"",width:"704",height:"232"})}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsx)(e.li,{children:"\u8001\u4e09\u53d1\u73b0\u6ca1\u6709\u7a7a\u95f2\u7684\u7a97\u53e3\uff0c\u7b49\u5f85\u533a\u4e5f\u6ee1\u4e86\uff0c\u868c\u57e0\u4f4f\u4e86\uff0c\u7ecf\u7406\u4e00\u770b\uff0c\u5c31\u8ba9\u4f11\u606f\u7684\u5c0f\u59d0\u59d0\u8d76\u7d27\u56de\u6765\u4e0a\u73ed\uff0c\u7b49\u5f85\u533a\u53f7\u9760\u524d\u7684\u8d76\u7d27\u53bb\u65b0\u7a97\u53e3\u529e\uff0c\u8001\u4e09\u53bb\u6392\u961f\u533a\u6392\u961f\u3002\u5c0f\u59d0\u59d0\u6bd4\u8f83\u8f9b\u82e6\uff0c\u5047\u5982\u4e00\u6bb5\u65f6\u95f4\u53d1\u73b0\u4ed6\u4eec\u53ef\u4ee5\u4e0d\u7528\u63a5\u7740\u8425\u4e1a\uff0c\u7ecf\u7406\u5c31\u8ba9\u5979\u4eec\u63a5\u7740\u4f11\u606f\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(55396).Z+"",width:"772",height:"334"})}),"\n",(0,s.jsxs)(e.ol,{start:"4",children:["\n",(0,s.jsx)(e.li,{children:"\u8001\u4e09\u4e00\u770b\uff0c\u516d\u4e2a\u7a97\u53e3\u90fd\u6ee1\u4e86\uff0c\u7b49\u5f85\u533a\u4e5f\u6ca1\u4f4d\u7f6e\u4e86\u3002\u8001\u4e09\u6025\u4e86\uff0c\u8981\u95f9\uff0c\u7ecf\u7406\u8d76\u7d27\u51fa\u6765\u4e86\uff0c\u7ecf\u7406\u8be5\u600e\u4e48\u529e\u5462\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(39526).Z+"",width:"768",height:"309"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u94f6\u884c\u7cfb\u7edf\u5df2\u7ecf\u762b\u75ea"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u8c01\u53eb\u4f60\u6765\u529e\u7684\u4f60\u627e\u8c01\u53bb"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u770b\u4f60\u6bd4\u8f83\u6025\uff0c\u53bb\u961f\u91cc\u52a0\u4e2a\u585e"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u4eca\u5929\u6ca1\u529e\u6cd5\uff0c\u4e0d\u884c\u4f60\u770b\u6539\u4e00\u5929"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u4e0a\u9762\u7684\u8fd9\u4e2a\u6d41\u7a0b\u51e0\u4e4e\u5c31\u8ddf JDK \u7ebf\u7a0b\u6c60\u7684\u5927\u81f4\u6d41\u7a0b\u7c7b\u4f3c\uff0c"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u8425\u4e1a\u4e2d\u7684 3\u4e2a\u7a97\u53e3\u5bf9\u5e94\u6838\u5fc3\u7ebf\u7a0b\u6c60\u6570\uff1acorePoolSize"}),"\n",(0,s.jsx)(e.li,{children:"\u603b\u7684\u8425\u4e1a\u7a97\u53e3\u65706\u5bf9\u5e94\uff1amaximumPoolSize"}),"\n",(0,s.jsx)(e.li,{children:"\u6253\u5f00\u7684\u4e34\u65f6\u7a97\u53e3\u5728\u591a\u5c11\u65f6\u95f4\u5185\u65e0\u4eba\u529e\u7406\u5219\u5173\u95ed\u5bf9\u5e94\uff1aunit"}),"\n",(0,s.jsx)(e.li,{children:"\u6392\u961f\u533a\u5c31\u662f\u7b49\u5f85\u961f\u5217\uff1aworkQueue"}),"\n",(0,s.jsx)(e.li,{children:"\u65e0\u6cd5\u529e\u7406\u7684\u65f6\u5019\u94f6\u884c\u7ed9\u51fa\u7684\u89e3\u51b3\u65b9\u6cd5\u5bf9\u5e94\uff1aRejectedExecutionHandler"}),"\n",(0,s.jsx)(e.li,{children:"threadFactory \u8be5\u53c2\u6570\u5728 JDK \u4e2d\u662f \u7ebf\u7a0b\u5de5\u5382\uff0c\u7528\u6765\u521b\u5efa\u7ebf\u7a0b\u5bf9\u8c61\uff0c\u4e00\u822c\u4e0d\u4f1a\u52a8\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6240\u4ee5\u6211\u4eec\u7ebf\u7a0b\u6c60\u7684\u5de5\u4f5c\u6d41\u7a0b\u4e5f\u6bd4\u8f83\u597d\u7406\u89e3\u4e86\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u7ebf\u7a0b\u6c60\u521a\u521b\u5efa\u65f6\uff0c\u91cc\u9762\u6ca1\u6709\u4e00\u4e2a\u7ebf\u7a0b\u3002\u4efb\u52a1\u961f\u5217\u662f\u4f5c\u4e3a\u53c2\u6570\u4f20\u8fdb\u6765\u7684\u3002\u4e0d\u8fc7\uff0c\u5c31\u7b97\u961f\u5217\u91cc\u9762\u6709\u4efb\u52a1\uff0c\u7ebf\u7a0b\u6c60\u4e5f\u4e0d\u4f1a\u9a6c\u4e0a\u6267\u884c\u5b83\u4eec\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5f53\u8c03\u7528 execute() \u65b9\u6cd5\u6dfb\u52a0\u4e00\u4e2a\u4efb\u52a1\u65f6\uff0c\u7ebf\u7a0b\u6c60\u4f1a\u505a\u5982\u4e0b\u5224\u65ad\uff1a"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u6b63\u5728\u8fd0\u884c\u7684\u7ebf\u7a0b\u6570\u91cf\u5c0f\u4e8e corePoolSize\uff0c\u90a3\u4e48\u9a6c\u4e0a\u521b\u5efa\u7ebf\u7a0b\u8fd0\u884c\u8fd9\u4e2a\u4efb\u52a1\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u6b63\u5728\u8fd0\u884c\u7684\u7ebf\u7a0b\u6570\u91cf\u5927\u4e8e\u6216\u7b49\u4e8e corePoolSize\uff0c\u90a3\u4e48\u5c06\u8fd9\u4e2a\u4efb\u52a1\u653e\u5165\u961f\u5217\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u8fd9\u65f6\u5019\u961f\u5217\u6ee1\u4e86\uff0c\u800c\u4e14\u6b63\u5728\u8fd0\u884c\u7684\u7ebf\u7a0b\u6570\u91cf\u5c0f\u4e8e maximumPoolSize\uff0c\u90a3\u4e48\u8fd8\u662f\u8981\u521b\u5efa\u975e\u6838\u5fc3\u7ebf\u7a0b\u7acb\u523b\u8fd0\u884c\u8fd9\u4e2a\u4efb\u52a1\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u961f\u5217\u6ee1\u4e86\uff0c\u800c\u4e14\u6b63\u5728\u8fd0\u884c\u7684\u7ebf\u7a0b\u6570\u91cf\u5927\u4e8e\u6216\u7b49\u4e8e maximumPoolSize\uff0c\u90a3\u4e48\u7ebf\u7a0b\u6c60\u4f1a\u6839\u636e\u62d2\u7edd\u7b56\u7565\u6765\u5bf9\u5e94\u5904\u7406\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(1023).Z+"",width:"715",height:"466"})}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u5b8c\u6210\u4efb\u52a1\u65f6\uff0c\u5b83\u4f1a\u4ece\u961f\u5217\u4e2d\u53d6\u4e0b\u4e00\u4e2a\u4efb\u52a1\u6765\u6267\u884c\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u65e0\u4e8b\u53ef\u505a\uff0c\u8d85\u8fc7\u4e00\u5b9a\u7684\u65f6\u95f4\uff08keepAliveTime\uff09\u65f6\uff0c\u7ebf\u7a0b\u6c60\u4f1a\u5224\u65ad\uff0c\u5982\u679c\u5f53\u524d\u8fd0\u884c\u7684\u7ebf\u7a0b\u6570\u5927\u4e8e corePoolSize\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7ebf\u7a0b\u5c31\u88ab\u505c\u6389\u3002\u6240\u4ee5\u7ebf\u7a0b\u6c60\u7684\u6240\u6709\u4efb\u52a1\u5b8c\u6210\u540e\uff0c\u5b83\u6700\u7ec8\u4f1a\u6536\u7f29\u5230 corePoolSize \u7684\u5927\u5c0f\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"47\u7ebf\u7a0b\u6c60\u4e3b\u8981\u53c2\u6570\u6709\u54ea\u4e9b",children:"47.\u7ebf\u7a0b\u6c60\u4e3b\u8981\u53c2\u6570\u6709\u54ea\u4e9b\uff1f"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(37407).Z+"",width:"782",height:"613"})}),"\n",(0,s.jsxs)(e.p,{children:["\u7ebf\u7a0b\u6c60\u6709\u4e03\u5927\u53c2\u6570\uff0c\u9700\u8981\u91cd\u70b9\u5173\u6ce8",(0,s.jsx)(e.code,{children:"corePoolSize"}),"\u3001",(0,s.jsx)(e.code,{children:"maximumPoolSize"}),"\u3001",(0,s.jsx)(e.code,{children:"workQueue"}),"\u3001",(0,s.jsx)(e.code,{children:"handler"}),"\u8fd9\u56db\u4e2a\u3002"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"corePoolSize"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u6b64\u503c\u662f\u7528\u6765\u521d\u59cb\u5316\u7ebf\u7a0b\u6c60\u4e2d\u6838\u5fc3\u7ebf\u7a0b\u6570\uff0c\u5f53\u7ebf\u7a0b\u6c60\u4e2d\u7ebf\u7a0b\u6c60\u6570< ",(0,s.jsx)(e.code,{children:"corePoolSize"}),"\u65f6\uff0c\u7cfb\u7edf\u9ed8\u8ba4\u662f\u6dfb\u52a0\u4e00\u4e2a\u4efb\u52a1\u624d\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u6c60\u3002\u5f53\u7ebf\u7a0b\u6570 = corePoolSize\u65f6\uff0c\u65b0\u4efb\u52a1\u4f1a\u8ffd\u52a0\u5230workQueue\u4e2d\u3002"]}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsx)(e.li,{children:"maximumPoolSize"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"maximumPoolSize"}),"\u8868\u793a\u5141\u8bb8\u7684\u6700\u5927\u7ebf\u7a0b\u6570 = (\u975e\u6838\u5fc3\u7ebf\u7a0b\u6570+\u6838\u5fc3\u7ebf\u7a0b\u6570)\uff0c\u5f53",(0,s.jsx)(e.code,{children:"BlockingQueue"}),"\u4e5f\u6ee1\u4e86\uff0c\u4f46\u7ebf\u7a0b\u6c60\u4e2d\u603b\u7ebf\u7a0b\u6570 < ",(0,s.jsx)(e.code,{children:"maximumPoolSize"}),"\u65f6\u5019\u5c31\u4f1a\u518d\u6b21\u521b\u5efa\u65b0\u7684\u7ebf\u7a0b\u3002"]}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsx)(e.li,{children:"keepAliveTime"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u975e\u6838\u5fc3\u7ebf\u7a0b =(maximumPoolSize - corePoolSize ) ,\u975e\u6838\u5fc3\u7ebf\u7a0b\u95f2\u7f6e\u4e0b\u6765\u4e0d\u5e72\u6d3b\u6700\u591a\u5b58\u6d3b\u65f6\u95f4\u3002"}),"\n",(0,s.jsxs)(e.ol,{start:"4",children:["\n",(0,s.jsx)(e.li,{children:"unit"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7ebf\u7a0b\u6c60\u4e2d\u975e\u6838\u5fc3\u7ebf\u7a0b\u4fdd\u6301\u5b58\u6d3b\u7684\u65f6\u95f4\u7684\u5355\u4f4d"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"TimeUnit.DAYS;\t\t\u5929"}),"\n",(0,s.jsx)(e.li,{children:"TimeUnit.HOURS;\t\t\u5c0f\u65f6"}),"\n",(0,s.jsx)(e.li,{children:"TimeUnit.MINUTES;\t\u5206\u949f"}),"\n",(0,s.jsx)(e.li,{children:"TimeUnit.SECONDS;\t\u79d2"}),"\n",(0,s.jsx)(e.li,{children:"TimeUnit.MILLISECONDS;  \u6beb\u79d2"}),"\n",(0,s.jsx)(e.li,{children:"TimeUnit.MICROSECONDS;  \u5fae\u79d2"}),"\n",(0,s.jsx)(e.li,{children:"TimeUnit.NANOSECONDS;\t  \u7eb3\u79d2"}),"\n"]}),"\n",(0,s.jsxs)(e.ol,{start:"5",children:["\n",(0,s.jsx)(e.li,{children:"workQueue"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u7ebf\u7a0b\u6c60\u7b49\u5f85\u961f\u5217\uff0c\u7ef4\u62a4\u7740\u7b49\u5f85\u6267\u884c\u7684",(0,s.jsx)(e.code,{children:"Runnable"}),"\u5bf9\u8c61\u3002\u5f53\u8fd0\u884c\u5f53\u7ebf\u7a0b\u6570= corePoolSize\u65f6\uff0c\u65b0\u7684\u4efb\u52a1\u4f1a\u88ab\u6dfb\u52a0\u5230",(0,s.jsx)(e.code,{children:"workQueue"}),"\u4e2d\uff0c\u5982\u679c",(0,s.jsx)(e.code,{children:"workQueue"}),"\u4e5f\u6ee1\u4e86\u5219\u5c1d\u8bd5\u7528\u975e\u6838\u5fc3\u7ebf\u7a0b\u6267\u884c\u4efb\u52a1\uff0c\u7b49\u5f85\u961f\u5217\u5e94\u8be5\u5c3d\u91cf\u7528\u6709\u754c\u7684\u3002"]}),"\n",(0,s.jsxs)(e.ol,{start:"6",children:["\n",(0,s.jsx)(e.li,{children:"threadFactory"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u521b\u5efa\u4e00\u4e2a\u65b0\u7ebf\u7a0b\u65f6\u4f7f\u7528\u7684\u5de5\u5382\uff0c\u53ef\u4ee5\u7528\u6765\u8bbe\u5b9a\u7ebf\u7a0b\u540d\u3001\u662f\u5426\u4e3adaemon\u7ebf\u7a0b\u7b49\u7b49\u3002"}),"\n",(0,s.jsxs)(e.ol,{start:"7",children:["\n",(0,s.jsx)(e.li,{children:"handler"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"corePoolSize"}),"\u3001",(0,s.jsx)(e.code,{children:"workQueue"}),"\u3001",(0,s.jsx)(e.code,{children:"maximumPoolSize"}),"\u90fd\u4e0d\u53ef\u7528\u7684\u65f6\u5019\u6267\u884c\u7684\u9971\u548c\u7b56\u7565\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"48\u7ebf\u7a0b\u6c60\u7684\u62d2\u7edd\u7b56\u7565\u6709\u54ea\u4e9b",children:"48.\u7ebf\u7a0b\u6c60\u7684\u62d2\u7edd\u7b56\u7565\u6709\u54ea\u4e9b\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u7c7b\u6bd4\u524d\u9762\u7684\u4f8b\u5b50\uff0c\u65e0\u6cd5\u529e\u7406\u4e1a\u52a1\u65f6\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u5e2e\u52a9\u8bb0\u5fc6\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(66945).Z+"",width:"649",height:"600"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"AbortPolicy \uff1a\u76f4\u63a5\u629b\u51fa\u5f02\u5e38\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6b64\u7b56\u7565"}),"\n",(0,s.jsx)(e.li,{children:"CallerRunsPolicy\uff1a\u7528\u8c03\u7528\u8005\u6240\u5728\u7684\u7ebf\u7a0b\u6765\u6267\u884c\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"DiscardOldestPolicy\uff1a\u4e22\u5f03\u963b\u585e\u961f\u5217\u91cc\u6700\u8001\u7684\u4efb\u52a1\uff0c\u4e5f\u5c31\u662f\u961f\u5217\u91cc\u9760\u524d\u7684\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"DiscardPolicy \uff1a\u5f53\u524d\u4efb\u52a1\u76f4\u63a5\u4e22\u5f03"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u60f3\u5b9e\u73b0\u81ea\u5df1\u7684\u62d2\u7edd\u7b56\u7565\uff0c\u5b9e\u73b0RejectedExecutionHandler\u63a5\u53e3\u5373\u53ef\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"49\u7ebf\u7a0b\u6c60\u6709\u54ea\u51e0\u79cd\u5de5\u4f5c\u961f\u5217",children:"49.\u7ebf\u7a0b\u6c60\u6709\u54ea\u51e0\u79cd\u5de5\u4f5c\u961f\u5217\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u5e38\u7528\u7684\u963b\u585e\u961f\u5217\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(30725).Z+"",width:"986",height:"474"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ArrayBlockingQueue\uff1aArrayBlockingQueue\uff08\u6709\u754c\u961f\u5217\uff09\u662f\u4e00\u4e2a\u7528\u6570\u7ec4\u5b9e\u73b0\u7684\u6709\u754c\u963b\u585e\u961f\u5217\uff0c\u6309FIFO\u6392\u5e8f\u91cf\u3002"}),"\n",(0,s.jsx)(e.li,{children:"LinkedBlockingQueue\uff1aLinkedBlockingQueue\uff08\u53ef\u8bbe\u7f6e\u5bb9\u91cf\u961f\u5217\uff09\u662f\u57fa\u4e8e\u94fe\u8868\u7ed3\u6784\u7684\u963b\u585e\u961f\u5217\uff0c\u6309FIFO\u6392\u5e8f\u4efb\u52a1\uff0c\u5bb9\u91cf\u53ef\u4ee5\u9009\u62e9\u8fdb\u884c\u8bbe\u7f6e\uff0c\u4e0d\u8bbe\u7f6e\u7684\u8bdd\uff0c\u5c06\u662f\u4e00\u4e2a\u65e0\u8fb9\u754c\u7684\u963b\u585e\u961f\u5217\uff0c\u6700\u5927\u957f\u5ea6\u4e3aInteger.MAX_VALUE\uff0c\u541e\u5410\u91cf\u901a\u5e38\u8981\u9ad8\u4e8eArrayBlockingQuene\uff1bnewFixedThreadPool\u7ebf\u7a0b\u6c60\u4f7f\u7528\u4e86\u8fd9\u4e2a\u961f\u5217"}),"\n",(0,s.jsx)(e.li,{children:"DelayQueue\uff1aDelayQueue\uff08\u5ef6\u8fdf\u961f\u5217\uff09\u662f\u4e00\u4e2a\u4efb\u52a1\u5b9a\u65f6\u5468\u671f\u7684\u5ef6\u8fdf\u6267\u884c\u7684\u961f\u5217\u3002\u6839\u636e\u6307\u5b9a\u7684\u6267\u884c\u65f6\u95f4\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u5426\u5219\u6839\u636e\u63d2\u5165\u5230\u961f\u5217\u7684\u5148\u540e\u6392\u5e8f\u3002newScheduledThreadPool\u7ebf\u7a0b\u6c60\u4f7f\u7528\u4e86\u8fd9\u4e2a\u961f\u5217\u3002"}),"\n",(0,s.jsx)(e.li,{children:"PriorityBlockingQueue\uff1aPriorityBlockingQueue\uff08\u4f18\u5148\u7ea7\u961f\u5217\uff09\u662f\u5177\u6709\u4f18\u5148\u7ea7\u7684\u65e0\u754c\u963b\u585e\u961f\u5217"}),"\n",(0,s.jsx)(e.li,{children:"SynchronousQueue\uff1aSynchronousQueue\uff08\u540c\u6b65\u961f\u5217\uff09\u662f\u4e00\u4e2a\u4e0d\u5b58\u50a8\u5143\u7d20\u7684\u963b\u585e\u961f\u5217\uff0c\u6bcf\u4e2a\u63d2\u5165\u64cd\u4f5c\u5fc5\u987b\u7b49\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528\u79fb\u9664\u64cd\u4f5c\uff0c\u5426\u5219\u63d2\u5165\u64cd\u4f5c\u4e00\u76f4\u5904\u4e8e\u963b\u585e\u72b6\u6001\uff0c\u541e\u5410\u91cf\u901a\u5e38\u8981\u9ad8\u4e8eLinkedBlockingQuene\uff0cnewCachedThreadPool\u7ebf\u7a0b\u6c60\u4f7f\u7528\u4e86\u8fd9\u4e2a\u961f\u5217\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"50\u7ebf\u7a0b\u6c60\u63d0\u4ea4execute\u548csubmit\u6709\u4ec0\u4e48\u533a\u522b",children:"50.\u7ebf\u7a0b\u6c60\u63d0\u4ea4execute\u548csubmit\u6709\u4ec0\u4e48\u533a\u522b\uff1f"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"execute \u7528\u4e8e\u63d0\u4ea4\u4e0d\u9700\u8981\u8fd4\u56de\u503c\u7684\u4efb\u52a1"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"threadsPool.execute(new Runnable() { \n    @Override public void run() { \n        // TODO Auto-generated method stub } \n    });\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsx)(e.li,{children:"submit()\u65b9\u6cd5\u7528\u4e8e\u63d0\u4ea4\u9700\u8981\u8fd4\u56de\u503c\u7684\u4efb\u52a1\u3002\u7ebf\u7a0b\u6c60\u4f1a\u8fd4\u56de\u4e00\u4e2afuture\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u901a\u8fc7\u8fd9\u4e2a future\u5bf9\u8c61\u53ef\u4ee5\u5224\u65ad\u4efb\u52a1\u662f\u5426\u6267\u884c\u6210\u529f\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7future\u7684get()\u65b9\u6cd5\u6765\u83b7\u53d6\u8fd4\u56de\u503c"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"Future<Object> future = executor.submit(harReturnValuetask); \ntry { Object s = future.get(); } catch (InterruptedException e) { \n    // \u5904\u7406\u4e2d\u65ad\u5f02\u5e38 \n} catch (ExecutionException e) { \n    // \u5904\u7406\u65e0\u6cd5\u6267\u884c\u4efb\u52a1\u5f02\u5e38 \n} finally { \n    // \u5173\u95ed\u7ebf\u7a0b\u6c60 executor.shutdown();\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"51\u7ebf\u7a0b\u6c60\u600e\u4e48\u5173\u95ed\u77e5\u9053\u5417",children:"51.\u7ebf\u7a0b\u6c60\u600e\u4e48\u5173\u95ed\u77e5\u9053\u5417\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:["\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u7ebf\u7a0b\u6c60\u7684",(0,s.jsx)(e.code,{children:"shutdown"}),"\u6216",(0,s.jsx)(e.code,{children:"shutdownNow"}),"\u65b9\u6cd5\u6765\u5173\u95ed\u7ebf\u7a0b\u6c60\u3002\u5b83\u4eec\u7684\u539f\u7406\u662f\u904d\u5386\u7ebf\u7a0b\u6c60\u4e2d\u7684\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u7136\u540e\u9010\u4e2a\u8c03\u7528\u7ebf\u7a0b\u7684interrupt\u65b9\u6cd5\u6765\u4e2d\u65ad\u7ebf\u7a0b\uff0c\u6240\u4ee5\u65e0\u6cd5\u54cd\u5e94\u4e2d\u65ad\u7684\u4efb\u52a1\u53ef\u80fd\u6c38\u8fdc\u65e0\u6cd5\u7ec8\u6b62\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"shutdown() \u5c06\u7ebf\u7a0b\u6c60\u72b6\u6001\u7f6e\u4e3ashutdown,\u5e76\u4e0d\u4f1a\u7acb\u5373\u505c\u6b62"}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u505c\u6b62\u63a5\u6536\u5916\u90e8submit\u7684\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"\u5185\u90e8\u6b63\u5728\u8dd1\u7684\u4efb\u52a1\u548c\u961f\u5217\u91cc\u7b49\u5f85\u7684\u4efb\u52a1\uff0c\u4f1a\u6267\u884c\u5b8c"}),"\n",(0,s.jsx)(e.li,{children:"\u7b49\u5230\u7b2c\u4e8c\u6b65\u5b8c\u6210\u540e\uff0c\u624d\u771f\u6b63\u505c\u6b62"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"shutdownNow() \u5c06\u7ebf\u7a0b\u6c60\u72b6\u6001\u7f6e\u4e3astop\u3002\u4e00\u822c\u4f1a\u7acb\u5373\u505c\u6b62\uff0c\u4e8b\u5b9e\u4e0a\u4e0d\u4e00\u5b9a"}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u548cshutdown()\u4e00\u6837\uff0c\u5148\u505c\u6b62\u63a5\u6536\u5916\u90e8\u63d0\u4ea4\u7684\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"\u5ffd\u7565\u961f\u5217\u91cc\u7b49\u5f85\u7684\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"\u5c1d\u8bd5\u5c06\u6b63\u5728\u8dd1\u7684\u4efb\u52a1interrupt\u4e2d\u65ad"}),"\n",(0,s.jsx)(e.li,{children:"\u8fd4\u56de\u672a\u6267\u884c\u7684\u4efb\u52a1\u5217\u8868"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"shutdown \u548cshutdownnow\u7b80\u5355\u6765\u8bf4\u533a\u522b\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"shutdownNow()\u80fd\u7acb\u5373\u505c\u6b62\u7ebf\u7a0b\u6c60\uff0c\u6b63\u5728\u8dd1\u7684\u548c\u6b63\u5728\u7b49\u5f85\u7684\u4efb\u52a1\u90fd\u505c\u4e0b\u4e86\u3002\u8fd9\u6837\u505a\u7acb\u5373\u751f\u6548\uff0c\u4f46\u662f\u98ce\u9669\u4e5f\u6bd4\u8f83\u5927\u3002"}),"\n",(0,s.jsx)(e.li,{children:"shutdown()\u53ea\u662f\u5173\u95ed\u4e86\u63d0\u4ea4\u901a\u9053\uff0c\u7528submit()\u662f\u65e0\u6548\u7684\uff1b\u800c\u5185\u90e8\u7684\u4efb\u52a1\u8be5\u600e\u4e48\u8dd1\u8fd8\u662f\u600e\u4e48\u8dd1\uff0c\u8dd1\u5b8c\u518d\u5f7b\u5e95\u505c\u6b62\u7ebf\u7a0b\u6c60\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"52\u7ebf\u7a0b\u6c60\u7684\u7ebf\u7a0b\u6570\u5e94\u8be5\u600e\u4e48\u914d\u7f6e",children:"52.\u7ebf\u7a0b\u6c60\u7684\u7ebf\u7a0b\u6570\u5e94\u8be5\u600e\u4e48\u914d\u7f6e\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u7ebf\u7a0b\u5728Java\u4e2d\u5c5e\u4e8e\u7a00\u7f3a\u8d44\u6e90\uff0c\u7ebf\u7a0b\u6c60\u4e0d\u662f\u8d8a\u5927\u8d8a\u597d\u4e5f\u4e0d\u662f\u8d8a\u5c0f\u8d8a\u597d\u3002\u4efb\u52a1\u5206\u4e3a\u8ba1\u7b97\u5bc6\u96c6\u578b\u3001IO\u5bc6\u96c6\u578b\u3001\u6df7\u5408\u578b\u3002"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u8ba1\u7b97\u5bc6\u96c6\u578b\uff1a\u5927\u90e8\u5206\u90fd\u5728\u7528CPU\u8ddf\u5185\u5b58\uff0c\u52a0\u5bc6\uff0c\u903b\u8f91\u64cd\u4f5c\u4e1a\u52a1\u5904\u7406\u7b49\u3002"}),"\n",(0,s.jsx)(e.li,{children:"IO\u5bc6\u96c6\u578b\uff1a\u6570\u636e\u5e93\u94fe\u63a5\uff0c\u7f51\u7edc\u901a\u8baf\u4f20\u8f93\u7b49\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(93848).Z+"",width:"1316",height:"782"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e00\u822c\u7684\u7ecf\u9a8c\uff0c\u4e0d\u540c\u7c7b\u578b\u7ebf\u7a0b\u6c60\u7684\u53c2\u6570\u914d\u7f6e\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8ba1\u7b97\u5bc6\u96c6\u578b\u4e00\u822c\u63a8\u8350\u7ebf\u7a0b\u6c60\u4e0d\u8981\u8fc7\u5927\uff0c\u4e00\u822c\u662fCPU\u6570 + 1\uff0c+1\u662f\u56e0\u4e3a\u53ef\u80fd\u5b58\u5728",(0,s.jsx)(e.strong,{children:"\u9875\u7f3a\u5931"}),"(\u5c31\u662f\u53ef\u80fd\u5b58\u5728\u6709\u4e9b\u6570\u636e\u5728\u786c\u76d8\u4e2d\u9700\u8981\u591a\u6765\u4e00\u4e2a\u7ebf\u7a0b\u5c06\u6570\u636e\u8bfb\u5165\u5185\u5b58)\u3002\u5982\u679c\u7ebf\u7a0b\u6c60\u6570\u592a\u5927\uff0c\u53ef\u80fd\u4f1a\u9891\u7e41\u7684 \u8fdb\u884c\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u8ddf\u4efb\u52a1\u8c03\u5ea6\u3002\u83b7\u5f97\u5f53\u524dCPU\u6838\u5fc3\u6570\u4ee3\u7801\u5982\u4e0b\uff1a"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"Runtime.getRuntime().availableProcessors();\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsx)(e.li,{children:"IO\u5bc6\u96c6\u578b\uff1a\u7ebf\u7a0b\u6570\u9002\u5f53\u5927\u4e00\u70b9\uff0c\u673a\u5668\u7684Cpu\u6838\u5fc3\u6570*2\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u6df7\u5408\u578b\uff1a\u53ef\u4ee5\u8003\u8651\u6839\u7edd\u60c5\u51b5\u5c06\u5b83\u62c6\u5206\u6210CPU\u5bc6\u96c6\u578b\u548cIO\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u5982\u679c\u6267\u884c\u65f6\u95f4\u76f8\u5dee\u4e0d\u5927\uff0c\u62c6\u5206\u53ef\u4ee5\u63d0\u5347\u541e\u5410\u91cf\uff0c\u53cd\u4e4b\u6ca1\u6709\u5fc5\u8981\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5f53\u7136\uff0c\u5b9e\u9645\u5e94\u7528\u4e2d\u6ca1\u6709\u56fa\u5b9a\u7684\u516c\u5f0f\uff0c\u9700\u8981\u7ed3\u5408\u6d4b\u8bd5\u548c\u76d1\u63a7\u6765\u8fdb\u884c\u8c03\u6574\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"53\u6709\u54ea\u51e0\u79cd\u5e38\u89c1\u7684\u7ebf\u7a0b\u6c60",children:"53.\u6709\u54ea\u51e0\u79cd\u5e38\u89c1\u7684\u7ebf\u7a0b\u6c60\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u9762\u8bd5\u5e38\u95ee\uff0c\u4e3b\u8981\u6709\u56db\u79cd\uff0c\u90fd\u662f\u901a\u8fc7\u5de5\u5177\u7c7bExcutors\u521b\u5efa\u51fa\u6765\u7684\uff0c\u9700\u8981\u6ce8\u610f\uff0c\u963f\u91cc\u5df4\u5df4\u300aJava\u5f00\u53d1\u624b\u518c\u300b\u91cc\u7981\u6b62\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u6765\u521b\u5efa\u7ebf\u7a0b\u6c60\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(67229).Z+"",width:"930",height:"374"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"newFixedThreadPool  (\u56fa\u5b9a\u6570\u76ee\u7ebf\u7a0b\u7684\u7ebf\u7a0b\u6c60)"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"newCachedThreadPool (\u53ef\u7f13\u5b58\u7ebf\u7a0b\u7684\u7ebf\u7a0b\u6c60)"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"newSingleThreadExecutor (\u5355\u7ebf\u7a0b\u7684\u7ebf\u7a0b\u6c60)"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"newScheduledThreadPool (\u5b9a\u65f6\u53ca\u5468\u671f\u6267\u884c\u7684\u7ebf\u7a0b\u6c60)"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"54\u80fd\u8bf4\u4e00\u4e0b\u56db\u79cd\u5e38\u89c1\u7ebf\u7a0b\u6c60\u7684\u539f\u7406\u5417",children:"54.\u80fd\u8bf4\u4e00\u4e0b\u56db\u79cd\u5e38\u89c1\u7ebf\u7a0b\u6c60\u7684\u539f\u7406\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u524d\u4e09\u79cd\u7ebf\u7a0b\u6c60\u7684\u6784\u9020\u76f4\u63a5\u8c03\u7528ThreadPoolExecutor\u7684\u6784\u9020\u65b9\u6cd5\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"newsinglethreadexecutor",children:"newSingleThreadExecutor"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"public static ExecutorService newSingleThreadExecutor(ThreadFactory threadFactory) {\n    return new FinalizableDelegatedExecutorService\n        (new ThreadPoolExecutor(1, 1,\n                                0L, TimeUnit.MILLISECONDS,\n                                new LinkedBlockingQueue<Runnable>(),\n                                threadFactory));\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ebf\u7a0b\u6c60\u7279\u70b9"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6838\u5fc3\u7ebf\u7a0b\u6570\u4e3a1"}),"\n",(0,s.jsx)(e.li,{children:"\u6700\u5927\u7ebf\u7a0b\u6570\u4e5f\u4e3a1"}),"\n",(0,s.jsx)(e.li,{children:"\u963b\u585e\u961f\u5217\u662f\u65e0\u754c\u961f\u5217LinkedBlockingQueue\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4OOM"}),"\n",(0,s.jsx)(e.li,{children:"keepAliveTime\u4e3a0"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(70587).Z+"",width:"916",height:"430"})}),"\n",(0,s.jsx)(e.p,{children:"\u5de5\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u63d0\u4ea4\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"\u7ebf\u7a0b\u6c60\u662f\u5426\u6709\u4e00\u6761\u7ebf\u7a0b\u5728\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u65b0\u5efa\u7ebf\u7a0b\u6267\u884c\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u6709\uff0c\u5c06\u4efb\u52a1\u52a0\u5230\u963b\u585e\u961f\u5217"}),"\n",(0,s.jsx)(e.li,{children:"\u5f53\u524d\u7684\u552f\u4e00\u7ebf\u7a0b\uff0c\u4ece\u961f\u5217\u53d6\u4efb\u52a1\uff0c\u6267\u884c\u5b8c\u4e00\u4e2a\uff0c\u518d\u7ee7\u7eed\u53d6\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c\u4efb\u52a1\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u9002\u7528\u573a\u666f"})}),"\n",(0,s.jsx)(e.p,{children:"\u9002\u7528\u4e8e\u4e32\u884c\u6267\u884c\u4efb\u52a1\u7684\u573a\u666f\uff0c\u4e00\u4e2a\u4efb\u52a1\u4e00\u4e2a\u4efb\u52a1\u5730\u6267\u884c\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"newfixedthreadpool",children:"newFixedThreadPool"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"public static ExecutorService newFixedThreadPool(int nThreads, ThreadFactory threadFactory) {\n    return new ThreadPoolExecutor(nThreads, nThreads,\n                                  0L, TimeUnit.MILLISECONDS,\n                                  new LinkedBlockingQueue<Runnable>(),\n                                  threadFactory);\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ebf\u7a0b\u6c60\u7279\u70b9\uff1a"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6838\u5fc3\u7ebf\u7a0b\u6570\u548c\u6700\u5927\u7ebf\u7a0b\u6570\u5927\u5c0f\u4e00\u6837"}),"\n",(0,s.jsx)(e.li,{children:"\u6ca1\u6709\u6240\u8c13\u7684\u975e\u7a7a\u95f2\u65f6\u95f4\uff0c\u5373keepAliveTime\u4e3a0"}),"\n",(0,s.jsx)(e.li,{children:"\u963b\u585e\u961f\u5217\u4e3a\u65e0\u754c\u961f\u5217LinkedBlockingQueue\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4OOM"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(13653).Z+"",width:"991",height:"524"})}),"\n",(0,s.jsx)(e.p,{children:"\u5de5\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u63d0\u4ea4\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u7ebf\u7a0b\u6570\u5c11\u4e8e\u6838\u5fc3\u7ebf\u7a0b\uff0c\u521b\u5efa\u6838\u5fc3\u7ebf\u7a0b\u6267\u884c\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u7ebf\u7a0b\u6570\u7b49\u4e8e\u6838\u5fc3\u7ebf\u7a0b\uff0c\u628a\u4efb\u52a1\u6dfb\u52a0\u5230LinkedBlockingQueue\u963b\u585e\u961f\u5217"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u7ebf\u7a0b\u6267\u884c\u5b8c\u4efb\u52a1\uff0c\u53bb\u963b\u585e\u961f\u5217\u53d6\u4efb\u52a1\uff0c\u7ee7\u7eed\u6267\u884c\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4f7f\u7528\u573a\u666f"})}),"\n",(0,s.jsx)(e.p,{children:"FixedThreadPool \u9002\u7528\u4e8e\u5904\u7406CPU\u5bc6\u96c6\u578b\u7684\u4efb\u52a1\uff0c\u786e\u4fddCPU\u5728\u957f\u671f\u88ab\u5de5\u4f5c\u7ebf\u7a0b\u4f7f\u7528\u7684\u60c5\u51b5\u4e0b\uff0c\u5c3d\u53ef\u80fd\u7684\u5c11\u7684\u5206\u914d\u7ebf\u7a0b\uff0c\u5373\u9002\u7528\u6267\u884c\u957f\u671f\u7684\u4efb\u52a1\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"newcachedthreadpool",children:"newCachedThreadPool"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"public static ExecutorService newCachedThreadPool(ThreadFactory threadFactory) {\n    return new ThreadPoolExecutor(0, Integer.MAX_VALUE,\n                                  60L, TimeUnit.SECONDS,\n                                  new SynchronousQueue<Runnable>(),\n                                  threadFactory);\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ebf\u7a0b\u6c60\u7279\u70b9\uff1a"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6838\u5fc3\u7ebf\u7a0b\u6570\u4e3a0"}),"\n",(0,s.jsx)(e.li,{children:"\u6700\u5927\u7ebf\u7a0b\u6570\u4e3aInteger.MAX_VALUE\uff0c\u5373\u65e0\u9650\u5927\uff0c\u53ef\u80fd\u4f1a\u56e0\u4e3a\u65e0\u9650\u521b\u5efa\u7ebf\u7a0b\uff0c\u5bfc\u81f4OOM"}),"\n",(0,s.jsx)(e.li,{children:"\u963b\u585e\u961f\u5217\u662fSynchronousQueue"}),"\n",(0,s.jsx)(e.li,{children:"\u975e\u6838\u5fc3\u7ebf\u7a0b\u7a7a\u95f2\u5b58\u6d3b\u65f6\u95f4\u4e3a60\u79d2"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5f53\u63d0\u4ea4\u4efb\u52a1\u7684\u901f\u5ea6\u5927\u4e8e\u5904\u7406\u4efb\u52a1\u7684\u901f\u5ea6\u65f6\uff0c\u6bcf\u6b21\u63d0\u4ea4\u4e00\u4e2a\u4efb\u52a1\uff0c\u5c31\u5fc5\u7136\u4f1a\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u3002\u6781\u7aef\u60c5\u51b5\u4e0b\u4f1a\u521b\u5efa\u8fc7\u591a\u7684\u7ebf\u7a0b\uff0c\u8017\u5c3d CPU \u548c\u5185\u5b58\u8d44\u6e90\u3002\u7531\u4e8e\u7a7a\u95f2 60 \u79d2\u7684\u7ebf\u7a0b\u4f1a\u88ab\u7ec8\u6b62\uff0c\u957f\u65f6\u95f4\u4fdd\u6301\u7a7a\u95f2\u7684 CachedThreadPool \u4e0d\u4f1a\u5360\u7528\u4efb\u4f55\u8d44\u6e90\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(87100).Z+"",width:"921",height:"687"})}),"\n",(0,s.jsx)(e.p,{children:"\u5de5\u4f5c\u6d41\u7a0b\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u63d0\u4ea4\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"\u56e0\u4e3a\u6ca1\u6709\u6838\u5fc3\u7ebf\u7a0b\uff0c\u6240\u4ee5\u4efb\u52a1\u76f4\u63a5\u52a0\u5230SynchronousQueue\u961f\u5217\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5224\u65ad\u662f\u5426\u6709\u7a7a\u95f2\u7ebf\u7a0b\uff0c\u5982\u679c\u6709\uff0c\u5c31\u53bb\u53d6\u51fa\u4efb\u52a1\u6267\u884c\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u6ca1\u6709\u7a7a\u95f2\u7ebf\u7a0b\uff0c\u5c31\u65b0\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u6267\u884c\u5b8c\u4efb\u52a1\u7684\u7ebf\u7a0b\uff0c\u8fd8\u53ef\u4ee5\u5b58\u6d3b60\u79d2\uff0c\u5982\u679c\u5728\u8fd9\u671f\u95f4\uff0c\u63a5\u5230\u4efb\u52a1\uff0c\u53ef\u4ee5\u7ee7\u7eed\u6d3b\u4e0b\u53bb\uff1b\u5426\u5219\uff0c\u88ab\u9500\u6bc1\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u9002\u7528\u573a\u666f"})}),"\n",(0,s.jsx)(e.p,{children:"\u7528\u4e8e\u5e76\u53d1\u6267\u884c\u5927\u91cf\u77ed\u671f\u7684\u5c0f\u4efb\u52a1\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"newscheduledthreadpool",children:"newScheduledThreadPool"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"public ScheduledThreadPoolExecutor(int corePoolSize) {\n    super(corePoolSize, Integer.MAX_VALUE, 0, NANOSECONDS,\n          new DelayedWorkQueue());\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7ebf\u7a0b\u6c60\u7279\u70b9"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6700\u5927\u7ebf\u7a0b\u6570\u4e3aInteger.MAX_VALUE\uff0c\u4e5f\u6709OOM\u7684\u98ce\u9669"}),"\n",(0,s.jsx)(e.li,{children:"\u963b\u585e\u961f\u5217\u662fDelayedWorkQueue"}),"\n",(0,s.jsx)(e.li,{children:"keepAliveTime\u4e3a0"}),"\n",(0,s.jsx)(e.li,{children:"scheduleAtFixedRate() \uff1a\u6309\u67d0\u79cd\u901f\u7387\u5468\u671f\u6267\u884c"}),"\n",(0,s.jsx)(e.li,{children:"scheduleWithFixedDelay()\uff1a\u5728\u67d0\u4e2a\u5ef6\u8fdf\u540e\u6267\u884c"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(34803).Z+"",width:"984",height:"535"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u5de5\u4f5c\u673a\u5236"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7ebf\u7a0b\u4eceDelayQueue\u4e2d\u83b7\u53d6\u5df2\u5230\u671f\u7684ScheduledFutureTask\uff08DelayQueue.take()\uff09\u3002\u5230\u671f\u4efb\u52a1\u662f\u6307ScheduledFutureTask\u7684time\u5927\u4e8e\u7b49\u4e8e\u5f53\u524d\u65f6\u95f4\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u7ebf\u7a0b\u6267\u884c\u8fd9\u4e2aScheduledFutureTask\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u7ebf\u7a0b\u4fee\u6539ScheduledFutureTask\u7684time\u53d8\u91cf\u4e3a\u4e0b\u6b21\u5c06\u8981\u88ab\u6267\u884c\u7684\u65f6\u95f4\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u7ebf\u7a0b\u628a\u8fd9\u4e2a\u4fee\u6539time\u4e4b\u540e\u7684ScheduledFutureTask\u653e\u56deDelayQueue\u4e2d\uff08DelayQueue.add()\uff09\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(49779).Z+"",width:"926",height:"488"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4f7f\u7528\u573a\u666f"})}),"\n",(0,s.jsx)(e.p,{children:"\u5468\u671f\u6027\u6267\u884c\u4efb\u52a1\u7684\u573a\u666f\uff0c\u9700\u8981\u9650\u5236\u7ebf\u7a0b\u6570\u91cf\u7684\u573a\u666f"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u4f7f\u7528\u65e0\u754c\u961f\u5217\u7684\u7ebf\u7a0b\u6c60\u4f1a\u5bfc\u81f4\u4ec0\u4e48\u95ee\u9898\u5417\uff1f"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u4f8b\u5982newFixedThreadPool\u4f7f\u7528\u4e86\u65e0\u754c\u7684\u963b\u585e\u961f\u5217LinkedBlockingQueue\uff0c\u5982\u679c\u7ebf\u7a0b\u83b7\u53d6\u4e00\u4e2a\u4efb\u52a1\u540e\uff0c\u4efb\u52a1\u7684\u6267\u884c\u65f6\u95f4\u6bd4\u8f83\u957f\uff0c\u4f1a\u5bfc\u81f4\u961f\u5217\u7684\u4efb\u52a1\u8d8a\u79ef\u8d8a\u591a\uff0c\u5bfc\u81f4\u673a\u5668\u5185\u5b58\u4f7f\u7528\u4e0d\u505c\u98d9\u5347\uff0c\u6700\u7ec8\u5bfc\u81f4OOM\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"55\u7ebf\u7a0b\u6c60\u5f02\u5e38\u600e\u4e48\u5904\u7406\u77e5\u9053\u5417",children:"55.\u7ebf\u7a0b\u6c60\u5f02\u5e38\u600e\u4e48\u5904\u7406\u77e5\u9053\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u4f7f\u7528\u7ebf\u7a0b\u6c60\u5904\u7406\u4efb\u52a1\u7684\u65f6\u5019\uff0c\u4efb\u52a1\u4ee3\u7801\u53ef\u80fd\u629b\u51faRuntimeException\uff0c\u629b\u51fa\u5f02\u5e38\u540e\uff0c\u7ebf\u7a0b\u6c60\u53ef\u80fd\u6355\u83b7\u5b83\uff0c\u4e5f\u53ef\u80fd\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7ebf\u7a0b\u6765\u4ee3\u66ff\u5f02\u5e38\u7684\u7ebf\u7a0b\uff0c\u6211\u4eec\u53ef\u80fd\u65e0\u6cd5\u611f\u77e5\u4efb\u52a1\u51fa\u73b0\u4e86\u5f02\u5e38\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u8003\u8651\u7ebf\u7a0b\u6c60\u5f02\u5e38\u60c5\u51b5\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5e38\u89c1\u7684\u5f02\u5e38\u5904\u7406\u65b9\u5f0f\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(3787).Z+"",width:"711",height:"502"})}),"\n",(0,s.jsx)(e.h3,{id:"56\u80fd\u8bf4\u4e00\u4e0b\u7ebf\u7a0b\u6c60\u6709\u51e0\u79cd\u72b6\u6001\u5417",children:"56.\u80fd\u8bf4\u4e00\u4e0b\u7ebf\u7a0b\u6c60\u6709\u51e0\u79cd\u72b6\u6001\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u7ebf\u7a0b\u6c60\u6709\u8fd9\u51e0\u4e2a\u72b6\u6001\uff1aRUNNING,SHUTDOWN,STOP,TIDYING,TERMINATED\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"//\u7ebf\u7a0b\u6c60\u72b6\u6001\nprivate static final int RUNNING    = -1 << COUNT_BITS;\nprivate static final int SHUTDOWN   =  0 << COUNT_BITS;\nprivate static final int STOP       =  1 << COUNT_BITS;\nprivate static final int TIDYING    =  2 << COUNT_BITS;\nprivate static final int TERMINATED =  3 << COUNT_BITS;\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u7ebf\u7a0b\u6c60\u5404\u4e2a\u72b6\u6001\u5207\u6362\u56fe\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(24454).Z+"",width:"871",height:"254"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"RUNNING"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8be5\u72b6\u6001\u7684\u7ebf\u7a0b\u6c60\u4f1a\u63a5\u6536\u65b0\u4efb\u52a1\uff0c\u5e76\u5904\u7406\u963b\u585e\u961f\u5217\u4e2d\u7684\u4efb\u52a1;"}),"\n",(0,s.jsx)(e.li,{children:"\u8c03\u7528\u7ebf\u7a0b\u6c60\u7684shutdown()\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5207\u6362\u5230SHUTDOWN\u72b6\u6001;"}),"\n",(0,s.jsx)(e.li,{children:"\u8c03\u7528\u7ebf\u7a0b\u6c60\u7684shutdownNow()\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5207\u6362\u5230STOP\u72b6\u6001;"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"SHUTDOWN"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8be5\u72b6\u6001\u7684\u7ebf\u7a0b\u6c60\u4e0d\u4f1a\u63a5\u6536\u65b0\u4efb\u52a1\uff0c\u4f46\u4f1a\u5904\u7406\u963b\u585e\u961f\u5217\u4e2d\u7684\u4efb\u52a1\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"\u961f\u5217\u4e3a\u7a7a\uff0c\u5e76\u4e14\u7ebf\u7a0b\u6c60\u4e2d\u6267\u884c\u7684\u4efb\u52a1\u4e5f\u4e3a\u7a7a,\u8fdb\u5165TIDYING\u72b6\u6001;"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"STOP"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8be5\u72b6\u6001\u7684\u7ebf\u7a0b\u4e0d\u4f1a\u63a5\u6536\u65b0\u4efb\u52a1\uff0c\u4e5f\u4e0d\u4f1a\u5904\u7406\u963b\u585e\u961f\u5217\u4e2d\u7684\u4efb\u52a1\uff0c\u800c\u4e14\u4f1a\u4e2d\u65ad\u6b63\u5728\u8fd0\u884c\u7684\u4efb\u52a1\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"\u7ebf\u7a0b\u6c60\u4e2d\u6267\u884c\u7684\u4efb\u52a1\u4e3a\u7a7a,\u8fdb\u5165TIDYING\u72b6\u6001;"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"TIDYING"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8be5\u72b6\u6001\u8868\u660e\u6240\u6709\u7684\u4efb\u52a1\u5df2\u7ecf\u8fd0\u884c\u7ec8\u6b62\uff0c\u8bb0\u5f55\u7684\u4efb\u52a1\u6570\u91cf\u4e3a0\u3002"}),"\n",(0,s.jsx)(e.li,{children:"terminated()\u6267\u884c\u5b8c\u6bd5\uff0c\u8fdb\u5165TERMINATED\u72b6\u6001"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"TERMINATED"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8be5\u72b6\u6001\u8868\u793a\u7ebf\u7a0b\u6c60\u5f7b\u5e95\u7ec8\u6b62"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"57\u7ebf\u7a0b\u6c60\u5982\u4f55\u5b9e\u73b0\u53c2\u6570\u7684\u52a8\u6001\u4fee\u6539",children:"57.\u7ebf\u7a0b\u6c60\u5982\u4f55\u5b9e\u73b0\u53c2\u6570\u7684\u52a8\u6001\u4fee\u6539\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u7ebf\u7a0b\u6c60\u63d0\u4f9b\u4e86\u51e0\u4e2a  setter\u65b9\u6cd5\u6765\u8bbe\u7f6e\u7ebf\u7a0b\u6c60\u7684\u53c2\u6570\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(27751).Z+"",width:"1256",height:"266"})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u91cc\u4e3b\u8981\u6709\u4e24\u4e2a\u601d\u8def\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(12883).Z+"",width:"931",height:"510"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5728\u6211\u4eec\u5fae\u670d\u52a1\u7684\u67b6\u6784\u4e0b\uff0c\u53ef\u4ee5\u5229\u7528\u914d\u7f6e\u4e2d\u5fc3\u5982Nacos\u3001Apollo\u7b49\u7b49\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5f00\u53d1\u914d\u7f6e\u4e2d\u5fc3\u3002\u4e1a\u52a1\u670d\u52a1\u8bfb\u53d6\u7ebf\u7a0b\u6c60\u914d\u7f6e\uff0c\u83b7\u53d6\u76f8\u5e94\u7684\u7ebf\u7a0b\u6c60\u5b9e\u4f8b\u6765\u4fee\u6539\u7ebf\u7a0b\u6c60\u7684\u53c2\u6570\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["\u5982\u679c\u9650\u5236\u4e86\u914d\u7f6e\u4e2d\u5fc3\u7684\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u53bb\u6269\u5c55",(0,s.jsx)(e.strong,{children:"ThreadPoolExecutor"}),"\uff0c\u91cd\u5199\u65b9\u6cd5\uff0c\u76d1\u542c\u7ebf\u7a0b\u6c60\u53c2\u6570\u53d8\u5316\uff0c\u6765\u52a8\u6001\u4fee\u6539\u7ebf\u7a0b\u6c60\u53c2\u6570\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u7ebf\u7a0b\u6c60\u8c03\u4f18\u4e86\u89e3\u5417",children:"\u7ebf\u7a0b\u6c60\u8c03\u4f18\u4e86\u89e3\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u7ebf\u7a0b\u6c60\u914d\u7f6e\u6ca1\u6709\u56fa\u5b9a\u7684\u516c\u5f0f\uff0c\u901a\u5e38\u4e8b\u524d\u4f1a\u5bf9\u7ebf\u7a0b\u6c60\u8fdb\u884c\u4e00\u5b9a\u8bc4\u4f30\uff0c\u5e38\u89c1\u7684\u8bc4\u4f30\u65b9\u6848\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(79305).Z+"",width:"1316",height:"782"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0a\u7ebf\u4e4b\u524d\u4e5f\u8981\u8fdb\u884c\u5145\u5206\u7684\u6d4b\u8bd5\uff0c\u4e0a\u7ebf\u4e4b\u540e\u8981\u5efa\u7acb\u5b8c\u5584\u7684\u7ebf\u7a0b\u6c60\u76d1\u63a7\u673a\u5236\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u4e8b\u4e2d\u7ed3\u5408\u76d1\u63a7\u544a\u8b66\u673a\u5236\uff0c\u5206\u6790\u7ebf\u7a0b\u6c60\u7684\u95ee\u9898\uff0c\u6216\u8005\u53ef\u4f18\u5316\u70b9\uff0c\u7ed3\u5408\u7ebf\u7a0b\u6c60\u52a8\u6001\u53c2\u6570\u914d\u7f6e\u673a\u5236\u6765\u8c03\u6574\u914d\u7f6e\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u4e8b\u540e\u8981\u6ce8\u610f\u4ed4\u7ec6\u89c2\u5bdf\uff0c\u968f\u65f6\u8c03\u6574\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(72952).Z+"",width:"701",height:"250"})}),"\n",(0,s.jsx)(e.p,{children:"\u5177\u4f53\u7684\u8c03\u4f18\u6848\u4f8b\u53ef\u4ee5\u67e5\u770b\u53c2\u8003[7]\u7f8e\u56e2\u6280\u672f\u535a\u5ba2\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"58\u4f60\u80fd\u8bbe\u8ba1\u5b9e\u73b0\u4e00\u4e2a\u7ebf\u7a0b\u6c60\u5417",children:"58.\u4f60\u80fd\u8bbe\u8ba1\u5b9e\u73b0\u4e00\u4e2a\u7ebf\u7a0b\u6c60\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u2b50\u8fd9\u9053\u9898\u5728\u963f\u91cc\u7684\u9762\u8bd5\u4e2d\u51fa\u73b0\u9891\u7387\u6bd4\u8f83\u9ad8"}),"\n",(0,s.jsxs)(e.p,{children:["\u7ebf\u7a0b\u6c60\u5b9e\u73b0\u539f\u7406\u53ef\u4ee5\u67e5\u770b ",(0,s.jsx)(e.a,{href:"https://mp.weixin.qq.com/s/Exy7pRGND9TCjRd9TZK4jg",children:"\u8981\u662f\u4ee5\u524d\u6709\u4eba\u8fd9\u4e48\u8bb2\u7ebf\u7a0b\u6c60\uff0c\u6211\u65e9\u5c31\u8be5\u660e\u767d\u4e86\uff01"}),"  \uff0c\u5f53\u7136\uff0c\u6211\u4eec\u81ea\u5df1\u5b9e\u73b0\uff0c \u53ea\u9700\u8981\u6293\u4f4f\u7ebf\u7a0b\u6c60\u7684\u6838\u5fc3\u6d41\u7a0b-\u53c2\u8003[6]\uff1a"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(11987).Z+"",width:"802",height:"374"})}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u81ea\u5df1\u7684\u5b9e\u73b0\u5c31\u662f\u5b8c\u6210\u8fd9\u4e2a\u6838\u5fc3\u6d41\u7a0b\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7ebf\u7a0b\u6c60\u4e2d\u6709N\u4e2a\u5de5\u4f5c\u7ebf\u7a0b"}),"\n",(0,s.jsx)(e.li,{children:"\u628a\u4efb\u52a1\u63d0\u4ea4\u7ed9\u7ebf\u7a0b\u6c60\u8fd0\u884c"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u7ebf\u7a0b\u6c60\u5df2\u6ee1\uff0c\u628a\u4efb\u52a1\u653e\u5165\u961f\u5217"}),"\n",(0,s.jsx)(e.li,{children:"\u6700\u540e\u5f53\u6709\u7a7a\u95f2\u65f6\uff0c\u83b7\u53d6\u961f\u5217\u4e2d\u4efb\u52a1\u6765\u6267\u884c"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5b9e\u73b0\u4ee3\u7801[6]\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(66629).Z+"",width:"2048",height:"5436"})}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u6837\uff0c\u4e00\u4e2a\u5b9e\u73b0\u4e86\u7ebf\u7a0b\u6c60\u4e3b\u8981\u6d41\u7a0b\u7684\u7c7b\u5c31\u5b8c\u6210\u4e86\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"59\u5355\u673a\u7ebf\u7a0b\u6c60\u6267\u884c\u65ad\u7535\u4e86\u5e94\u8be5\u600e\u4e48\u5904\u7406",children:"59.\u5355\u673a\u7ebf\u7a0b\u6c60\u6267\u884c\u65ad\u7535\u4e86\u5e94\u8be5\u600e\u4e48\u5904\u7406\uff1f"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)("br",{}),"\u6211\u4eec\u53ef\u4ee5\u5bf9\u6b63\u5728\u5904\u7406\u548c\u963b\u585e\u961f\u5217\u7684\u4efb\u52a1\u505a\u4e8b\u52a1\u7ba1\u7406\u6216\u8005\u5bf9\u963b\u585e\u961f\u5217\u4e2d\u7684\u4efb\u52a1\u6301\u4e45\u5316\u5904\u7406\uff0c\u5e76\u4e14\u5f53\u65ad\u7535\u6216\u8005\u7cfb\u7edf\u5d29\u6e83\uff0c\u64cd\u4f5c\u65e0\u6cd5\u7ee7\u7eed\u4e0b\u53bb\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u901a\u8fc7\u56de\u6eaf\u65e5\u5fd7\u7684\u65b9\u5f0f\u6765\u64a4\u9500",(0,s.jsx)(e.code,{children:"\u6b63\u5728\u5904\u7406"}),"\u7684\u5df2\u7ecf\u6267\u884c\u6210\u529f\u7684\u64cd\u4f5c\u3002\u7136\u540e\u91cd\u65b0\u6267\u884c\u6574\u4e2a\u963b\u585e\u961f\u5217\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u963b\u585e\u961f\u5217\u6301\u4e45\u5316\uff1b\u6b63\u5728\u5904\u7406\u4efb\u52a1\u4e8b\u52a1\u63a7\u5236\uff1b\u65ad\u7535\u4e4b\u540e\u6b63\u5728\u5904\u7406\u4efb\u52a1\u7684\u56de\u6eda\uff0c\u901a\u8fc7\u65e5\u5fd7\u6062\u590d\u8be5\u6b21\u64cd\u4f5c\uff1b\u670d\u52a1\u5668\u91cd\u542f\u540e\u963b\u585e\u961f\u5217\u4e2d\u7684\u6570\u636e\u518d\u52a0\u8f7d\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"\u5e76\u53d1\u5bb9\u5668\u548c\u6846\u67b6",children:"\u5e76\u53d1\u5bb9\u5668\u548c\u6846\u67b6"}),"\n",(0,s.jsxs)(e.p,{children:["\u5173\u4e8e\u4e00\u4e9b\u5e76\u53d1\u5bb9\u5668\uff0c\u53ef\u4ee5\u53bb\u770b\u770b ",(0,s.jsx)(e.a,{href:"https://mp.weixin.qq.com/s/SHkQ7LEOT0itt4bXMoDBPw",children:"\u9762\u6e23\u9006\u88ad\uff1aJava\u96c6\u5408\u8fde\u73af\u4e09\u5341\u95ee  "}),"\uff0c\u91cc\u9762\u6709",(0,s.jsx)(e.code,{children:"CopyOnWriteList"}),"\u548c",(0,s.jsx)(e.code,{children:"ConcurrentHashMap"}),"\u8fd9\u4e24\u79cd\u7ebf\u7a0b\u5b89\u5168\u5bb9\u5668\u7c7b\u7684\u95ee\u7b54\u3002\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"60forkjoin\u6846\u67b6\u4e86\u89e3\u5417",children:"60.Fork/Join\u6846\u67b6\u4e86\u89e3\u5417\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"Fork/Join\u6846\u67b6\u662fJava7\u63d0\u4f9b\u7684\u4e00\u4e2a\u7528\u4e8e\u5e76\u884c\u6267\u884c\u4efb\u52a1\u7684\u6846\u67b6\uff0c\u662f\u4e00\u4e2a\u628a\u5927\u4efb\u52a1\u5206\u5272\u6210\u82e5\u5e72\u4e2a\u5c0f\u4efb\u52a1\uff0c\u6700\u7ec8\u6c47\u603b\u6bcf\u4e2a\u5c0f\u4efb\u52a1\u7ed3\u679c\u540e\u5f97\u5230\u5927\u4efb\u52a1\u7ed3\u679c\u7684\u6846\u67b6\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["\u8981\u60f3\u638c\u63e1Fork/Join\u6846\u67b6\uff0c\u9996\u5148\u9700\u8981\u7406\u89e3\u4e24\u4e2a\u70b9\uff0c",(0,s.jsx)(e.strong,{children:"\u5206\u800c\u6cbb\u4e4b"}),"\u548c",(0,s.jsx)(e.strong,{children:"\u5de5\u4f5c\u7a83\u53d6\u7b97\u6cd5"}),"\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u5206\u800c\u6cbb\u4e4b"})}),"\n",(0,s.jsx)(e.p,{children:"Fork/Join\u6846\u67b6\u7684\u5b9a\u4e49\uff0c\u5176\u5b9e\u5c31\u4f53\u73b0\u4e86\u5206\u6cbb\u601d\u60f3\uff1a\u5c06\u4e00\u4e2a\u89c4\u6a21\u4e3aN\u7684\u95ee\u9898\u5206\u89e3\u4e3aK\u4e2a\u89c4\u6a21\u8f83\u5c0f\u7684\u5b50\u95ee\u9898\uff0c\u8fd9\u4e9b\u5b50\u95ee\u9898\u76f8\u4e92\u72ec\u7acb\u4e14\u4e0e\u539f\u95ee\u9898\u6027\u8d28\u76f8\u540c\u3002\u6c42\u51fa\u5b50\u95ee\u9898\u7684\u89e3\uff0c\u5c31\u53ef\u5f97\u5230\u539f\u95ee\u9898\u7684\u89e3\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(63373).Z+"",width:"923",height:"764"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u5de5\u4f5c\u7a83\u53d6\u7b97\u6cd5"})}),"\n",(0,s.jsx)(e.p,{children:"\u5927\u4efb\u52a1\u62c6\u6210\u4e86\u82e5\u5e72\u4e2a\u5c0f\u4efb\u52a1\uff0c\u628a\u8fd9\u4e9b\u5c0f\u4efb\u52a1\u653e\u5230\u4e0d\u540c\u7684\u961f\u5217\u91cc\uff0c\u5404\u81ea\u521b\u5efa\u5355\u72ec\u7ebf\u7a0b\u6765\u6267\u884c\u961f\u5217\u91cc\u7684\u4efb\u52a1\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u6709\u7684\u7ebf\u7a0b\u5e72\u6d3b\u5757\uff0c\u6709\u7684\u7ebf\u7a0b\u5e72\u6d3b\u6162\u3002\u5e72\u5b8c\u6d3b\u7684\u7ebf\u7a0b\u4e0d\u80fd\u8ba9\u5b83\u7a7a\u4e0b\u6765\uff0c\u5f97\u8ba9\u5b83\u53bb\u5e2e\u6ca1\u5e72\u5b8c\u6d3b\u7684\u7ebf\u7a0b\u5e72\u6d3b\u3002\u5b83\u53bb\u5176\u5b83\u7ebf\u7a0b\u7684\u961f\u5217\u91cc\u7a83\u53d6\u4e00\u4e2a\u4efb\u52a1\u6765\u6267\u884c\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684",(0,s.jsx)(e.strong,{children:"\u5de5\u4f5c\u7a83\u53d6"}),"\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u5de5\u4f5c\u7a83\u53d6\u53d1\u751f\u7684\u65f6\u5019\uff0c\u5b83\u4eec\u4f1a\u8bbf\u95ee\u540c\u4e00\u4e2a\u961f\u5217\uff0c\u4e3a\u4e86\u51cf\u5c11\u7a83\u53d6\u4efb\u52a1\u7ebf\u7a0b\u548c\u88ab\u7a83\u53d6\u4efb\u52a1\u7ebf\u7a0b\u4e4b\u95f4\u7684\u7ade\u4e89\uff0c\u901a\u5e38\u4efb\u52a1\u4f1a\u4f7f\u7528\u53cc\u7aef\u961f\u5217\uff0c\u88ab\u7a83\u53d6\u4efb\u52a1\u7ebf\u7a0b\u6c38\u8fdc\u4ece\u53cc\u7aef\u961f\u5217\u7684\u5934\u90e8\u62ff\uff0c\u800c\u7a83\u53d6\u4efb\u52a1\u7684\u7ebf\u7a0b\u6c38\u8fdc\u4ece\u53cc\u7aef\u961f\u5217\u7684\u5c3e\u90e8\u62ff\u4efb\u52a1\u6267\u884c\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Alt text",src:i(20894).Z+"",width:"753",height:"386"})}),"\n",(0,s.jsx)(e.p,{children:"\u770b\u4e00\u4e2aFork/Join\u6846\u67b6\u5e94\u7528\u7684\u4f8b\u5b50\uff0c\u8ba1\u7b971~n\u4e4b\u95f4\u7684\u548c\uff1a1+2+3+\u2026+n"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8bbe\u7f6e\u4e00\u4e2a\u5206\u5272\u9608\u503c\uff0c\u4efb\u52a1\u5927\u4e8e\u9608\u503c\u5c31\u62c6\u5206\u4efb\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"\u4efb\u52a1\u6709\u7ed3\u679c\uff0c\u6240\u4ee5\u9700\u8981\u7ee7\u627fRecursiveTask"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"public class CountTask extends RecursiveTask<Integer> {\n    private static final int THRESHOLD = 16; // \u9608\u503c\n    private int start;\n    private int end;\n\n    public CountTask(int start, int end) {\n        this.start = start;\n        this.end = end;\n    }\n\n    @Override\n    protected Integer compute() {\n        int sum = 0;\n        // \u5982\u679c\u4efb\u52a1\u8db3\u591f\u5c0f\u5c31\u8ba1\u7b97\u4efb\u52a1\n        boolean canCompute = (end - start) <= THRESHOLD;\n        if (canCompute) {\n            for (int i = start; i <= end; i++) {\n                sum += i;\n            }\n        } else {\n            // \u5982\u679c\u4efb\u52a1\u5927\u4e8e\u9608\u503c\uff0c\u5c31\u5206\u88c2\u6210\u4e24\u4e2a\u5b50\u4efb\u52a1\u8ba1\u7b97\n            int middle = (start + end) / 2;\n            CountTask leftTask = new CountTask(start, middle);\n            CountTask rightTask = new CountTask(middle + 1, end);\n            // \u6267\u884c\u5b50\u4efb\u52a1\n            leftTask.fork();\n            rightTask.fork(); // \u7b49\u5f85\u5b50\u4efb\u52a1\u6267\u884c\u5b8c\uff0c\u5e76\u5f97\u5230\u5176\u7ed3\u679c\n            int leftResult = leftTask.join();\n            int rightResult = rightTask.join(); // \u5408\u5e76\u5b50\u4efb\u52a1\n            sum = leftResult + rightResult;\n        }\n        return sum;\n    }\n\n    public static void main(String[] args) {\n        ForkJoinPool forkJoinPool = new ForkJoinPool(); // \u751f\u6210\u4e00\u4e2a\u8ba1\u7b97\u4efb\u52a1\uff0c\u8d1f\u8d23\u8ba1\u7b971+2+3+4\n        CountTask task = new CountTask(1, 100); // \u6267\u884c\u4e00\u4e2a\u4efb\u52a1\n        Future<Integer> result = forkJoinPool.submit(task);\n        try {\n            System.out.println(result.get());\n        } catch (InterruptedException e) {\n        } catch (ExecutionException e) {\n        }\n    }\n    \n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"ForkJoinTask\u4e0e\u4e00\u822cTask\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u5b83\u9700\u8981\u5b9e\u73b0compute\u65b9\u6cd5\uff0c\u5728\u8fd9\u4e2a\u65b9\u6cd5\u91cc\uff0c\u9996\u5148\u9700\u8981\u5224\u65ad\u4efb\u52a1\u662f\u5426\u8db3\u591f\u5c0f\uff0c\u5982\u679c\u8db3\u591f\u5c0f\u5c31\u76f4\u63a5\u6267\u884c\u4efb\u52a1\u3002\u5982\u679c\u6bd4\u8f83\u5927\uff0c\u5c31\u5fc5\u987b\u5206\u5272\u6210\u4e24\u4e2a\u5b50\u4efb\u52a1\uff0c\u6bcf\u4e2a\u5b50\u4efb\u52a1\u5728\u8c03\u7528fork\u65b9\u6cd5\u65f6\uff0c\u53c8\u4f1a\u8fdbcompute\u65b9\u6cd5\uff0c\u770b\u770b\u5f53\u524d\u5b50\u4efb\u52a1\u662f\u5426\u9700\u8981\u7ee7\u7eed\u5206\u5272\u6210\u5b50\u4efb\u52a1\uff0c\u5982\u679c\u4e0d\u9700\u8981\u7ee7\u7eed\u5206\u5272\uff0c\u5219\u6267\u884c\u5f53\u524d\u5b50\u4efb\u52a1\u5e76\u8fd4\u56de\u7ed3\u679c\u3002\u4f7f\u7528join\u65b9\u6cd5\u4f1a\u7b49\u5f85\u5b50\u4efb\u52a1\u6267\u884c\u5b8c\u5e76\u5f97\u5230\u5176\u7ed3\u679c\u3002"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u7cfb\u5217\u5185\u5bb9"}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./javase",children:"\u9762\u6e23\u9006\u88ad Java SE \u7bc7\ud83d\udc4d"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./javathread",children:"\u9762\u6e23\u9006\u88ad Java \u5e76\u53d1\u7f16\u7a0b\u7bc7\ud83d\udc4d"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./collection",children:"\u9762\u6e23\u9006\u88ad Java \u96c6\u5408\u6846\u67b6\u7bc7\ud83d\udc4d"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./jvm",children:"\u9762\u6e23\u9006\u88ad JVM \u7bc7\ud83d\udc4d"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./spring",children:"\u9762\u6e23\u9006\u88ad Spring \u7bc7\ud83d\udc4d"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./redis",children:"\u9762\u6e23\u9006\u88ad Redis \u7bc7\ud83d\udc4d"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./mybatis",children:"\u9762\u6e23\u9006\u88ad MyBatis \u7bc7\ud83d\udc4d"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./mysql",children:"\u9762\u6e23\u9006\u88ad MySQL \u7bc7\ud83d\udc4d"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./os",children:"\u9762\u6e23\u9006\u88ad\u64cd\u4f5c\u7cfb\u7edf\u7bc7\ud83d\udc4d"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./network",children:"\u9762\u6e23\u9006\u88ad\u8ba1\u7b97\u673a\u7f51\u7edc\u7bc7\ud83d\udc4d"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./rocketmq",children:"\u9762\u6e23\u9006\u88adRocketMQ\u7bc7\ud83d\udc4d"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./fenbushi",children:"\u9762\u6e23\u9006\u88ad\u5206\u5e03\u5f0f\u7bc7\ud83d\udc4d"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./weifuwu",children:"\u9762\u6e23\u9006\u88ad\u5fae\u670d\u52a1\u7bc7\ud83d\udc4d"})}),"\n"]})]})}function x(n={}){const{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(t,{...n})}):t(n)}},38142:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-184-227d78ef2b330ef4af2cfd3d31ddff20.png"},60403:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-185-09725afae7a53075d92f055cb4e411e1.png"},27505:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-186-7f4f30024a079398f05d2040630e2f4c.png"},76346:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-187-c83282ac7f7bd8e68382db3be990af41.png"},68222:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-188-e73ec747639f1548c155eae8f24db3ab.png"},93639:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-189-558fc1d7933978536343f8dbd13cd007.png"},70471:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-190-7012b0e8cdc021f2730ea225b4dedf23.png"},10912:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-191-0f5437b8f8f68effe20079009ae9460f.png"},73099:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-192-b299b600e6fb212ba79a5555c3995957.png"},99926:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-193-4259d3a381d4a04d6453d5c08e1c6045.png"},60772:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-194-1449faeaf56f405c25a930e241407493.png"},94987:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-195-aa186343b3aa89338d1a2c63b0aa5fd9.png"},52783:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-196-38c42fbae08e0aa90c5f7f900fb28996.png"},38681:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-197-cb926167eb8e8446e1dce62d40cb0ac5.png"},2954:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-198-535f33c993fe06280743187b2e6913b8.png"},92815:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-199-2134c274867d3494369ae7d18d0b430a.png"},22101:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-200-125a63ffb7ce94071499d2b0269567db.png"},67178:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-201-325e200144a1737472349f8f0aa935f5.png"},9021:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-202-e47bf484b9bf49cac0f2f01c5be686cc.png"},96619:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-203-d6cdc5073c87ec297be750f1cd2412d4.png"},44051:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-204-1feee7c37603e8612d84d9202515c457.png"},3983:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-205-23ecebf3ae7b791953455cba40de8f9e.png"},63227:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-206-93eaee522074d1178c2381448ee124ab.png"},86592:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-207-b80a67fae7b987d509e348c4b9fc4035.png"},5961:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-208-f1fc6912981cec5e90e9a11a4fe71d0d.png"},99948:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-209-d6015990796436dbe516b4280c54c549.png"},20066:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-210-5c2d539bd0e6e7d4e3e2862ccab38b85.png"},90108:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-211-bd27df8c098029faab8c73d6804be93c.png"},34657:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-212-81ba650cb8ee757283af58ba85c2ac2d.png"},54703:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-213-fa679cf73d93986389badd6a64b770b0.png"},84831:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-214-521473b31d27eaa37aa8f5dd58e7ea68.png"},47237:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-215-7143678e373e5b671632ddc0f7a833f4.png"},63004:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-216-727499bd7af51dcead64a627618584ef.png"},26736:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-217-f15b579a565fead8bb250d36a7004eec.png"},51722:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-218-18913e17b94b4b0c28611b442566aac7.png"},68253:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-219-2d802654e9d140e31e79dcdec786b75b.png"},23370:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-220-e87c957ec74c87c2f16dcbb0862c475f.png"},68390:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-221-94804c9288ec7d518b05700985b26443.png"},46125:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-222-f6c1b51a8d21e70181cf2504304917e5.png"},67185:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-223-1ae0bd944831678f807005b9904e3a29.png"},58823:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-224-c980f76cf193aed0dde6a254aa5ee6b7.png"},79511:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-225-5962571daff79d736da7f761c44c1223.png"},9176:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-226-7821e0e60d2ffbe860f0e2a076c73d9b.png"},37796:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-227-4962900ea07124472b17d49011793835.png"},88309:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-228-c171e9ff5d015bf8e4cf092c44038571.png"},71030:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-229-670d753f2da0a17d077bb6865004aa00.png"},15672:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-230-14754774cb8e74d20ad91d05677fe864.png"},3256:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-231-4857f7151a7474cf26fa9c4ec7d94d40.png"},3333:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-232-21d5f988ac81d81a9097da5f091ea6a5.png"},45694:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-233-1edf413328eaca23487cba9f4e703b3c.png"},97045:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-234-cc618f32713880cac279d575c1c8fa8c.png"},6211:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-235-701b7078d1f43f44719872c4c2002005.png"},48226:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-236-63e7a3d80be188b1744354f7624b1a00.png"},42183:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-237-46b4c944a5a63023bf0aee4fef470905.png"},64466:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-238-b576fb1f6911fdcc3f6ee0152d855279.png"},2494:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-239-f78f49b480fb77c869fd8020b5be0109.png"},41473:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-240-c5294436195c1a022d7e3003369b8c8c.png"},51858:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-241-8824fbcabfd5f7887bef8d73f0a2b560.png"},59494:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-242-059b1730f46454ac1ea454fc133af289.png"},10594:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-243-86d79053c0279a07cf52b6970be056c3.png"},9665:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-244-73bba42441a843a39b198cb21e3260d8.png"},12532:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-245-bbe2f2d5e16352f03098839dda176d53.png"},89709:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-246-a9ef4f0053a89f3bbcb1925b9883e6b9.png"},55396:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-247-520e63e8baf5921aab651210c2122a8f.png"},39526:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-248-17604a7aa12fc54ab8ed5b0f7918c9b2.png"},1023:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-249-c7808cb2568e7ef21995d4bd59c9ee16.png"},37407:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-250-6f9d7d54c8f4edc27b6f3ecbb37fe615.png"},66945:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-251-2939fa58d652231d0d2db051050731ee.png"},30725:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-252-a2dcccb630079e632c6081d4d33494e5.png"},93848:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-253-1cce2d90833211724279fa2e7fb4767c.png"},67229:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-254-e159e432fc0daff11204d62b2f19c524.png"},70587:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-255-7d1b6e699627640147cebebfcc192f1b.png"},13653:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-256-6c96d5a216a60b313e1975ee7aa31dfb.png"},87100:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-257-958cf2c7134d72de802e67a7ff8b73ff.png"},34803:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-258-d4063fd0188c0ce42ae151eace704fd9.png"},49779:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-259-0bced3bccfefc3ba6203600368ef8e4d.png"},3787:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-260-d16d30f21b685d1049ab5d1f11cf2dcd.png"},24454:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-261-46757336d681f8b4475f490b673609ea.png"},27751:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-262-ff9673ab40703698c1e0c2251e72773d.png"},12883:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-263-e208d20c5424c72ac2be4f4b8b44d413.png"},79305:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-264-1cce2d90833211724279fa2e7fb4767c.png"},72952:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-265-c0ed5f74aca0131db2998181cd4a6e7b.png"},11987:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-266-1b7683f6f3cb2b01d61717b7eebc59f2.png"},66629:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-267-21d62577250ed3929d5b3b1661480ace.png"},63373:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-268-2005646b19e8aac3e95b0bd942587262.png"},20894:(n,e,i)=>{i.d(e,{Z:()=>s});const s=i.p+"assets/images/image-269-1e74090a1850ee3d57dac93c15085aef.png"},88672:(n,e,i)=>{i.d(e,{Z:()=>d,a:()=>c});var s=i(50959);const l={},r=s.createContext(l);function c(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:c(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);