"use strict";(self.webpackChunkcode_note_blog=self.webpackChunkcode_note_blog||[]).push([[282],{86767:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var r=i(11527),o=i(88672);const t={},s=void 0,a={id:"Spring\u5168\u5bb6\u6876/SpringBoot/\u7ed9\u4f60\u4e00\u4efdSpringBoot\u77e5\u8bc6\u6e05\u5355",title:"\u7ed9\u4f60\u4e00\u4efdSpringBoot\u77e5\u8bc6\u6e05\u5355",description:"\u672c\u6587\u8f6c\u81ea\u4e92\u8054\u7f51\uff0c\u4fb5\u5220",source:"@site/docs/Spring\u5168\u5bb6\u6876/SpringBoot/\u7ed9\u4f60\u4e00\u4efdSpringBoot\u77e5\u8bc6\u6e05\u5355.md",sourceDirName:"Spring\u5168\u5bb6\u6876/SpringBoot",slug:"/Spring\u5168\u5bb6\u6876/SpringBoot/\u7ed9\u4f60\u4e00\u4efdSpringBoot\u77e5\u8bc6\u6e05\u5355",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/SpringBoot/\u7ed9\u4f60\u4e00\u4efdSpringBoot\u77e5\u8bc6\u6e05\u5355",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Spring\u5168\u5bb6\u6876/SpringBoot/\u7ed9\u4f60\u4e00\u4efdSpringBoot\u77e5\u8bc6\u6e05\u5355.md",tags:[],version:"current",frontMatter:{},sidebar:"spring",previous:{title:"SpringAop\uff08\u4e94\uff09\uff1acglib\u4ee3\u7406",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/SpringAOP/SpringAop\uff08\u4e94\uff09\uff1acglib\u4ee3\u7406"},next:{title:"\u57fa\u4e8eSpringBoot\u4e2d\u7684\u5f00\u6e90\u76d1\u63a7\u5de5\u5177SpringBootAdmin",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/SpringBoot/\u57fa\u4e8eSpringBoot\u4e2d\u7684\u5f00\u6e90\u76d1\u63a7\u5de5\u5177SpringBootAdmin"}},c={},l=[{value:"\u4e00\u3001\u629b\u7816\u5f15\u7389\uff1a\u63a2\u7d22Spring IoC\u5bb9\u5668",id:"\u4e00\u629b\u7816\u5f15\u7389\u63a2\u7d22spring-ioc\u5bb9\u5668",level:2},{value:"1.1\u3001Spring IoC\u5bb9\u5668",id:"11spring-ioc\u5bb9\u5668",level:3},{value:"1.2\u3001Spring\u5bb9\u5668\u6269\u5c55\u673a\u5236",id:"12spring\u5bb9\u5668\u6269\u5c55\u673a\u5236",level:3},{value:"\u4e8c\u3001\u592f\u5b9e\u57fa\u7840\uff1aJavaConfig\u4e0e\u5e38\u89c1Annotation",id:"\u4e8c\u592f\u5b9e\u57fa\u7840javaconfig\u4e0e\u5e38\u89c1annotation",level:2},{value:"2.1\u3001JavaConfig",id:"21javaconfig",level:3},{value:"2.2\u3001@ComponentScan",id:"22componentscan",level:3},{value:"2.3\u3001@Import",id:"23import",level:3},{value:"2.4\u3001@Conditional",id:"24conditional",level:3},{value:"2.5\u3001@ConfigurationProperties\u4e0e@EnableConfigurationProperties",id:"25configurationproperties\u4e0eenableconfigurationproperties",level:3},{value:"\u4e09\u3001\u524a\u94c1\u5982\u6ce5\uff1aSpringFactoriesLoader\u8be6\u89e3",id:"\u4e09\u524a\u94c1\u5982\u6ce5springfactoriesloader\u8be6\u89e3",level:2},{value:"\u56db\u3001\u53e6\u4e00\u4ef6\u6b66\u5668\uff1aSpring\u5bb9\u5668\u7684\u4e8b\u4ef6\u76d1\u542c\u673a\u5236",id:"\u56db\u53e6\u4e00\u4ef6\u6b66\u5668spring\u5bb9\u5668\u7684\u4e8b\u4ef6\u76d1\u542c\u673a\u5236",level:2},{value:"Spring\u5bb9\u5668\u5185\u7684\u4e8b\u4ef6\u76d1\u542c\u673a\u5236",id:"spring\u5bb9\u5668\u5185\u7684\u4e8b\u4ef6\u76d1\u542c\u673a\u5236",level:4},{value:"\u4e94\u3001\u51fa\u795e\u5165\u5316\uff1a\u63ed\u79d8\u81ea\u52a8\u914d\u7f6e\u539f\u7406",id:"\u4e94\u51fa\u795e\u5165\u5316\u63ed\u79d8\u81ea\u52a8\u914d\u7f6e\u539f\u7406",level:2},{value:"\u516d\u3001\u542f\u52a8\u5f15\u5bfc\uff1aSpring Boot\u5e94\u7528\u542f\u52a8\u7684\u79d8\u5bc6",id:"\u516d\u542f\u52a8\u5f15\u5bfcspring-boot\u5e94\u7528\u542f\u52a8\u7684\u79d8\u5bc6",level:2},{value:"6.1 SpringApplication\u521d\u59cb\u5316",id:"61-springapplication\u521d\u59cb\u5316",level:3},{value:"6.2 Spring Boot\u542f\u52a8\u6d41\u7a0b",id:"62-spring-boot\u542f\u52a8\u6d41\u7a0b",level:3},{value:"\u53c2\u8003\u6587\u7ae0",id:"\u53c2\u8003\u6587\u7ae0",level:2}];function d(n){const e={a:"a",blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"\u672c\u6587\u8f6c\u81ea\u4e92\u8054\u7f51\uff0c\u4fb5\u5220"}),"\n",(0,r.jsx)(e.p,{children:"\u672c\u7cfb\u5217\u6587\u7ae0\u5c06\u6574\u7406\u5230\u6211\u5728GitHub\u4e0a\u7684\u300aJava\u9762\u8bd5\u6307\u5357\u300b\u4ed3\u5e93\uff0c\u66f4\u591a\u7cbe\u5f69\u5185\u5bb9\u8bf7\u5230\u6211\u7684\u4ed3\u5e93\u91cc\u67e5\u770b"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"https://github.com/h2pl/Java-Tutorial",children:"https://github.com/h2pl/Java-Tutorial"})}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u559c\u6b22\u7684\u8bdd\u9ebb\u70e6\u70b9\u4e0bStar\u54c8"}),"\n",(0,r.jsx)(e.p,{children:"\u6587\u7ae0\u5c06\u540c\u6b65\u5230\u6211\u7684\u4e2a\u4eba\u535a\u5ba2\uff1a"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"http://www.how2playlife.com",children:"www.how2playlife.com"})}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u672c\u6587\u662f\u5fae\u4fe1\u516c\u4f17\u53f7\u3010Java\u6280\u672f\u6c5f\u6e56\u3011\u7684\u300aSpring\u548cSpringMVC\u6e90\u7801\u5206\u6790\u300b\u5176\u4e2d\u4e00\u7bc7\uff0c\u672c\u6587\u90e8\u5206\u5185\u5bb9\u6765\u6e90\u4e8e\u7f51\u7edc\uff0c\u4e3a\u4e86\u628a\u672c\u6587\u4e3b\u9898\u8bb2\u5f97\u6e05\u6670\u900f\u5f7b\uff0c\u4e5f\u6574\u5408\u4e86\u5f88\u591a\u6211\u8ba4\u4e3a\u4e0d\u9519\u7684\u6280\u672f\u535a\u5ba2\u5185\u5bb9\uff0c\u5f15\u7528\u5176\u4e2d\u4e86\u4e00\u4e9b\u6bd4\u8f83\u597d\u7684\u535a\u5ba2\u6587\u7ae0\uff0c\u5982\u6709\u4fb5\u6743\uff0c\u8bf7\u8054\u7cfb\u4f5c\u8005\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u8be5\u7cfb\u5217\u535a\u6587\u4f1a\u544a\u8bc9\u4f60\u5982\u4f55\u4ecespring\u57fa\u7840\u5165\u624b\uff0c\u4e00\u6b65\u6b65\u5730\u5b66\u4e60spring\u57fa\u7840\u548cspringmvc\u7684\u6846\u67b6\u77e5\u8bc6\uff0c\u5e76\u4e0a\u624b\u8fdb\u884c\u9879\u76ee\u5b9e\u6218\uff0cspring\u6846\u67b6\u662f\u6bcf\u4e00\u4e2aJava\u5de5\u7a0b\u5e08\u5fc5\u987b\u8981\u5b66\u4e60\u548c\u7406\u89e3\u7684\u77e5\u8bc6\u70b9\uff0c\u8fdb\u4e00\u6b65\u6765\u8bf4\uff0c\u4f60\u8fd8\u9700\u8981\u638c\u63e1spring\u751a\u81f3\u662fspringmvc\u7684\u6e90\u7801\u4ee5\u53ca\u5b9e\u73b0\u539f\u7406\uff0c\u624d\u80fd\u66f4\u5b8c\u6574\u5730\u4e86\u89e3\u6574\u4e2aspring\u6280\u672f\u4f53\u7cfb\uff0c\u5f62\u6210\u81ea\u5df1\u7684\u77e5\u8bc6\u6846\u67b6\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u540e\u7eed\u8fd8\u4f1a\u6709springboot\u548cspringcloud\u7684\u6280\u672f\u4e13\u9898\uff0c\u9646\u7eed\u4e3a\u5927\u5bb6\u5e26\u6765\uff0c\u656c\u8bf7\u671f\u5f85\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u4e3a\u4e86\u66f4\u597d\u5730\u603b\u7ed3\u548c\u68c0\u9a8c\u4f60\u7684\u5b66\u4e60\u6210\u679c\uff0c\u672c\u7cfb\u5217\u6587\u7ae0\u4e5f\u4f1a\u63d0\u4f9b\u90e8\u5206\u77e5\u8bc6\u70b9\u5bf9\u5e94\u7684\u9762\u8bd5\u9898\u4ee5\u53ca\u53c2\u8003\u7b54\u6848\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u679c\u5bf9\u672c\u7cfb\u5217\u6587\u7ae0\u6709\u4ec0\u4e48\u5efa\u8bae\uff0c\u6216\u8005\u662f\u6709\u4ec0\u4e48\u7591\u95ee\u7684\u8bdd\uff0c\u4e5f\u53ef\u4ee5\u5173\u6ce8\u516c\u4f17\u53f7\u3010Java\u6280\u672f\u6c5f\u6e56\u3011\u8054\u7cfb\u4f5c\u8005\uff0c\u6b22\u8fce\u4f60\u53c2\u4e0e\u672c\u7cfb\u5217\u535a\u6587\u7684\u521b\u4f5c\u548c\u4fee\u8ba2\u3002"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"\u9884\u8b66\uff1a\u672c\u6587\u975e\u5e38\u957f\uff0c\u5efa\u8bae\u5148mark\u540e\u770b\uff0c\u4e5f\u8bb8\u662f\u6700\u540e\u4e00\u6b21\u5199\u8fd9\u4e48\u957f\u7684\u6587\u7ae0"}),"\n",(0,r.jsx)(e.li,{children:"\u8bf4\u660e\uff1a\u524d\u9762\u67094\u4e2a\u5c0f\u8282\u5173\u4e8eSpring\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u5206\u522b\u662f\uff1aIOC\u5bb9\u5668\u3001JavaConfig\u3001\u4e8b\u4ef6\u76d1\u542c\u3001SpringFactoriesLoader\u8be6\u89e3\uff0c\u5b83\u4eec\u5360\u636e\u4e86\u672c\u6587\u7684\u5927\u90e8\u5206\u5185\u5bb9\uff0c\u867d\u7136\u5b83\u4eec\u4e4b\u95f4\u53ef\u80fd\u6ca1\u6709\u592a\u591a\u7684\u8054\u7cfb\uff0c\u4f46\u8fd9\u4e9b\u77e5\u8bc6\u5bf9\u4e8e\u7406\u89e3Spring Boot\u7684\u6838\u5fc3\u539f\u7406\u81f3\u5173\u91cd\u8981\uff0c\u5982\u679c\u4f60\u5bf9Spring\u6846\u67b6\u70c2\u719f\u4e8e\u5fc3\uff0c\u5b8c\u5168\u53ef\u4ee5\u8df3\u8fc7\u8fd94\u4e2a\u5c0f\u8282\u3002\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u7cfb\u5217\u7684\u6587\u7ae0\u662f\u7531\u8fd9\u4e9b\u770b\u4f3c\u4e0d\u76f8\u5173\u7684\u77e5\u8bc6\u70b9\u7ec4\u6210\uff0c\u56e0\u6b64\u53d6\u540d\u77e5\u8bc6\u6e05\u5355\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u8f6c\u81ea\uff1a",(0,r.jsx)(e.a,{href:"https://www.jianshu.com/p/83693d3d0a65",children:"https://www.jianshu.com/p/83693d3d0a65"})]}),"\n",(0,r.jsx)(e.p,{children:"\u5728\u8fc7\u53bb\u4e24\u4e09\u5e74\u7684Spring\u751f\u6001\u5708\uff0c\u6700\u8ba9\u4eba\u5174\u594b\u7684\u83ab\u8fc7\u4e8eSpring Boot\u6846\u67b6\u3002\u6216\u8bb8\u4ece\u547d\u540d\u4e0a\u5c31\u80fd\u770b\u51fa\u8fd9\u4e2a\u6846\u67b6\u7684\u8bbe\u8ba1\u521d\u8877\uff1a\u5feb\u901f\u7684\u542f\u52a8Spring\u5e94\u7528\u3002\u56e0\u800cSpring Boot\u5e94\u7528\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u57fa\u4e8eSpring\u6846\u67b6\u7684\u5e94\u7528\uff0c\u5b83\u662fSpring\u5bf9\u201c\u7ea6\u5b9a\u4f18\u5148\u4e8e\u914d\u7f6e\u201d\u7406\u5ff5\u7684\u6700\u4f73\u5b9e\u8df5\u4ea7\u7269\uff0c\u5b83\u80fd\u591f\u5e2e\u52a9\u5f00\u53d1\u8005\u66f4\u5feb\u901f\u9ad8\u6548\u5730\u6784\u5efa\u57fa\u4e8eSpring\u751f\u6001\u5708\u7684\u5e94\u7528\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u90a3Spring Boot\u6709\u4f55\u9b54\u6cd5\uff1f",(0,r.jsx)(e.strong,{children:"\u81ea\u52a8\u914d\u7f6e"}),"\u3001",(0,r.jsx)(e.strong,{children:"\u8d77\u6b65\u4f9d\u8d56"}),"\u3001",(0,r.jsx)(e.strong,{children:"Actuator"}),"\u3001**\u547d\u4ee4\u884c\u754c\u9762(CLI)**\u662fSpring Boot\u6700\u91cd\u8981\u76844\u5927\u6838\u5fc3\u7279\u6027\uff0c\u5176\u4e2dCLI\u662fSpring Boot\u7684\u53ef\u9009\u7279\u6027\uff0c\u867d\u7136\u5b83\u529f\u80fd\u5f3a\u5927\uff0c\u4f46\u4e5f\u5f15\u5165\u4e86\u4e00\u5957\u4e0d\u592a\u5e38\u89c4\u7684\u5f00\u53d1\u6a21\u578b\uff0c\u56e0\u800c\u8fd9\u4e2a\u7cfb\u5217\u7684\u6587\u7ae0\u4ec5\u5173\u6ce8\u5176\u5b833\u79cd\u7279\u6027\u3002\u5982\u6587\u7ae0\u6807\u9898\uff0c\u672c\u6587\u662f\u8fd9\u4e2a\u7cfb\u5217\u7684\u7b2c\u4e00\u90e8\u5206\uff0c\u5c06\u4e3a\u4f60\u6253\u5f00Spring Boot\u7684\u5927\u95e8\uff0c\u91cd\u70b9\u4e3a\u4f60\u5256\u6790\u5176\u542f\u52a8\u6d41\u7a0b\u4ee5\u53ca\u81ea\u52a8\u914d\u7f6e\u5b9e\u73b0\u539f\u7406\u3002\u8981\u638c\u63e1\u8fd9\u90e8\u5206\u6838\u5fc3\u5185\u5bb9\uff0c\u7406\u89e3\u4e00\u4e9bSpring\u6846\u67b6\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u5c06\u4f1a\u8ba9\u4f60\u4e8b\u534a\u529f\u500d\u3002"]}),"\n",(0,r.jsx)(e.h2,{id:"\u4e00\u629b\u7816\u5f15\u7389\u63a2\u7d22spring-ioc\u5bb9\u5668",children:"\u4e00\u3001\u629b\u7816\u5f15\u7389\uff1a\u63a2\u7d22Spring IoC\u5bb9\u5668"}),"\n",(0,r.jsxs)(e.p,{children:["\u5982\u679c\u6709\u770b\u8fc7",(0,r.jsx)(e.code,{children:"SpringApplication.run()"}),"\u65b9\u6cd5\u7684\u6e90\u7801\uff0cSpring Boot\u5197\u957f\u65e0\u6bd4\u7684\u542f\u52a8\u6d41\u7a0b\u4e00\u5b9a\u4f1a\u8ba9\u4f60\u6293\u72c2\uff0c\u900f\u8fc7\u73b0\u8c61\u770b\u672c\u8d28\uff0cSpringApplication\u53ea\u662f\u5c06\u4e00\u4e2a\u5178\u578b\u7684Spring\u5e94\u7528\u7684\u542f\u52a8\u6d41\u7a0b\u8fdb\u884c\u4e86\u6269\u5c55\uff0c\u56e0\u6b64\uff0c\u900f\u5f7b\u7406\u89e3Spring\u5bb9\u5668\u662f\u6253\u5f00Spring Boot\u5927\u95e8\u7684\u4e00\u628a\u94a5\u5319\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"11spring-ioc\u5bb9\u5668",children:"1.1\u3001Spring IoC\u5bb9\u5668"}),"\n",(0,r.jsx)(e.p,{children:"\u53ef\u4ee5\u628aSpring IoC\u5bb9\u5668\u6bd4\u4f5c\u4e00\u95f4\u9910\u9986\uff0c\u5f53\u4f60\u6765\u5230\u9910\u9986\uff0c\u901a\u5e38\u4f1a\u76f4\u63a5\u62db\u547c\u670d\u52a1\u5458\uff1a\u70b9\u83dc\uff01\u81f3\u4e8e\u83dc\u7684\u539f\u6599\u662f\u4ec0\u4e48\uff1f\u5982\u4f55\u7528\u539f\u6599\u628a\u83dc\u505a\u51fa\u6765\uff1f\u53ef\u80fd\u4f60\u6839\u672c\u5c31\u4e0d\u5173\u5fc3\u3002IoC\u5bb9\u5668\u4e5f\u662f\u4e00\u6837\uff0c\u4f60\u53ea\u9700\u8981\u544a\u8bc9\u5b83\u9700\u8981\u67d0\u4e2abean\uff0c\u5b83\u5c31\u628a\u5bf9\u5e94\u7684\u5b9e\u4f8b\uff08instance\uff09\u6254\u7ed9\u4f60\uff0c\u81f3\u4e8e\u8fd9\u4e2abean\u662f\u5426\u4f9d\u8d56\u5176\u4ed6\u7ec4\u4ef6\uff0c\u600e\u6837\u5b8c\u6210\u5b83\u7684\u521d\u59cb\u5316\uff0c\u6839\u672c\u5c31\u4e0d\u9700\u8981\u4f60\u5173\u5fc3\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u4f5c\u4e3a\u9910\u9986\uff0c\u60f3\u8981\u505a\u51fa\u83dc\u80b4\uff0c\u5f97\u77e5\u9053\u83dc\u7684\u539f\u6599\u548c\u83dc\u8c31\uff0c\u540c\u6837\u5730\uff0cIoC\u5bb9\u5668\u60f3\u8981\u7ba1\u7406\u5404\u4e2a\u4e1a\u52a1\u5bf9\u8c61\u4ee5\u53ca\u5b83\u4eec\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u9700\u8981\u901a\u8fc7\u67d0\u79cd\u9014\u5f84\u6765\u8bb0\u5f55\u548c\u7ba1\u7406\u8fd9\u4e9b\u4fe1\u606f\u3002",(0,r.jsx)(e.code,{children:"BeanDefinition"}),"\u5bf9\u8c61\u5c31\u627f\u62c5\u4e86\u8fd9\u4e2a\u8d23\u4efb\uff1a\u5bb9\u5668\u4e2d\u7684\u6bcf\u4e00\u4e2abean\u90fd\u4f1a\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684BeanDefinition\u5b9e\u4f8b\uff0c\u8be5\u5b9e\u4f8b\u8d1f\u8d23\u4fdd\u5b58bean\u5bf9\u8c61\u7684\u6240\u6709\u5fc5\u8981\u4fe1\u606f\uff0c\u5305\u62ecbean\u5bf9\u8c61\u7684class\u7c7b\u578b\u3001\u662f\u5426\u662f\u62bd\u8c61\u7c7b\u3001\u6784\u9020\u65b9\u6cd5\u548c\u53c2\u6570\u3001\u5176\u5b83\u5c5e\u6027\u7b49\u7b49\u3002\u5f53\u5ba2\u6237\u7aef\u5411\u5bb9\u5668\u8bf7\u6c42\u76f8\u5e94\u5bf9\u8c61\u65f6\uff0c\u5bb9\u5668\u5c31\u4f1a\u901a\u8fc7\u8fd9\u4e9b\u4fe1\u606f\u4e3a\u5ba2\u6237\u7aef\u8fd4\u56de\u4e00\u4e2a\u5b8c\u6574\u53ef\u7528\u7684bean\u5b9e\u4f8b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u539f\u6750\u6599\u5df2\u7ecf\u51c6\u5907\u597d\uff08\u628aBeanDefinition\u770b\u7740\u539f\u6599\uff09\uff0c\u5f00\u59cb\u505a\u83dc\u5427\uff0c\u7b49\u7b49\uff0c\u4f60\u8fd8\u9700\u8981\u4e00\u4efd\u83dc\u8c31\uff0c",(0,r.jsx)(e.code,{children:"BeanDefinitionRegistry"}),"\u548c",(0,r.jsx)(e.code,{children:"BeanFactory"}),"\u5c31\u662f\u8fd9\u4efd\u83dc\u8c31\uff0cBeanDefinitionRegistry\u62bd\u8c61\u51fabean\u7684\u6ce8\u518c\u903b\u8f91\uff0c\u800cBeanFactory\u5219\u62bd\u8c61\u51fa\u4e86bean\u7684\u7ba1\u7406\u903b\u8f91\uff0c\u800c\u5404\u4e2aBeanFactory\u7684\u5b9e\u73b0\u7c7b\u5c31\u5177\u4f53\u627f\u62c5\u4e86bean\u7684\u6ce8\u518c\u4ee5\u53ca\u7ba1\u7406\u5de5\u4f5c\u3002\u5b83\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u5c31\u5982\u4e0b\u56fe\uff1a"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/175724-911dc459ef9cec28.png",alt:""})}),"\n",(0,r.jsx)(e.p,{children:"BeanFactory\u3001BeanDefinitionRegistry\u5173\u7cfb\u56fe\uff08\u6765\u81ea\uff1aSpring\u63ed\u79d8\uff09"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"DefaultListableBeanFactory"}),"\u4f5c\u4e3a\u4e00\u4e2a\u6bd4\u8f83\u901a\u7528\u7684BeanFactory\u5b9e\u73b0\uff0c\u5b83\u540c\u65f6\u4e5f\u5b9e\u73b0\u4e86BeanDefinitionRegistry\u63a5\u53e3\uff0c\u56e0\u6b64\u5b83\u5c31\u627f\u62c5\u4e86Bean\u7684\u6ce8\u518c\u7ba1\u7406\u5de5\u4f5c\u3002\u4ece\u56fe\u4e2d\u4e5f\u53ef\u4ee5\u770b\u51fa\uff0cBeanFactory\u63a5\u53e3\u4e2d\u4e3b\u8981\u5305\u542bgetBean\u3001containBean\u3001getType\u3001getAliases\u7b49\u7ba1\u7406bean\u7684\u65b9\u6cd5\uff0c\u800cBeanDefinitionRegistry\u63a5\u53e3\u5219\u5305\u542bregisterBeanDefinition\u3001removeBeanDefinition\u3001getBeanDefinition\u7b49\u6ce8\u518c\u7ba1\u7406BeanDefinition\u7684\u65b9\u6cd5\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u4e0b\u9762\u901a\u8fc7\u4e00\u6bb5\u7b80\u5355\u7684\u4ee3\u7801\u6765\u6a21\u62dfBeanFactory\u5e95\u5c42\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'// \u9ed8\u8ba4\u5bb9\u5668\u5b9e\u73b0  \nDefaultListableBeanFactory beanRegistry = new DefaultListableBeanFactory();  \n// \u6839\u636e\u4e1a\u52a1\u5bf9\u8c61\u6784\u9020\u76f8\u5e94\u7684BeanDefinition  \nAbstractBeanDefinition definition = new RootBeanDefinition(Business.class,true);  \n// \u5c06bean\u5b9a\u4e49\u6ce8\u518c\u5230\u5bb9\u5668\u4e2d  \nbeanRegistry.registerBeanDefinition("beanName",definition);  \n// \u5982\u679c\u6709\u591a\u4e2abean\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a\u5404\u4e2abean\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb  \n// ........  \n  \n// \u7136\u540e\u53ef\u4ee5\u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6\u8fd9\u4e2abean\u7684\u5b9e\u4f8b  \n// \u6ce8\u610f\uff1a\u8fd9\u91cc\u7684beanRegistry\u5176\u5b9e\u5b9e\u73b0\u4e86BeanFactory\u63a5\u53e3\uff0c\u6240\u4ee5\u53ef\u4ee5\u5f3a\u8f6c\uff0c  \n// \u5355\u7eaf\u7684BeanDefinitionRegistry\u662f\u65e0\u6cd5\u5f3a\u5236\u8f6c\u6362\u5230BeanFactory\u7c7b\u578b\u7684  \nBeanFactory container = (BeanFactory)beanRegistry;  \nBusiness business = (Business)container.getBean("beanName");  \n  \n'})}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u6bb5\u4ee3\u7801\u4ec5\u4e3a\u4e86\u8bf4\u660eBeanFactory\u5e95\u5c42\u7684\u5927\u81f4\u5de5\u4f5c\u6d41\u7a0b\uff0c\u5b9e\u9645\u60c5\u51b5\u4f1a\u66f4\u52a0\u590d\u6742\uff0c\u6bd4\u5982bean\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u53ef\u80fd\u5b9a\u4e49\u5728\u5916\u90e8\u914d\u7f6e\u6587\u4ef6(XML/Properties)\u4e2d\u3001\u4e5f\u53ef\u80fd\u662f\u6ce8\u89e3\u65b9\u5f0f\u3002Spring IoC\u5bb9\u5668\u7684\u6574\u4e2a\u5de5\u4f5c\u6d41\u7a0b\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a"}),"\n",(0,r.jsx)(e.p,{children:"\u2460\u3001\u5bb9\u5668\u542f\u52a8\u9636\u6bb5"}),"\n",(0,r.jsxs)(e.p,{children:["\u5bb9\u5668\u542f\u52a8\u65f6\uff0c\u4f1a\u901a\u8fc7\u67d0\u79cd\u9014\u5f84\u52a0\u8f7d",(0,r.jsx)(e.code,{children:"Configuration MetaData"}),"\u3002\u9664\u4e86\u4ee3\u7801\u65b9\u5f0f\u6bd4\u8f83\u76f4\u63a5\u5916\uff0c\u5728\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u9700\u8981\u4f9d\u8d56\u67d0\u4e9b\u5de5\u5177\u7c7b\uff0c\u6bd4\u5982\uff1a",(0,r.jsx)(e.code,{children:"BeanDefinitionReader"}),"\uff0cBeanDefinitionReader\u4f1a\u5bf9\u52a0\u8f7d\u7684",(0,r.jsx)(e.code,{children:"Configuration MetaData"}),"\u8fdb\u884c\u89e3\u6790\u548c\u5206\u6790\uff0c\u5e76\u5c06\u5206\u6790\u540e\u7684\u4fe1\u606f\u7ec4\u88c5\u4e3a\u76f8\u5e94\u7684BeanDefinition\uff0c\u6700\u540e\u628a\u8fd9\u4e9b\u4fdd\u5b58\u4e86bean\u5b9a\u4e49\u7684BeanDefinition\uff0c\u6ce8\u518c\u5230\u76f8\u5e94\u7684BeanDefinitionRegistry\uff0c\u8fd9\u6837\u5bb9\u5668\u7684\u542f\u52a8\u5de5\u4f5c\u5c31\u5b8c\u6210\u4e86\u3002\u8fd9\u4e2a\u9636\u6bb5\u4e3b\u8981\u5b8c\u6210\u4e00\u4e9b\u51c6\u5907\u6027\u5de5\u4f5c\uff0c\u66f4\u4fa7\u91cd\u4e8ebean\u5bf9\u8c61\u7ba1\u7406\u4fe1\u606f\u7684\u6536\u96c6\uff0c\u5f53\u7136\u4e00\u4e9b\u9a8c\u8bc1\u6027\u6216\u8005\u8f85\u52a9\u6027\u7684\u5de5\u4f5c\u4e5f\u5728\u8fd9\u4e00\u9636\u6bb5\u5b8c\u6210\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u6765\u770b\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u5427\uff0c\u8fc7\u5f80\uff0c\u6240\u6709\u7684bean\u90fd\u5b9a\u4e49\u5728XML\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u5c06\u6a21\u62dfBeanFactory\u5982\u4f55\u4ece\u914d\u7f6e\u6587\u4ef6\u4e2d\u52a0\u8f7dbean\u7684\u5b9a\u4e49\u4ee5\u53ca\u4f9d\u8d56\u5173\u7cfb\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'// \u901a\u5e38\u4e3aBeanDefinitionRegistry\u7684\u5b9e\u73b0\u7c7b\uff0c\u8fd9\u91cc\u4ee5DeFaultListabeBeanFactory\u4e3a\u4f8b  \nBeanDefinitionRegistry beanRegistry = new DefaultListableBeanFactory(); // XmlBeanDefinitionReader\u5b9e\u73b0\u4e86BeanDefinitionReader\u63a5\u53e3\uff0c\u7528\u4e8e\u89e3\u6790XML\u6587\u4ef6  \nXmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReaderImpl(beanRegistry);  \n// \u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6  \nbeanDefinitionReader.loadBeanDefinitions("classpath:spring-bean.xml");  \n  \n// \u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6bean\u5b9e\u4f8b  \nBeanFactory container = (BeanFactory)beanRegistry;  \nBusiness business = (Business)container.getBean("beanName");  \n  \n'})}),"\n",(0,r.jsx)(e.p,{children:"\u2461\u3001Bean\u7684\u5b9e\u4f8b\u5316\u9636\u6bb5"}),"\n",(0,r.jsx)(e.p,{children:"\u7ecf\u8fc7\u7b2c\u4e00\u9636\u6bb5\uff0c\u6240\u6709bean\u5b9a\u4e49\u90fd\u901a\u8fc7BeanDefinition\u7684\u65b9\u5f0f\u6ce8\u518c\u5230BeanDefinitionRegistry\u4e2d\uff0c\u5f53\u67d0\u4e2a\u8bf7\u6c42\u901a\u8fc7\u5bb9\u5668\u7684getBean\u65b9\u6cd5\u8bf7\u6c42\u67d0\u4e2a\u5bf9\u8c61\uff0c\u6216\u8005\u56e0\u4e3a\u4f9d\u8d56\u5173\u7cfb\u5bb9\u5668\u9700\u8981\u9690\u5f0f\u7684\u8c03\u7528getBean\u65f6\uff0c\u5c31\u4f1a\u89e6\u53d1\u7b2c\u4e8c\u9636\u6bb5\u7684\u6d3b\u52a8\uff1a\u5bb9\u5668\u4f1a\u9996\u5148\u68c0\u67e5\u6240\u8bf7\u6c42\u7684\u5bf9\u8c61\u4e4b\u524d\u662f\u5426\u5df2\u7ecf\u5b9e\u4f8b\u5316\u5b8c\u6210\u3002\u5982\u679c\u6ca1\u6709\uff0c\u5219\u4f1a\u6839\u636e\u6ce8\u518c\u7684BeanDefinition\u6240\u63d0\u4f9b\u7684\u4fe1\u606f\u5b9e\u4f8b\u5316\u88ab\u8bf7\u6c42\u5bf9\u8c61\uff0c\u5e76\u4e3a\u5176\u6ce8\u5165\u4f9d\u8d56\u3002\u5f53\u8be5\u5bf9\u8c61\u88c5\u914d\u5b8c\u6bd5\u540e\uff0c\u5bb9\u5668\u4f1a\u7acb\u5373\u5c06\u5176\u8fd4\u56de\u7ed9\u8bf7\u6c42\u65b9\u6cd5\u4f7f\u7528\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["BeanFactory\u53ea\u662fSpring IoC\u5bb9\u5668\u7684\u4e00\u79cd\u5b9e\u73b0\uff0c\u5982\u679c\u6ca1\u6709\u7279\u6b8a\u6307\u5b9a\uff0c\u5b83\u91c7\u7528\u91c7\u7528\u5ef6\u8fdf\u521d\u59cb\u5316\u7b56\u7565\uff1a\u53ea\u6709\u5f53\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u67d0\u4e2a\u5bf9\u8c61\u65f6\uff0c\u624d\u5bf9\u8be5\u5bf9\u8c61\u8fdb\u884c\u521d\u59cb\u5316\u548c\u4f9d\u8d56\u6ce8\u5165\u64cd\u4f5c\u3002\u800c\u5728\u5b9e\u9645\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u66f4\u591a\u7684\u4f7f\u7528\u53e6\u5916\u4e00\u79cd\u7c7b\u578b\u7684\u5bb9\u5668\uff1a",(0,r.jsx)(e.code,{children:"ApplicationContext"}),"\uff0c\u5b83\u6784\u5efa\u5728BeanFactory\u4e4b\u4e0a\uff0c\u5c5e\u4e8e\u66f4\u9ad8\u7ea7\u7684\u5bb9\u5668\uff0c\u9664\u4e86\u5177\u6709BeanFactory\u7684\u6240\u6709\u80fd\u529b\u4e4b\u5916\uff0c\u8fd8\u63d0\u4f9b\u5bf9\u4e8b\u4ef6\u76d1\u542c\u673a\u5236\u4ee5\u53ca\u56fd\u9645\u5316\u7684\u652f\u6301\u7b49\u3002\u5b83\u7ba1\u7406\u7684bean\uff0c\u5728\u5bb9\u5668\u542f\u52a8\u65f6\u5168\u90e8\u5b8c\u6210\u521d\u59cb\u5316\u548c\u4f9d\u8d56\u6ce8\u5165\u64cd\u4f5c\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"12spring\u5bb9\u5668\u6269\u5c55\u673a\u5236",children:"1.2\u3001Spring\u5bb9\u5668\u6269\u5c55\u673a\u5236"}),"\n",(0,r.jsxs)(e.p,{children:["IoC\u5bb9\u5668\u8d1f\u8d23\u7ba1\u7406\u5bb9\u5668\u4e2d\u6240\u6709bean\u7684\u751f\u547d\u5468\u671f\uff0c\u800c\u5728bean\u751f\u547d\u5468\u671f\u7684\u4e0d\u540c\u9636\u6bb5\uff0cSpring\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u6269\u5c55\u70b9\u6765\u6539\u53d8bean\u7684\u547d\u8fd0\u3002\u5728\u5bb9\u5668\u7684\u542f\u52a8\u9636\u6bb5\uff0c",(0,r.jsx)(e.code,{children:"BeanFactoryPostProcessor"}),"\u5141\u8bb8\u6211\u4eec\u5728\u5bb9\u5668\u5b9e\u4f8b\u5316\u76f8\u5e94\u5bf9\u8c61\u4e4b\u524d\uff0c\u5bf9\u6ce8\u518c\u5230\u5bb9\u5668\u7684BeanDefinition\u6240\u4fdd\u5b58\u7684\u4fe1\u606f\u505a\u4e00\u4e9b\u989d\u5916\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u4fee\u6539bean\u5b9a\u4e49\u7684\u67d0\u4e9b\u5c5e\u6027\u6216\u8005\u589e\u52a0\u5176\u4ed6\u4fe1\u606f\u7b49\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5982\u679c\u8981\u81ea\u5b9a\u4e49\u6269\u5c55\u7c7b\uff0c\u901a\u5e38\u9700\u8981\u5b9e\u73b0",(0,r.jsx)(e.code,{children:"org.springframework.beans.factory.config.BeanFactoryPostProcessor"}),"\u63a5\u53e3\uff0c\u4e0e\u6b64\u540c\u65f6\uff0c\u56e0\u4e3a\u5bb9\u5668\u4e2d\u53ef\u80fd\u6709\u591a\u4e2aBeanFactoryPostProcessor\uff0c\u53ef\u80fd\u8fd8\u9700\u8981\u5b9e\u73b0",(0,r.jsx)(e.code,{children:"org.springframework.core.Ordered"}),"\u63a5\u53e3\uff0c\u4ee5\u4fdd\u8bc1BeanFactoryPostProcessor\u6309\u7167\u987a\u5e8f\u6267\u884c\u3002Spring\u63d0\u4f9b\u4e86\u4e3a\u6570\u4e0d\u591a\u7684BeanFactoryPostProcessor\u5b9e\u73b0\uff0c\u6211\u4eec\u4ee5",(0,r.jsx)(e.code,{children:"PropertyPlaceholderConfigurer"}),"\u6765\u8bf4\u660e\u5176\u5927\u81f4\u7684\u5de5\u4f5c\u6d41\u7a0b\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u5728Spring\u9879\u76ee\u7684XML\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u7ecf\u5e38\u53ef\u4ee5\u770b\u5230\u8bb8\u591a\u914d\u7f6e\u9879\u7684\u503c\u4f7f\u7528\u5360\u4f4d\u7b26\uff0c\u800c\u5c06\u5360\u4f4d\u7b26\u6240\u4ee3\u8868\u7684\u503c\u5355\u72ec\u914d\u7f6e\u5230\u72ec\u7acb\u7684properties\u6587\u4ef6\uff0c\u8fd9\u6837\u53ef\u4ee5\u5c06\u6563\u843d\u5728\u4e0d\u540cXML\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u96c6\u4e2d\u7ba1\u7406\uff0c\u800c\u4e14\u4e5f\u65b9\u4fbf\u8fd0\u7ef4\u6839\u636e\u4e0d\u540c\u7684\u73af\u5883\u8fdb\u884c\u914d\u7f6e\u4e0d\u540c\u7684\u503c\u3002\u8fd9\u4e2a\u975e\u5e38\u5b9e\u7528\u7684\u529f\u80fd\u5c31\u662f\u7531PropertyPlaceholderConfigurer\u8d1f\u8d23\u5b9e\u73b0\u7684\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u6839\u636e\u524d\u6587\uff0c\u5f53BeanFactory\u5728\u7b2c\u4e00\u9636\u6bb5\u52a0\u8f7d\u5b8c\u6240\u6709\u914d\u7f6e\u4fe1\u606f\u65f6\uff0cBeanFactory\u4e2d\u4fdd\u5b58\u7684\u5bf9\u8c61\u7684\u5c5e\u6027\u8fd8\u662f\u4ee5\u5360\u4f4d\u7b26\u65b9\u5f0f\u5b58\u5728\u7684\uff0c\u6bd4\u5982",(0,r.jsx)(e.code,{children:"${jdbc.mysql.url}"}),"\u3002\u5f53PropertyPlaceholderConfigurer\u4f5c\u4e3aBeanFactoryPostProcessor\u88ab\u5e94\u7528\u65f6\uff0c\u5b83\u4f1a\u4f7f\u7528properties\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u503c\u6765\u66ff\u6362\u76f8\u5e94\u7684BeanDefinition\u4e2d\u5360\u4f4d\u7b26\u6240\u8868\u793a\u7684\u5c5e\u6027\u503c\u3002\u5f53\u9700\u8981\u5b9e\u4f8b\u5316bean\u65f6\uff0cbean\u5b9a\u4e49\u4e2d\u7684\u5c5e\u6027\u503c\u5c31\u5df2\u7ecf\u88ab\u66ff\u6362\u6210\u6211\u4eec\u914d\u7f6e\u7684\u503c\u3002\u5f53\u7136\u5176\u5b9e\u73b0\u6bd4\u4e0a\u9762\u63cf\u8ff0\u7684\u8981\u590d\u6742\u4e00\u4e9b\uff0c\u8fd9\u91cc\u4ec5\u8bf4\u660e\u5176\u5927\u81f4\u5de5\u4f5c\u539f\u7406\uff0c\u66f4\u8be6\u7ec6\u7684\u5b9e\u73b0\u53ef\u4ee5\u53c2\u8003\u5176\u6e90\u7801\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u4e0e\u4e4b\u76f8\u4f3c\u7684\uff0c\u8fd8\u6709",(0,r.jsx)(e.code,{children:"BeanPostProcessor"}),"\uff0c\u5176\u5b58\u5728\u4e8e\u5bf9\u8c61\u5b9e\u4f8b\u5316\u9636\u6bb5\u3002\u8ddfBeanFactoryPostProcessor\u7c7b\u4f3c\uff0c\u5b83\u4f1a\u5904\u7406\u5bb9\u5668\u5185\u6240\u6709\u7b26\u5408\u6761\u4ef6\u5e76\u4e14\u5df2\u7ecf\u5b9e\u4f8b\u5316\u540e\u7684\u5bf9\u8c61\u3002\u7b80\u5355\u7684\u5bf9\u6bd4\uff0cBeanFactoryPostProcessor\u5904\u7406bean\u7684\u5b9a\u4e49\uff0c\u800cBeanPostProcessor\u5219\u5904\u7406bean\u5b8c\u6210\u5b9e\u4f8b\u5316\u540e\u7684\u5bf9\u8c61\u3002BeanPostProcessor\u5b9a\u4e49\u4e86\u4e24\u4e2a\u63a5\u53e3\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"public interface BeanPostProcessor {  \n    // \u524d\u7f6e\u5904\u7406  \n    Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException;    // \u540e\u7f6e\u5904\u7406  \n    Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException;}  \n  \n"})}),"\n",(0,r.jsx)(e.p,{children:"\u4e3a\u4e86\u7406\u89e3\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u6267\u884c\u7684\u65f6\u673a\uff0c\u7b80\u5355\u7684\u4e86\u89e3\u4e0bbean\u7684\u6574\u4e2a\u751f\u547d\u5468\u671f\uff1a"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/175724-0d50d67d980161b4.png",alt:""})}),"\n",(0,r.jsx)(e.p,{children:"Bean\u7684\u5b9e\u4f8b\u5316\u8fc7\u7a0b\uff08\u6765\u81ea\uff1aSpring\u63ed\u79d8\uff09"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"postProcessBeforeInitialization()"}),"\u65b9\u6cd5\u4e0e",(0,r.jsx)(e.code,{children:"postProcessAfterInitialization()"}),"\u5206\u522b\u5bf9\u5e94\u56fe\u4e2d\u524d\u7f6e\u5904\u7406\u548c\u540e\u7f6e\u5904\u7406\u4e24\u4e2a\u6b65\u9aa4\u5c06\u6267\u884c\u7684\u65b9\u6cd5\u3002\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u4e2d\u90fd\u4f20\u5165\u4e86bean\u5bf9\u8c61\u5b9e\u4f8b\u7684\u5f15\u7528\uff0c\u4e3a\u6269\u5c55\u5bb9\u5668\u7684\u5bf9\u8c61\u5b9e\u4f8b\u5316\u8fc7\u7a0b\u63d0\u4f9b\u4e86\u5f88\u5927\u4fbf\u5229\uff0c\u5728\u8fd9\u513f\u51e0\u4e4e\u53ef\u4ee5\u5bf9\u4f20\u5165\u7684\u5b9e\u4f8b\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\u3002\u6ce8\u89e3\u3001AOP\u7b49\u529f\u80fd\u7684\u5b9e\u73b0\u5747\u5927\u91cf\u4f7f\u7528\u4e86",(0,r.jsx)(e.code,{children:"BeanPostProcessor"}),"\uff0c\u6bd4\u5982\u6709\u4e00\u4e2a\u81ea\u5b9a\u4e49\u6ce8\u89e3\uff0c\u4f60\u5b8c\u5168\u53ef\u4ee5\u5b9e\u73b0BeanPostProcessor\u7684\u63a5\u53e3\uff0c\u5728\u5176\u4e2d\u5224\u65adbean\u5bf9\u8c61\u7684\u8111\u888b\u4e0a\u662f\u5426\u6709\u8be5\u6ce8\u89e3\uff0c\u5982\u679c\u6709\uff0c\u4f60\u53ef\u4ee5\u5bf9\u8fd9\u4e2abean\u5b9e\u4f8b\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\uff0c\u60f3\u60f3\u662f\u4e0d\u662f\u975e\u5e38\u7684\u7b80\u5355\uff1f"]}),"\n",(0,r.jsxs)(e.p,{children:["\u518d\u6765\u770b\u4e00\u4e2a\u66f4\u5e38\u89c1\u7684\u4f8b\u5b50\uff0c\u5728Spring\u4e2d\u7ecf\u5e38\u80fd\u591f\u770b\u5230\u5404\u79cd\u5404\u6837\u7684Aware\u63a5\u53e3\uff0c\u5176\u4f5c\u7528\u5c31\u662f\u5728\u5bf9\u8c61\u5b9e\u4f8b\u5316\u5b8c\u6210\u4ee5\u540e\u5c06Aware\u63a5\u53e3\u5b9a\u4e49\u4e2d\u89c4\u5b9a\u7684\u4f9d\u8d56\u6ce8\u5165\u5230\u5f53\u524d\u5b9e\u4f8b\u4e2d\u3002\u6bd4\u5982\u6700\u5e38\u89c1\u7684",(0,r.jsx)(e.code,{children:"ApplicationContextAware"}),"\u63a5\u53e3\uff0c\u5b9e\u73b0\u4e86\u8fd9\u4e2a\u63a5\u53e3\u7684\u7c7b\u90fd\u53ef\u4ee5\u83b7\u53d6\u5230\u4e00\u4e2aApplicationContext\u5bf9\u8c61\u3002\u5f53\u5bb9\u5668\u4e2d\u6bcf\u4e2a\u5bf9\u8c61\u7684\u5b9e\u4f8b\u5316\u8fc7\u7a0b\u8d70\u5230BeanPostProcessor\u524d\u7f6e\u5904\u7406\u8fd9\u4e00\u6b65\u65f6\uff0c\u5bb9\u5668\u4f1a\u68c0\u6d4b\u5230\u4e4b\u524d\u6ce8\u518c\u5230\u5bb9\u5668\u7684ApplicationContextAwareProcessor\uff0c\u7136\u540e\u5c31\u4f1a\u8c03\u7528\u5176postProcessBeforeInitialization()\u65b9\u6cd5\uff0c\u68c0\u67e5\u5e76\u8bbe\u7f6eAware\u76f8\u5173\u4f9d\u8d56\u3002\u770b\u770b\u4ee3\u7801\u5427\uff0c\u662f\u4e0d\u662f\u5f88\u7b80\u5355\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"// \u4ee3\u7801\u6765\u81ea\uff1aorg.springframework.context.support.ApplicationContextAwareProcessor  \n// \u5176postProcessBeforeInitialization\u65b9\u6cd5\u8c03\u7528\u4e86invokeAwareInterfaces\u65b9\u6cd5  \nprivate void invokeAwareInterfaces(Object bean) {  \n    if (bean instanceof EnvironmentAware) {        ((EnvironmentAware) bean).setEnvironment(this.applicationContext.getEnvironment());    }    if (bean instanceof ApplicationContextAware) {        ((ApplicationContextAware) bean).setApplicationContext(this.applicationContext);    }    // ......}  \n  \n"})}),"\n",(0,r.jsx)(e.p,{children:"\u6700\u540e\u603b\u7ed3\u4e00\u4e0b\uff0c\u672c\u5c0f\u8282\u5185\u5bb9\u548c\u4f60\u4e00\u8d77\u56de\u987e\u4e86Spring\u5bb9\u5668\u7684\u90e8\u5206\u6838\u5fc3\u5185\u5bb9\uff0c\u9650\u4e8e\u7bc7\u5e45\u4e0d\u80fd\u5199\u66f4\u591a\uff0c\u4f46\u7406\u89e3\u8fd9\u90e8\u5206\u5185\u5bb9\uff0c\u8db3\u4ee5\u8ba9\u60a8\u8f7b\u677e\u7406\u89e3Spring Boot\u7684\u542f\u52a8\u539f\u7406\uff0c\u5982\u679c\u5728\u540e\u7eed\u7684\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u9047\u5230\u4e00\u4e9b\u6666\u6da9\u96be\u61c2\u7684\u77e5\u8bc6\uff0c\u518d\u56de\u8fc7\u5934\u6765\u770b\u770bSpring\u7684\u6838\u5fc3\u77e5\u8bc6\uff0c\u4e5f\u8bb8\u6709\u610f\u60f3\u4e0d\u5230\u7684\u6548\u679c\u3002\u4e5f\u8bb8Spring Boot\u7684\u4e2d\u6587\u8d44\u6599\u5f88\u5c11\uff0c\u4f46Spring\u7684\u4e2d\u6587\u8d44\u6599\u548c\u4e66\u7c4d\u6709\u592a\u591a\u592a\u591a\uff0c\u603b\u6709\u4e1c\u897f\u80fd\u7ed9\u4f60\u542f\u53d1\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u4e8c\u592f\u5b9e\u57fa\u7840javaconfig\u4e0e\u5e38\u89c1annotation",children:"\u4e8c\u3001\u592f\u5b9e\u57fa\u7840\uff1aJavaConfig\u4e0e\u5e38\u89c1Annotation"}),"\n",(0,r.jsx)(e.h3,{id:"21javaconfig",children:"2.1\u3001JavaConfig"}),"\n",(0,r.jsxs)(e.p,{children:["\u6211\u4eec\u77e5\u9053",(0,r.jsx)(e.code,{children:"bean"}),"\u662fSpring IOC\u4e2d\u975e\u5e38\u6838\u5fc3\u7684\u6982\u5ff5\uff0cSpring\u5bb9\u5668\u8d1f\u8d23bean\u7684\u751f\u547d\u5468\u671f\u7684\u7ba1\u7406\u3002\u5728\u6700\u521d\uff0cSpring\u4f7f\u7528XML\u914d\u7f6e\u6587\u4ef6\u7684\u65b9\u5f0f\u6765\u63cf\u8ff0bean\u7684\u5b9a\u4e49\u4ee5\u53ca\u76f8\u4e92\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4f46\u968f\u7740Spring\u7684\u53d1\u5c55\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u4eba\u5bf9\u8fd9\u79cd\u65b9\u5f0f\u8868\u793a\u4e0d\u6ee1\uff0c\u56e0\u4e3aSpring\u9879\u76ee\u7684\u6240\u6709\u4e1a\u52a1\u7c7b\u5747\u4ee5bean\u7684\u5f62\u5f0f\u914d\u7f6e\u5728XML\u6587\u4ef6\u4e2d\uff0c\u9020\u6210\u4e86\u5927\u91cf\u7684XML\u6587\u4ef6\uff0c\u4f7f\u9879\u76ee\u53d8\u5f97\u590d\u6742\u4e14\u96be\u4ee5\u7ba1\u7406\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u540e\u6765\uff0c\u57fa\u4e8e\u7eafJava Annotation\u4f9d\u8d56\u6ce8\u5165\u6846\u67b6",(0,r.jsx)(e.code,{children:"Guice"}),"\u51fa\u4e16\uff0c\u5176\u6027\u80fd\u660e\u663e\u4f18\u4e8e\u91c7\u7528XML\u65b9\u5f0f\u7684Spring\uff0c\u751a\u81f3\u6709\u90e8\u5206\u4eba\u8ba4\u4e3a\uff0c",(0,r.jsx)(e.code,{children:"Guice"}),"\u53ef\u4ee5\u5b8c\u5168\u53d6\u4ee3Spring\uff08",(0,r.jsx)(e.code,{children:"Guice"}),"\u4ec5\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7IOC\u6846\u67b6\uff0c\u53d6\u4ee3Spring\u8fd8\u5dee\u7684\u633a\u8fdc\uff09\u3002\u6b63\u662f\u8fd9\u6837\u7684\u5371\u673a\u611f\uff0c\u4fc3\u4f7fSpring\u53ca\u793e\u533a\u63a8\u51fa\u5e76\u6301\u7eed\u5b8c\u5584\u4e86",(0,r.jsx)(e.code,{children:"JavaConfig"}),"\u5b50\u9879\u76ee\uff0c\u5b83\u57fa\u4e8eJava\u4ee3\u7801\u548cAnnotation\u6ce8\u89e3\u6765\u63cf\u8ff0bean\u4e4b\u95f4\u7684\u4f9d\u8d56\u7ed1\u5b9a\u5173\u7cfb\u3002\u6bd4\u5982\uff0c\u4e0b\u9762\u662f\u4f7f\u7528XML\u914d\u7f6e\u65b9\u5f0f\u6765\u63cf\u8ff0bean\u7684\u5b9a\u4e49\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'<bean id="bookService" class="cn.moondev.service.BookServiceImpl"></bean>  \n  \n'})}),"\n",(0,r.jsx)(e.p,{children:"\u800c\u57fa\u4e8eJavaConfig\u7684\u914d\u7f6e\u5f62\u5f0f\u662f\u8fd9\u6837\u7684\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"@Configuration  \npublic class MoonBookConfiguration {  \n  \n    // \u4efb\u4f55\u6807\u5fd7\u4e86@Bean\u7684\u65b9\u6cd5\uff0c\u5176\u8fd4\u56de\u503c\u5c06\u4f5c\u4e3a\u4e00\u4e2abean\u6ce8\u518c\u5230Spring\u7684IOC\u5bb9\u5668\u4e2d  \n    // \u65b9\u6cd5\u540d\u9ed8\u8ba4\u6210\u4e3a\u8be5bean\u5b9a\u4e49\u7684id  \n    @Bean    public BookService bookService() {        return new BookServiceImpl();    }}  \n  \n"})}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u679c\u4e24\u4e2abean\u4e4b\u95f4\u6709\u4f9d\u8d56\u5173\u7cfb\u7684\u8bdd\uff0c\u5728XML\u914d\u7f6e\u4e2d\u5e94\u8be5\u662f\u8fd9\u6837\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'<bean id="bookService" class="cn.moondev.service.BookServiceImpl">  \n    <property name="dependencyService" ref="dependencyService"/></bean>  \n  \n<bean id="otherService" class="cn.moondev.service.OtherServiceImpl">  \n    <property name="dependencyService" ref="dependencyService"/></bean>  \n  \n<bean id="dependencyService" class="DependencyServiceImpl"/>  \n  \n'})}),"\n",(0,r.jsx)(e.p,{children:"\u800c\u5728JavaConfig\u4e2d\u5219\u662f\u8fd9\u6837\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"@Configuration  \npublic class MoonBookConfiguration {  \n  \n    // \u5982\u679c\u4e00\u4e2abean\u4f9d\u8d56\u53e6\u4e00\u4e2abean\uff0c\u5219\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94JavaConfig\u7c7b\u4e2d\u4f9d\u8d56bean\u7684\u521b\u5efa\u65b9\u6cd5\u5373\u53ef  \n    // \u8fd9\u91cc\u76f4\u63a5\u8c03\u7528dependencyService()  \n    @Bean    public BookService bookService() {        return new BookServiceImpl(dependencyService());    }  \n    @Bean    public OtherService otherService() {        return new OtherServiceImpl(dependencyService());    }  \n    @Bean    public DependencyService dependencyService() {        return new DependencyServiceImpl();    }}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u4f60\u53ef\u80fd\u6ce8\u610f\u5230\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6709\u4e24\u4e2abean\u90fd\u4f9d\u8d56\u4e8edependencyService\uff0c\u4e5f\u5c31\u662f\u8bf4\u5f53\u521d\u59cb\u5316bookService\u65f6\u4f1a\u8c03\u7528",(0,r.jsx)(e.code,{children:"dependencyService()"}),"\uff0c\u5728\u521d\u59cb\u5316otherService\u65f6\u4e5f\u4f1a\u8c03\u7528",(0,r.jsx)(e.code,{children:"dependencyService()"}),"\uff0c\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff1f\u8fd9\u65f6\u5019IOC\u5bb9\u5668\u4e2d\u662f\u6709\u4e00\u4e2adependencyService\u5b9e\u4f8b\u8fd8\u662f\u4e24\u4e2a\uff1f\u8fd9\u4e2a\u95ee\u9898\u7559\u7740\u5927\u5bb6\u601d\u8003\u5427\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"22componentscan",children:"2.2\u3001@ComponentScan"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"@ComponentScan"}),"\u6ce8\u89e3\u5bf9\u5e94XML\u914d\u7f6e\u5f62\u5f0f\u4e2d\u7684",(0,r.jsx)(e.code,{children:"<context:component-scan>"}),"\u5143\u7d20\uff0c\u8868\u793a\u542f\u7528\u7ec4\u4ef6\u626b\u63cf\uff0cSpring\u4f1a\u81ea\u52a8\u626b\u63cf\u6240\u6709\u901a\u8fc7\u6ce8\u89e3\u914d\u7f6e\u7684bean\uff0c\u7136\u540e\u5c06\u5176\u6ce8\u518c\u5230IOC\u5bb9\u5668\u4e2d\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7",(0,r.jsx)(e.code,{children:"basePackages"}),"\u7b49\u5c5e\u6027\u6765\u6307\u5b9a",(0,r.jsx)(e.code,{children:"@ComponentScan"}),"\u81ea\u52a8\u626b\u63cf\u7684\u8303\u56f4\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u9ed8\u8ba4\u4ece\u58f0\u660e",(0,r.jsx)(e.code,{children:"@ComponentScan"}),"\u6240\u5728\u7c7b\u7684",(0,r.jsx)(e.code,{children:"package"}),"\u8fdb\u884c\u626b\u63cf\u3002\u6b63\u56e0\u4e3a\u5982\u6b64\uff0cSpringBoot\u7684\u542f\u52a8\u7c7b\u90fd\u9ed8\u8ba4\u5728",(0,r.jsx)(e.code,{children:"src/main/java"}),"\u4e0b\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"23import",children:"2.3\u3001@Import"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"@Import"}),"\u6ce8\u89e3\u7528\u4e8e\u5bfc\u5165\u914d\u7f6e\u7c7b\uff0c\u4e3e\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"@Configuration  \npublic class MoonBookConfiguration {  \n    @Bean    public BookService bookService() {        return new BookServiceImpl();    }}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u73b0\u5728\u6709\u53e6\u5916\u4e00\u4e2a\u914d\u7f6e\u7c7b\uff0c\u6bd4\u5982\uff1a",(0,r.jsx)(e.code,{children:"MoonUserConfiguration"}),"\uff0c\u8fd9\u4e2a\u914d\u7f6e\u7c7b\u4e2d\u6709\u4e00\u4e2abean\u4f9d\u8d56\u4e8e",(0,r.jsx)(e.code,{children:"MoonBookConfiguration"}),"\u4e2d\u7684bookService\uff0c\u5982\u4f55\u5c06\u8fd9\u4e24\u4e2abean\u7ec4\u5408\u5728\u4e00\u8d77\uff1f\u501f\u52a9",(0,r.jsx)(e.code,{children:"@Import"}),"\u5373\u53ef\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"@Configuration  \n// \u53ef\u4ee5\u540c\u65f6\u5bfc\u5165\u591a\u4e2a\u914d\u7f6e\u7c7b\uff0c\u6bd4\u5982\uff1a@Import({A.class,B.class})  \n@Import(MoonBookConfiguration.class)  \npublic class MoonUserConfiguration {  \n    @Bean    public UserService userService(BookService bookService) {        return new BookServiceImpl(bookService);    }}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u57284.2\u4e4b\u524d\uff0c",(0,r.jsx)(e.code,{children:"@Import"}),"\u6ce8\u89e3\u53ea\u652f\u6301\u5bfc\u5165\u914d\u7f6e\u7c7b\uff0c\u4f46\u662f\u57284.2\u4e4b\u540e\uff0c\u5b83\u652f\u6301\u5bfc\u5165\u666e\u901a\u7c7b\uff0c\u5e76\u5c06\u8fd9\u4e2a\u7c7b\u4f5c\u4e3a\u4e00\u4e2abean\u7684\u5b9a\u4e49\u6ce8\u518c\u5230IOC\u5bb9\u5668\u4e2d\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"24conditional",children:"2.4\u3001@Conditional"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"@Conditional"}),"\u6ce8\u89e3\u8868\u793a\u5728\u6ee1\u8db3\u67d0\u79cd\u6761\u4ef6\u540e\u624d\u521d\u59cb\u5316\u4e00\u4e2abean\u6216\u8005\u542f\u7528\u67d0\u4e9b\u914d\u7f6e\u3002\u5b83\u4e00\u822c\u7528\u5728\u7531",(0,r.jsx)(e.code,{children:"@Component"}),"\u3001",(0,r.jsx)(e.code,{children:"@Service"}),"\u3001",(0,r.jsx)(e.code,{children:"@Configuration"}),"\u7b49\u6ce8\u89e3\u6807\u8bc6\u7684\u7c7b\u4e0a\u9762\uff0c\u6216\u8005\u7531",(0,r.jsx)(e.code,{children:"@Bean"}),"\u6807\u8bb0\u7684\u65b9\u6cd5\u4e0a\u3002\u5982\u679c\u4e00\u4e2a",(0,r.jsx)(e.code,{children:"@Configuration"}),"\u7c7b\u6807\u8bb0\u4e86",(0,r.jsx)(e.code,{children:"@Conditional"}),"\uff0c\u5219\u8be5\u7c7b\u4e2d\u6240\u6709\u6807\u8bc6\u4e86",(0,r.jsx)(e.code,{children:"@Bean"}),"\u7684\u65b9\u6cd5\u548c",(0,r.jsx)(e.code,{children:"@Import"}),"\u6ce8\u89e3\u5bfc\u5165\u7684\u76f8\u5173\u7c7b\u5c06\u9075\u4ece\u8fd9\u4e9b\u6761\u4ef6\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5728Spring\u91cc\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u7f16\u5199\u4f60\u81ea\u5df1\u7684\u6761\u4ef6\u7c7b\uff0c\u6240\u8981\u505a\u7684\u5c31\u662f\u5b9e\u73b0",(0,r.jsx)(e.code,{children:"Condition"}),"\u63a5\u53e3\uff0c\u5e76\u8986\u76d6\u5b83\u7684",(0,r.jsx)(e.code,{children:"matches()"}),"\u65b9\u6cd5\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4e0b\u9762\u7684\u7b80\u5355\u6761\u4ef6\u7c7b\u8868\u793a\u53ea\u6709\u5728",(0,r.jsx)(e.code,{children:"Classpath"}),"\u91cc\u5b58\u5728",(0,r.jsx)(e.code,{children:"JdbcTemplate"}),"\u7c7b\u65f6\u624d\u751f\u6548\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'public class JdbcTemplateCondition implements Condition {  \n  \n    @Override    public boolean matches(ConditionContext conditionContext, AnnotatedTypeMetadata annotatedTypeMetadata) {        try {        conditionContext.getClassLoader().loadClass("org.springframework.jdbc.core.JdbcTemplate");            return true;        } catch (ClassNotFoundException e) {            e.printStackTrace();        }        return false;    }}  \n  \n'})}),"\n",(0,r.jsx)(e.p,{children:"\u5f53\u4f60\u7528Java\u6765\u58f0\u660ebean\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u81ea\u5b9a\u4e49\u6761\u4ef6\u7c7b\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"@Conditional(JdbcTemplateCondition.class)  \n@Service  \npublic MyService service() {  \n    ......}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u53ea\u6709\u5f53",(0,r.jsx)(e.code,{children:"JdbcTemplateCondition"}),"\u7c7b\u7684\u6761\u4ef6\u6210\u7acb\u65f6\u624d\u4f1a\u521b\u5efaMyService\u8fd9\u4e2abean\u3002\u4e5f\u5c31\u662f\u8bf4MyService\u8fd9bean\u7684\u521b\u5efa\u6761\u4ef6\u662f",(0,r.jsx)(e.code,{children:"classpath"}),"\u91cc\u9762\u5305\u542b",(0,r.jsx)(e.code,{children:"JdbcTemplate"}),"\uff0c\u5426\u5219\u8fd9\u4e2abean\u7684\u58f0\u660e\u5c31\u4f1a\u88ab\u5ffd\u7565\u6389\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"Spring Boot"}),"\u5b9a\u4e49\u4e86\u5f88\u591a\u6709\u8da3\u7684\u6761\u4ef6\uff0c\u5e76\u628a\u4ed6\u4eec\u8fd0\u7528\u5230\u4e86\u914d\u7f6e\u7c7b\u4e0a\uff0c\u8fd9\u4e9b\u914d\u7f6e\u7c7b\u6784\u6210\u4e86",(0,r.jsx)(e.code,{children:"Spring Boot"}),"\u7684\u81ea\u52a8\u914d\u7f6e\u7684\u57fa\u7840\u3002",(0,r.jsx)(e.code,{children:"Spring Boot"}),"\u8fd0\u7528\u6761\u4ef6\u5316\u914d\u7f6e\u7684\u65b9\u6cd5\u662f\uff1a\u5b9a\u4e49\u591a\u4e2a\u7279\u6b8a\u7684\u6761\u4ef6\u5316\u6ce8\u89e3\uff0c\u5e76\u5c06\u5b83\u4eec\u7528\u5230\u914d\u7f6e\u7c7b\u4e0a\u3002\u4e0b\u9762\u5217\u51fa\u4e86",(0,r.jsx)(e.code,{children:"Spring Boot"}),"\u63d0\u4f9b\u7684\u90e8\u5206\u6761\u4ef6\u5316\u6ce8\u89e3\uff1a"]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u6761\u4ef6\u5316\u6ce8\u89e3"}),(0,r.jsx)(e.th,{children:"\u914d\u7f6e\u751f\u6548\u6761\u4ef6"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"@ConditionalOnBean"}),(0,r.jsx)(e.td,{children:"\u914d\u7f6e\u4e86\u67d0\u4e2a\u7279\u5b9abean"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"@ConditionalOnMissingBean"}),(0,r.jsx)(e.td,{children:"\u6ca1\u6709\u914d\u7f6e\u7279\u5b9a\u7684bean"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"@ConditionalOnClass"}),(0,r.jsx)(e.td,{children:"Classpath\u91cc\u6709\u6307\u5b9a\u7684\u7c7b"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"@ConditionalOnMissingClass"}),(0,r.jsx)(e.td,{children:"Classpath\u91cc\u6ca1\u6709\u6307\u5b9a\u7684\u7c7b"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"@ConditionalOnExpression"}),(0,r.jsx)(e.td,{children:"\u7ed9\u5b9a\u7684Spring Expression Language\u8868\u8fbe\u5f0f\u8ba1\u7b97\u7ed3\u679c\u4e3atrue"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"@ConditionalOnJava"}),(0,r.jsx)(e.td,{children:"Java\u7684\u7248\u672c\u5339\u914d\u7279\u5b9a\u6307\u6216\u8005\u4e00\u4e2a\u8303\u56f4\u503c"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"@ConditionalOnProperty"}),(0,r.jsx)(e.td,{children:"\u6307\u5b9a\u7684\u914d\u7f6e\u5c5e\u6027\u8981\u6709\u4e00\u4e2a\u660e\u786e\u7684\u503c"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"@ConditionalOnResource"}),(0,r.jsx)(e.td,{children:"Classpath\u91cc\u6709\u6307\u5b9a\u7684\u8d44\u6e90"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"@ConditionalOnWebApplication"}),(0,r.jsx)(e.td,{children:"\u8fd9\u662f\u4e00\u4e2aWeb\u5e94\u7528\u7a0b\u5e8f"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"@ConditionalOnNotWebApplication"}),(0,r.jsx)(e.td,{children:"\u8fd9\u4e0d\u662f\u4e00\u4e2aWeb\u5e94\u7528\u7a0b\u5e8f"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"25configurationproperties\u4e0eenableconfigurationproperties",children:"2.5\u3001@ConfigurationProperties\u4e0e@EnableConfigurationProperties"}),"\n",(0,r.jsxs)(e.p,{children:["\u5f53\u67d0\u4e9b\u5c5e\u6027\u7684\u503c\u9700\u8981\u914d\u7f6e\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e00\u822c\u4f1a\u5728",(0,r.jsx)(e.code,{children:"application.properties"}),"\u6587\u4ef6\u4e2d\u65b0\u5efa\u914d\u7f6e\u9879\uff0c\u7136\u540e\u5728bean\u4e2d\u4f7f\u7528",(0,r.jsx)(e.code,{children:"@Value"}),"\u6ce8\u89e3\u6765\u83b7\u53d6\u914d\u7f6e\u7684\u503c\uff0c\u6bd4\u5982\u4e0b\u9762\u914d\u7f6e\u6570\u636e\u6e90\u7684\u4ee3\u7801\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'// jdbc config  \njdbc.mysql.url=jdbc:mysql://localhost:3306/sampledb  \njdbc.mysql.username=root  \njdbc.mysql.password=123456  \n......  \n  \n// \u914d\u7f6e\u6570\u636e\u6e90  \n@Configuration  \npublic class HikariDataSourceConfiguration {  \n  \n    @Value("jdbc.mysql.url")    public String url;    @Value("jdbc.mysql.username")    public String user;    @Value("jdbc.mysql.password")    public String password;  \n    @Bean    public HikariDataSource dataSource() {        HikariConfig hikariConfig = new HikariConfig();        hikariConfig.setJdbcUrl(url);        hikariConfig.setUsername(user);        hikariConfig.setPassword(password);        // \u7701\u7565\u90e8\u5206\u4ee3\u7801  \n        return new HikariDataSource(hikariConfig);    }}  \n  \n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u7528",(0,r.jsx)(e.code,{children:"@Value"}),"\u6ce8\u89e3\u6ce8\u5165\u7684\u5c5e\u6027\u901a\u5e38\u90fd\u6bd4\u8f83\u7b80\u5355\uff0c\u5982\u679c\u540c\u4e00\u4e2a\u914d\u7f6e\u5728\u591a\u4e2a\u5730\u65b9\u4f7f\u7528\uff0c\u4e5f\u5b58\u5728\u4e0d\u65b9\u4fbf\u7ef4\u62a4\u7684\u95ee\u9898\uff08\u8003\u8651\u4e0b\uff0c\u5982\u679c\u6709\u51e0\u5341\u4e2a\u5730\u65b9\u5728\u4f7f\u7528\u67d0\u4e2a\u914d\u7f6e\uff0c\u800c\u73b0\u5728\u4f60\u60f3\u6539\u4e0b\u540d\u5b57\uff0c\u4f60\u6539\u600e\u4e48\u505a\uff1f\uff09\u3002\u5bf9\u4e8e\u66f4\u4e3a\u590d\u6742\u7684\u914d\u7f6e\uff0cSpring Boot\u63d0\u4f9b\u4e86\u66f4\u4f18\u96c5\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u90a3\u5c31\u662f",(0,r.jsx)(e.code,{children:"@ConfigurationProperties"}),"\u6ce8\u89e3\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u6765\u6539\u5199\u4e0a\u9762\u7684\u4ee3\u7801\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'@Component  \n//  \u8fd8\u53ef\u4ee5\u901a\u8fc7@PropertySource("classpath:jdbc.properties")\u6765\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6  \n@ConfigurationProperties("jdbc.mysql")  \n// \u524d\u7f00=jdbc.mysql\uff0c\u4f1a\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5bfb\u627ejdbc.mysql.*\u7684\u914d\u7f6e\u9879  \npulic class JdbcConfig {  \n    public String url;    public String username;    public String password;}  \n  \n@Configuration  \npublic class HikariDataSourceConfiguration {  \n  \n    @AutoWired    public JdbcConfig config;  \n    @Bean    public HikariDataSource dataSource() {        HikariConfig hikariConfig = new HikariConfig();        hikariConfig.setJdbcUrl(config.url);        hikariConfig.setUsername(config.username);        hikariConfig.setPassword(config.password);        // \u7701\u7565\u90e8\u5206\u4ee3\u7801  \n        return new HikariDataSource(hikariConfig);    }}  \n  \n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"@ConfigurationProperties"}),"\u5bf9\u4e8e\u66f4\u4e3a\u590d\u6742\u7684\u914d\u7f6e\uff0c\u5904\u7406\u8d77\u6765\u4e5f\u662f\u5f97\u5fc3\u5e94\u624b\uff0c\u6bd4\u5982\u6709\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"#App  \napp.menus[0].title=Home  \napp.menus[0].name=Home  \napp.menus[0].path=/  \napp.menus[1].title=Login  \napp.menus[1].name=Login  \napp.menus[1].path=/login  \n  \napp.compiler.timeout=5  \napp.compiler.output-folder=/temp/  \n  \napp.error=/error/  \n  \n"})}),"\n",(0,r.jsx)(e.p,{children:"\u53ef\u4ee5\u5b9a\u4e49\u5982\u4e0b\u914d\u7f6e\u7c7b\u6765\u63a5\u6536\u8fd9\u4e9b\u5c5e\u6027"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'@Component  \n@ConfigurationProperties("app")  \npublic class AppProperties {  \n  \n    public String error;    public List<Menu> menus = new ArrayList<>();    public Compiler compiler = new Compiler();  \n    public static class Menu {        public String name;        public String path;        public String title;    }  \n    public static class Compiler {        public String timeout;        public String outputFolder;    }}  \n  \n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"@EnableConfigurationProperties"}),"\u6ce8\u89e3\u8868\u793a\u5bf9",(0,r.jsx)(e.code,{children:"@ConfigurationProperties"}),"\u7684\u5185\u5d4c\u652f\u6301\uff0c\u9ed8\u8ba4\u4f1a\u5c06\u5bf9\u5e94Properties Class\u4f5c\u4e3abean\u6ce8\u5165\u7684IOC\u5bb9\u5668\u4e2d\uff0c\u5373\u5728\u76f8\u5e94\u7684Properties\u7c7b\u4e0a\u4e0d\u7528\u52a0",(0,r.jsx)(e.code,{children:"@Component"}),"\u6ce8\u89e3\u3002"]}),"\n",(0,r.jsx)(e.h2,{id:"\u4e09\u524a\u94c1\u5982\u6ce5springfactoriesloader\u8be6\u89e3",children:"\u4e09\u3001\u524a\u94c1\u5982\u6ce5\uff1aSpringFactoriesLoader\u8be6\u89e3"}),"\n",(0,r.jsxs)(e.p,{children:["JVM\u63d0\u4f9b\u4e863\u79cd\u7c7b\u52a0\u8f7d\u5668\uff1a",(0,r.jsx)(e.code,{children:"BootstrapClassLoader"}),"\u3001",(0,r.jsx)(e.code,{children:"ExtClassLoader"}),"\u3001",(0,r.jsx)(e.code,{children:"AppClassLoader"}),"\u5206\u522b\u52a0\u8f7dJava\u6838\u5fc3\u7c7b\u5e93\u3001\u6269\u5c55\u7c7b\u5e93\u4ee5\u53ca\u5e94\u7528\u7684\u7c7b\u8def\u5f84(",(0,r.jsx)(e.code,{children:"CLASSPATH"}),")\u4e0b\u7684\u7c7b\u5e93\u3002JVM\u901a\u8fc7\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\u8fdb\u884c\u7c7b\u7684\u52a0\u8f7d\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7ee7\u627f",(0,r.jsx)(e.code,{children:"java.lang.classloader"}),"\u5b9e\u73b0\u81ea\u5df1\u7684\u7c7b\u52a0\u8f7d\u5668\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u4f55\u4e3a\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\uff1f\u5f53\u4e00\u4e2a\u7c7b\u52a0\u8f7d\u5668\u6536\u5230\u7c7b\u52a0\u8f7d\u4efb\u52a1\u65f6\uff0c\u4f1a\u5148\u4ea4\u7ed9\u81ea\u5df1\u7684\u7236\u52a0\u8f7d\u5668\u53bb\u5b8c\u6210\uff0c\u56e0\u6b64\u6700\u7ec8\u52a0\u8f7d\u4efb\u52a1\u90fd\u4f1a\u4f20\u9012\u5230\u6700\u9876\u5c42\u7684BootstrapClassLoader\uff0c\u53ea\u6709\u5f53\u7236\u52a0\u8f7d\u5668\u65e0\u6cd5\u5b8c\u6210\u52a0\u8f7d\u4efb\u52a1\u65f6\uff0c\u624d\u4f1a\u5c1d\u8bd5\u81ea\u5df1\u6765\u52a0\u8f7d\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u91c7\u7528\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\u7684\u4e00\u4e2a\u597d\u5904\u662f\u4fdd\u8bc1\u4f7f\u7528\u4e0d\u540c\u7c7b\u52a0\u8f7d\u5668\u6700\u7ec8\u5f97\u5230\u7684\u90fd\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1Java \u6838\u5fc3\u5e93\u7684\u7c7b\u578b\u5b89\u5168\uff0c\u6bd4\u5982\uff0c\u52a0\u8f7d\u4f4d\u4e8ert.jar\u5305\u4e2d\u7684",(0,r.jsx)(e.code,{children:"java.lang.Object"}),"\u7c7b\uff0c\u4e0d\u7ba1\u662f\u54ea\u4e2a\u52a0\u8f7d\u5668\u52a0\u8f7d\u8fd9\u4e2a\u7c7b\uff0c\u6700\u7ec8\u90fd\u662f\u59d4\u6258\u7ed9\u9876\u5c42\u7684BootstrapClassLoader\u6765\u52a0\u8f7d\u7684\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u4efb\u4f55\u7684\u7c7b\u52a0\u8f7d\u5668\u6700\u7ec8\u5f97\u5230\u7684\u90fd\u662f\u540c\u6837\u4e00\u4e2aObject\u5bf9\u8c61\u3002\u67e5\u770bClassLoader\u7684\u6e90\u7801\uff0c\u5bf9\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\u4f1a\u6709\u66f4\u76f4\u89c2\u7684\u8ba4\u8bc6\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"protected Class<?> loadClass(String name, boolean resolve) {  \n    synchronized (getClassLoadingLock(name)) {    // \u9996\u5148\uff0c\u68c0\u67e5\u8be5\u7c7b\u662f\u5426\u5df2\u7ecf\u88ab\u52a0\u8f7d\uff0c\u5982\u679c\u4eceJVM\u7f13\u5b58\u4e2d\u627e\u5230\u8be5\u7c7b\uff0c\u5219\u76f4\u63a5\u8fd4\u56de  \n    Class<?> c = findLoadedClass(name);    if (c == null) {        try {            // \u9075\u5faa\u53cc\u4eb2\u59d4\u6d3e\u7684\u6a21\u578b\uff0c\u9996\u5148\u4f1a\u901a\u8fc7\u9012\u5f52\u4ece\u7236\u52a0\u8f7d\u5668\u5f00\u59cb\u627e\uff0c  \n            // \u76f4\u5230\u7236\u7c7b\u52a0\u8f7d\u5668\u662fBootstrapClassLoader\u4e3a\u6b62  \n            if (parent != null) {                c = parent.loadClass(name, false);            } else {                c = findBootstrapClassOrNull(name);            }        } catch (ClassNotFoundException e) {}        if (c == null) {            // \u5982\u679c\u8fd8\u627e\u4e0d\u5230\uff0c\u5c1d\u8bd5\u901a\u8fc7findClass\u65b9\u6cd5\u53bb\u5bfb\u627e  \n            // findClass\u662f\u7559\u7ed9\u5f00\u53d1\u8005\u81ea\u5df1\u5b9e\u73b0\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4  \n            // \u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668\u65f6\uff0c\u91cd\u5199\u6b64\u65b9\u6cd5\u5373\u53ef  \n           c = findClass(name);        }    }    if (resolve) {        resolveClass(c);    }    return c;    }}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u4f46\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\u5e76\u4e0d\u80fd\u89e3\u51b3\u6240\u6709\u7684\u7c7b\u52a0\u8f7d\u5668\u95ee\u9898\uff0c\u6bd4\u5982\uff0cJava \u63d0\u4f9b\u4e86\u5f88\u591a\u670d\u52a1\u63d0\u4f9b\u8005\u63a5\u53e3(",(0,r.jsx)(e.code,{children:"Service Provider Interface"}),"\uff0cSPI)\uff0c\u5141\u8bb8\u7b2c\u4e09\u65b9\u4e3a\u8fd9\u4e9b\u63a5\u53e3\u63d0\u4f9b\u5b9e\u73b0\u3002\u5e38\u89c1\u7684 SPI \u6709 JDBC\u3001JNDI\u3001JAXP \u7b49\uff0c\u8fd9\u4e9bSPI\u7684\u63a5\u53e3\u7531\u6838\u5fc3\u7c7b\u5e93\u63d0\u4f9b\uff0c\u5374\u7531\u7b2c\u4e09\u65b9\u5b9e\u73b0\uff0c\u8fd9\u6837\u5c31\u5b58\u5728\u4e00\u4e2a\u95ee\u9898\uff1aSPI \u7684\u63a5\u53e3\u662f Java \u6838\u5fc3\u5e93\u7684\u4e00\u90e8\u5206\uff0c\u662f\u7531BootstrapClassLoader\u52a0\u8f7d\u7684\uff1bSPI\u5b9e\u73b0\u7684Java\u7c7b\u4e00\u822c\u662f\u7531AppClassLoader\u6765\u52a0\u8f7d\u7684\u3002BootstrapClassLoader\u662f\u65e0\u6cd5\u627e\u5230 SPI \u7684\u5b9e\u73b0\u7c7b\u7684\uff0c\u56e0\u4e3a\u5b83\u53ea\u52a0\u8f7dJava\u7684\u6838\u5fc3\u5e93\u3002\u5b83\u4e5f\u4e0d\u80fd\u4ee3\u7406\u7ed9AppClassLoader\uff0c\u56e0\u4e3a\u5b83\u662f\u6700\u9876\u5c42\u7684\u7c7b\u52a0\u8f7d\u5668\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\u5e76\u4e0d\u80fd\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u7c7b\u52a0\u8f7d\u5668(",(0,r.jsx)(e.code,{children:"ContextClassLoader"}),")\u6b63\u597d\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002\u4ece\u540d\u79f0\u4e0a\u770b\uff0c\u53ef\u80fd\u4f1a\u8bef\u89e3\u4e3a\u5b83\u662f\u4e00\u79cd\u65b0\u7684\u7c7b\u52a0\u8f7d\u5668\uff0c\u5b9e\u9645\u4e0a\uff0c\u5b83\u4ec5\u4ec5\u662fThread\u7c7b\u7684\u4e00\u4e2a\u53d8\u91cf\u800c\u5df2\uff0c\u53ef\u4ee5\u901a\u8fc7",(0,r.jsx)(e.code,{children:"setContextClassLoader(ClassLoader cl)"}),"\u548c",(0,r.jsx)(e.code,{children:"getContextClassLoader()"}),"\u6765\u8bbe\u7f6e\u548c\u83b7\u53d6\u8be5\u5bf9\u8c61\u3002\u5982\u679c\u4e0d\u505a\u4efb\u4f55\u7684\u8bbe\u7f6e\uff0cJava\u5e94\u7528\u7684\u7ebf\u7a0b\u7684\u4e0a\u4e0b\u6587\u7c7b\u52a0\u8f7d\u5668\u9ed8\u8ba4\u5c31\u662fAppClassLoader\u3002\u5728\u6838\u5fc3\u7c7b\u5e93\u4f7f\u7528SPI\u63a5\u53e3\u65f6\uff0c\u4f20\u9012\u7684\u7c7b\u52a0\u8f7d\u5668\u4f7f\u7528\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u7c7b\u52a0\u8f7d\u5668\uff0c\u5c31\u53ef\u4ee5\u6210\u529f\u7684\u52a0\u8f7d\u5230SPI\u5b9e\u73b0\u7684\u7c7b\u3002\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u7c7b\u52a0\u8f7d\u5668\u5728\u5f88\u591aSPI\u7684\u5b9e\u73b0\u4e2d\u90fd\u4f1a\u7528\u5230\u3002\u4f46\u5728JDBC\u4e2d\uff0c\u4f60\u53ef\u80fd\u4f1a\u770b\u5230\u4e00\u79cd\u66f4\u76f4\u63a5\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u6bd4\u5982\uff0cJDBC\u9a71\u52a8\u7ba1\u7406",(0,r.jsx)(e.code,{children:"java.sql.Driver"}),"\u4e2d\u7684",(0,r.jsx)(e.code,{children:"loadInitialDrivers()"}),"\u65b9\u6cd5\u4e2d\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u770b\u5230JDK\u662f\u5982\u4f55\u52a0\u8f7d\u9a71\u52a8\u7684\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'for (String aDriver : driversList) {  \n    try {        // \u76f4\u63a5\u4f7f\u7528AppClassLoader  \n        Class.forName(aDriver, true, ClassLoader.getSystemClassLoader());    } catch (Exception ex) {        println("DriverManager.Initialize: load failed: " + ex);    }}  \n  \n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u5176\u5b9e\u8bb2\u89e3\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u7c7b\u52a0\u8f7d\u5668\uff0c\u6700\u4e3b\u8981\u662f\u8ba9\u5927\u5bb6\u5728\u770b\u5230",(0,r.jsx)(e.code,{children:"Thread.currentThread().getClassLoader()"}),"\u548c",(0,r.jsx)(e.code,{children:"Thread.currentThread().getContextClassLoader()"}),"\u65f6\u4e0d\u4f1a\u4e00\u8138\u61f5\u903c\uff0c\u8fd9\u4e24\u8005\u9664\u4e86\u5728\u8bb8\u591a\u5e95\u5c42\u6846\u67b6\u4e2d\u53d6\u5f97\u7684ClassLoader\u53ef\u80fd\u4f1a\u6709\u6240\u4e0d\u540c\u5916\uff0c\u5176\u4ed6\u5927\u591a\u6570\u4e1a\u52a1\u573a\u666f\u4e0b\u90fd\u662f\u4e00\u6837\u7684\uff0c\u5927\u5bb6\u53ea\u8981\u77e5\u9053\u5b83\u662f\u4e3a\u4e86\u89e3\u51b3\u4ec0\u4e48\u95ee\u9898\u800c\u5b58\u5728\u7684\u5373\u53ef\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u7c7b\u52a0\u8f7d\u5668\u9664\u4e86\u52a0\u8f7dclass\u5916\uff0c\u8fd8\u6709\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u529f\u80fd\uff0c\u5c31\u662f\u52a0\u8f7d\u8d44\u6e90\uff0c\u5b83\u53ef\u4ee5\u4ecejar\u5305\u4e2d\u8bfb\u53d6\u4efb\u4f55\u8d44\u6e90\u6587\u4ef6\uff0c\u6bd4\u5982\uff0c",(0,r.jsx)(e.code,{children:"ClassLoader.getResources(String name)"}),"\u65b9\u6cd5\u5c31\u662f\u7528\u4e8e\u8bfb\u53d6jar\u5305\u4e2d\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u5176\u4ee3\u7801\u5982\u4e0b\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"public Enumeration<URL> getResources(String name) throws IOException {  \n    Enumeration<URL>[] tmp = (Enumeration<URL>[]) new Enumeration<?>[2];    if (parent != null) {        tmp[0] = parent.getResources(name);    } else {        tmp[0] = getBootstrapResources(name);    }    tmp[1] = findResources(name);    return new CompoundEnumeration<>(tmp);}  \n  \n"})}),"\n",(0,r.jsx)(e.p,{children:"\u662f\u4e0d\u662f\u89c9\u5f97\u6709\u70b9\u773c\u719f\uff0c\u4e0d\u9519\uff0c\u5b83\u7684\u903b\u8f91\u5176\u5b9e\u8ddf\u7c7b\u52a0\u8f7d\u7684\u903b\u8f91\u662f\u4e00\u6837\u7684\uff0c\u9996\u5148\u5224\u65ad\u7236\u7c7b\u52a0\u8f7d\u5668\u662f\u5426\u4e3a\u7a7a\uff0c\u4e0d\u4e3a\u7a7a\u5219\u59d4\u6258\u7236\u7c7b\u52a0\u8f7d\u5668\u6267\u884c\u8d44\u6e90\u67e5\u627e\u4efb\u52a1\uff0c\u76f4\u5230BootstrapClassLoader\uff0c\u6700\u540e\u624d\u8f6e\u5230\u81ea\u5df1\u67e5\u627e\u3002\u800c\u4e0d\u540c\u7684\u7c7b\u52a0\u8f7d\u5668\u8d1f\u8d23\u626b\u63cf\u4e0d\u540c\u8def\u5f84\u4e0b\u7684jar\u5305\uff0c\u5c31\u5982\u540c\u52a0\u8f7dclass\u4e00\u6837\uff0c\u6700\u540e\u4f1a\u626b\u63cf\u6240\u6709\u7684jar\u5305\uff0c\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u8d44\u6e90\u6587\u4ef6\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u7c7b\u52a0\u8f7d\u5668\u7684",(0,r.jsx)(e.code,{children:"findResources(name)"}),"\u65b9\u6cd5\u4f1a\u904d\u5386\u5176\u8d1f\u8d23\u52a0\u8f7d\u7684\u6240\u6709jar\u5305\uff0c\u627e\u5230jar\u5305\u4e2d\u540d\u79f0\u4e3aname\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u8fd9\u91cc\u7684\u8d44\u6e90\u53ef\u4ee5\u662f\u4efb\u4f55\u6587\u4ef6\uff0c\u751a\u81f3\u662f.class\u6587\u4ef6\uff0c\u6bd4\u5982\u4e0b\u9762\u7684\u793a\u4f8b\uff0c\u7528\u4e8e\u67e5\u627eArray.class\u6587\u4ef6\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'// \u5bfb\u627eArray.class\u6587\u4ef6  \npublic static void main(String[] args) throws Exception{  \n    // Array.class\u7684\u5b8c\u6574\u8def\u5f84  \n    String name = "java/sql/Array.class";    Enumeration<URL> urls = Thread.currentThread().getContextClassLoader().getResources(name);    while (urls.hasMoreElements()) {        URL url = urls.nextElement();        System.out.println(url.toString());    }}  \n  \n'})}),"\n",(0,r.jsx)(e.p,{children:"\u8fd0\u884c\u540e\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u7ed3\u679c\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"$JAVA_HOME/jre/lib/rt.jar!/java/sql/Array.class  \n  \n"})}),"\n",(0,r.jsx)(e.p,{children:"\u6839\u636e\u8d44\u6e90\u6587\u4ef6\u7684URL\uff0c\u53ef\u4ee5\u6784\u9020\u76f8\u5e94\u7684\u6587\u4ef6\u6765\u8bfb\u53d6\u8d44\u6e90\u5185\u5bb9\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u770b\u5230\u8fd9\u91cc\uff0c\u4f60\u53ef\u80fd\u4f1a\u611f\u5230\u633a\u5947\u602a\u7684\uff0c\u4f60\u4e0d\u662f\u8981\u8be6\u89e3",(0,r.jsx)(e.code,{children:"SpringFactoriesLoader"}),"\u5417\uff1f\u4e0a\u6765\u8bb2\u4e86\u4e00\u5806ClassLoader\u662f\u51e0\u4e2a\u610f\u601d\uff1f\u770b\u4e0b\u5b83\u7684\u6e90\u7801\u4f60\u5c31\u77e5\u9053\u4e86\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'public static final String FACTORIES_RESOURCE_LOCATION = "META-INF/spring.factories";  \n// spring.factories\u6587\u4ef6\u7684\u683c\u5f0f\u4e3a\uff1akey=value1,value2,value3  \n// \u4ece\u6240\u6709\u7684jar\u5305\u4e2d\u627e\u5230META-INF/spring.factories\u6587\u4ef6  \n// \u7136\u540e\u4ece\u6587\u4ef6\u4e2d\u89e3\u6790\u51fakey=factoryClass\u7c7b\u540d\u79f0\u7684\u6240\u6709value\u503c  \npublic static List<String> loadFactoryNames(Class<?> factoryClass, ClassLoader classLoader) {  \n    String factoryClassName = factoryClass.getName();    // \u53d6\u5f97\u8d44\u6e90\u6587\u4ef6\u7684URL  \n    Enumeration<URL> urls = (classLoader != null ? classLoader.getResources(FACTORIES_RESOURCE_LOCATION) : ClassLoader.getSystemResources(FACTORIES_RESOURCE_LOCATION));    List<String> result = new ArrayList<String>();    // \u904d\u5386\u6240\u6709\u7684URL  \n    while (urls.hasMoreElements()) {        URL url = urls.nextElement();        // \u6839\u636e\u8d44\u6e90\u6587\u4ef6URL\u89e3\u6790properties\u6587\u4ef6  \n        Properties properties = PropertiesLoaderUtils.loadProperties(new UrlResource(url));        String factoryClassNames = properties.getProperty(factoryClassName);        // \u7ec4\u88c5\u6570\u636e\uff0c\u5e76\u8fd4\u56de  \n        result.addAll(Arrays.asList(StringUtils.commaDelimitedListToStringArray(factoryClassNames)));    }    return result;}  \n  \n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u6709\u4e86\u524d\u9762\u5173\u4e8eClassLoader\u7684\u77e5\u8bc6\uff0c\u518d\u6765\u7406\u89e3\u8fd9\u6bb5\u4ee3\u7801\uff0c\u662f\u4e0d\u662f\u611f\u89c9\u8c41\u7136\u5f00\u6717\uff1a\u4ece",(0,r.jsx)(e.code,{children:"CLASSPATH"}),"\u4e0b\u7684\u6bcf\u4e2aJar\u5305\u4e2d\u641c\u5bfb\u6240\u6709",(0,r.jsx)(e.code,{children:"META-INF/spring.factories"}),"\u914d\u7f6e\u6587\u4ef6\uff0c\u7136\u540e\u5c06\u89e3\u6790properties\u6587\u4ef6\uff0c\u627e\u5230\u6307\u5b9a\u540d\u79f0\u7684\u914d\u7f6e\u540e\u8fd4\u56de\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5176\u5b9e\u8fd9\u91cc\u4e0d\u4ec5\u4ec5\u662f\u4f1a\u53bbClassPath\u8def\u5f84\u4e0b\u67e5\u627e\uff0c\u4f1a\u626b\u63cf\u6240\u6709\u8def\u5f84\u4e0b\u7684Jar\u5305\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u4e2a\u6587\u4ef6\u53ea\u4f1a\u5728Classpath\u4e0b\u7684jar\u5305\u4e2d\u3002\u6765\u7b80\u5355\u770b\u4e0b",(0,r.jsx)(e.code,{children:"spring.factories"}),"\u6587\u4ef6\u7684\u5185\u5bb9\u5427\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"// \u6765\u81ea org.springframework.boot.autoconfigure\u4e0b\u7684META-INF/spring.factories  \n// EnableAutoConfiguration\u540e\u6587\u4f1a\u8bb2\u5230\uff0c\u5b83\u7528\u4e8e\u5f00\u542fSpring Boot\u81ea\u52a8\u914d\u7f6e\u529f\u80fd  \norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\  \norg.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\\  \norg.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\\  \norg.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration\\  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u6267\u884c",(0,r.jsx)(e.code,{children:"loadFactoryNames(EnableAutoConfiguration.class, classLoader)"}),"\u540e\uff0c\u5f97\u5230\u5bf9\u5e94\u7684\u4e00\u7ec4",(0,r.jsx)(e.code,{children:"@Configuration"}),"\u7c7b\uff0c",(0,r.jsx)(e.br,{}),"\n","\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u53cd\u5c04\u5b9e\u4f8b\u5316\u8fd9\u4e9b\u7c7b\u7136\u540e\u6ce8\u5165\u5230IOC\u5bb9\u5668\u4e2d\uff0c\u6700\u540e\u5bb9\u5668\u91cc\u5c31\u6709\u4e86\u4e00\u7cfb\u5217\u6807\u6ce8\u4e86",(0,r.jsx)(e.code,{children:"@Configuration"}),"\u7684JavaConfig\u5f62\u5f0f\u7684\u914d\u7f6e\u7c7b\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u5c31\u662f",(0,r.jsx)(e.code,{children:"SpringFactoriesLoader"}),"\uff0c\u5b83\u672c\u8d28\u4e0a\u5c5e\u4e8eSpring\u6846\u67b6\u79c1\u6709\u7684\u4e00\u79cd\u6269\u5c55\u65b9\u6848\uff0c\u7c7b\u4f3c\u4e8eSPI\uff0cSpring Boot\u5728Spring\u57fa\u7840\u4e0a\u7684\u5f88\u591a\u6838\u5fc3\u529f\u80fd\u90fd\u662f\u57fa\u4e8e\u6b64\uff0c\u5e0c\u671b\u5927\u5bb6\u53ef\u4ee5\u7406\u89e3\u3002"]}),"\n",(0,r.jsx)(e.h2,{id:"\u56db\u53e6\u4e00\u4ef6\u6b66\u5668spring\u5bb9\u5668\u7684\u4e8b\u4ef6\u76d1\u542c\u673a\u5236",children:"\u56db\u3001\u53e6\u4e00\u4ef6\u6b66\u5668\uff1aSpring\u5bb9\u5668\u7684\u4e8b\u4ef6\u76d1\u542c\u673a\u5236"}),"\n",(0,r.jsxs)(e.p,{children:["\u8fc7\u53bb\uff0c\u4e8b\u4ef6\u76d1\u542c\u673a\u5236\u591a\u7528\u4e8e\u56fe\u5f62\u754c\u9762\u7f16\u7a0b\uff0c\u6bd4\u5982\uff1a",(0,r.jsx)(e.strong,{children:"\u70b9\u51fb"}),"\u6309\u94ae\u3001\u5728\u6587\u672c\u6846",(0,r.jsx)(e.strong,{children:"\u8f93\u5165"}),"\u5185\u5bb9\u7b49\u64cd\u4f5c\u88ab\u79f0\u4e3a\u4e8b\u4ef6\uff0c\u800c\u5f53\u4e8b\u4ef6\u89e6\u53d1\u65f6\uff0c\u5e94\u7528\u7a0b\u5e8f\u4f5c\u51fa\u4e00\u5b9a\u7684\u54cd\u5e94\u5219\u8868\u793a\u5e94\u7528\u76d1\u542c\u4e86\u8fd9\u4e2a\u4e8b\u4ef6\uff0c\u800c\u5728\u670d\u52a1\u5668\u7aef\uff0c\u4e8b\u4ef6\u7684\u76d1\u542c\u673a\u5236\u66f4\u591a\u7684\u7528\u4e8e\u5f02\u6b65\u901a\u77e5\u4ee5\u53ca\u76d1\u63a7\u548c\u5f02\u5e38\u5904\u7406\u3002Java\u63d0\u4f9b\u4e86\u5b9e\u73b0\u4e8b\u4ef6\u76d1\u542c\u673a\u5236\u7684\u4e24\u4e2a\u57fa\u7840\u7c7b\uff1a\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7c7b\u578b\u6269\u5c55\u81ea",(0,r.jsx)(e.code,{children:"java.util.EventObject"}),"\u3001\u4e8b\u4ef6\u7684\u76d1\u542c\u5668\u6269\u5c55\u81ea",(0,r.jsx)(e.code,{children:"java.util.EventListener"}),"\u3002\u6765\u770b\u4e00\u4e2a\u7b80\u5355\u7684\u5b9e\u4f8b\uff1a\u7b80\u5355\u7684\u76d1\u63a7\u4e00\u4e2a\u65b9\u6cd5\u7684\u8017\u65f6\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u9996\u5148\u5b9a\u4e49\u4e8b\u4ef6\u7c7b\u578b\uff0c\u901a\u5e38\u7684\u505a\u6cd5\u662f\u6269\u5c55EventObject\uff0c\u968f\u7740\u4e8b\u4ef6\u7684\u53d1\u751f\uff0c\u76f8\u5e94\u7684\u72b6\u6001\u901a\u5e38\u90fd\u5c01\u88c5\u5728\u6b64\u7c7b\u4e2d\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"public class MethodMonitorEvent extends EventObject {  \n    // \u65f6\u95f4\u6233\uff0c\u7528\u4e8e\u8bb0\u5f55\u65b9\u6cd5\u5f00\u59cb\u6267\u884c\u7684\u65f6\u95f4  \n    public long timestamp;  \n    public MethodMonitorEvent(Object source) {        super(source);    }}  \n  \n"})}),"\n",(0,r.jsx)(e.p,{children:"\u4e8b\u4ef6\u53d1\u5e03\u4e4b\u540e\uff0c\u76f8\u5e94\u7684\u76d1\u542c\u5668\u5373\u53ef\u5bf9\u8be5\u7c7b\u578b\u7684\u4e8b\u4ef6\u8fdb\u884c\u5904\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u65b9\u6cd5\u5f00\u59cb\u6267\u884c\u4e4b\u524d\u53d1\u5e03\u4e00\u4e2abegin\u4e8b\u4ef6\uff0c\u5728\u65b9\u6cd5\u6267\u884c\u7ed3\u675f\u4e4b\u540e\u53d1\u5e03\u4e00\u4e2aend\u4e8b\u4ef6\uff0c\u76f8\u5e94\u5730\uff0c\u4e8b\u4ef6\u76d1\u542c\u5668\u9700\u8981\u63d0\u4f9b\u65b9\u6cd5\u5bf9\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u8fdb\u884c\u5904\u7406\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'// 1\u3001\u5b9a\u4e49\u4e8b\u4ef6\u76d1\u542c\u63a5\u53e3  \npublic interface MethodMonitorEventListener extends EventListener {  \n    // \u5904\u7406\u65b9\u6cd5\u6267\u884c\u4e4b\u524d\u53d1\u5e03\u7684\u4e8b\u4ef6  \n    public void onMethodBegin(MethodMonitorEvent event);    // \u5904\u7406\u65b9\u6cd5\u7ed3\u675f\u65f6\u53d1\u5e03\u7684\u4e8b\u4ef6  \n    public void onMethodEnd(MethodMonitorEvent event);}  \n// 2\u3001\u4e8b\u4ef6\u76d1\u542c\u63a5\u53e3\u7684\u5b9e\u73b0\uff1a\u5982\u4f55\u5904\u7406  \npublic class AbstractMethodMonitorEventListener implements MethodMonitorEventListener {  \n  \n    @Override    public void onMethodBegin(MethodMonitorEvent event) {        // \u8bb0\u5f55\u65b9\u6cd5\u5f00\u59cb\u6267\u884c\u65f6\u7684\u65f6\u95f4  \n        event.timestamp = System.currentTimeMillis();    }  \n    @Override    public void onMethodEnd(MethodMonitorEvent event) {        // \u8ba1\u7b97\u65b9\u6cd5\u8017\u65f6  \n        long duration = System.currentTimeMillis() - event.timestamp;        System.out.println("\u8017\u65f6\uff1a" + duration);  \n    }}  \n  \n'})}),"\n",(0,r.jsx)(e.p,{children:"\u4e8b\u4ef6\u76d1\u542c\u5668\u63a5\u53e3\u9488\u5bf9\u4e0d\u540c\u7684\u4e8b\u4ef6\u53d1\u5e03\u5b9e\u9645\u63d0\u4f9b\u76f8\u5e94\u7684\u5904\u7406\u65b9\u6cd5\u5b9a\u4e49\uff0c\u6700\u91cd\u8981\u7684\u662f\uff0c\u5176\u65b9\u6cd5\u53ea\u63a5\u6536MethodMonitorEvent\u53c2\u6570\uff0c\u8bf4\u660e\u8fd9\u4e2a\u76d1\u542c\u5668\u7c7b\u53ea\u8d1f\u8d23\u76d1\u542c\u5668\u5bf9\u5e94\u7684\u4e8b\u4ef6\u5e76\u8fdb\u884c\u5904\u7406\u3002\u6709\u4e86\u4e8b\u4ef6\u548c\u76d1\u542c\u5668\uff0c\u5269\u4e0b\u7684\u5c31\u662f\u53d1\u5e03\u4e8b\u4ef6\uff0c\u7136\u540e\u8ba9\u76f8\u5e94\u7684\u76d1\u542c\u5668\u76d1\u542c\u5e76\u5904\u7406\u3002\u901a\u5e38\u60c5\u51b5\uff0c\u6211\u4eec\u4f1a\u6709\u4e00\u4e2a\u4e8b\u4ef6\u53d1\u5e03\u8005\uff0c\u5b83\u672c\u8eab\u4f5c\u4e3a\u4e8b\u4ef6\u6e90\uff0c\u5728\u5408\u9002\u7684\u65f6\u673a\uff0c\u5c06\u76f8\u5e94\u7684\u4e8b\u4ef6\u53d1\u5e03\u7ed9\u5bf9\u5e94\u7684\u4e8b\u4ef6\u76d1\u542c\u5668\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'public class MethodMonitorEventPublisher {  \n  \n    private List<MethodMonitorEventListener> listeners = new ArrayList<MethodMonitorEventListener>();  \n    public void methodMonitor() {        MethodMonitorEvent eventObject = new MethodMonitorEvent(this);        publishEvent("begin",eventObject);        // \u6a21\u62df\u65b9\u6cd5\u6267\u884c\uff1a\u4f11\u77205\u79d2\u949f  \n        TimeUnit.SECONDS.sleep(5);        publishEvent("end",eventObject);  \n    }  \n    private void publishEvent(String status,MethodMonitorEvent event) {        // \u907f\u514d\u5728\u4e8b\u4ef6\u5904\u7406\u671f\u95f4\uff0c\u76d1\u542c\u5668\u88ab\u79fb\u9664\uff0c\u8fd9\u91cc\u4e3a\u4e86\u5b89\u5168\u505a\u4e00\u4e2a\u590d\u5236\u64cd\u4f5c  \n        List<MethodMonitorEventListener> copyListeners = \u27a5 new ArrayList<MethodMonitorEventListener>(listeners);        for (MethodMonitorEventListener listener : copyListeners) {            if ("begin".equals(status)) {                listener.onMethodBegin(event);            } else {                listener.onMethodEnd(event);            }        }    }  \n    public static void main(String[] args) {        MethodMonitorEventPublisher publisher = new MethodMonitorEventPublisher();        publisher.addEventListener(new AbstractMethodMonitorEventListener());        publisher.methodMonitor();    }    // \u7701\u7565\u5b9e\u73b0  \n    public void addEventListener(MethodMonitorEventListener listener) {}    public void removeEventListener(MethodMonitorEventListener listener) {}    public void removeAllListeners() {}  \n'})}),"\n",(0,r.jsx)(e.p,{children:"\u5bf9\u4e8e\u4e8b\u4ef6\u53d1\u5e03\u8005\uff08\u4e8b\u4ef6\u6e90\uff09\u901a\u5e38\u9700\u8981\u5173\u6ce8\u4e24\u70b9\uff1a"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"\u5728\u5408\u9002\u7684\u65f6\u673a\u53d1\u5e03\u4e8b\u4ef6\u3002\u6b64\u4f8b\u4e2d\u7684methodMonitor()\u65b9\u6cd5\u662f\u4e8b\u4ef6\u53d1\u5e03\u7684\u6e90\u5934\uff0c\u5176\u5728\u65b9\u6cd5\u6267\u884c\u4e4b\u524d\u548c\u7ed3\u675f\u4e4b\u540e\u4e24\u4e2a\u65f6\u95f4\u70b9\u53d1\u5e03MethodMonitorEvent\u4e8b\u4ef6\uff0c\u6bcf\u4e2a\u65f6\u95f4\u70b9\u53d1\u5e03\u7684\u4e8b\u4ef6\u90fd\u4f1a\u4f20\u7ed9\u76f8\u5e94\u7684\u76d1\u542c\u5668\u8fdb\u884c\u5904\u7406\u3002\u5728\u5177\u4f53\u5b9e\u73b0\u65f6\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e8b\u4ef6\u53d1\u5e03\u662f\u987a\u5e8f\u6267\u884c\uff0c\u4e3a\u4e86\u4e0d\u5f71\u54cd\u5904\u7406\u6027\u80fd\uff0c\u4e8b\u4ef6\u76d1\u542c\u5668\u7684\u5904\u7406\u903b\u8f91\u5e94\u5c3d\u91cf\u7b80\u5355\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u4e8b\u4ef6\u76d1\u542c\u5668\u7684\u7ba1\u7406\u3002publisher\u7c7b\u4e2d\u63d0\u4f9b\u4e86\u4e8b\u4ef6\u76d1\u542c\u5668\u7684\u6ce8\u518c\u4e0e\u79fb\u9664\u65b9\u6cd5\uff0c\u8fd9\u6837\u5ba2\u6237\u7aef\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u51b3\u5b9a\u662f\u5426\u9700\u8981\u6ce8\u518c\u65b0\u7684\u76d1\u542c\u5668\u6216\u8005\u79fb\u9664\u67d0\u4e2a\u76d1\u542c\u5668\u3002\u5982\u679c\u8fd9\u91cc\u6ca1\u6709\u63d0\u4f9bremove\u65b9\u6cd5\uff0c\u90a3\u4e48\u6ce8\u518c\u7684\u76d1\u542c\u5668\u793a\u4f8b\u5c06\u4e00\u76f4\u88abMethodMonitorEventPublisher\u5f15\u7528\uff0c\u5373\u4f7f\u5df2\u7ecf\u5e9f\u5f03\u4e0d\u7528\u4e86\uff0c\u4e5f\u4f9d\u7136\u5728\u53d1\u5e03\u8005\u7684\u76d1\u542c\u5668\u5217\u8868\u4e2d\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u9690\u6027\u7684\u5185\u5b58\u6cc4\u6f0f\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"spring\u5bb9\u5668\u5185\u7684\u4e8b\u4ef6\u76d1\u542c\u673a\u5236",children:"Spring\u5bb9\u5668\u5185\u7684\u4e8b\u4ef6\u76d1\u542c\u673a\u5236"}),"\n",(0,r.jsxs)(e.p,{children:["Spring\u7684ApplicationContext\u5bb9\u5668\u5185\u90e8\u4e2d\u7684\u6240\u6709\u4e8b\u4ef6\u7c7b\u578b\u5747\u7ee7\u627f\u81ea",(0,r.jsx)(e.code,{children:"org.springframework.context.AppliationEvent"}),"\uff0c\u5bb9\u5668\u4e2d\u7684\u6240\u6709\u76d1\u542c\u5668\u90fd\u5b9e\u73b0",(0,r.jsx)(e.code,{children:"org.springframework.context.ApplicationListener"}),"\u63a5\u53e3\uff0c\u5e76\u4e14\u4ee5bean\u7684\u5f62\u5f0f\u6ce8\u518c\u5728\u5bb9\u5668\u4e2d\u3002\u4e00\u65e6\u5728\u5bb9\u5668\u5185\u53d1\u5e03ApplicationEvent\u53ca\u5176\u5b50\u7c7b\u578b\u7684\u4e8b\u4ef6\uff0c\u6ce8\u518c\u5230\u5bb9\u5668\u7684ApplicationListener\u5c31\u4f1a\u5bf9\u8fd9\u4e9b\u4e8b\u4ef6\u8fdb\u884c\u5904\u7406\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u4f60\u5e94\u8be5\u5df2\u7ecf\u731c\u5230\u662f\u600e\u4e48\u56de\u4e8b\u4e86\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["ApplicationEvent\u7ee7\u627f\u81eaEventObject\uff0cSpring\u63d0\u4f9b\u4e86\u4e00\u4e9b\u9ed8\u8ba4\u7684\u5b9e\u73b0\uff0c\u6bd4\u5982\uff1a",(0,r.jsx)(e.code,{children:"ContextClosedEvent"}),"\u8868\u793a\u5bb9\u5668\u5728\u5373\u5c06\u5173\u95ed\u65f6\u53d1\u5e03\u7684\u4e8b\u4ef6\u7c7b\u578b\uff0c",(0,r.jsx)(e.code,{children:"ContextRefreshedEvent"}),"\u8868\u793a\u5bb9\u5668\u5728\u521d\u59cb\u5316\u6216\u8005\u5237\u65b0\u7684\u65f6\u5019\u53d1\u5e03\u7684\u4e8b\u4ef6\u7c7b\u578b......"]}),"\n",(0,r.jsx)(e.p,{children:"\u5bb9\u5668\u5185\u90e8\u4f7f\u7528ApplicationListener\u4f5c\u4e3a\u4e8b\u4ef6\u76d1\u542c\u5668\u63a5\u53e3\u5b9a\u4e49\uff0c\u5b83\u7ee7\u627f\u81eaEventListener\u3002ApplicationContext\u5bb9\u5668\u5728\u542f\u52a8\u65f6\uff0c\u4f1a\u81ea\u52a8\u8bc6\u522b\u5e76\u52a0\u8f7dEventListener\u7c7b\u578b\u7684bean\uff0c\u4e00\u65e6\u5bb9\u5668\u5185\u6709\u4e8b\u4ef6\u53d1\u5e03\uff0c\u5c06\u901a\u77e5\u8fd9\u4e9b\u6ce8\u518c\u5230\u5bb9\u5668\u7684EventListener\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["ApplicationContext\u63a5\u53e3\u7ee7\u627f\u4e86ApplicationEventPublisher\u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u63d0\u4f9b\u4e86",(0,r.jsx)(e.code,{children:"void publishEvent(ApplicationEvent event)"}),"\u65b9\u6cd5\u5b9a\u4e49\uff0c\u4e0d\u96be\u770b\u51fa\uff0cApplicationContext\u5bb9\u5668\u62c5\u5f53\u7684\u5c31\u662f\u4e8b\u4ef6\u53d1\u5e03\u8005\u7684\u89d2\u8272\u3002\u5982\u679c\u6709\u5174\u8da3\u53ef\u4ee5\u67e5\u770b",(0,r.jsx)(e.code,{children:"AbstractApplicationContext.publishEvent(ApplicationEvent event)"}),"\u65b9\u6cd5\u7684\u6e90\u7801\uff1aApplicationContext\u5c06\u4e8b\u4ef6\u7684\u53d1\u5e03\u4ee5\u53ca\u76d1\u542c\u5668\u7684\u7ba1\u7406\u5de5\u4f5c\u59d4\u6258\u7ed9",(0,r.jsx)(e.code,{children:"ApplicationEventMulticaster"}),"\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\u3002\u5728\u5bb9\u5668\u542f\u52a8\u65f6\uff0c\u4f1a\u68c0\u67e5\u5bb9\u5668\u5185\u662f\u5426\u5b58\u5728\u540d\u4e3aapplicationEventMulticaster\u7684ApplicationEventMulticaster\u5bf9\u8c61\u5b9e\u4f8b\u3002\u5982\u679c\u6709\u5c31\u4f7f\u7528\u5176\u63d0\u4f9b\u7684\u5b9e\u73b0\uff0c\u6ca1\u6709\u5c31\u9ed8\u8ba4\u521d\u59cb\u5316\u4e00\u4e2aSimpleApplicationEventMulticaster\u4f5c\u4e3a\u5b9e\u73b0\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u6700\u540e\uff0c\u5982\u679c\u6211\u4eec\u4e1a\u52a1\u9700\u8981\u5728\u5bb9\u5668\u5185\u90e8\u53d1\u5e03\u4e8b\u4ef6\uff0c\u53ea\u9700\u8981\u4e3a\u5176\u6ce8\u5165ApplicationEventPublisher\u4f9d\u8d56\u5373\u53ef\uff1a\u5b9e\u73b0ApplicationEventPublisherAware\u63a5\u53e3\u6216\u8005ApplicationContextAware\u63a5\u53e3(Aware\u63a5\u53e3\u76f8\u5173\u5185\u5bb9\u8bf7\u56de\u987e\u4e0a\u6587)\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u4e94\u51fa\u795e\u5165\u5316\u63ed\u79d8\u81ea\u52a8\u914d\u7f6e\u539f\u7406",children:"\u4e94\u3001\u51fa\u795e\u5165\u5316\uff1a\u63ed\u79d8\u81ea\u52a8\u914d\u7f6e\u539f\u7406"}),"\n",(0,r.jsxs)(e.p,{children:["\u5178\u578b\u7684Spring Boot\u5e94\u7528\u7684\u542f\u52a8\u7c7b\u4e00\u822c\u5747\u4f4d\u4e8e",(0,r.jsx)(e.code,{children:"src/main/java"}),"\u6839\u8def\u5f84\u4e0b\uff0c\u6bd4\u5982",(0,r.jsx)(e.code,{children:"MoonApplication"}),"\u7c7b\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"@SpringBootApplication  \npublic class MoonApplication {  \n  \n    public static void main(String[] args) {        SpringApplication.run(MoonApplication.class, args);    }}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u5176\u4e2d",(0,r.jsx)(e.code,{children:"@SpringBootApplication"}),"\u5f00\u542f\u7ec4\u4ef6\u626b\u63cf\u548c\u81ea\u52a8\u914d\u7f6e\uff0c\u800c",(0,r.jsx)(e.code,{children:"SpringApplication.run"}),"\u5219\u8d1f\u8d23\u542f\u52a8\u5f15\u5bfc\u5e94\u7528\u7a0b\u5e8f\u3002",(0,r.jsx)(e.code,{children:"@SpringBootApplication"}),"\u662f\u4e00\u4e2a\u590d\u5408",(0,r.jsx)(e.code,{children:"Annotation"}),"\uff0c\u5b83\u5c06\u4e09\u4e2a\u6709\u7528\u7684\u6ce8\u89e3\u7ec4\u5408\u5728\u4e00\u8d77\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"@Target(ElementType.TYPE)  \n@Retention(RetentionPolicy.RUNTIME)  \n@Documented  \n@Inherited  \n@SpringBootConfiguration  \n@EnableAutoConfiguration  \n@ComponentScan(excludeFilters = {  \n        @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),        @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })public @interface SpringBootApplication {  \n    // ......}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"@SpringBootConfiguration"}),"\u5c31\u662f",(0,r.jsx)(e.code,{children:"@Configuration"}),"\uff0c\u5b83\u662fSpring\u6846\u67b6\u7684\u6ce8\u89e3\uff0c\u6807\u660e\u8be5\u7c7b\u662f\u4e00\u4e2a",(0,r.jsx)(e.code,{children:"JavaConfig"}),"\u914d\u7f6e\u7c7b\u3002\u800c",(0,r.jsx)(e.code,{children:"@ComponentScan"}),"\u542f\u7528\u7ec4\u4ef6\u626b\u63cf\uff0c\u524d\u6587\u5df2\u7ecf\u8be6\u7ec6\u8bb2\u89e3\u8fc7\uff0c\u8fd9\u91cc\u7740\u91cd\u5173\u6ce8",(0,r.jsx)(e.code,{children:"@EnableAutoConfiguration"}),"\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"@EnableAutoConfiguration"}),"\u6ce8\u89e3\u8868\u793a\u5f00\u542fSpring Boot\u81ea\u52a8\u914d\u7f6e\u529f\u80fd\uff0cSpring Boot\u4f1a\u6839\u636e\u5e94\u7528\u7684\u4f9d\u8d56\u3001\u81ea\u5b9a\u4e49\u7684bean\u3001classpath\u4e0b\u6709\u6ca1\u6709\u67d0\u4e2a\u7c7b \u7b49\u7b49\u56e0\u7d20\u6765\u731c\u6d4b\u4f60\u9700\u8981\u7684bean\uff0c\u7136\u540e\u6ce8\u518c\u5230IOC\u5bb9\u5668\u4e2d\u3002\u90a3",(0,r.jsx)(e.code,{children:"@EnableAutoConfiguration"}),"\u662f\u5982\u4f55\u63a8\u7b97\u51fa\u4f60\u7684\u9700\u6c42\uff1f\u9996\u5148\u770b\u4e0b\u5b83\u7684\u5b9a\u4e49\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"@Target(ElementType.TYPE)  \n@Retention(RetentionPolicy.RUNTIME)  \n@Documented  \n@Inherited  \n@AutoConfigurationPackage  \n@Import(EnableAutoConfigurationImportSelector.class)  \npublic @interface EnableAutoConfiguration {  \n    // ......}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u4f60\u7684\u5173\u6ce8\u70b9\u5e94\u8be5\u5728",(0,r.jsx)(e.code,{children:"@Import(EnableAutoConfigurationImportSelector.class)"}),"\u4e0a\u4e86\uff0c\u524d\u6587\u8bf4\u8fc7\uff0c",(0,r.jsx)(e.code,{children:"@Import"}),"\u6ce8\u89e3\u7528\u4e8e\u5bfc\u5165\u7c7b\uff0c\u5e76\u5c06\u8fd9\u4e2a\u7c7b\u4f5c\u4e3a\u4e00\u4e2abean\u7684\u5b9a\u4e49\u6ce8\u518c\u5230\u5bb9\u5668\u4e2d\uff0c\u8fd9\u91cc\u5b83\u5c06\u628a",(0,r.jsx)(e.code,{children:"EnableAutoConfigurationImportSelector"}),"\u4f5c\u4e3abean\u6ce8\u5165\u5230\u5bb9\u5668\u4e2d\uff0c\u800c\u8fd9\u4e2a\u7c7b\u4f1a\u5c06\u6240\u6709\u7b26\u5408\u6761\u4ef6\u7684@Configuration\u914d\u7f6e\u90fd\u52a0\u8f7d\u5230\u5bb9\u5668\u4e2d\uff0c\u770b\u770b\u5b83\u7684\u4ee3\u7801\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"public String[] selectImports(AnnotationMetadata annotationMetadata) {  \n    // \u7701\u7565\u4e86\u5927\u90e8\u5206\u4ee3\u7801\uff0c\u4fdd\u7559\u4e00\u53e5\u6838\u5fc3\u4ee3\u7801  \n    // \u6ce8\u610f\uff1aSpringBoot\u6700\u8fd1\u7248\u672c\u4e2d\uff0c\u8fd9\u53e5\u4ee3\u7801\u88ab\u5c01\u88c5\u5728\u4e00\u4e2a\u5355\u72ec\u7684\u65b9\u6cd5\u4e2d  \n    // SpringFactoriesLoader\u76f8\u5173\u77e5\u8bc6\u8bf7\u53c2\u8003\u524d\u6587  \n    List<String> factories = new ArrayList<String>(new LinkedHashSet<String>(        SpringFactoriesLoader.loadFactoryNames(EnableAutoConfiguration.class, this.beanClassLoader)));  \n}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u4e2a\u7c7b\u4f1a\u626b\u63cf\u6240\u6709\u7684jar\u5305\uff0c\u5c06\u6240\u6709\u7b26\u5408\u6761\u4ef6\u7684@Configuration\u914d\u7f6e\u7c7b\u6ce8\u5165\u7684\u5bb9\u5668\u4e2d\uff0c\u4f55\u4e3a\u7b26\u5408\u6761\u4ef6\uff0c\u770b\u770b",(0,r.jsx)(e.code,{children:"META-INF/spring.factories"}),"\u7684\u6587\u4ef6\u5185\u5bb9\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"// \u6765\u81ea org.springframework.boot.autoconfigure\u4e0b\u7684META-INF/spring.factories  \n// \u914d\u7f6e\u7684key = EnableAutoConfiguration\uff0c\u4e0e\u4ee3\u7801\u4e2d\u4e00\u81f4  \norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\  \norg.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\\  \norg.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\\  \norg.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration\\  \n.....  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u4ee5",(0,r.jsx)(e.code,{children:"DataSourceAutoConfiguration"}),"\u4e3a\u4f8b\uff0c\u770b\u770bSpring Boot\u662f\u5982\u4f55\u81ea\u52a8\u914d\u7f6e\u7684\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"@Configuration  \n@ConditionalOnClass({ DataSource.class, EmbeddedDatabaseType.class })  \n@EnableConfigurationProperties(DataSourceProperties.class)  \n@Import({ Registrar.class, DataSourcePoolMetadataProvidersConfiguration.class })  \npublic class DataSourceAutoConfiguration {  \n}  \n  \n"})}),"\n",(0,r.jsx)(e.p,{children:"\u5206\u522b\u8bf4\u4e00\u8bf4\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"@ConditionalOnClass({ DataSource.class, EmbeddedDatabaseType.class })"}),"\uff1a\u5f53Classpath\u4e2d\u5b58\u5728DataSource\u6216\u8005EmbeddedDatabaseType\u7c7b\u65f6\u624d\u542f\u7528\u8fd9\u4e2a\u914d\u7f6e\uff0c\u5426\u5219\u8fd9\u4e2a\u914d\u7f6e\u5c06\u88ab\u5ffd\u7565\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"@EnableConfigurationProperties(DataSourceProperties.class)"}),"\uff1a\u5c06DataSource\u7684\u9ed8\u8ba4\u914d\u7f6e\u7c7b\u6ce8\u5165\u5230IOC\u5bb9\u5668\u4e2d\uff0cDataSourceproperties\u5b9a\u4e49\u4e3a\uff1a"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'// \u63d0\u4f9b\u5bf9datasource\u914d\u7f6e\u4fe1\u606f\u7684\u652f\u6301\uff0c\u6240\u6709\u7684\u914d\u7f6e\u524d\u7f00\u4e3a\uff1aspring.datasource  \n@ConfigurationProperties(prefix = "spring.datasource")  \npublic class DataSourceProperties  {  \n    private ClassLoader classLoader;    private Environment environment;    private String name = "testdb";    ......}  \n  \n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"@Import({ Registrar.class, DataSourcePoolMetadataProvidersConfiguration.class })"}),"\uff1a\u5bfc\u5165\u5176\u4ed6\u989d\u5916\u7684\u914d\u7f6e\uff0c\u5c31\u4ee5",(0,r.jsx)(e.code,{children:"DataSourcePoolMetadataProvidersConfiguration"}),"\u4e3a\u4f8b\u5427\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"@Configuration  \npublic class DataSourcePoolMetadataProvidersConfiguration {  \n  \n    @Configuration    @ConditionalOnClass(org.apache.tomcat.jdbc.pool.DataSource.class)    static class TomcatDataSourcePoolMetadataProviderConfiguration {        @Bean        public DataSourcePoolMetadataProvider tomcatPoolDataSourceMetadataProvider() {            .....        }    }  ......}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["DataSourcePoolMetadataProvidersConfiguration\u662f\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u63d0\u4f9b\u8005\u7684\u4e00\u4e2a\u914d\u7f6e\u7c7b\uff0c\u5373Classpath\u4e2d\u5b58\u5728",(0,r.jsx)(e.code,{children:"org.apache.tomcat.jdbc.pool.DataSource.class"}),"\uff0c\u5219\u4f7f\u7528tomcat-jdbc\u8fde\u63a5\u6c60\uff0c\u5982\u679cClasspath\u4e2d\u5b58\u5728",(0,r.jsx)(e.code,{children:"HikariDataSource.class"}),"\u5219\u4f7f\u7528Hikari\u8fde\u63a5\u6c60\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u91cc\u4ec5\u63cf\u8ff0\u4e86DataSourceAutoConfiguration\u7684\u51b0\u5c71\u4e00\u89d2\uff0c\u4f46\u8db3\u4ee5\u8bf4\u660eSpring Boot\u5982\u4f55\u5229\u7528\u6761\u4ef6\u8bdd\u914d\u7f6e\u6765\u5b9e\u73b0\u81ea\u52a8\u914d\u7f6e\u7684\u3002\u56de\u987e\u4e00\u4e0b\uff0c",(0,r.jsx)(e.code,{children:"@EnableAutoConfiguration"}),"\u4e2d\u5bfc\u5165\u4e86EnableAutoConfigurationImportSelector\u7c7b\uff0c\u800c\u8fd9\u4e2a\u7c7b\u7684",(0,r.jsx)(e.code,{children:"selectImports()"}),"\u901a\u8fc7SpringFactoriesLoader\u5f97\u5230\u4e86\u5927\u91cf\u7684\u914d\u7f6e\u7c7b\uff0c\u800c\u6bcf\u4e00\u4e2a\u914d\u7f6e\u7c7b\u5219\u6839\u636e\u6761\u4ef6\u5316\u914d\u7f6e\u6765\u505a\u51fa\u51b3\u7b56\uff0c\u4ee5\u5b9e\u73b0\u81ea\u52a8\u914d\u7f6e\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u6574\u4e2a\u6d41\u7a0b\u5f88\u6e05\u6670\uff0c\u4f46\u6f0f\u4e86\u4e00\u4e2a\u5927\u95ee\u9898\uff1a",(0,r.jsx)(e.code,{children:"EnableAutoConfigurationImportSelector.selectImports()"}),"\u662f\u4f55\u65f6\u6267\u884c\u7684\uff1f\u5176\u5b9e\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u5728\u5bb9\u5668\u542f\u52a8\u8fc7\u7a0b\u4e2d\u6267\u884c\uff1a",(0,r.jsx)(e.code,{children:"AbstractApplicationContext.refresh()"}),"\uff0c\u66f4\u591a\u7684\u7ec6\u8282\u5728\u4e0b\u4e00\u5c0f\u8282\u4e2d\u8bf4\u660e\u3002"]}),"\n",(0,r.jsx)(e.h2,{id:"\u516d\u542f\u52a8\u5f15\u5bfcspring-boot\u5e94\u7528\u542f\u52a8\u7684\u79d8\u5bc6",children:"\u516d\u3001\u542f\u52a8\u5f15\u5bfc\uff1aSpring Boot\u5e94\u7528\u542f\u52a8\u7684\u79d8\u5bc6"}),"\n",(0,r.jsx)(e.h3,{id:"61-springapplication\u521d\u59cb\u5316",children:"6.1 SpringApplication\u521d\u59cb\u5316"}),"\n",(0,r.jsx)(e.p,{children:"SpringBoot\u6574\u4e2a\u542f\u52a8\u6d41\u7a0b\u5206\u4e3a\u4e24\u4e2a\u6b65\u9aa4\uff1a\u521d\u59cb\u5316\u4e00\u4e2aSpringApplication\u5bf9\u8c61\u3001\u6267\u884c\u8be5\u5bf9\u8c61\u7684run\u65b9\u6cd5\u3002\u770b\u4e0bSpringApplication\u7684\u521d\u59cb\u5316\u6d41\u7a0b\uff0cSpringApplication\u7684\u6784\u9020\u65b9\u6cd5\u4e2d\u8c03\u7528initialize(Object[] sources)\u65b9\u6cd5\uff0c\u5176\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"private void initialize(Object[] sources) {  \n     if (sources != null && sources.length > 0) {         this.sources.addAll(Arrays.asList(sources));     }     // \u5224\u65ad\u662f\u5426\u662fWeb\u9879\u76ee  \n     this.webEnvironment = deduceWebEnvironment();     setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));     setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));     // \u627e\u5230\u5165\u53e3\u7c7b  \n     this.mainApplicationClass = deduceMainApplicationClass();}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u521d\u59cb\u5316\u6d41\u7a0b\u4e2d\u6700\u91cd\u8981\u7684\u5c31\u662f\u901a\u8fc7SpringFactoriesLoader\u627e\u5230",(0,r.jsx)(e.code,{children:"spring.factories"}),"\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684",(0,r.jsx)(e.code,{children:"ApplicationContextInitializer"}),"\u548c",(0,r.jsx)(e.code,{children:"ApplicationListener"}),"\u4e24\u4e2a\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\u540d\u79f0\uff0c\u4ee5\u4fbf\u540e\u671f\u6784\u9020\u76f8\u5e94\u7684\u5b9e\u4f8b\u3002",(0,r.jsx)(e.code,{children:"ApplicationContextInitializer"}),"\u7684\u4e3b\u8981\u76ee\u7684\u662f\u5728",(0,r.jsx)(e.code,{children:"ConfigurableApplicationContext"}),"\u505arefresh\u4e4b\u524d\uff0c\u5bf9ConfigurableApplicationContext\u5b9e\u4f8b\u505a\u8fdb\u4e00\u6b65\u7684\u8bbe\u7f6e\u6216\u5904\u7406\u3002ConfigurableApplicationContext\u7ee7\u627f\u81eaApplicationContext\uff0c\u5176\u4e3b\u8981\u63d0\u4f9b\u4e86\u5bf9ApplicationContext\u8fdb\u884c\u8bbe\u7f6e\u7684\u80fd\u529b\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u5b9e\u73b0\u4e00\u4e2aApplicationContextInitializer\u975e\u5e38\u7b80\u5355\uff0c\u56e0\u4e3a\u5b83\u53ea\u6709\u4e00\u4e2a\u65b9\u6cd5\uff0c\u4f46\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u6211\u4eec\u6ca1\u6709\u5fc5\u8981\u81ea\u5b9a\u4e49\u4e00\u4e2aApplicationContextInitializer\uff0c\u5373\u4fbf\u662fSpring Boot\u6846\u67b6\uff0c\u5b83\u9ed8\u8ba4\u4e5f\u53ea\u662f\u6ce8\u518c\u4e86\u4e24\u4e2a\u5b9e\u73b0\uff0c\u6bd5\u7adfSpring\u7684\u5bb9\u5668\u5df2\u7ecf\u975e\u5e38\u6210\u719f\u548c\u7a33\u5b9a\uff0c\u4f60\u6ca1\u6709\u5fc5\u8981\u6765\u6539\u53d8\u5b83\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u800c",(0,r.jsx)(e.code,{children:"ApplicationListener"}),"\u7684\u76ee\u7684\u5c31\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684\u4e86\uff0c\u5b83\u662fSpring\u6846\u67b6\u5bf9Java\u4e8b\u4ef6\u76d1\u542c\u673a\u5236\u7684\u4e00\u79cd\u6846\u67b6\u5b9e\u73b0\uff0c\u5177\u4f53\u5185\u5bb9\u5728\u524d\u6587Spring\u4e8b\u4ef6\u76d1\u542c\u673a\u5236\u8fd9\u4e2a\u5c0f\u8282\u6709\u8be6\u7ec6\u8bb2\u89e3\u3002\u8fd9\u91cc\u4e3b\u8981\u8bf4\u8bf4\uff0c\u5982\u679c\u4f60\u60f3\u4e3aSpring Boot\u5e94\u7528\u6dfb\u52a0\u76d1\u542c\u5668\uff0c\u8be5\u5982\u4f55\u5b9e\u73b0\uff1f"]}),"\n",(0,r.jsx)(e.p,{children:"Spring Boot\u63d0\u4f9b\u4e24\u79cd\u65b9\u5f0f\u6765\u6dfb\u52a0\u81ea\u5b9a\u4e49\u76d1\u542c\u5668\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u901a\u8fc7",(0,r.jsx)(e.code,{children:"SpringApplication.addListeners(ApplicationListener<?>... listeners)"}),"\u6216\u8005",(0,r.jsx)(e.code,{children:"SpringApplication.setListeners(Collection<? extends ApplicationListener<?>> listeners)"}),"\u4e24\u4e2a\u65b9\u6cd5\u6765\u6dfb\u52a0\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u81ea\u5b9a\u4e49\u76d1\u542c\u5668"]}),"\n",(0,r.jsxs)(e.li,{children:["\u65e2\u7136SpringApplication\u7684\u521d\u59cb\u5316\u6d41\u7a0b\u4e2d\u5df2\u7ecf\u4ece",(0,r.jsx)(e.code,{children:"spring.factories"}),"\u4e2d\u83b7\u53d6\u5230",(0,r.jsx)(e.code,{children:"ApplicationListener"}),"\u7684\u5b9e\u73b0\u7c7b\uff0c\u90a3\u4e48\u6211\u4eec\u76f4\u63a5\u5728\u81ea\u5df1\u7684jar\u5305\u7684",(0,r.jsx)(e.code,{children:"META-INF/spring.factories"}),"\u6587\u4ef6\u4e2d\u65b0\u589e\u914d\u7f6e\u5373\u53ef\uff1a"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"org.springframework.context.ApplicationListener=\\  \ncn.moondev.listeners.xxxxListener\\  \n  \n"})}),"\n",(0,r.jsx)(e.p,{children:"\u5173\u4e8eSpringApplication\u7684\u521d\u59cb\u5316\uff0c\u6211\u4eec\u5c31\u8bf4\u8fd9\u4e48\u591a\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"62-spring-boot\u542f\u52a8\u6d41\u7a0b",children:"6.2 Spring Boot\u542f\u52a8\u6d41\u7a0b"}),"\n",(0,r.jsx)(e.p,{children:"Spring Boot\u5e94\u7528\u7684\u6574\u4e2a\u542f\u52a8\u6d41\u7a0b\u90fd\u5c01\u88c5\u5728SpringApplication.run\u65b9\u6cd5\u4e2d\uff0c\u5176\u6574\u4e2a\u6d41\u7a0b\u771f\u7684\u662f\u592a\u957f\u592a\u957f\u4e86\uff0c\u4f46\u672c\u8d28\u4e0a\u5c31\u662f\u5728Spring\u5bb9\u5668\u542f\u52a8\u7684\u57fa\u7840\u4e0a\u505a\u4e86\u5927\u91cf\u7684\u6269\u5c55\uff0c\u6309\u7167\u8fd9\u4e2a\u601d\u8def\u6765\u770b\u770b\u6e90\u7801\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"public ConfigurableApplicationContext run(String... args) {  \n        StopWatch stopWatch = new StopWatch();        stopWatch.start();        ConfigurableApplicationContext context = null;        FailureAnalyzers analyzers = null;        configureHeadlessProperty();        // \u2460  \n        SpringApplicationRunListeners listeners = getRunListeners(args);        listeners.starting();        try {            // \u2461  \n            ApplicationArguments applicationArguments = new DefaultApplicationArguments(args);            ConfigurableEnvironment environment = prepareEnvironment(listeners,applicationArguments);            // \u2462  \n            Banner printedBanner = printBanner(environment);            // \u2463  \n            context = createApplicationContext();            // \u2464  \n            analyzers = new FailureAnalyzers(context);            // \u2465  \n            prepareContext(context, environment, listeners, applicationArguments,printedBanner);            // \u2466   \n            refreshContext(context);  \n            // \u2467  \n            afterRefresh(context, applicationArguments);            // \u2468  \n            listeners.finished(context, null);            stopWatch.stop();            return context;        }        catch (Throwable ex) {            handleRunFailure(context, listeners, analyzers, ex);            throw new IllegalStateException(ex);        }    }  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u2460 \u901a\u8fc7SpringFactoriesLoader\u67e5\u627e\u5e76\u52a0\u8f7d\u6240\u6709\u7684",(0,r.jsx)(e.code,{children:"SpringApplicationRunListeners"}),"\uff0c\u901a\u8fc7\u8c03\u7528starting()\u65b9\u6cd5\u901a\u77e5\u6240\u6709\u7684SpringApplicationRunListeners\uff1a\u5e94\u7528\u5f00\u59cb\u542f\u52a8\u4e86\u3002SpringApplicationRunListeners\u5176\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u4e8b\u4ef6\u53d1\u5e03\u8005\uff0c\u5b83\u5728SpringBoot\u5e94\u7528\u542f\u52a8\u7684\u4e0d\u540c\u65f6\u95f4\u70b9\u53d1\u5e03\u4e0d\u540c\u5e94\u7528\u4e8b\u4ef6\u7c7b\u578b(ApplicationEvent)\uff0c\u5982\u679c\u6709\u54ea\u4e9b\u4e8b\u4ef6\u76d1\u542c\u8005(ApplicationListener)\u5bf9\u8fd9\u4e9b\u4e8b\u4ef6\u611f\u5174\u8da3\uff0c\u5219\u53ef\u4ee5\u63a5\u6536\u5e76\u4e14\u5904\u7406\u3002\u8fd8\u8bb0\u5f97\u521d\u59cb\u5316\u6d41\u7a0b\u4e2d\uff0cSpringApplication\u52a0\u8f7d\u4e86\u4e00\u7cfb\u5217ApplicationListener\u5417\uff1f\u8fd9\u4e2a\u542f\u52a8\u6d41\u7a0b\u4e2d\u6ca1\u6709\u53d1\u73b0\u6709\u53d1\u5e03\u4e8b\u4ef6\u7684\u4ee3\u7801\uff0c\u5176\u5b9e\u90fd\u5df2\u7ecf\u5728SpringApplicationRunListeners\u8fd9\u513f\u5b9e\u73b0\u4e86\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u7b80\u5355\u7684\u5206\u6790\u4e00\u4e0b\u5176\u5b9e\u73b0\u6d41\u7a0b\uff0c\u9996\u5148\u770b\u4e0bSpringApplicationRunListener\u7684\u6e90\u7801\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"public interface SpringApplicationRunListener {  \n  \n    // \u8fd0\u884crun\u65b9\u6cd5\u65f6\u7acb\u5373\u8c03\u7528\u6b64\u65b9\u6cd5\uff0c\u53ef\u4ee5\u7528\u6237\u975e\u5e38\u65e9\u671f\u7684\u521d\u59cb\u5316\u5de5\u4f5c  \n    void starting();  \n    // Environment\u51c6\u5907\u597d\u540e\uff0c\u5e76\u4e14ApplicationContext\u521b\u5efa\u4e4b\u524d\u8c03\u7528  \n    void environmentPrepared(ConfigurableEnvironment environment);  \n    // ApplicationContext\u521b\u5efa\u597d\u540e\u7acb\u5373\u8c03\u7528  \n    void contextPrepared(ConfigurableApplicationContext context);  \n    // ApplicationContext\u52a0\u8f7d\u5b8c\u6210\uff0c\u5728refresh\u4e4b\u524d\u8c03\u7528  \n    void contextLoaded(ConfigurableApplicationContext context);  \n    // \u5f53run\u65b9\u6cd5\u7ed3\u675f\u4e4b\u524d\u8c03\u7528  \n    void finished(ConfigurableApplicationContext context, Throwable exception);  \n}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["SpringApplicationRunListener\u53ea\u6709\u4e00\u4e2a\u5b9e\u73b0\u7c7b\uff1a",(0,r.jsx)(e.code,{children:"EventPublishingRunListener"}),"\u3002\u2460\u5904\u7684\u4ee3\u7801\u53ea\u4f1a\u83b7\u53d6\u5230\u4e00\u4e2aEventPublishingRunListener\u7684\u5b9e\u4f8b\uff0c\u6211\u4eec\u6765\u770b\u770bstarting()\u65b9\u6cd5\u7684\u5185\u5bb9\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"public void starting() {  \n    // \u53d1\u5e03\u4e00\u4e2aApplicationStartedEvent  \n    this.initialMulticaster.multicastEvent(new ApplicationStartedEvent(this.application, this.args));}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u987a\u7740\u8fd9\u4e2a\u903b\u8f91\uff0c\u4f60\u53ef\u4ee5\u5728\u2461\u5904\u7684",(0,r.jsx)(e.code,{children:"prepareEnvironment()"}),"\u65b9\u6cd5\u7684\u6e90\u7801\u4e2d\u627e\u5230",(0,r.jsx)(e.code,{children:"listeners.environmentPrepared(environment);"}),"\u5373SpringApplicationRunListener\u63a5\u53e3\u7684\u7b2c\u4e8c\u4e2a\u65b9\u6cd5\uff0c\u90a3\u4e0d\u51fa\u4f60\u6240\u6599\uff0c",(0,r.jsx)(e.code,{children:"environmentPrepared()"}),"\u53c8\u53d1\u5e03\u4e86\u53e6\u5916\u4e00\u4e2a\u4e8b\u4ef6",(0,r.jsx)(e.code,{children:"ApplicationEnvironmentPreparedEvent"}),"\u3002\u63a5\u4e0b\u6765\u4f1a\u53d1\u751f\u4ec0\u4e48\uff0c\u5c31\u4e0d\u7528\u6211\u591a\u8bf4\u4e86\u5427\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u2461 \u521b\u5efa\u5e76\u914d\u7f6e\u5f53\u524d\u5e94\u7528\u5c06\u8981\u4f7f\u7528\u7684",(0,r.jsx)(e.code,{children:"Environment"}),"\uff0cEnvironment\u7528\u4e8e\u63cf\u8ff0\u5e94\u7528\u7a0b\u5e8f\u5f53\u524d\u7684\u8fd0\u884c\u73af\u5883\uff0c\u5176\u62bd\u8c61\u4e86\u4e24\u4e2a\u65b9\u9762\u7684\u5185\u5bb9\uff1a\u914d\u7f6e\u6587\u4ef6(profile)\u548c\u5c5e\u6027(properties)\uff0c\u5f00\u53d1\u7ecf\u9a8c\u4e30\u5bcc\u7684\u540c\u5b66\u5bf9\u8fd9\u4e24\u4e2a\u4e1c\u897f\u4e00\u5b9a\u4e0d\u4f1a\u964c\u751f\uff1a\u4e0d\u540c\u7684\u73af\u5883(eg\uff1a\u751f\u4ea7\u73af\u5883\u3001\u9884\u53d1\u5e03\u73af\u5883)\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u800c\u5c5e\u6027\u5219\u53ef\u4ee5\u4ece\u914d\u7f6e\u6587\u4ef6\u3001\u73af\u5883\u53d8\u91cf\u3001\u547d\u4ee4\u884c\u53c2\u6570\u7b49\u6765\u6e90\u83b7\u53d6\u3002\u56e0\u6b64\uff0c\u5f53Environment\u51c6\u5907\u597d\u540e\uff0c\u5728\u6574\u4e2a\u5e94\u7528\u7684\u4efb\u4f55\u65f6\u5019\uff0c\u90fd\u53ef\u4ee5\u4eceEnvironment\u4e2d\u83b7\u53d6\u8d44\u6e90\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u603b\u7ed3\u8d77\u6765\uff0c\u2461\u5904\u7684\u4e24\u53e5\u4ee3\u7801\uff0c\u4e3b\u8981\u5b8c\u6210\u4ee5\u4e0b\u51e0\u4ef6\u4e8b\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5224\u65adEnvironment\u662f\u5426\u5b58\u5728\uff0c\u4e0d\u5b58\u5728\u5c31\u521b\u5efa\uff08\u5982\u679c\u662fweb\u9879\u76ee\u5c31\u521b\u5efa",(0,r.jsx)(e.code,{children:"StandardServletEnvironment"}),"\uff0c\u5426\u5219\u521b\u5efa",(0,r.jsx)(e.code,{children:"StandardEnvironment"}),"\uff09"]}),"\n",(0,r.jsx)(e.li,{children:"\u914d\u7f6eEnvironment\uff1a\u914d\u7f6eprofile\u4ee5\u53caproperties"}),"\n",(0,r.jsxs)(e.li,{children:["\u8c03\u7528SpringApplicationRunListener\u7684",(0,r.jsx)(e.code,{children:"environmentPrepared()"}),"\u65b9\u6cd5\uff0c\u901a\u77e5\u4e8b\u4ef6\u76d1\u542c\u8005\uff1a\u5e94\u7528\u7684Environment\u5df2\u7ecf\u51c6\u5907\u597d"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u2462\u3001SpringBoot\u5e94\u7528\u5728\u542f\u52a8\u65f6\u4f1a\u8f93\u51fa\u8fd9\u6837\u7684\u4e1c\u897f\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"  .   ____          _            __ _ _ /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\  \n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )  '  |____| .__|_| |_|_| |_\\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot ::        (v1.5.6.RELEASE)  \n"})}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u679c\u60f3\u628a\u8fd9\u4e2a\u4e1c\u897f\u6539\u6210\u81ea\u5df1\u7684\u6d82\u9e26\uff0c\u4f60\u53ef\u4ee5\u7814\u7a76\u4ee5\u4e0bBanner\u7684\u5b9e\u73b0\uff0c\u8fd9\u4e2a\u4efb\u52a1\u5c31\u7559\u7ed9\u4f60\u4eec\u5427\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u2463\u3001\u6839\u636e\u662f\u5426\u662fweb\u9879\u76ee\uff0c\u6765\u521b\u5efa\u4e0d\u540c\u7684ApplicationContext\u5bb9\u5668\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u2464\u3001\u521b\u5efa\u4e00\u7cfb\u5217",(0,r.jsx)(e.code,{children:"FailureAnalyzer"}),"\uff0c\u521b\u5efa\u6d41\u7a0b\u4f9d\u7136\u662f\u901a\u8fc7SpringFactoriesLoader\u83b7\u53d6\u5230\u6240\u6709\u5b9e\u73b0FailureAnalyzer\u63a5\u53e3\u7684class\uff0c\u7136\u540e\u5728\u521b\u5efa\u5bf9\u5e94\u7684\u5b9e\u4f8b\u3002FailureAnalyzer\u7528\u4e8e\u5206\u6790\u6545\u969c\u5e76\u63d0\u4f9b\u76f8\u5173\u8bca\u65ad\u4fe1\u606f\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u2465\u3001\u521d\u59cb\u5316ApplicationContext\uff0c\u4e3b\u8981\u5b8c\u6210\u4ee5\u4e0b\u5de5\u4f5c\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5c06\u51c6\u5907\u597d\u7684Environment\u8bbe\u7f6e\u7ed9ApplicationContext"}),"\n",(0,r.jsxs)(e.li,{children:["\u904d\u5386\u8c03\u7528\u6240\u6709\u7684ApplicationContextInitializer\u7684",(0,r.jsx)(e.code,{children:"initialize()"}),"\u65b9\u6cd5\u6765\u5bf9\u5df2\u7ecf\u521b\u5efa\u597d\u7684ApplicationContext\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u5904\u7406"]}),"\n",(0,r.jsxs)(e.li,{children:["\u8c03\u7528SpringApplicationRunListener\u7684",(0,r.jsx)(e.code,{children:"contextPrepared()"}),"\u65b9\u6cd5\uff0c\u901a\u77e5\u6240\u6709\u7684\u76d1\u542c\u8005\uff1aApplicationContext\u5df2\u7ecf\u51c6\u5907\u5b8c\u6bd5"]}),"\n",(0,r.jsx)(e.li,{children:"\u5c06\u6240\u6709\u7684bean\u52a0\u8f7d\u5230\u5bb9\u5668\u4e2d"}),"\n",(0,r.jsxs)(e.li,{children:["\u8c03\u7528SpringApplicationRunListener\u7684",(0,r.jsx)(e.code,{children:"contextLoaded()"}),"\u65b9\u6cd5\uff0c\u901a\u77e5\u6240\u6709\u7684\u76d1\u542c\u8005\uff1aApplicationContext\u5df2\u7ecf\u88c5\u8f7d\u5b8c\u6bd5"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u2466\u3001\u8c03\u7528ApplicationContext\u7684",(0,r.jsx)(e.code,{children:"refresh()"}),"\u65b9\u6cd5\uff0c\u5b8c\u6210IoC\u5bb9\u5668\u53ef\u7528\u7684\u6700\u540e\u4e00\u9053\u5de5\u5e8f\u3002\u4ece\u540d\u5b57\u4e0a\u7406\u89e3\u4e3a\u5237\u65b0\u5bb9\u5668\uff0c\u90a3\u4f55\u4e3a\u5237\u65b0\uff1f\u5c31\u662f\u63d2\u624b\u5bb9\u5668\u7684\u542f\u52a8\uff0c\u8054\u7cfb\u4e00\u4e0b\u7b2c\u4e00\u5c0f\u8282\u7684\u5185\u5bb9\u3002\u90a3\u5982\u4f55\u5237\u65b0\u5462\uff1f\u4e14\u770b\u4e0b\u9762\u4ee3\u7801\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"// \u6458\u81earefresh()\u65b9\u6cd5\u4e2d\u4e00\u53e5\u4ee3\u7801  \ninvokeBeanFactoryPostProcessors(beanFactory);  \n  \n"})}),"\n",(0,r.jsx)(e.p,{children:"\u770b\u770b\u8fd9\u4e2a\u65b9\u6cd5\u7684\u5b9e\u73b0\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"protected void invokeBeanFactoryPostProcessors(ConfigurableListableBeanFactory beanFactory) {  \n    PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(beanFactory, getBeanFactoryPostProcessors());    ......}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u83b7\u53d6\u5230\u6240\u6709\u7684",(0,r.jsx)(e.code,{children:"BeanFactoryPostProcessor"}),"\u6765\u5bf9\u5bb9\u5668\u505a\u4e00\u4e9b\u989d\u5916\u7684\u64cd\u4f5c\u3002BeanFactoryPostProcessor\u5141\u8bb8\u6211\u4eec\u5728\u5bb9\u5668\u5b9e\u4f8b\u5316\u76f8\u5e94\u5bf9\u8c61\u4e4b\u524d\uff0c\u5bf9\u6ce8\u518c\u5230\u5bb9\u5668\u7684BeanDefinition\u6240\u4fdd\u5b58\u7684\u4fe1\u606f\u505a\u4e00\u4e9b\u989d\u5916\u7684\u64cd\u4f5c\u3002\u8fd9\u91cc\u7684getBeanFactoryPostProcessors()\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u52303\u4e2aProcessor\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"ConfigurationWarningsApplicationContextInitializer$ConfigurationWarningsPostProcessor  \nSharedMetadataReaderFactoryContextInitializer$CachingMetadataReaderFactoryPostProcessor  \nConfigFileApplicationListener$PropertySourceOrderingPostProcessor  \n  \n"})}),"\n",(0,r.jsx)(e.p,{children:"\u4e0d\u662f\u6709\u90a3\u4e48\u591aBeanFactoryPostProcessor\u7684\u5b9e\u73b0\u7c7b\uff0c\u4e3a\u4ec0\u4e48\u8fd9\u513f\u53ea\u6709\u8fd93\u4e2a\uff1f\u56e0\u4e3a\u5728\u521d\u59cb\u5316\u6d41\u7a0b\u83b7\u53d6\u5230\u7684\u5404\u79cdApplicationContextInitializer\u548cApplicationListener\u4e2d\uff0c\u53ea\u6709\u4e0a\u65873\u4e2a\u505a\u4e86\u7c7b\u4f3c\u4e8e\u5982\u4e0b\u64cd\u4f5c\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"public void initialize(ConfigurableApplicationContext context) {  \n    context.addBeanFactoryPostProcessor(new ConfigurationWarningsPostProcessor(getChecks()));}  \n  \n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"\u7136\u540e\u4f60\u5c31\u53ef\u4ee5\u8fdb\u5165\u5230"}),"PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors()",(0,r.jsx)(e.code,{children:"\u65b9\u6cd5\u4e86\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u9664\u4e86\u4f1a\u904d\u5386\u4e0a\u9762\u76843\u4e2aBeanFactoryPostProcessor\u5904\u7406\u5916\uff0c\u8fd8\u4f1a\u83b7\u53d6\u7c7b\u578b\u4e3a"}),"BeanDefinitionRegistryPostProcessor",(0,r.jsx)(e.code,{children:"\u7684bean\uff1a"}),"org.springframework.context.annotation.internalConfigurationAnnotationProcessor",(0,r.jsx)(e.code,{children:"\uff0c\u5bf9\u5e94\u7684Class\u4e3a"}),"ConfigurationClassPostProcessor",(0,r.jsx)(e.code,{children:"\u3002"}),"ConfigurationClassPostProcessor",(0,r.jsx)(e.code,{children:"\u7528\u4e8e\u89e3\u6790\u5904\u7406\u5404\u79cd\u6ce8\u89e3\uff0c\u5305\u62ec\uff1a@Configuration\u3001@ComponentScan\u3001@Import\u3001@PropertySource\u3001@ImportResource\u3001@Bean\u3002\u5f53\u5904\u7406"}),"@import",(0,r.jsx)(e.code,{children:"\u6ce8\u89e3\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u8c03\u7528<\u81ea\u52a8\u914d\u7f6e>\u8fd9\u4e00\u5c0f\u8282\u4e2d\u7684"}),"EnableAutoConfigurationImportSelector.selectImports()",(0,r.jsx)(e.code,{children:"\u6765\u5b8c\u6210\u81ea\u52a8\u914d\u7f6e\u529f\u80fd\u3002\u5176\u4ed6\u7684\u8fd9\u91cc\u4e0d\u518d\u591a\u8bb2\uff0c\u5982\u679c\u4f60\u6709\u5174\u8da3\uff0c\u53ef\u4ee5\u67e5\u9605\u53c2\u8003\u8d44\u65996\u3002"})]}),"\n",(0,r.jsx)(e.p,{children:"\u2467\u3001\u67e5\u627e\u5f53\u524dcontext\u4e2d\u662f\u5426\u6ce8\u518c\u6709CommandLineRunner\u548cApplicationRunner\uff0c\u5982\u679c\u6709\u5219\u904d\u5386\u6267\u884c\u5b83\u4eec\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u2468\u3001\u6267\u884c\u6240\u6709SpringApplicationRunListener\u7684finished()\u65b9\u6cd5\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u5c31\u662fSpring Boot\u7684\u6574\u4e2a\u542f\u52a8\u6d41\u7a0b\uff0c\u5176\u6838\u5fc3\u5c31\u662f\u5728Spring\u5bb9\u5668\u521d\u59cb\u5316\u5e76\u542f\u52a8\u7684\u57fa\u7840\u4e0a\u52a0\u5165\u5404\u79cd\u6269\u5c55\u70b9\uff0c\u8fd9\u4e9b\u6269\u5c55\u70b9\u5305\u62ec\uff1aApplicationContextInitializer\u3001ApplicationListener\u4ee5\u53ca\u5404\u79cdBeanFactoryPostProcessor\u7b49\u7b49\u3002\u4f60\u5bf9\u6574\u4e2a\u6d41\u7a0b\u7684\u7ec6\u8282\u4e0d\u5fc5\u592a\u8fc7\u5173\u6ce8\uff0c\u751a\u81f3\u6ca1\u5f04\u660e\u767d\u4e5f\u6ca1\u6709\u5173\u7cfb\uff0c\u4f60\u53ea\u8981\u7406\u89e3\u8fd9\u4e9b\u6269\u5c55\u70b9\u662f\u5728\u4f55\u65f6\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u80fd\u8ba9\u5b83\u4eec\u4e3a\u4f60\u6240\u7528\u5373\u53ef\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u6574\u4e2a\u542f\u52a8\u6d41\u7a0b\u786e\u5b9e\u975e\u5e38\u590d\u6742\uff0c\u53ef\u4ee5\u67e5\u8be2\u53c2\u8003\u8d44\u6599\u4e2d\u7684\u90e8\u5206\u7ae0\u8282\u548c\u5185\u5bb9\uff0c\u5bf9\u7167\u7740\u6e90\u7801\uff0c\u591a\u770b\u770b\uff0c\u6211\u60f3\u6700\u7ec8\u4f60\u90fd\u80fd\u5f04\u6e05\u695a\u7684\u3002\u8a00\u800c\u603b\u4e4b\uff0cSpring\u624d\u662f\u6838\u5fc3\uff0c\u7406\u89e3\u6e05\u695aSpring\u5bb9\u5668\u7684\u542f\u52a8\u6d41\u7a0b\uff0c\u90a3Spring Boot\u542f\u52a8\u6d41\u7a0b\u5c31\u4e0d\u5728\u8bdd\u4e0b\u4e86\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u53c2\u8003\u6587\u7ae0",children:"\u53c2\u8003\u6587\u7ae0"}),"\n",(0,r.jsxs)(e.p,{children:["[1]",(0,r.jsx)(e.a,{href:"https://link.jianshu.com/?t=http%3A%2F%2Funion-click.jd.com%2Fjdc%3Fd%3D4jESQ9",children:"\u738b\u798f\u5f3a \u8457\uff1bSpringBoot\u63ed\u79d8\uff1a\u5feb\u901f\u6784\u5efa\u5fae\u670d\u52a1\u4f53\u7cfb; \u673a\u68b0\u5de5\u4e1a\u51fa\u7248\u793e, 2016"}),(0,r.jsx)(e.br,{}),"\n","[2]",(0,r.jsx)(e.a,{href:"https://link.jianshu.com/?t=http%3A%2F%2Funion-click.jd.com%2Fjdc%3Fd%3DyzfgeF",children:"\u738b\u798f\u5f3a \u8457\uff1bSpring\u63ed\u79d8; \u4eba\u6c11\u90ae\u4ef6\u51fa\u7248\u793e, 2009"}),(0,r.jsx)(e.br,{}),"\n","[3]",(0,r.jsx)(e.a,{href:"https://link.jianshu.com/?t=http%3A%2F%2Funion-click.jd.com%2Fjdc%3Fd%3DAQ6oHO",children:"Craig Walls \u8457\uff1b\u4e01\u96ea\u4e30 \u8bd1\uff1bSpring Boot\u5b9e\u6218\uff1b\u4e2d\u56fd\u5de5\u4fe1\u51fa\u7248\u96c6\u56e2 \u4eba\u6c11\u90ae\u7535\u51fa\u7248\u793e\uff0c2016"}),(0,r.jsx)(e.br,{}),"\n","[4]",(0,r.jsx)(e.a,{href:"https://link.jianshu.com/?t=https%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Fjava%2Fj-lo-classloader%2F",children:"\u6df1\u5165\u63a2\u8ba8 Java \u7c7b\u52a0\u8f7d\u5668"}),":",(0,r.jsx)(e.a,{href:"https://link.jianshu.com/?t=https%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Fcn%2Fjava%2Fj-lo-classloader%2F",children:"https://www.ibm.com/developerworks/cn/java/j-lo-classloader/"}),(0,r.jsx)(e.br,{}),"\n","[5]",(0,r.jsx)(e.a,{href:"https://link.jianshu.com/?t=http%3A%2F%2Fblog.csdn.net%2Fliaokailin%2Farticle%2Fdetails%2F49559951",children:"spring boot\u5b9e\u6218\uff1a\u81ea\u52a8\u914d\u7f6e\u539f\u7406\u5206\u6790"}),":",(0,r.jsx)(e.a,{href:"https://link.jianshu.com/?t=http%3A%2F%2Fblog.csdn.net%2Fliaokailin%2Farticle%2Fdetails%2F49559951",children:"http://blog.csdn.net/liaokailin/article/details/49559951"}),(0,r.jsx)(e.br,{}),"\n","[6]",(0,r.jsx)(e.a,{href:"https://link.jianshu.com/?t=http%3A%2F%2Fblog.csdn.net%2Fliaokailin%2Farticle%2Fdetails%2F49107209",children:"spring boot\u5b9e\u6218\uff1aSpring boot Bean\u52a0\u8f7d\u6e90\u7801\u5206\u6790"}),"\uff1a",(0,r.jsx)(e.a,{href:"https://link.jianshu.com/?t=http%3A%2F%2Fblog.csdn.net%2Fliaokailin%2Farticle%2Fdetails%2F49107209",children:"http://blog.csdn.net/liaokailin/article/details/49107209"})]})]})}function p(n={}){const{wrapper:e}={...(0,o.a)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},88672:(n,e,i)=>{i.d(e,{Z:()=>a,a:()=>s});var r=i(50959);const o={},t=r.createContext(o);function s(n){const e=r.useContext(t);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);