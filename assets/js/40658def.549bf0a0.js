"use strict";(self.webpackChunkcode_note_blog=self.webpackChunkcode_note_blog||[]).push([[2215],{41995:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>c,frontMatter:()=>s,metadata:()=>d,toc:()=>l});var i=t(11527),r=t(88672);const s={},a=void 0,d={id:"Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/RequestMapping\u521d\u59cb\u5316\u6d41\u7a0b",title:"RequestMapping\u521d\u59cb\u5316\u6d41\u7a0b",description:"\u524d\u9762\u7684\u6587\u7ae0\u4e2d\uff0c\u6211\u4eec\u5206\u6790\u4e86 DispatcherServlet \u521d\u59cb\u5316\u6d41\u7a0b\uff0c\u672c\u6587\u5c06\u6765\u5206\u6790 RequestMapping \u521d\u59cb\u5316\u6d41\u7a0b\u3002\u8fd9\u91cc\u6240\u8bf4\u7684 RequestMapping \u521d\u59cb\u5316\u6d41\u7a0b\uff0c\u76f4\u89c2\u6765\u8bf4\uff0c\u5c31\u662f spring \u5904\u7406 @RequestMaping \u6ce8\u89e3\u7684\u8fc7\u7a0b\u3002",source:"@site/docs/Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/RequestMapping\u521d\u59cb\u5316\u6d41\u7a0b.md",sourceDirName:"Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790",slug:"/Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/RequestMapping\u521d\u59cb\u5316\u6d41\u7a0b",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/RequestMapping\u521d\u59cb\u5316\u6d41\u7a0b",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/RequestMapping\u521d\u59cb\u5316\u6d41\u7a0b.md",tags:[],version:"current",frontMatter:{},sidebar:"spring",previous:{title:"DispatcherServlet\u521d\u59cb\u5316\u6d41\u7a0b",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/DispatcherServlet\u521d\u59cb\u5316\u6d41\u7a0b"},next:{title:"Spring\u5bb9\u5668\u542f\u52a8Tomcat",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/Spring\u5bb9\u5668\u542f\u52a8Tomcat"}},o={},l=[{value:"1. \u518d\u8c08 <code>@EnableWebMvc</code>",id:"1-\u518d\u8c08-enablewebmvc",level:3},{value:"2. <code>RequestMappingHandlerMapping#afterPropertiesSet</code> \u65b9\u6cd5",id:"2-requestmappinghandlermappingafterpropertiesset-\u65b9\u6cd5",level:3},{value:"3. <code>AbstractHandlerMethodMapping#detectHandlerMethods</code>",id:"3-abstracthandlermethodmappingdetecthandlermethods",level:3},{value:"3.1 \u67e5\u627e\u65b9\u6cd5",id:"31-\u67e5\u627e\u65b9\u6cd5",level:4},{value:"3.2 \u521b\u5efa <code>RequestMappingInfo</code>",id:"32-\u521b\u5efa-requestmappinginfo",level:4},{value:"3.3 \u6ce8\u518c",id:"33-\u6ce8\u518c",level:4},{value:"3. <code>AbstractHandlerMethodMapping#registerHandlerMethod</code> \u65b9\u6cd5",id:"3-abstracthandlermethodmappingregisterhandlermethod-\u65b9\u6cd5",level:3},{value:"3.1 \u83b7\u53d6 <code>HandlerMethod</code>",id:"31-\u83b7\u53d6-handlermethod",level:4},{value:"3.2 \u9a8c\u8bc1 mapping \u662f\u5426\u91cd\u590d",id:"32-\u9a8c\u8bc1-mapping-\u662f\u5426\u91cd\u590d",level:4},{value:"3.3 \u83b7\u53d6 <code>directUrls</code>",id:"33-\u83b7\u53d6-directurls",level:4},{value:"3.4 \u6ce8\u518c\u63a5\u53e3\u4fe1\u606f",id:"34-\u6ce8\u518c\u63a5\u53e3\u4fe1\u606f",level:4},{value:"4. \u603b\u7ed3",id:"4-\u603b\u7ed3",level:3}];function p(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["\u524d\u9762\u7684\u6587\u7ae0\u4e2d\uff0c\u6211\u4eec\u5206\u6790\u4e86 ",(0,i.jsx)(n.code,{children:"DispatcherServlet"})," \u521d\u59cb\u5316\u6d41\u7a0b\uff0c\u672c\u6587\u5c06\u6765\u5206\u6790 ",(0,i.jsx)(n.code,{children:"RequestMapping"})," \u521d\u59cb\u5316\u6d41\u7a0b\u3002\u8fd9\u91cc\u6240\u8bf4\u7684 ",(0,i.jsx)(n.code,{children:"RequestMapping"})," \u521d\u59cb\u5316\u6d41\u7a0b\uff0c\u76f4\u89c2\u6765\u8bf4\uff0c\u5c31\u662f spring \u5904\u7406 ",(0,i.jsx)(n.code,{children:"@RequestMaping"})," \u6ce8\u89e3\u7684\u8fc7\u7a0b\u3002"]}),"\n",(0,i.jsxs)(n.h3,{id:"1-\u518d\u8c08-enablewebmvc",children:["1. \u518d\u8c08 ",(0,i.jsx)(n.code,{children:"@EnableWebMvc"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u5728 ",(0,i.jsx)(n.a,{href:"https://my.oschina.net/funcy/blog/4696657",children:"spring mvc \u4e4b springmvc demo \u4e0e @EnableWebMvc \u6ce8\u89e3 "}),"\u4e00\u6587\u4e2d\u63d0\u5230\uff0cspring \u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"@EnableWebMvc"})," \u6ce8\u89e3\u6765\u542f\u7528 mvc \u529f\u80fd\uff0c\u6700\u7ec8\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"@Import"})," \u6ce8\u89e3\u4e3a\u9879\u76ee\u5f15\u5165\u4e86 ",(0,i.jsx)(n.code,{children:"DelegatingWebMvcConfiguration.class"}),"\uff0c\u8be5\u7c7b\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"@Bean"})," \u6ce8\u89e3\u7684\u65b9\u6cd5\u5411 spring \u4e2d\u5f15\u5165\u5927\u91cf\u7684 mvc \u7ec4\u4ef6\uff1a"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"public RequestMappingHandlerMapping requestMappingHandlerMapping(...)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"public PathMatcher mvcPathMatcher()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"public UrlPathHelper mvcUrlPathHelper()"})}),"\n",(0,i.jsx)(n.li,{children:"..."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u4e48\u7ec4\u4ef6\u4e2d\uff0c\u4e0e ",(0,i.jsx)(n.code,{children:"@RequestMaping"})," \u6ce8\u89e3\u76f8\u5173\u7684\u7c7b\u5c31\u662f ",(0,i.jsx)(n.code,{children:"RequestMappingHandlerMapping"}),"."]}),"\n",(0,i.jsxs)(n.h3,{id:"2-requestmappinghandlermappingafterpropertiesset-\u65b9\u6cd5",children:["2. ",(0,i.jsx)(n.code,{children:"RequestMappingHandlerMapping#afterPropertiesSet"})," \u65b9\u6cd5"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"RequestMappingHandlerMapping"})," \u662f\u521b\u5efa\u662f\u5728 ",(0,i.jsx)(n.code,{children:"WebMvcConfigurationSupport"})," \u4e2d\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'@Bean\npublic RequestMappingHandlerMapping requestMappingHandlerMapping(\n        @Qualifier("mvcContentNegotiationManager") ContentNegotiationManager contentNegotiationManager,\n        @Qualifier("mvcConversionService") FormattingConversionService conversionService,\n        @Qualifier("mvcResourceUrlProvider") ResourceUrlProvider resourceUrlProvider) {\n\n    // \u521b\u5efabean\n    RequestMappingHandlerMapping mapping = createRequestMappingHandlerMapping();\n    mapping.setOrder(0);\n    mapping.setInterceptors(getInterceptors(conversionService, resourceUrlProvider));\n    mapping.setContentNegotiationManager(contentNegotiationManager);\n    mapping.setCorsConfigurations(getCorsConfigurations());\n\n    // \u5904\u7406\u5404\u79cd\u914d\u7f6e\uff0c\u8fd9\u91cc\u5c31\u662f\u4e0a\u4e00\u7bc7\u6587\u7ae0\u4e2d\u63d0\u5230\u7684getXxx()\u65b9\u6cd5\u83b7\u53d6\u914d\u7f6e\n    PathMatchConfigurer configurer = getPathMatchConfigurer();\n    Boolean useSuffixPatternMatch = configurer.isUseSuffixPatternMatch();\n    if (useSuffixPatternMatch != null) {\n        mapping.setUseSuffixPatternMatch(useSuffixPatternMatch);\n    }\n    Boolean useRegisteredSuffixPatternMatch = configurer.isUseRegisteredSuffixPatternMatch();\n    if (useRegisteredSuffixPatternMatch != null) {\n        mapping.setUseRegisteredSuffixPatternMatch(useRegisteredSuffixPatternMatch);\n    }\n    Boolean useTrailingSlashMatch = configurer.isUseTrailingSlashMatch();\n    if (useTrailingSlashMatch != null) {\n        mapping.setUseTrailingSlashMatch(useTrailingSlashMatch);\n    }\n    UrlPathHelper pathHelper = configurer.getUrlPathHelper();\n    if (pathHelper != null) {\n        mapping.setUrlPathHelper(pathHelper);\n    }\n    PathMatcher pathMatcher = configurer.getPathMatcher();\n    if (pathMatcher != null) {\n        mapping.setPathMatcher(pathMatcher);\n    }\n    Map<String, Predicate<Class<?>>> pathPrefixes = configurer.getPathPrefixes();\n    if (pathPrefixes != null) {\n        mapping.setPathPrefixes(pathPrefixes);\n    }\n\n    return mapping;\n}\n\n// \u521b\u5efa\u5bf9\u8c61\nprotected RequestMappingHandlerMapping createRequestMappingHandlerMapping() {\n    return new RequestMappingHandlerMapping();\n}\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u4e2a\u65b9\u6cd5\u5c31\u662f\u7528\u6765\u521b\u5efa\u5bf9\u8c61 ",(0,i.jsx)(n.code,{children:"RequestMappingHandlerMapping"})," \u5bf9\u8c61\u7684\uff0c\u5148\u662f\u521b\u5efa\u4e86\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7136\u540e\u8bbe\u7f6e\u4e86\u5404\u79cd\u5c5e\u6027\u3002\u5bf9\u8c61\u521b\u5efa\u540e\uff0c\u7ee7\u7eed\u8fdb\u884c spring bean \u7684\u751f\u547d\u5468\u671f\uff0c\u7ee7\u800c\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"RequestMappingHandlerMapping#afterPropertiesSet"})," \u65b9\u6cd5\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Override\npublic void afterPropertiesSet() {\n    // \u914d\u7f6e\u4e86\u4e00\u4e9b\u5c5e\u6027\n    this.config = new RequestMappingInfo.BuilderConfiguration();\n    this.config.setUrlPathHelper(getUrlPathHelper());\n    this.config.setPathMatcher(getPathMatcher());\n    this.config.setSuffixPatternMatch(this.useSuffixPatternMatch);\n    this.config.setTrailingSlashMatch(this.useTrailingSlashMatch);\n    this.config.setRegisteredSuffixPatternMatch(this.useRegisteredSuffixPatternMatch);\n    this.config.setContentNegotiationManager(getContentNegotiationManager());\n    // \u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5\n    super.afterPropertiesSet();\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u4e2a\u65b9\u6cd5\u5148\u662f \u914d\u7f6e\u4e86\u4e00\u4e9b\u5c5e\u6027\uff0c\u7136\u540e\u518d\u8c03\u7528\u7236\u7c7b\u7684 ",(0,i.jsx)(n.code,{children:"afterPropertiesSet()"}),"\uff0c\u7ee7\u7eed\u8ffd\u4e0b\u53bb\uff1a"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"AbstractHandlerMethodMapping#afterPropertiesSet"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Override\npublic void afterPropertiesSet() {\n    initHandlerMethods();\n}\n\nprotected void initHandlerMethods() {\n    // \u8c03\u7528getCandidateBeanNames()\u83b7\u53d6\u5bb9\u5668\u4e2d\u6240\u6709bean\u7684beanName\uff0c\n    // \u7136\u540e\u6328\u4e2a\u5904\u7406\u5bb9\u5668\u4e2d\u6240\u6709 bean\n    for (String beanName : getCandidateBeanNames()) {\n        if (!beanName.startsWith(SCOPED_TARGET_NAME_PREFIX)) {\n            // \u9010\u4e2a bean \u5904\u7406\uff0c\u7ee7\u7eed\u5f80\u4e0b\u770b\n            processCandidateBean(beanName);\n        }\n    }\n    // \u8fd9\u4e2a\u65b9\u6cd5\u4ec5\u6253\u4e86\u4e00\u4e2a\u65e5\u5fd7\uff0c\u6ca1\u4ec0\u4e48\u529f\u80fd\n    handlerMethodsInitialized(getHandlerMethods());\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["spring \u5728\u5904\u7406\u65f6\uff0c\u83b7\u53d6\u4e86\u5bb9\u5668\u4e2d\u6240\u6709 bean \u7684 beanName\uff0c\u7136\u540e\u5bf9 beanName \u8fdb\u884c\u6328\u4e2a\u5904\u7406\uff0c\u7ee7\u7eed\u770b ",(0,i.jsx)(n.code,{children:"AbstractHandlerMethodMapping#processCandidateBean"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"// \u5904\u7406bean\u7684\u5177\u4f53\u903b\u8f91\nprotected void processCandidateBean(String beanName) {\n    // \u83b7\u53d6 beanName \u5bf9\u5e94\u7684 beanType\n    // 1\\. \u5982\u679c\u662fcglib\u4ee3\u7406\uff0cbeanType \u4e3a Xxx$$EnhancerBySpringCGLIB\n    // 2\\. \u5982\u679c\u662fjdk\u52a8\u6001\u4ee3\u7406\uff0cbeanType \u4e3a com.sum.proxy.$Proxy\n    Class<?> beanType = null;\n    try {\n        beanType = obtainApplicationContext().getType(beanName);\n    }\n    catch (Throwable ex) {\n        ...\n    }\n    // isHandler: beanType\u4e0a\u662f\u5426\u6709 @Controller \u6216 @RequestMapping \u6ce8\u89e3\n    if (beanType != null && isHandler(beanType)) {\n        // \u5904\u7406 handlerMethods\n        detectHandlerMethods(beanName);\n    }\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u662f\u6bd4\u8f83\u7b80\u5355\uff0c\u4e3b\u8981\u662f\u83b7\u53d6 ",(0,i.jsx)(n.code,{children:"beanName"})," \u5bf9\u5e94\u7684 ",(0,i.jsx)(n.code,{children:"beanType"}),"\uff0c\u7136\u540e\u5224\u65ad\u662f\u5426\u6709 ",(0,i.jsx)(n.code,{children:"@Controller/@RequestMapping"})," \u6ce8\u89e3\uff0c\u4e4b\u540e\u5c31\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"AbstractHandlerMethodMapping#detectHandlerMethods"})," \u8fdb\u4e00\u6b65\u5904\u7406\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u4e0d\u8fc7\u5bf9\u4e8e ",(0,i.jsx)(n.code,{children:"isHandler(Class)"})," \u9700\u8981\u7740\u91cd\u8bf4\u660e\u4e0b\uff1a"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u80fd\u8bc6\u522b ",(0,i.jsx)(n.code,{children:"@Controller"}),"\uff0c\u540c\u6837\u80fd\u8bc6\u522b ",(0,i.jsx)(n.code,{children:"@RestController"}),"\uff0c\u751a\u81f3\u5176\u4ed6\u6807\u6ce8 ",(0,i.jsx)(n.code,{children:"@Controller"})," \u7684\u6ce8\u89e3\uff0c\u5373\u80fd\u8bc6\u522b\u5982\u4e0b\u6ce8\u89e3\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"// \u6807\u8bb0\u4e86 @Controller\n@Controller\n// \u7701\u7565\u5176\u4ed6\u6ce8\u89e3\npublic @interface XxxController {\n    ...\n}\n\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c ",(0,i.jsx)(n.code,{children:"beanName"})," \u5bf9\u5e94 bean \u662f cglib \u4ee3\u7406 bean\uff0cbeanType \u4e3a ",(0,i.jsx)(n.code,{children:"Xxx$$EnhancerBySpringCGLIB"}),"\uff0c\u80fd\u8bc6\u522b\u5176\u7236\u7c7b (\u4e5f\u5c31\u662f\u76ee\u6807\u7c7b) \u4e0a\u7684 ",(0,i.jsx)(n.code,{children:"@Controller/@ReestMapping"}),";"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c ",(0,i.jsx)(n.code,{children:"beanName"})," \u5bf9\u5e94\u7684 bean \u662f jdk \u52a8\u6001\u4ee3\u7406 bean\uff0cbeanType \u4e3a ",(0,i.jsx)(n.code,{children:"com.sum.proxy.$Proxy"}),"\uff0c\u80fd\u8bc6\u522b\u5176\u7236\u63a5\u53e3\u4e0a\u7684 ",(0,i.jsx)(n.code,{children:"@Controller/@RequestMapping"}),";"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c beanType \u662f ",(0,i.jsx)(n.code,{children:"com.sum.proxy.$Proxy"}),"(jdk \u52a8\u6001\u4ee3\u7406\u7c7b)\uff0c** \u65e0\u6cd5\u8bc6\u522b\u5176\u76ee\u6807\u7c7b\u4e0a\u7684 ",(0,i.jsx)(n.code,{children:"@Controller/@RequestMapping"})," ** \u7684\uff1b"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u6807\u6ce8 ",(0,i.jsx)(n.code,{children:"@Controller/@RequestMapping"})," \u7684\u7c7b\u8981\u5b9e\u73b0 jdk \u52a8\u6001\u4ee3\u7406\uff0c\u9700\u8981\u5c06 ",(0,i.jsx)(n.code,{children:"@Controller/@RequestMapping"})," \u653e\u5728\u63a5\u53e3\u53ca\u63a5\u53e3\u7684\u65b9\u6cd5\u4e0a\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5230\u4e86\u8fd9\u91cc\uff0c\u4f20\u5165 ",(0,i.jsx)(n.code,{children:"AbstractHandlerMethodMapping#detectHandlerMethods"})," \u7684 ",(0,i.jsx)(n.code,{children:"beanType"})," \u90fd\u662f\u6807\u6ce8\u4e86 ",(0,i.jsx)(n.code,{children:"@Controller/@RequestMapping"})," \u7684\u7c7b\u6216\u63a5\u53e3\u4e86\u3002"]}),"\n",(0,i.jsxs)(n.h3,{id:"3-abstracthandlermethodmappingdetecthandlermethods",children:["3. ",(0,i.jsx)(n.code,{children:"AbstractHandlerMethodMapping#detectHandlerMethods"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u7ee7\u7eed\u770b\u770b ",(0,i.jsx)(n.code,{children:"AbstractHandlerMethodMapping#detectHandlerMethods"})," \u7684\u5185\u5bb9\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"// \u68c0\u6d4bhandler\u65b9\u6cd5\nprotected void detectHandlerMethods(Object handler) {\n    Class<?> handlerType = (handler instanceof String ?\n            obtainApplicationContext().getType((String) handler) : handler.getClass());\n    if (handlerType != null) {\n        // 1\\. \u9488\u5bf9cglib\u4ee3\u7406\u5bf9\u8c61\uff0c\u5f97\u5230\u5176\u7236\u7c7b\uff0c\u4e5f\u5c31\u662f\u76ee\u6807\u5bf9\u8c61\u7684\u7c7b\n        Class<?> userType = ClassUtils.getUserClass(handlerType);\n        // 2\\. \u8fd9\u91cc\u4f1a\u5904\u7406 userType\u3001userType\u7684\u4e0d\u5305\u62ecObject\u7684\u6240\u6709\u7236\u7c7b\u53ca userType \u7684\u6240\u6709\u63a5\u53e3\u7684\u65b9\u6cd5\n        Map<Method, T> methods = MethodIntrospector.selectMethods(userType,\n                // 3\\. \u5bf9\u6bcf\u4e2a\u65b9\u6cd5\uff0c\u5982\u679c\u6709 @RequestMapping\uff0c\u5219\u521b\u5efa RequestMappingInfo\n                // \u5c06 @RequestMapping \u4fe1\u606f\u5c01\u88c5\u5230\u8be5\u5bf9\u8c61\u4e2d\n                (MethodIntrospector.MetadataLookup<T>) method -> {\n                    try {\n                        // \u5728\u8fd9\u91cc\u5904\u7406\u65b9\u6cd5\u4e0a\u7684 @RequestMapping \u6ce8\u89e3\n                        return getMappingForMethod(method, userType);\n                    }\n                    catch (Throwable ex) {\n                        ...\n                    }\n                });\n        methods.forEach((method, mapping) -> {\n            Method invocableMethod = AopUtils.selectInvocableMethod(method, userType);\n            // 4\\. \u5728\u8fd9\u91cc\u5c06handler\u3001mapping\u4e0emethod\u4fdd\u5b58\u8d77\u6765\n            registerHandlerMethod(handler, invocableMethod, mapping);\n        });\n    }\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u4e2a\u65b9\u6cd5\u505a\u4e86\u5982\u4e0b\u51e0\u4ef6\u4e8b\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u9488\u5bf9 cglib \u4ee3\u7406\u5bf9\u8c61\uff0c\u5f97\u5230\u5176\u7236\u7c7b\uff0c\u4e5f\u5c31\u662f\u76ee\u6807\u5bf9\u8c61\u7684\u7c7b\uff08",(0,i.jsx)(n.strong,{children:"\u8fd9\u91cc\u4e3a\u4f55\u53ea\u5904\u7406 cglib \u4ee3\u7406\u5bf9\u8c61\uff0c\u800c\u4e0d\u5904\u7406 jdk \u52a8\u6001\u4ee3\u7406\u5bf9\u8c61\u5462\uff1f"})," \u4ece\u4e0a\u9762\u5bf9 ",(0,i.jsx)(n.code,{children:"isHandler(Class)"})," \u7684\u8bf4\u660e\u53ef\u77e5\uff0cspring \u5e76\u4e0d\u80fd\u8bc6\u522b jdk \u52a8\u6001\u4ee3\u7406\u5bf9\u8c61\u5bf9\u5e94\u7c7b\u4e0a\u7684 ",(0,i.jsx)(n.code,{children:"@Controller/@RequestMapping"})," \u6ce8\u89e3\uff0c\u56e0\u6b64\u4e0d\u4f1a\u6267\u884c\u5230\u8fd9\u91cc\uff09\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5904\u7406 ",(0,i.jsx)(n.code,{children:"userType"}),"\u3001",(0,i.jsx)(n.code,{children:"userType"})," \u7684\u4e0d\u5305\u62ec Object \u7684\u6240\u6709\u7236\u7c7b\u53ca ",(0,i.jsx)(n.code,{children:"userType"})," \u7684\u6240\u6709\u63a5\u53e3\u7684\u65b9\u6cd5\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5bf9\u6bcf\u4e2a\u65b9\u6cd5\uff0c\u5982\u679c\u6709 ",(0,i.jsx)(n.code,{children:"@RequestMapping"}),"\uff0c\u5219\u521b\u5efa ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"}),"\uff0c\u5c06 ",(0,i.jsx)(n.code,{children:"@RequestMapping"})," \u4fe1\u606f\u5c01\u88c5\u5230\u8be5\u5bf9\u8c61\u4e2d\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u6ce8\u518c\uff0c\u5c06 ",(0,i.jsx)(n.code,{children:"handler"}),"\u3001",(0,i.jsx)(n.code,{children:"mapping"})," \u4e0e ",(0,i.jsx)(n.code,{children:"method"})," \u4fdd\u5b58\u5230 Map \u4e2d\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"31-\u67e5\u627e\u65b9\u6cd5",children:"3.1 \u67e5\u627e\u65b9\u6cd5"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728 ",(0,i.jsx)(n.code,{children:"detectHandlerMethods"})," \u65b9\u6cd5\u7684\u5904\u7406\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u67e5\u627e ",(0,i.jsx)(n.code,{children:"userType"}),"\u3001",(0,i.jsx)(n.code,{children:"userType"})," \u7684\u6240\u6709\u7236\u7c7b\uff08\u4e0d\u5305\u62ec Object\uff09\u53ca ",(0,i.jsx)(n.code,{children:"userType"})," \u7684\u6240\u6709\u63a5\u53e3\u7684\u65b9\u6cd5\uff0c\u8fc7\u7a0b\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"MethodIntrospector#selectMethods(Class, MethodIntrospector.MetadataLookup)"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"public static <T> Map<Method, T> selectMethods(Class<?> targetType, final \n            MetadataLookup<T> metadataLookup) {\n    final Map<Method, T> methodMap = new LinkedHashMap<>();\n    Set<Class<?>> handlerTypes = new LinkedHashSet<>();\n    Class<?> specificHandlerType = null;\n    // \u975ejdk\u52a8\u6001\u4ee3\u7406\u7c7b\n    if (!Proxy.isProxyClass(targetType)) {\n        // \u5982\u679c\u662fcglib\u4ee3\u7406\u7c7b\uff0c\u83b7\u53d6\u5176\u5177\u4f53\u7684\u7236\u7c7b class\n        specificHandlerType = ClassUtils.getUserClass(targetType);\n        handlerTypes.add(specificHandlerType);\n    }\n    // \u83b7\u53d6\u7c7b\u7684\u6240\u6709\u63a5\u53e3\uff0c\u5305\u62ec\u63a5\u53e3\u7684\u7236\u63a5\u53e3.\n    handlerTypes.addAll(ClassUtils.getAllInterfacesForClassAsSet(targetType));\n    for (Class<?> currentHandlerType : handlerTypes) {\n        final Class<?> targetClass = (specificHandlerType != null \n                      ? specificHandlerType : currentHandlerType);\n        // \u5904\u7406currentHandlerType\u3001currentHandlerType\u7684\u4e0d\u5305\u62ecObject\u7684\u6240\u6709\u7236\u7c7b\u3001\n        // currentHandlerType\u7684\u6240\u6709\u63a5\u53e3\u7684\u65b9\u6cd5\n        // \u5904\u7406aop\u65f6\uff0c\u8c03\u7528\u7684\u4e5f\u662f\u8fd9\u4e2a\u65b9\u6cd5\n        ReflectionUtils.doWithMethods(currentHandlerType, method -> {\n            Method specificMethod = ClassUtils.getMostSpecificMethod(method, targetClass);\n            T result = metadataLookup.inspect(specificMethod);\n            if (result != null) {\n                Method bridgedMethod = BridgeMethodResolver.findBridgedMethod(specificMethod);\n                if (bridgedMethod == specificMethod || \n                             metadataLookup.inspect(bridgedMethod) == null) {\n                    methodMap.put(specificMethod, result);\n                }\n            }\n        }, ReflectionUtils.USER_DECLARED_METHODS);\n    }\n    return methodMap;\n}\n\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"32-\u521b\u5efa-requestmappinginfo",children:["3.2 \u521b\u5efa ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u5bf9\u6bcf\u4e2a\u65b9\u6cd5\uff0c\u5982\u679c\u6709 ",(0,i.jsx)(n.code,{children:"@RequestMapping"}),"\uff0c\u5219\u521b\u5efa ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"}),"\uff0c\u5c06 ",(0,i.jsx)(n.code,{children:"@RequestMapping"})," \u4fe1\u606f\u5c01\u88c5\u5230\u8be5\u5bf9\u8c61\u4e2d\uff1a"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"RequestMappingHandlerMapping#getMappingForMethod"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'protected RequestMappingInfo getMappingForMethod(Method method, Class<?> handlerType) {\n    // \u5904\u7406\u65b9\u6cd5\u4e0a\u7684 @RequestMapping\n    RequestMappingInfo info = createRequestMappingInfo(method);\n    if (info != null) {\n        // \u5904\u7406\u7c7b\u4e0a\u7684 @RequestMapping\n        RequestMappingInfo typeInfo = createRequestMappingInfo(handlerType);\n        if (typeInfo != null) {\n            // \u5408\u5e76\u65b9\u6cd5\u4e0e\u7c7b\u4e0a\u7684 @RequestMapping \u7ed3\u679c\n            // \u5982\u7c7b\u7684 @RequestMapping("/test")\uff0c\u65b9\u6cd5\u4e0a\u7684 @RequestMapping("/hello")\n            // \u5408\u5e76\u540e\u7684\u7ed3\u679c\u4e3a /test/hello\n            info = typeInfo.combine(info);\n        }\n        String prefix = getPathPrefix(handlerType);\n        if (prefix != null) {\n            info = RequestMappingInfo.paths(prefix).options(this.config).build().combine(info);\n        }\n    }\n    return info;\n}\n\n@Nullable\nprivate RequestMappingInfo createRequestMappingInfo(AnnotatedElement element) {\n    // \u83b7\u53d6 @RequestMapping \u6ce8\u89e3\n    RequestMapping requestMapping = AnnotatedElementUtils\n            .findMergedAnnotation(element, RequestMapping.class);\n    // \u5904\u7406\u8bf7\u6c42\u6761\u4ef6\uff0c\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u65b9\u6cd5\u4e3a\u7a7a\n    RequestCondition<?> condition = (element instanceof Class ?\n            getCustomTypeCondition((Class<?>) element) : getCustomMethodCondition((Method) element));\n    return (requestMapping != null ? createRequestMappingInfo(requestMapping, condition) : null);\n}\n\n// \u521b\u5efa RequestMappingInfo\uff0c\u8fd9\u4e2a RequestMapping \u5c31\u662f @RequestMapping \u6ce8\u89e3\nprotected RequestMappingInfo createRequestMappingInfo(\n        RequestMapping requestMapping, @Nullable RequestCondition<?> customCondition) {\n    // \u5176\u5b9e\u5c31\u662f\u5c06 @RequestMapping \u6ce8\u89e3\u5c01\u88c5\u4e3aRequestMappingInfo\u5bf9\u8c61\n    RequestMappingInfo.Builder builder = RequestMappingInfo\n            .paths(resolveEmbeddedValuesInPatterns(requestMapping.path()))\n            // \u4e0b\u9762\u7684\u5c5e\u6027\u7686\u6765\u81ea @RequestMapping \u6ce8\u89e3\n            .methods(requestMapping.method())\n            .params(requestMapping.params())\n            .headers(requestMapping.headers())\n            .consumes(requestMapping.consumes())\n            .produces(requestMapping.produces())\n            .mappingName(requestMapping.name());\n    if (customCondition != null) {\n        builder.customCondition(customCondition);\n    }\n    return builder.options(this.config).build();\n}\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u5230\u4e86\u8fd9\u91cc\uff0c\u6211\u4eec\u5c31\u5b8c\u6210\u4e86\u7531 ",(0,i.jsx)(n.code,{children:"@RequestMapping"})," \u5230 ",(0,i.jsx)(n.code,{children:"RequestMappingInfo\u5bf9\u8c61"}),"\u7684\u8f6c\u5316\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u518d\u6765\u770b\u770b ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"})," \u957f\u4ec0\u4e48\u6837\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"public final class RequestMappingInfo implements RequestCondition<RequestMappingInfo> {\n    // \u63d0\u4f9b\u4e86\u5f88\u591a\u5c5e\u6027\uff0c\u5bf9\u5e94\u7740 @RequestMapping\u7684\u5c5e\u6027\n    @Nullable\n    private final String name;\n    private final PatternsRequestCondition patternsCondition;\n    private final RequestMethodsRequestCondition methodsCondition;\n    private final ParamsRequestCondition paramsCondition;\n    private final HeadersRequestCondition headersCondition;\n    private final ConsumesRequestCondition consumesCondition;\n    private final ProducesRequestCondition producesCondition;\n    private final RequestConditionHolder customConditionHolder;\n\n    // \u6784\u9020\u65b9\u6cd5\uff0c\u5c31\u662f\u5728\n    public RequestMappingInfo(@Nullable String name, @Nullable PatternsRequestCondition patterns,\n            @Nullable RequestMethodsRequestCondition methods, @Nullable ParamsRequestCondition params,\n            @Nullable HeadersRequestCondition headers, @Nullable ConsumesRequestCondition consumes,\n            @Nullable ProducesRequestCondition produces, @Nullable RequestCondition<?> custom) {\n\n        this.name = (StringUtils.hasText(name) ? name : null);\n        this.patternsCondition = (patterns != null ? patterns : new PatternsRequestCondition());\n        this.methodsCondition = (methods != null ? methods : new RequestMethodsRequestCondition());\n        this.paramsCondition = (params != null ? params : new ParamsRequestCondition());\n        this.headersCondition = (headers != null ? headers : new HeadersRequestCondition());\n        this.consumesCondition = (consumes != null ? consumes : new ConsumesRequestCondition());\n        this.producesCondition = (produces != null ? produces : new ProducesRequestCondition());\n        this.customConditionHolder = new RequestConditionHolder(custom);\n    }\n\n    // builder \u6784\u5efa\u6a21\u5f0f\uff0c\u524d\u9762\u6b63\u662f\u4f7f\u7528builder\u6765\u521b\u5efaRequestMappingInfo\u5bf9\u8c61\u7684\n    private static class DefaultBuilder implements Builder {\n        // \u7701\u7565\u5176\u4ed6\n        ...\n\n        //  \u4f7f\u7528builder()\u65b9\u6cd5\u6765\u521b\u5efa\u5bf9\u8c61\n        @Override\n        public RequestMappingInfo build() {\n            ContentNegotiationManager manager = this.options.getContentNegotiationManager();\n            PatternsRequestCondition patternsCondition = new PatternsRequestCondition(\n                    this.paths, this.options.getUrlPathHelper(), this.options.getPathMatcher(),\n                    this.options.useSuffixPatternMatch(), this.options.useTrailingSlashMatch(),\n                    this.options.getFileExtensions());\n            // \u8c03\u7528 RequestMappingInfo \u6784\u9020\u65b9\u6cd5\n            return new RequestMappingInfo(this.mappingName, patternsCondition,\n                    new RequestMethodsRequestCondition(this.methods),\n                    new ParamsRequestCondition(this.params),\n                    new HeadersRequestCondition(this.headers),\n                    new ConsumesRequestCondition(this.consumes, this.headers),\n                    new ProducesRequestCondition(this.produces, this.headers, manager),\n                    this.customCondition);\n        }\n    }\n    // \u7701\u7565\u5176\u4ed6\n    ...\n}\n\n"})}),"\n",(0,i.jsx)(n.h4,{id:"33-\u6ce8\u518c",children:"3.3 \u6ce8\u518c"}),"\n",(0,i.jsxs)(n.p,{children:["\u5c01\u88c5\u5b8c ",(0,i.jsx)(n.code,{children:"@RequestMapping"})," \u4fe1\u606f\u540e\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u5c06\u63a5\u53e3\u4fe1\u606f\u6ce8\u518c\u5230 springmvc \u4e2d\u4e86\uff1a"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"RequestMappingHandlerMapping#registerHandlerMethod"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'@Override\nprotected void registerHandlerMethod(Object handler, Method method, RequestMappingInfo mapping) {\n    // \u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5\uff0c\u6ce8\u518c\u76f8\u5173\u903b\u8f91\u5728\u8fd9\u91cc\n    super.registerHandlerMethod(handler, method, mapping);\n    updateConsumesCondition(mapping, method);\n}\n// \u5904\u7406\u65b9\u6cd5\u53c2\u6570\u7684 @RequestBody \u6ce8\u89e3\nprivate void updateConsumesCondition(RequestMappingInfo info, Method method) {\n    ConsumesRequestCondition condition = info.getConsumesCondition();\n    if (!condition.isEmpty()) {\n        for (Parameter parameter : method.getParameters()) {\n            // \u5904\u7406 \u65b9\u6cd5\u53c2\u6570\u7684 @RequestBody \u6ce8\u89e3\uff0c\u8bbe\u7f6e BodyRequired \u7684\u503c\n            MergedAnnotation<RequestBody> annot = MergedAnnotations.from(parameter)\n                    .get(RequestBody.class);\n            if (annot.isPresent()) {\n                condition.setBodyRequired(annot.getBoolean("required"));\n                break;\n            }\n        }\n    }\n}\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u6700\u7ec8\uff0c\u53d1\u73b0\u5177\u4f53\u7684\u6ce8\u518c\u903b\u8f91\u662f\u5728 ",(0,i.jsx)(n.code,{children:"AbstractHandlerMethodMapping#registerHandlerMethod"})," \u4e2d\u5b8c\u6210\u7684\uff0c\u770b\u6765\u8fd9\u4e2a\u5c31\u662f\u6700\u7ec8\u65b9\u6cd5\u4e86\u3002\u5728\u5206\u6790\u8fd9\u4e2a\u65b9\u6cd5\u524d\uff0c\u6211\u4eec\u5148\u6765\u770b\u770b\u8fd9\u4e00\u6b65\u5f97\u5230\u7684 ",(0,i.jsx)(n.code,{children:"Map<Method, T> methods"}),":"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/up-ec6b4b2d2156e0e041982425173feda38fc.png",alt:""})}),"\n",(0,i.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u5e94\u7684 ",(0,i.jsx)(n.code,{children:"T"})," \u5c31\u662f ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"})," \u4e86\u3002"]}),"\n",(0,i.jsxs)(n.h3,{id:"3-abstracthandlermethodmappingregisterhandlermethod-\u65b9\u6cd5",children:["3. ",(0,i.jsx)(n.code,{children:"AbstractHandlerMethodMapping#registerHandlerMethod"})," \u65b9\u6cd5"]}),"\n",(0,i.jsxs)(n.p,{children:["\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u770b\u770b ",(0,i.jsx)(n.code,{children:"AbstractHandlerMethodMapping#registerHandlerMethod"})," \u4ee3\u7801\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"public abstract class AbstractHandlerMethodMapping<T> extends AbstractHandlerMapping \n        implements InitializingBean {\n\n    protected void registerHandlerMethod(Object handler, Method method, T mapping) {\n        this.mappingRegistry.register(mapping, handler, method);\n    }\n\n    // \u7701\u7565\u4e86\u597d\u591a\u4ee3\u7801\n    ... \n\n    class MappingRegistry {\n        // \u4fe1\u606f\u6700\u5168\u7684map\uff0c\u5305\u542bmapping, handlerMethod, directUrls, name\u7b49\u4fe1\u606f\n        private final Map<T, MappingRegistration<T>> registry = new HashMap<>();\n        // \u6240\u6709\u7684 mapping map\uff0c/test/hello\u3001/test/{name}\n        private final Map<T, HandlerMethod> mappingLookup = new LinkedHashMap<>();\n        // \u660e\u786e\u7684url map\uff0c\u5982 /test/hello\n        private final MultiValueMap<String, T> urlLookup = new LinkedMultiValueMap<>();\n\n        // \u7701\u7565\u4e86\u597d\u591a\u4ee3\u7801\n        ...\n\n        public void register(T mapping, Object handler, Method method) {\n            ...\n            // \u83b7\u53d6\u8bfb\u5199\u9501\u7684\u5199\u9501\n            this.readWriteLock.writeLock().lock();\n            try {\n                // 1\\. \u83b7\u53d6\u4e86 handlerMethod\uff0c\u5176\u5b9e\u5c31\u662f\u5c06handler \u4e0e method \u5305\u88c5\u4e86\u4e00\u5c42\n                HandlerMethod handlerMethod = createHandlerMethod(handler, method);\n                validateMethodMapping(handlerMethod, mapping);\n                // 2\\. \u653e\u5165 mappingLookup \u4e2d\uff0c\u7c7b\u578b\u4e3a LinkedHashMap\n                // \u8fd9\u662fspringmvc\u4e2d\u4e00\u4e2a\u91cd\u8981\u7684map\n                this.mappingLookup.put(mapping, handlerMethod);\n\n                // 3\\. \u83b7\u53d6url\uff0c\u653e\u5165urlLookup\uff0c\u7c7b\u578b\u4e3aMultiValueMap\uff0c\u8fd9\u4e2amap \u540c\u4e00key\u53ef\u4ee5\u6709\u591a\u4e2avalue\n                // \u8fd9\u662fspringmvc\u4e2d\u53e6\u4e00\u4e2a\u91cd\u8981\u7684map\n                List<String> directUrls = getDirectUrls(mapping);\n                for (String url : directUrls) {\n                    this.urlLookup.add(url, mapping);\n                }\n                String name = null;\n                if (getNamingStrategy() != null) {\n                    name = getNamingStrategy().getName(handlerMethod, mapping);\n                    addMappingName(name, handlerMethod);\n                }\n                CorsConfiguration corsConfig = initCorsConfiguration(handler, method, mapping);\n                if (corsConfig != null) {\n                    this.corsLookup.put(handlerMethod, corsConfig);\n                }\n\n                // 4\\. \u5c06mapping, handlerMethod, directUrls, name\u7b49\u5c01\u88c5\u653e\u5165registry\uff0c\n                // registry \u7c7b\u578b\u4e3aHashMap\uff0c\u8fd9\u662fspringmvc \u4e2d\u63a5\u53e3\u4fe1\u606f\u6700\u5168\u7684\u4e00\u4e2amap\n                this.registry.put(mapping, new MappingRegistration<>(mapping, \n                        handlerMethod, directUrls, name));\n            }\n            finally {\n                this.readWriteLock.writeLock().unlock();\n            }\n        }\n    }\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\uff0c\u6ce8\u518c\u7684\u903b\u8f91\u6700\u7ec8\u662f\u5728 ",(0,i.jsx)(n.code,{children:"AbstractHandlerMethodMapping.MappingRegistry#register"})," \u4e2d\u5b8c\u6210\u7684\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u4e00\u6b65\u6b65\u5206\u6790\u6ce8\u518c\u903b\u8f91\u3002"]}),"\n",(0,i.jsxs)(n.h4,{id:"31-\u83b7\u53d6-handlermethod",children:["3.1 \u83b7\u53d6 ",(0,i.jsx)(n.code,{children:"HandlerMethod"})]}),"\n",(0,i.jsx)(n.p,{children:"\u76f8\u5173\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"protected HandlerMethod createHandlerMethod(Object handler, Method method) {\n    if (handler instanceof String) {\n        return new HandlerMethod((String) handler,\n                obtainApplicationContext().getAutowireCapableBeanFactory(), method);\n    }\n    return new HandlerMethod(handler, method);\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u6bb5\u65b9\u6cd5\u5c31\u662f\u7b80\u5355\u5730\u8c03\u7528\u4e86 ",(0,i.jsx)(n.code,{children:"HandlerMethod"})," \u7684\u6784\u9020\u65b9\u6cd5\uff0c\u7ee7\u7eed\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'public class HandlerMethod {\n\n    // \u63d0\u4f9b\u4e86\u975e\u5e38\u591a\u7684\u5c5e\u6027\n    protected final Log logger = LogFactory.getLog(getClass());\n    private final Object bean;\n    @Nullable\n    private final BeanFactory beanFactory;\n    private final Class<?> beanType;\n    private final Method method;\n    private final Method bridgedMethod;\n    private final MethodParameter[] parameters;\n    @Nullable\n    private HttpStatus responseStatus;\n    @Nullable\n    private String responseStatusReason;\n    @Nullable\n    private HandlerMethod resolvedFromHandlerMethod;\n    @Nullable\n    private volatile List<Annotation[][]> interfaceParameterAnnotations;\n    private final String description;\n\n    // \u6784\u9020\u65b9\u6cd5\n    public HandlerMethod(Object bean, Method method) {\n        Assert.notNull(bean, "Bean is required");\n        Assert.notNull(method, "Method is required");\n        this.bean = bean;\n        this.beanFactory = null;\n        this.beanType = ClassUtils.getUserClass(bean);\n        this.method = method;\n        this.bridgedMethod = BridgeMethodResolver.findBridgedMethod(method);\n        this.parameters = initMethodParameters();\n        evaluateResponseStatus();\n        this.description = initDescription(this.beanType, this.method);\n    }\n\n    // \u7701\u7565\u5176\u4ed6\n    ...\n}\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\uff0c",(0,i.jsx)(n.code,{children:"HandlerMethod"})," \u4e2d\u6709\u975e\u5e38\u591a\u7684\u5c5e\u6027\uff0c\u6784\u9020\u65b9\u6cd5\u6240\u505a\u7684\u4e8b\u4e5f\u4ec5\u4ec5\u662f\u8d4b\u503c\u800c\u5df2\u3002\u7531\u6b64\u53ef\u770b\u51fa\uff0c",(0,i.jsx)(n.code,{children:"HandlerMethod"})," \u5c31\u662f\u5bf9 ",(0,i.jsx)(n.code,{children:"handler"})," \u4e0e ",(0,i.jsx)(n.code,{children:"method"})," \u7684\u4e00\u4e2a\u5305\u88c5\u3002"]}),"\n",(0,i.jsx)(n.h4,{id:"32-\u9a8c\u8bc1-mapping-\u662f\u5426\u91cd\u590d",children:"3.2 \u9a8c\u8bc1 mapping \u662f\u5426\u91cd\u590d"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728 springmvc \u4f7f\u7528\u4e2d\uff0c\u5982\u679c\u4e0d\u5c0f\u5fc3\u5b9a\u4e49\u4e86\u4e24\u4e2a\u76f8\u540c\u7684 ",(0,i.jsx)(n.code,{children:"requestMapping"}),"\uff0c\u4f1a\u51fa\u73b0\u5982\u4e0b\u5f02\u5e38\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Caused by: java.lang.IllegalStateException: Ambiguous mapping. Cannot map \n'xxxController' method xxxMethod to /xxx/xxx: There is already 'xxxControllter' \nbean method xxxMethod mapped.\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u4e2a\u5f02\u5e38\u5c31\u662f\u5728\u9a8c\u8bc1 mapping \u65f6\uff0c\u53d1\u73b0\u4e86\u91cd\u590d\u4e86 mapping \u800c\u89e6\u53d1\u7684\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'// \u6240\u6709\u7684 mapping map\uff0c/test/hello\u3001/test/{name}\nprivate final Map<T, HandlerMethod> mappingLookup = new LinkedHashMap<>();\n\nprivate void validateMethodMapping(HandlerMethod handlerMethod, T mapping) {\n    // \u627e\u5230\u5df2\u5b58\u5728\u7684 method\n    HandlerMethod existingHandlerMethod = this.mappingLookup.get(mapping);\n    // \u5df2\u5b58\u5728\u7684handlerMethod\u4e0d\u4e3a\u7a7a\uff0c\u4e14\u4e0d\u7b49\u4e8e\u5f53\u524d handlerMethod\n    if (existingHandlerMethod != null && !existingHandlerMethod.equals(handlerMethod)) {\n        throw new IllegalStateException(\n                "Ambiguous mapping. Cannot map \'" + handlerMethod.getBean() + "\' method \\n" +\n                handlerMethod + "\\nto " + mapping + ": There is already \'" +\n                existingHandlerMethod.getBean() + "\' bean method\\n" +\n                existingHandlerMethod + " mapped.");\n    }\n}\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u9996\u5148\u662f\u6839\u636e ",(0,i.jsx)(n.code,{children:"mapping"})," \u4ece ",(0,i.jsx)(n.code,{children:"mappingLookup"})," \u4e2d\u67e5\u627e ",(0,i.jsx)(n.code,{children:"HandlerMethod"}),"\uff0c\u5982\u679c\u627e\u5230\u4e86\u4e14\u627e\u5230\u7684 ",(0,i.jsx)(n.code,{children:"handlerMethod"})," \u4e0d\u662f\u5f53\u524d ",(0,i.jsx)(n.code,{children:"handlerMethod"}),"\uff0c\u5219\u8868\u793a\u91cd\u590d\uff0c\u5c31\u62a5\u5f02\u5e38\u4e86\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6700\u540e\u5206\u522b\u6765\u770b\u770b\u5224\u65ad ",(0,i.jsx)(n.code,{children:"HandlerMethod"})," \u4e0e ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"})," \u662f\u5982\u4f55\u5224\u65ad\u76f8\u7b49\u7684\uff1a"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"HandlerMethod#equals"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Override\npublic boolean equals(@Nullable Object other) {\n    if (this == other) {\n        return true;\n    }\n    if (!(other instanceof HandlerMethod)) {\n        return false;\n    }\n    HandlerMethod otherMethod = (HandlerMethod) other;\n    return (this.bean.equals(otherMethod.bean) && this.method.equals(otherMethod.method));\n}\n\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"RequestMappingInfo#equals"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Override\npublic boolean equals(@Nullable Object other) {\n    if (this == other) {\n        return true;\n    }\n    if (!(other instanceof RequestMappingInfo)) {\n        return false;\n    }\n    RequestMappingInfo otherInfo = (RequestMappingInfo) other;\n    return (this.patternsCondition.equals(otherInfo.patternsCondition) &&\n            this.methodsCondition.equals(otherInfo.methodsCondition) &&\n            this.paramsCondition.equals(otherInfo.paramsCondition) &&\n            this.headersCondition.equals(otherInfo.headersCondition) &&\n            this.consumesCondition.equals(otherInfo.consumesCondition) &&\n            this.producesCondition.equals(otherInfo.producesCondition) &&\n            this.customConditionHolder.equals(otherInfo.customConditionHolder));\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"RequestMappingInfo"})," \u9700\u8981\u5404\u5c5e\u6027\u76f8\u540c\u624d\u5224\u65ad\u76f8\u7b49\uff0c\u56e0\u6b64\u50cf\u4e0b\u9762\u8fd9\u6837\u7684 ",(0,i.jsx)(n.code,{children:"@RequestMapping"}),"\uff0c\u5f97\u5230\u7684 ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"})," \u5e76\u4e0d\u76f8\u7b49\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'// \u4ee5\u4e0b\u4e09\u4e2a @RequestMapping\uff0c\u867d\u7136\u8bf7\u6c42\u8def\u5f84\u90fd\u662f\u201c/hello\u201d\uff0c\u4f46\u652f\u6301\u7684\u8bf7\u6c42\u65b9\u6cd5\u5404\u4e0d\u76f8\u540c\n// \u56e0\u6b64\u5f97\u5230\u7684 RequestMappingInfo \u5e76\u4e0d\u76f8\u7b49\n\n@RequestMapping(path = "/hello")\npublic String hello1() {\n    ...\n}\n\n@RequestMapping(path = "/hello", method = RequestMethod.GET)\npublic String hello2() {\n    ...\n}\n\n@RequestMapping(path = "/hello", method = RequestMethod.POST)\npublic String hello3() {\n    ...\n}\n\n'})}),"\n",(0,i.jsxs)(n.h4,{id:"33-\u83b7\u53d6-directurls",children:["3.3 \u83b7\u53d6 ",(0,i.jsx)(n.code,{children:"directUrls"})]}),"\n",(0,i.jsx)(n.p,{children:"springmvc \u4e2d\uff0c\u6709\u4e24\u79cd url \u7c7b\u578b:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u660e\u786e\u7684 url\uff0c\u5982"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'@RequestMapping("/hello")\npublic String hello() {\n   ...\n}\n\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u4e0d\u660e\u786e\u7684 url\uff0c\u5982"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'@RequestMapping("/{name}")\npublic String hello(@PathVariable("name") String name) {\n   ...\n}\n\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["springmvc \u63d0\u4f9b\u4e86\u4e13\u95e8\u7684 ",(0,i.jsx)(n.code,{children:"urlLookup"})," \u6765\u4fdd\u5b58\u660e\u786e\u7684 url\uff0c\u7ed3\u6784\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"MultiValueMap<String, LinkedList<RequestMappingInfo>>\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u518d\u6765\u770b\u770b springmvc \u662f\u5982\u4f55\u83b7\u53d6\u660e\u786e\u7684 url \u7684:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"List<String> directUrls = getDirectUrls(mapping);\n\n/**\n * AbstractHandlerMethodMapping.MappingRegistry#getDirectUrls\n * \u83b7\u53d6\u660e\u786e\u7684url\n */\nprivate List<String> getDirectUrls(T mapping) {\n    List<String> urls = new ArrayList<>(1);\n    // \u4eceRequestMappingInfo\u83b7\u53d6\u6240\u6709\u7684 MappingPathPattern\n    for (String path : getMappingPathPatterns(mapping)) {\n        // \u5224\u65ad\u5f97\u5230\u7684 MappingPathPattern \u662f\u5426\u4e3a\u660e\u786e\u7684url\n        if (!getPathMatcher().isPattern(path)) {\n            urls.add(path);\n        }\n    }\n    return urls;\n}\n\n/**\n * RequestMappingInfoHandlerMapping#getMappingPathPatterns\n * \u83b7\u53d6 patterns, \u4ece RequestMappingInfo \u83b7\u53d6\n * \u5b9e\u9645\u4e0a\u5c31\u662f @RequestMapping \u4e2d\u7684 path() \u503c\n */\n@Override\nprotected Set<String> getMappingPathPatterns(RequestMappingInfo info) {\n    return info.getPatternsCondition().getPatterns();\n}\n\n/**\n * AntPathMatcher#isPattern\n * \u5224\u65ad\u662f\u5426\u4e3a\u660e\u786e\u7684 url\n * \u53ea\u8981\u5305\u542b\u4e86 *\u3001\uff1f\u4e4b\u4e00\uff0c\u6216\u540c\u65f6\u5305\u542b{\u3001}\uff0c\u5c31\u4e0d\u662f\u660e\u786e\u7684url\n */\n@Override\npublic boolean isPattern(@Nullable String path) {\n    if (path == null) {\n        return false;\n    }\n    boolean uriVar = false;\n    for (int i = 0; i < path.length(); i++) {\n        char c = path.charAt(i);\n        if (c == '*' || c == '?') {\n            return true;\n        }\n        if (c == '{') {\n            uriVar = true;\n            continue;\n        }\n        if (c == '}' && uriVar) {\n            return true;\n        }\n    }\n    return false;\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u6d41\u7a0b\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u83b7\u53d6\u5f53\u524d ",(0,i.jsx)(n.code,{children:"mapping"})," \u7684\u6240\u6709 ",(0,i.jsx)(n.code,{children:"path"}),"\uff0c\u4e5f\u5c31\u662f ",(0,i.jsx)(n.code,{children:"@RequestMapping"})," \u7684 ",(0,i.jsx)(n.code,{children:"path()"})," \u503c\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u904d\u5386\u5f97\u5230\u7684 ",(0,i.jsx)(n.code,{children:"path"}),"\uff0c\u9010\u4e00\u5224\u65ad\u662f\u5426\u4e3a\u660e\u786e\u7684 url (\u53ea\u8981\u5305\u542b\u4e86 ",(0,i.jsx)(n.code,{children:"*"}),"\u3001",(0,i.jsx)(n.code,{children:"?"})," \u4e4b\u4e00\uff0c\u6216\u540c\u65f6\u5305\u542b ",(0,i.jsx)(n.code,{children:"{"}),"\u3001",(0,i.jsx)(n.code,{children:"}"}),"\uff0c\u5c31\u4e0d\u662f\u660e\u786e\u7684 url)."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"34-\u6ce8\u518c\u63a5\u53e3\u4fe1\u606f",children:"3.4 \u6ce8\u518c\u63a5\u53e3\u4fe1\u606f"}),"\n",(0,i.jsx)(n.p,{children:"\u6ce8\u518c\u63a5\u53e3\u4fe1\u606f\u5c31\u6bd4\u8f83\u7b80\u5355\u4e86\uff0c\u5176\u5b9e\u5c31\u662f\u5f80 map \u4e2d\u6dfb\u52a0\u6570\u636e\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u4e09\u4e2a map\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"urlLookup"}),"\uff1a\u660e\u786e\u7684 ",(0,i.jsx)(n.code,{children:"url map"}),"\uff0c\u7c7b\u578b\u4e3a ",(0,i.jsx)(n.code,{children:"MultiValueMap<String, LinkedList<RequestMappingInfo>>"}),"\uff0c",(0,i.jsx)(n.code,{children:"key"})," \u4e3a\u660e\u786e\u7684 url\uff0c\u5982 ",(0,i.jsx)(n.code,{children:"/test/hello"}),"\uff0c",(0,i.jsx)(n.code,{children:"value"})," \u4e3a ",(0,i.jsx)(n.code,{children:"LinkedList<RequestMappingInfo>"}),"\uff1b"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"mappingLookup"}),"\uff1a\u6240\u6709\u7684 ",(0,i.jsx)(n.code,{children:"mapping map"}),"\uff0c\u6240\u6709\u7684 ",(0,i.jsx)(n.code,{children:"@RequestMapping"})," \u5bf9\u5e94\u7684 ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"})," \u90fd\u80fd\u5728\u8fd9\u91cc\u627e\u5230\uff0c\u5305\u62ec ",(0,i.jsx)(n.code,{children:"/test/hello"}),"\u3001",(0,i.jsx)(n.code,{children:"/test/{name}"})," \u5bf9\u5e94\u7684 ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"}),"\uff0c\u7c7b\u578b\u4e3a ",(0,i.jsx)(n.code,{children:"Map<RequestMappingInfo, HandlerMethod>"}),"\uff1b"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"registry"}),"\uff1a\u4fe1\u606f\u6700\u5168\u7684 map\uff0c\u7c7b\u578b\u4e3a ",(0,i.jsx)(n.code,{children:"Map<RequestMappingInfo, MappingRegistration<RequestMappingInfo>>"}),"\uff0c\u5305\u542b\u6240\u6709\u7684 ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"}),"\uff0ckey \u4e3a ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"}),"\uff0cvalue \u4e3a ",(0,i.jsx)(n.code,{children:"MappingRegistration<RequestMappingInfo>"}),"\uff0c\u800c ",(0,i.jsx)(n.code,{children:"MappingRegistration"})," \u4e3a ",(0,i.jsx)(n.code,{children:"mapping"}),", ",(0,i.jsx)(n.code,{children:"handlerMethod"}),", ",(0,i.jsx)(n.code,{children:"directUrls"}),", ",(0,i.jsx)(n.code,{children:"name"})," \u7684\u5305\u88c5\u7c7b\uff0c\u4e5f\u5c31\u662f\u8bf4 ",(0,i.jsx)(n.code,{children:"MappingRegistration"})," \u5305\u542b\u4e86 ",(0,i.jsx)(n.code,{children:"mapping"}),", ",(0,i.jsx)(n.code,{children:"handlerMethod"}),", ",(0,i.jsx)(n.code,{children:"directUrls"}),", ",(0,i.jsx)(n.code,{children:"name"})," \u7b49\u4fe1\u606f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u7406\u89e3\u8fd9\u4e9b map \u540e\uff0c\u6ce8\u518c\u5c31\u76f8\u5f53\u7b80\u5355\u4e86\uff0c\u5c31\u662f\u7b80\u5355\u5730\u8c03\u7528\u4e0b ",(0,i.jsx)(n.code,{children:"Map#put"})," \u65b9\u6cd5\uff0c\u5c31\u4e0d\u591a\u8bf4\u4e86\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"4-\u603b\u7ed3",children:"4. \u603b\u7ed3"}),"\n",(0,i.jsxs)(n.p,{children:["\u672c\u6587\u5206\u6790\u4e86 spring \u5904\u7406\u5904\u7406 ",(0,i.jsx)(n.code,{children:"@RequestMapping"})," \u6ce8\u89e3\u7684\u6d41\u7a0b\uff0c\u8fd9\u90e8\u5206\u6d41\u7a0b\u5728 ",(0,i.jsx)(n.code,{children:"RequestMappingHandlerMapping#afterPropertiesSet"})," \u65b9\u6cd5\u4e2d\uff0c\u6d41\u7a0b\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u83b7\u53d6\u5bb9\u5668\u4e2d\u6240\u6709 bean \u7684 ",(0,i.jsx)(n.code,{children:"beanName"}),"\uff0c\u9010\u4e2a\u5904\u7406\uff0c\u5904\u7406\u65b9\u6cd5\u89c1\u7b2c 2 \u6b65\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u627e\u5230\u4e0e ",(0,i.jsx)(n.code,{children:"beanName"})," \u5bf9\u5e94\u7684 ",(0,i.jsx)(n.code,{children:"beanType"}),"\uff0c\u5224\u65ad\u5176\u4e0a\u662f\u5426\u6709 ",(0,i.jsx)(n.code,{children:"@Controller/@RequestMapping"})," \u6ce8\u89e3\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5bf9\u5305\u542b ",(0,i.jsx)(n.code,{children:"@Controller/@RequestMapping"})," \u7684 ",(0,i.jsx)(n.code,{children:"beanType"}),"\uff0c\u627e\u5230\u6709 ",(0,i.jsx)(n.code,{children:"@RequestMapping"})," \u6ce8\u89e3\u7684\u65b9\u6cd5\uff0c\u5c06\u5176 ",(0,i.jsx)(n.code,{children:"@RequestMapping"})," \u6ce8\u89e3\u5c01\u88c5\u4e3a ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"}),"\uff0c\u8fd9\u4e00\u6b65\u5f97\u5230\u7684\u7ed3\u679c\u4e3a\u4e00\u4e2a map\uff1a",(0,i.jsx)(n.code,{children:"Map<Method, RequestMappingInfo>"}),"\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5c06 ",(0,i.jsx)(n.code,{children:"beanName"}),"\u3001",(0,i.jsx)(n.code,{children:"beanType"})," \u4e0e ",(0,i.jsx)(n.code,{children:"Map<Method, RequestMappingInfo>"})," \u6ce8\u518c\u5230 springmvc \u4e2d\uff0c\u8fd9\u91cc\u6709\u4e09\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684 map\uff1a"]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"MultiValueMap<String, LinkedList<RequestMappingInfo>>"}),"\u3001"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Map<RequestMappingInfo, HandlerMethod>"}),"(",(0,i.jsx)(n.code,{children:"HandlerMethod"})," \u4e3a ",(0,i.jsx)(n.code,{children:"Method"})," \u7684\u5305\u88c5\u7c7b)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Map<RequestMappingInfo, MappingRegistration<RequestMappingInfo>>"}),"(",(0,i.jsx)(n.code,{children:"MappingRegistration"})," \u4e3a ",(0,i.jsx)(n.code,{children:"RequestMappingInfo"}),", ",(0,i.jsx)(n.code,{children:"HandlerMethod"}),", ",(0,i.jsx)(n.code,{children:"directUrls"}),", ",(0,i.jsx)(n.code,{children:"beanName"})," \u7684\u5305\u88c5\u7c7b)\uff1b"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/up-fe807564e60040b262b28977a46a74f60e9.png",alt:""})}),"\n",(0,i.jsxs)(n.p,{children:["\u603b\u7684\u6765\u8bf4\uff0c",(0,i.jsx)(n.code,{children:"RequestMapping"})," \u7684\u5904\u7406\u6d41\u7a0b\u9690\u85cf\u6bd4\u8f83\u6df1\uff0c\u672c\u4eba\u4e5f\u662f\u8c03\u8bd5\u4e86\u597d\u591a\u6b21\u624d\u627e\u5230\u3002"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["\u672c\u6587\u539f\u6587\u94fe\u63a5\uff1a",(0,i.jsx)(n.a,{href:"https://my.oschina.net/funcy/blog/4715079",children:"https://my.oschina.net/funcy/blog/4715079"})," \uff0c\u9650\u4e8e\u4f5c\u8005\u4e2a\u4eba\u6c34\u5e73\uff0c\u6587\u4e2d\u96be\u514d\u6709\u9519\u8bef\u4e4b\u5904\uff0c\u6b22\u8fce\u6307\u6b63\uff01\u539f\u521b\u4e0d\u6613\uff0c\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002"]})})]})}function c(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},88672:(e,n,t)=>{t.d(n,{Z:()=>d,a:()=>a});var i=t(50959);const r={},s=i.createContext(r);function a(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);