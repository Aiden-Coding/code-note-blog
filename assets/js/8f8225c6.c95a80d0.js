"use strict";(self.webpackChunkcode_note_blog=self.webpackChunkcode_note_blog||[]).push([[1664],{56112:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>d,frontMatter:()=>s,metadata:()=>l,toc:()=>a});var i=t(11527),r=t(88672);const s={},c=void 0,l={id:"Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/DispatcherServlet\u521d\u59cb\u5316\u6d41\u7a0b",title:"DispatcherServlet\u521d\u59cb\u5316\u6d41\u7a0b",description:"\u5728\u4e0a\u4e00\u7bc7\u6587\u7ae0\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u7684 demo \u6210\u529f\u542f\u52a8\u4e86 springmvc \u5e94\u7528\uff0c\u5728\u63d0\u4f9b\u7684 demo \u4e2d\uff0c\u6211\u4eec\u77e5\u9053 tomcat \u5728\u542f\u52a8\u65f6\u4f1a\u8c03\u7528 MyWebApplicationInitializer#onStartup \u65b9\u6cd5\uff0c\u7136\u540e\u542f\u52a8 spring \u5bb9\u5668\u3002\u90a3\u4e48 tomcat \u7a76\u7adf\u662f\u5982\u4f55\u542f\u52a8 spring \u7684\u5462\uff1f",source:"@site/docs/Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/DispatcherServlet\u521d\u59cb\u5316\u6d41\u7a0b.md",sourceDirName:"Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790",slug:"/Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/DispatcherServlet\u521d\u59cb\u5316\u6d41\u7a0b",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/DispatcherServlet\u521d\u59cb\u5316\u6d41\u7a0b",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/DispatcherServlet\u521d\u59cb\u5316\u6d41\u7a0b.md",tags:[],version:"current",frontMatter:{},sidebar:"spring",previous:{title:"\u8bf7\u6c42\u6267\u884c\u6d41\u7a0b\uff08\u4e00\uff09\u4e4b\u83b7\u53d6Handler",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/\u8bf7\u6c42\u6267\u884c\u6d41\u7a0b\uff08\u4e00\uff09\u4e4b\u83b7\u53d6Handler"},next:{title:"RequestMapping\u521d\u59cb\u5316\u6d41\u7a0b",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/SpringMVC\u6e90\u7801\u5206\u6790/RequestMapping\u521d\u59cb\u5316\u6d41\u7a0b"}},o={},a=[{value:"1. servlet \u521d\u59cb\u5316\uff1a<code>DispatcherServlet#init</code>",id:"1-servlet-\u521d\u59cb\u5316dispatcherservletinit",level:3},{value:"2. <code>SourceFilteringListener</code>\uff1a\u542f\u52a8\u4e8b\u4ef6\u76d1\u542c\u5668",id:"2-sourcefilteringlistener\u542f\u52a8\u4e8b\u4ef6\u76d1\u542c\u5668",level:3},{value:"3. <code>DispatcherServlet#initStrategies</code>\uff1a\u521d\u59cb\u5316 springmvc \u7ec4\u4ef6",id:"3-dispatcherservletinitstrategies\u521d\u59cb\u5316-springmvc-\u7ec4\u4ef6",level:3},{value:"4. \u603b\u7ed3",id:"4-\u603b\u7ed3",level:3}];function p(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h3:"h3",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["\u5728",(0,i.jsx)(n.a,{href:"https://my.oschina.net/funcy/blog/4696657",title:"\u4e0a\u4e00\u7bc7\u6587\u7ae0",children:"\u4e0a\u4e00\u7bc7\u6587\u7ae0"}),"\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u7684 demo \u6210\u529f\u542f\u52a8\u4e86 springmvc \u5e94\u7528\uff0c\u5728\u63d0\u4f9b\u7684 demo \u4e2d\uff0c\u6211\u4eec\u77e5\u9053 tomcat \u5728\u542f\u52a8\u65f6\u4f1a\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"MyWebApplicationInitializer#onStartup"})," \u65b9\u6cd5\uff0c\u7136\u540e\u542f\u52a8 spring \u5bb9\u5668\u3002\u90a3\u4e48 tomcat \u7a76\u7adf\u662f\u5982\u4f55\u542f\u52a8 spring \u7684\u5462\uff1f"]}),"\n",(0,i.jsxs)(n.h3,{id:"1-servlet-\u521d\u59cb\u5316dispatcherservletinit",children:["1. servlet \u521d\u59cb\u5316\uff1a",(0,i.jsx)(n.code,{children:"DispatcherServlet#init"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4eec\u518d\u56de\u5fc6\u4e0b ",(0,i.jsx)(n.code,{children:"MyWebApplicationInitializer#onStartup"})," \u65b9\u6cd5\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'@Override\npublic void onStartup(ServletContext servletContext) {\n   System.out.println("webApplicationInitializer ...");\n   // \u521b\u5efa spring \u7684 applicationContext\n   AnnotationConfigWebApplicationContext context = new AnnotationConfigWebApplicationContext();\n   context.register(MvcConfig.class);\n\n   // \u5b9e\u4f8b\u5316 DispatcherServlet\n   DispatcherServlet servlet = new DispatcherServlet(context);\n\n   // \u5c06DispatcherServlet\u6ce8\u518c\u5230servlet\u5bb9\u5668\n   ServletRegistration.Dynamic registration = servletContext.addServlet("app", servlet);\n   registration.setLoadOnStartup(1);\n   registration.addMapping("/*");\n}\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u6bb5\u4ee3\u7801\u5148\u51c6\u5907\u4e86\u4e00\u4e2a ",(0,i.jsx)(n.code,{children:"AnnotationConfigWebApplicationContext"}),"\uff0c\u5c06\u5176\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165 ",(0,i.jsx)(n.code,{children:"DispatcherServlet"})," \u4e2d\uff0c\u7136\u540e\u5f80 servlet \u5bb9\u5668\u4e2d\u6dfb\u52a0 ",(0,i.jsx)(n.code,{children:"DispatcherServlet"}),"\u3002\u8fd9\u6837\uff0cservlet \u5bb9\u5668\u5728\u542f\u52a8\u65f6\uff0c\u5c31\u4f1a\u542f\u52a8 spring \u5bb9\u5668\u4e86\u3002\u8fd9\u91cc\u6700\u91cd\u8981\u7684\u5c31\u662f ",(0,i.jsx)(n.code,{children:"DispatcherServlet"}),"\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u6765\u5206\u6790\u8fd9\u4e2a servlet."]}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4eec\u5148\u6765\u770b\u4e0b ",(0,i.jsx)(n.code,{children:"DispatcherServlet"})," \u7684\u7ee7\u627f\u7ed3\u6784\uff1a"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/up-1df54493011b3fc9cb9cafbb944f1a88256.png",alt:""})}),"\n",(0,i.jsxs)(n.p,{children:["\u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u5230\uff0cspring \u63d0\u4f9b\u7684\u3001\u8ddf servlet \u76f8\u5173\u7684\u7c7b\u6709\u4e09\u4e2a\uff1a",(0,i.jsx)(n.code,{children:"HttpServletBean"}),"\u3001",(0,i.jsx)(n.code,{children:"FrameworkServlet"})," \u4e0e ",(0,i.jsx)(n.code,{children:"DispatcherServlet"}),"\u3002\u4f5c\u4e3a servlet\uff0c\u6211\u4eec\u77e5\u9053\u5176\u521d\u59cb\u5316\u65b9\u6cd5\u4e3a ",(0,i.jsx)(n.code,{children:"GenericServlet#init()"}),"\uff0c\u4e5f\u5c31\u662f servlet \u7684\u5165\u53e3\u65b9\u6cd5\uff0c\u6211\u4eec\u7684\u5206\u6790\u4e5f\u5c06\u4ece\u8fd9\u91cc\u5f00\u59cb\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u7531\u4e8e ",(0,i.jsx)(n.code,{children:"DispatcherServlet"})," \u5b9e\u73b0\u4e86 ",(0,i.jsx)(n.code,{children:"HttpServletBean"}),"\u3001",(0,i.jsx)(n.code,{children:"FrameworkServlet"}),"\uff0c",(0,i.jsx)(n.code,{children:"DispatcherServlet#init()"})," \u5b9e\u9645\u4e0a\u7ee7\u627f\u81ea ",(0,i.jsx)(n.code,{children:"HttpServletBean#init"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Override\npublic final void init() throws ServletException {\n\n    PropertyValues pvs = new ServletConfigPropertyValues(getServletConfig(), this.requiredProperties);\n    if (!pvs.isEmpty()) {\n        try {\n            BeanWrapper bw = PropertyAccessorFactory.forBeanPropertyAccess(this);\n            ResourceLoader resourceLoader = new ServletContextResourceLoader(getServletContext());\n            bw.registerCustomEditor(Resource.class, new ResourceEditor(resourceLoader, getEnvironment()));\n            initBeanWrapper(bw);\n            bw.setPropertyValues(pvs, true);\n        }\n        catch (BeansException ex) {\n            ...\n        }\n    }\n\n    // \u521d\u59cb\u5316 servlet bean\uff0cspring\u7684\u76f8\u5173\u914d\u7f6e\u5c31\u662f\u5728\u8fd9\u91cc\u8fdb\u884c\u7684\n    initServletBean();\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u52a0\u8f7d\u4e86\u4e00\u4e9b\u914d\u7f6e\uff0c\u7136\u540e\u5c31\u8c03\u7528\u4e86 ",(0,i.jsx)(n.code,{children:"initServletBean"}),"\uff0c\u5e76\u6ca1\u6709\u505a\u4e00\u4e9b spring \u5b9e\u8d28\u6027\u7684\u5185\u5bb9\u3002\u6211\u4eec\u7ee7\u7eed\u8ddf\u8fdb\uff0c\u8df3\u8fc7\u5176\u4e2d\u4e0d\u91cd\u8981\u7684\u65b9\u6cd5\uff0c\u8c03\u7528\u94fe\u8def\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"-HttpServletBean#init\n -FrameworkServlet#initServletBean\n  -FrameworkServlet#initWebApplicationContext\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4e00\u76f4\u8ddf\u5230 ",(0,i.jsx)(n.code,{children:"FrameworkServlet#initWebApplicationContext"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"protected WebApplicationContext initWebApplicationContext() {\n    // \u83b7\u53d6\u7c7b\u578b\u4e3aWebServerApplicationContext\u7684\u7236\u5bb9\u5668\uff0c\u8fd9\u91cc\u5f97\u5230\u7684\u7ed3\u679c\u4e3anull\n    WebApplicationContext rootContext =\n            WebApplicationContextUtils.getWebApplicationContext(getServletContext());\n    WebApplicationContext wac = null;\n\n    if (this.webApplicationContext != null) {\n        // \u8fd9\u4e2awebApplicationContext\uff0c\u5c31\u662f\u5728MyWebApplicationInitializer#onStart\u65b9\u6cd5\u4e2d\n        // \u4f20\u5165\u7684AnnotationConfigWebApplicationContext\n        wac = this.webApplicationContext;\n        if (wac instanceof ConfigurableWebApplicationContext) {\n            ConfigurableWebApplicationContext cwac = (ConfigurableWebApplicationContext) wac;\n            if (!cwac.isActive()) {\n                if (cwac.getParent() == null) {\n                    cwac.setParent(rootContext);\n                }\n                // \u5728\u8fd9\u91cc\u8c03\u7528 AbstractApplicationContext#refresh \u542f\u52a8\n                configureAndRefreshWebApplicationContext(cwac);\n            }\n        }\n    }\n    // wac\u4e0d\u4e3anull,\u8fd9\u91cc\u4e0d\u4f1a\u8fd0\u884c\n    if (wac == null) {\n        wac = findWebApplicationContext();\n    }\n    // wac\u4e0d\u4e3anull,\u8fd9\u91cc\u4e0d\u4f1a\u8fd0\u884c\n    if (wac == null) {\n        // \u521b\u5efaWebApplicationContext\uff0c\u91cd\u65b0\u8fd0\u884cAbstractApplicationContext#refresh\n        wac = createWebApplicationContext(rootContext);\n    }\n\n    // \u5b9e\u9645\u4e0a\uff0crefreshEventReceived\u4e3atrue\uff0cif\u5757\u7684\u4ee3\u7801\u5e76\u4e0d\u6267\u884c\n    if (!this.refreshEventReceived) {\n        synchronized (this.onRefreshMonitor) {\n            // \u5237\u65b0\u5e94\u7528\u4e0a\u4e0b\u6587\uff0cspringmvc\u76f8\u5173\u4ee3\u7801\u5728\u8fd9\u91cc\u8fd0\u884c\n            onRefresh(wac);\n        }\n    }\n\n    if (this.publishContext) {\n        // \u5c06 WebApplicationContext\u89c6\u4e3aservletContext \u4e00\u4e2a\u5c5e\u6027\uff0c\u52a0\u5165\u5230 servletContext \u4e2d\n        // \u4e4b\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528\n        // WebApplicationContextUtils.getWebApplicationContext(ServletContext, String attrName)\n        // \u6765\u83b7\u53d6\n        String attrName = getServletContextAttributeName();\n        getServletContext().setAttribute(attrName, wac);\n    }\n\n    return wac;\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u4e2a\u65b9\u6cd5\u7684\u76f8\u5173\u64cd\u4f5c\u4ee3\u7801\u4e2d\u5df2\u6709\u6ce8\u91ca\uff0c\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u65b9\u6cd5\u6700 \u91cd\u8981\u7684\u4ee3\u7801\u4e3a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"protected WebApplicationContext initWebApplicationContext() {\n    ...\n    // \u5728\u8fd9\u91cc\u8c03\u7528 AbstractApplicationContext#refresh \u542f\u52a8\n    configureAndRefreshWebApplicationContext(cwac);\n    ...\n    return wac;\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u76f8\u5173\u5206\u6790\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"FrameworkServlet#configureAndRefreshWebApplicationContext"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"protected void configureAndRefreshWebApplicationContext(ConfigurableWebApplicationContext wac) {\n    if (ObjectUtils.identityToString(wac).equals(wac.getId())) {\n        if (this.contextId != null) {\n            wac.setId(this.contextId);\n        }\n        else {\n            // Generate default id...\n            wac.setId(ConfigurableWebApplicationContext.APPLICATION_CONTEXT_ID_PREFIX +\n                    ObjectUtils.getDisplayString(getServletContext().getContextPath()) + \n                    '/' + getServletName());\n        }\n    }\n    wac.setServletContext(getServletContext());\n    wac.setServletConfig(getServletConfig());\n    wac.setNamespace(getNamespace());\n    // \u6dfb\u52a0\u4e8b\u4ef6\u76d1\u542c\u5668\uff0c\u76d1\u542cspring\u542f\u52a8\u5b8c\u6210\u4e8b\u4ef6\n    // \u8fd9\u4e2a\u76d1\u542c\u5668\u5341\u5206\u91cd\u8981\uff0c\u540e\u9762\u4f1a\u5206\u6790\n    wac.addApplicationListener(new SourceFilteringListener(wac, new ContextRefreshListener()));\n    ConfigurableEnvironment env = wac.getEnvironment();\n    if (env instanceof ConfigurableWebEnvironment) {\n        ((ConfigurableWebEnvironment) env).initPropertySources(getServletContext(), getServletConfig());\n    }\n    // \u6269\u5c55\u70b9\uff0c\u6ca1\u6709\u4ec0\u4e48\u529f\u80fd\uff0c\u5f85\u4ee5\u540e\u6269\u5c55\n    postProcessWebApplicationContext(wac);\n    applyInitializers(wac);\n    // \u8c03\u7528\u5c31\u662f AbstractApplicationContext.refresh\n    wac.refresh();\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u4e2a\u65b9\u6cd5\u5b9e\u9645\u4e0a\u8fd8\u662f\u914d\u7f6e ",(0,i.jsx)(n.code,{children:"ConfigurableWebApplicationContext"})," \u7684\u4e00\u4e9b\u5c5e\u6027\uff0c\u6700\u540e\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"AbstractApplicationContext#refresh"})," \u6765\u542f\u52a8 spring \u5bb9\u5668\u3002\u5173\u4e8e ",(0,i.jsx)(n.code,{children:"AbstractApplicationContext#refresh"})," \u7684\u5206\u6790\uff0c\u53ef\u4ee5\u53c2\u8003 ",(0,i.jsx)(n.a,{href:"https://my.oschina.net/funcy/blog/4633169",title:"spring\u542f\u52a8\u6d41\u7a0b\u4e4b\u542f\u52a8\u524d\u7684\u51c6\u5907\u5de5\u4f5c",children:"spring \u542f\u52a8\u6d41\u7a0b\u4e4b\u542f\u52a8\u524d\u7684\u51c6\u5907\u5de5\u4f5c"}),"\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5230\u8fd9\u91cc\uff0cspring \u5bb9\u5668\u5c31\u771f\u6b63\u542f\u52a8\u4e86\u3002"}),"\n",(0,i.jsxs)(n.h3,{id:"2-sourcefilteringlistener\u542f\u52a8\u4e8b\u4ef6\u76d1\u542c\u5668",children:["2. ",(0,i.jsx)(n.code,{children:"SourceFilteringListener"}),"\uff1a\u542f\u52a8\u4e8b\u4ef6\u76d1\u542c\u5668"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\u6709\u4e2a\u95ee\u9898\uff1a\u5728 springmvc \u4e2d\uff0c\u6211\u4eec\u77e5\u9053 spring \u4f1a\u8bc6\u522b ",(0,i.jsx)(n.code,{children:"@Controller"}),"\uff0c\u5c06 ",(0,i.jsx)(n.code,{children:"RequestMapping"}),"/",(0,i.jsx)(n.code,{children:"@PostMapping"}),"/",(0,i.jsx)(n.code,{children:"@GetMapping"})," \u7b49\u6ce8\u89e3\u4e2d\u7684\u8def\u5f84\u5c01\u88c5\u4e3a\u4e00\u4e2a uri\uff0c\u7b49\u5f85\u5916\u90e8\u8bbf\u95ee\uff0c\u4f46\u662f\u6211\u4eec\u4e00\u8def\u770b\u6765\uff0c\u4f3c\u4e4e spring \u5e76\u6ca1\u6709\u505a\u8fd9\u4e9b\u5de5\u4f5c\uff0c\u90a3\u4e48\u8fd9\u90e8\u5206\u7684\u5de5\u4f5c\u662f\u5728\u54ea\u91cc\u8fdb\u884c\u7684\u5462\uff1f"]}),"\n",(0,i.jsx)(n.p,{children:"\u5b9e\u9645\u4e0a\uff0cspring \u8fd9\u90e8\u5206\u7684\u5de5\u4f5c\u662f\u5728\u542f\u52a8\u76d1\u542c\u5668\u4e2d\u5b8c\u6210\u7684\uff0c\u4e5f\u5c31\u662f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"wac.addApplicationListener(new SourceFilteringListener(wac, new ContextRefreshListener()));\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u4e2a\u76d1\u542c\u5668\u76d1\u542c\u7684\u662f spring \u7684\u542f\u52a8 \u4e8b\u4ef6\uff0c\u5c06\u5728 spring \u5bb9\u5668\u542f\u52a8\u5b8c\u6210\u540e\u8c03\u7528\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u5173\u4e8e spring \u7684\u4e8b\u4ef6\u76f8\u5173\u5185\u5bb9\uff0c\u53ef\u4ee5\u53c2\u8003 ",(0,i.jsx)(n.a,{href:"https://my.oschina.net/funcy/blog/4713339",title:"spring\u63a2\u79d8\u4e4bspring \u4e8b\u4ef6\u673a\u5236",children:"spring \u63a2\u79d8\u4e4b spring \u4e8b\u4ef6\u673a\u5236"}),"\uff0c\u8fd9\u91cc\u76f4\u63a5\u8bf4\u7ed3\u8bba\uff1aspring \u4e2d\u63d0\u4f9b\u4e86 ",(0,i.jsx)(n.code,{children:"ApplicationEventPublisher#publishEvent(Object)"}),"\uff08\u4e8b\u4ef6\u53d1\u5e03\u5668\uff09\u3001",(0,i.jsx)(n.code,{children:"ApplicationEvent"}),"\uff08\u4e8b\u4ef6\uff09\u4e0e ",(0,i.jsx)(n.code,{children:"ApplicationListener"})," \uff08\u4e8b\u4ef6\u76d1\u542c\u5668\uff09\uff0c\u5f53 spring \u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"ApplicationEventPublisher#publishEvent(Object)"})," \u53d1\u5e03 ",(0,i.jsx)(n.code,{children:"ApplicationEvent"}),"\uff08\u4e8b\u4ef6\uff09\u65f6\uff0c",(0,i.jsx)(n.code,{children:"ApplicationListener"})," \uff08\u4e8b\u4ef6\u76d1\u542c\u5668\uff09\u5c06\u4f1a\u76d1\u542c\u5230\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4eec\u6765\u770b\u770b ",(0,i.jsx)(n.code,{children:"SourceFilteringListener"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"public class SourceFilteringListener implements GenericApplicationListener, SmartApplicationListener {\n\n    private final Object source;\n\n    @Nullable\n    private GenericApplicationListener delegate;\n\n    /**\n     * \u6784\u9020\u65b9\u6cd5\uff0c\u4f20\u5165 event \u4e0e listener\n     */\n    public SourceFilteringListener(Object source, ApplicationListener<?> delegate) {\n        this.source = source;\n        this.delegate = (delegate instanceof GenericApplicationListener ?\n                (GenericApplicationListener) delegate : new GenericApplicationListenerAdapter(delegate));\n    }\n\n    /**\n     * \u4e8b\u4ef6\u76d1\u542c\u65b9\u6cd5\n     */\n    @Override\n    public void onApplicationEvent(ApplicationEvent event) {\n        if (event.getSource() == this.source) {\n            // \u8c03\u7528\u771f\u6b63\u7684\u4e8b\u4ef6\u5904\u7406\n            onApplicationEventInternal(event);\n        }\n    }\n\n    /**\n     *  \u5904\u7406\u4e8b\u4ef6\n     */\n    protected void onApplicationEventInternal(ApplicationEvent event) {\n        if (this.delegate == null) {\n            throw new IllegalStateException(...);\n        }\n        // \u6700\u7ec8\u8fd8\u662f\u8c03\u7528\u4f20\u5165\u7684\u4e8b\u4ef6\u76d1\u542c\u5668\u7684onApplicationEvent\u65b9\u6cd5\n        this.delegate.onApplicationEvent(event);\n    }\n\n    // \u7701\u7565\u4e86\u4e00\u4e9b\u4ee3\u7801\n    ...\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\uff0c",(0,i.jsx)(n.code,{children:"SourceFilteringListener"})," \u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u4f20\u5165\u4e86 ",(0,i.jsx)(n.code,{children:"ContextRefreshListener"})," \u7684\u5b9e\u4f8b\uff0c\u7136\u540e\u5728 ",(0,i.jsx)(n.code,{children:"SourceFilteringListener#onApplicationEvent"})," \u65b9\u6cd5\u4e2d\uff0c\u6700\u7ec8\u8c03\u7528\u7684\u662f ",(0,i.jsx)(n.code,{children:"ContextRefreshListener#onApplicationEvent"})," \u65b9\u6cd5\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u63a5\u4e0b\u6765\u6211\u4eec\u518d\u6765\u770b ",(0,i.jsx)(n.code,{children:"ContextRefreshListener"}),"\uff1a"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"FrameworkServlet.ContextRefreshListener"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"private class ContextRefreshListener implements ApplicationListener<ContextRefreshedEvent> {\n\n    @Override\n    public void onApplicationEvent(ContextRefreshedEvent event) {\n        FrameworkServlet.this.onApplicationEvent(event);\n    }\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u4e2a\u7c7b\u662f ",(0,i.jsx)(n.code,{children:"FrameworkServlet"})," \u7684\u5185\u90e8\u7c7b\uff0c\u4ee3\u7801\u5f88\u7b80\u5355\uff0c\u6700\u7ec8\u8c03\u7528\u7684\u662f ",(0,i.jsx)(n.code,{children:"FrameworkServlet#onApplicationEvent"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"public void onApplicationEvent(ContextRefreshedEvent event) {\n    // \u4fee\u6539\u72b6\u6001\uff0c\u8fd9\u4e2a\u5f88\u5173\u952e\uff0c\u8fd0\u884c\u4e86\u8fd9\u884c\u540e\uff0c\n    // FrameworkServlet#initWebApplicationContext\u91cc\u7684onRefresh(...)\u5c31\u4e0d\u4f1a\u8fd0\u884c\n    this.refreshEventReceived = true;\n    synchronized (this.onRefreshMonitor) {\n         // \u5177\u4f53\u7684\u903b\u8f91\u5904\u7406\n         onRefresh(event.getApplicationContext());\n    }\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u63a5\u4e0b\u6765\u5c31\u662f ",(0,i.jsx)(n.code,{children:"DispatcherServlet#onRefresh"})," \u65b9\u6cd5\u4e86\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Override\nprotected void onRefresh(ApplicationContext context) {\n    initStrategies(context);\n}\n\n/**\n * springmvc\u7684\u7ec8\u6781\u5965\u79d8\u5c31\u5728\u8fd9\u91cc\u4e86\n * \u8fd9\u4e2a\u65b9\u6cd5\u4e2d\uff0c\u521d\u59cb\u5316\u4e86springmvc\u7684\u5404\u79cd\u7ec4\u4ef6\n */\nprotected void initStrategies(ApplicationContext context) {\n    initMultipartResolver(context);\n    initLocaleResolver(context);\n    initThemeResolver(context);\n    initHandlerMappings(context);\n    initHandlerAdapters(context);\n    initHandlerExceptionResolvers(context);\n    initRequestToViewNameTranslator(context);\n    initViewResolvers(context);\n    initFlashMapManager(context);\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\uff0c\u6700\u7ec8\u8fd0\u884c\u7684\u65b9\u6cd5\u662f ",(0,i.jsx)(n.code,{children:"DispatcherServlet#initStrategies"}),"\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u867d\u53ea\u5be5\u5be5\u6570\u884c\uff0c\u4e14\u521d\u59cb\u5316\u4e86 springmvc \u5404\u4f9d\u8d56\u7ec4\u4ef6\uff01"]}),"\n",(0,i.jsxs)(n.h3,{id:"3-dispatcherservletinitstrategies\u521d\u59cb\u5316-springmvc-\u7ec4\u4ef6",children:["3. ",(0,i.jsx)(n.code,{children:"DispatcherServlet#initStrategies"}),"\uff1a\u521d\u59cb\u5316 springmvc \u7ec4\u4ef6"]}),"\n",(0,i.jsxs)(n.p,{children:["spring \u5728\u542f\u52a8\u5b8c\u6210\u540e\uff0c\u4f1a\u53d1\u5e03\u542f\u52a8\u5b8c\u6210\u4e8b\u4ef6\uff0c\u7136\u540e\u7531\u76d1\u542c\u5668 ",(0,i.jsx)(n.code,{children:"SourceFilteringListener"})," \u76d1\u542c\u5230\u8be5\u4e8b\u4ef6\u540e\uff0c\u6267\u884c\u76d1\u542c\u903b\u8f91\uff0c\u6700\u7ec8\u8c03\u7528\u5230 ",(0,i.jsx)(n.code,{children:"DispatcherServlet#initStrategies"}),"\u3002\u672c\u8282\u6211\u4eec\u5c06\u6765\u5206\u6790 ",(0,i.jsx)(n.code,{children:"DispatcherServlet#initStrategies"})," \u7684\u6267\u884c\u8fc7\u7a0b\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5176\u5b9e\u8fd9\u4e2a\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u91cc\u9762\u6709 9 \u884c\u4ee3\u7801\uff0c\u6bcf\u884c\u4ee3\u7801\u90fd\u521d\u59cb\u5316\u4e86 springmvc \u7684\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u5982 ",(0,i.jsx)(n.code,{children:"initMultipartResolver"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'public static final String MULTIPART_RESOLVER_BEAN_NAME = "multipartResolver";\n\nprivate void initMultipartResolver(ApplicationContext context) {\n    try {\n        // \u4ecespring\u5bb9\u5668\u4e2d\u83b7\u53d6multipartResolver\u5bf9\u8c61\n        this.multipartResolver = context.getBean(MULTIPART_RESOLVER_BEAN_NAME, MultipartResolver.class);\n    }\n    catch (NoSuchBeanDefinitionException ex) {\n        // \u83b7\u53d6\u5931\u8d25\uff0c\u9ed8\u8ba4\u4e3anull\n        this.multipartResolver = null;\n        }\n    }\n}\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"multipartResolver"})," \u662f\u7528\u6765\u5904\u7406\u6587\u4ef6\u4e0a\u4f20\u7684 bean\uff0c\u5728 spring \u4e2d\uff0c\u6211\u4eec\u5904\u7406\u6587\u4ef6\u4e0a\u4f20\u65f6\uff0c\u4e00\u822c\u4f1a\u50cf\u8fd9\u6837\u5f15\u5165 ",(0,i.jsx)(n.code,{children:"multipartResolver"})," bean\uff1b"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'@Bean(name = "multipartResolver")\npublic MultipartResolver multipartResolver() {\n    CommonsMultipartResolver resolver = new CommonsMultipartResolver();\n    resolver.setDefaultEncoding("UTF-8");\n    resolver.setResolveLazily(true);\n    resolver.setMaxInMemorySize(40960);\n    //\u5141\u8bb8\u4e0a\u4f20\u6587\u4ef6\u6700\u5927\u4e3a1G\n    resolver.setMaxUploadSize(1024 * 1024 * 1024);\n    return resolver;\n}\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u672a\u5f15\u5165 ",(0,i.jsx)(n.code,{children:"multipartResolver"})," bean\uff0cspring \u9ed8\u8ba4\u4e3a null\uff0c\u5c31\u4e0d\u80fd\u8fdb\u884c\u6587\u4ef6\u4e0a\u4f20\u4e86\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u518d\u6765\u770b\u770b ",(0,i.jsx)(n.code,{children:"springmvc"})," ",(0,i.jsx)(n.code,{children:"HandlerMappings"})," \u7684\u521d\u59cb\u5316\u8fc7\u7a0b\uff1a"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"DispatcherServlet"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'public static final String HANDLER_MAPPING_BEAN_NAME = "handlerMapping";\n\nprivate static final String DEFAULT_STRATEGIES_PATH = "DispatcherServlet.properties";\n\nprivate static final Properties defaultStrategies;\n\nstatic {\n    try {\n        // \u5728static\u5757\u4e2d\u52a0\u8f7dDispatcherServlet.properties\u6587\u4ef6\n        ClassPathResource resource = new ClassPathResource(DEFAULT_STRATEGIES_PATH, \n                DispatcherServlet.class);\n        defaultStrategies = PropertiesLoaderUtils.loadProperties(resource);\n    }\n    catch (IOException ex) {\n        throw new IllegalStateException(...);\n    }\n}\n\n/**\n * handlerMappings \u5c5e\u6027\n */\n@Nullable\nprivate List<HandlerMapping> handlerMappings;\n\n/**\n * \u521d\u59cb\u5316 HandlerMappings\n * 1\\. \u4ecespring \u5bb9\u5668\u4e2d\u83b7\u53d6 HandlerMapping bean\uff0c\n *     \u5982\u679c\u83b7\u53d6\u6210\u529f\uff0c\u5219\u628a\u5f97\u5230\u7684\u7ed3\u679c\u8d4b\u503c\u7ed9handlerMappings\n * 2\\. \u5982\u679c\u672a\u83b7\u5f97\uff0c\u5219\u83b7\u53d6\u9ed8\u8ba4\u7684 HandlerMapping bean\n */\nprivate void initHandlerMappings(ApplicationContext context) {\n    this.handlerMappings = null;\n    if (this.detectAllHandlerMappings) {\n        // \u52a0\u8f7d\u6240\u6709\u5b9e\u73b0HandlerMapping\u63a5\u53e3\u7684bean\n        Map<String, HandlerMapping> matchingBeans = BeanFactoryUtils\n                .beansOfTypeIncludingAncestors(context, HandlerMapping.class, true, false);\n        // \u8fd9\u91cc\u4e0d\u4e3a\u7a7a\uff0c\u4f1a\u8fd0\u884c\n        if (!matchingBeans.isEmpty()) {\n            this.handlerMappings = new ArrayList<>(matchingBeans.values());\n            // \u6392\u5e8f\uff0cSpring\u5904\u7406\u8bf7\u6c42\u5c31\u662f\u6839\u636e\u8fd9\u4e2a\u6392\u5e8f\u7684\u7ed3\u679c\u8fdb\u884c\u5904\u7406\uff0c\n            // \u5982\u679c\u5f53\u524dhandlerMapping\u4e0d\u53ef\u4ee5\u5904\u7406\u5219\u629b\u7ed9\u4e0b\u4e00\u4e2a\n            AnnotationAwareOrderComparator.sort(this.handlerMappings);\n        }\n    }\n    else {\n        try {\n            HandlerMapping hm = context.getBean(HANDLER_MAPPING_BEAN_NAME, HandlerMapping.class);\n            this.handlerMappings = Collections.singletonList(hm);\n        }\n        catch (NoSuchBeanDefinitionException ex) {\n            // Ignore, we\'ll add a default HandlerMapping later.\n        }\n    }\n    if (this.handlerMappings == null) {\n        // \u5982\u679c\u672a\u6dfb\u52a0handlerMappings\uff0c\u5219\u83b7\u53d6\u9ed8\u8ba4\u7684 handlerMappings\n        this.handlerMappings = getDefaultStrategies(context, HandlerMapping.class);\n    }\n}\n\n/**\n * \u83b7\u53d6\u9ed8\u8ba4\u7684\u7b56\u7565\n */\nprotected <T> List<T> getDefaultStrategies(ApplicationContext context, Class<T> strategyInterface) {\n    String key = strategyInterface.getName();\n    // \u83b7\u53d6\u914d\u7f6e\u6587\u4ef6DispatcherServlet.properties\u4e2d\u9ed8\u8ba4\u7684 class \u914d\u7f6e\n    String value = defaultStrategies.getProperty(key);\n    if (value != null) {\n        String[] classNames = StringUtils.commaDelimitedListToStringArray(value);\n        List<T> strategies = new ArrayList<>(classNames.length);\n        for (String className : classNames) {\n            try {\n                // \u4f7f\u7528\u53cd\u5c04\u521b\u5efabean\n                Class<?> clazz = ClassUtils.forName(className, DispatcherServlet.class.getClassLoader());\n                Object strategy = createDefaultStrategy(context, clazz);\n                strategies.add((T) strategy);\n            }\n            catch (ClassNotFoundException ex) {\n                throw new BeanInitializationException(...);\n            }\n            catch (LinkageError err) {\n                throw new BeanInitializationException(...);\n            }\n        }\n        return strategies;\n    }\n    else {\n        return new LinkedList<>();\n    }\n}\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u521d\u59cb\u5316 ",(0,i.jsx)(n.code,{children:"HandlerMappings"})," \u65f6\uff0c"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5148\u4ece spring \u5bb9\u5668\u4e2d\u83b7\u53d6 ",(0,i.jsx)(n.code,{children:"HandlerMapping"})," bean\uff0c\u5982\u679c\u83b7\u53d6\u6210\u529f\uff08\u5b9e\u9645\u4e0a\u8fd9\u91cc\u4e5f\u80fd\u83b7\u5f97\uff09\uff0c\u5219\u628a\u5f97\u5230\u7684\u7ed3\u679c\u8d4b\u503c\u7ed9 ",(0,i.jsx)(n.code,{children:"DispatcherServlet"})," \u7684 ",(0,i.jsx)(n.code,{children:"handlerMappings"})," \u5c5e\u6027\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5982\u679c\u672a\u5931\u8d25\uff0c\u8868\u660e spring \u5bb9\u5668\u4e2d\u672a\u5b58\u5728 ",(0,i.jsx)(n.code,{children:"HandlerMapping"})," \uff0c\u5219\u83b7\u53d6\u9ed8\u8ba4\u7684 ",(0,i.jsx)(n.code,{children:"HandlerMapping"})," bean."]}),"\n",(0,i.jsxs)(n.li,{children:["\u83b7\u53d6\u9ed8\u8ba4\u7684 ",(0,i.jsx)(n.code,{children:"HandlerMapping"})," bean \u65f6\uff0c\u8bfb\u53d6 ",(0,i.jsx)(n.code,{children:"DispatcherServlet.properties"})," \u914d\u7f6e\uff0c\u7136\u540e\u4f7f\u7528\u53cd\u5c04\u5b9e\u4f8b\u5316\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4eec\u6765\u770b\u770b ",(0,i.jsx)(n.code,{children:"DispatcherServlet.properties"})," \u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u4f4d\u4e8e",(0,i.jsx)(n.code,{children:" spring-webmvc/src/main/resources/org/springframework/web/servlet/DispatcherServlet.properties"}),"\uff0c\u90e8\u5206\u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"org.springframework.web.servlet.LocaleResolver=org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver\n\norg.springframework.web.servlet.ThemeResolver=org.springframework.web.servlet.theme.FixedThemeResolver\n\norg.springframework.web.servlet.HandlerMapping=org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,\\\n    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping,\\\n    org.springframework.web.servlet.function.support.RouterFunctionMapping\n...\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"DispatcherServlet#initStrategies"})," \u4e2d\u5176\u4ed6 ",(0,i.jsx)(n.code,{children:"initXxx()"})," \u5185\u5bb9\u7c7b\u4f3c\uff0c\u8fd9\u91cc\u5c31\u4e0d\u4e00\u4e00\u5206\u6790\u4e86\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"4-\u603b\u7ed3",children:"4. \u603b\u7ed3"}),"\n",(0,i.jsx)(n.p,{children:"\u672c\u6587\u4e3b\u8981\u5206\u6790\u4e86 springmvc \u7684\u542f\u52a8\u8fc7\u7a0b\uff0c\u603b\u7ed3\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/up-7ab3fae1e39f545c1d7c1811351227fa434.png",alt:""})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["servlet \u5bb9\u5668\uff08\u8fd9\u91cc\u662f tomcat\uff09\u542f\u52a8\u65f6\uff0c\u901a\u8fc7 spi \u673a\u5236\u6267\u884c ",(0,i.jsx)(n.code,{children:"ServletContainerInitializer#onStartup"})," \u65b9\u6cd5\uff0c\u800c springmvc \u5bf9\u63d0\u4f9b\u7684 ",(0,i.jsx)(n.code,{children:"SpringServletContainerInitializer"})," \u5bf9\u5176\u8fdb\u884c\u4e86\u5b9e\u73b0\uff0c\u4e8e\u662f ",(0,i.jsx)(n.code,{children:"SpringServletContainerInitializer#onStartup"})," \u65b9\u6cd5\u4f1a\u88ab\u8c03\u7528\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"SpringServletContainerInitializer#onStartup"})," \u65b9\u6cd5\u4e2d\uff0cspring \u4f1a\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"WebApplicationInitializer#onStartup"})," \u65b9\u6cd5\uff0c\u800c ",(0,i.jsx)(n.code,{children:"MyWebApplicationInitializer"})," \u5bf9\u5176\u8fdb\u884c\u4e86\u5b9e\u73b0\uff0c\u4e8e\u662f ",(0,i.jsx)(n.code,{children:"MyWebApplicationInitializer#onStartup"})," \u4f1a\u88ab\u8c03\u7528\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5728 ",(0,i.jsx)(n.code,{children:"MyWebApplicationInitializer#onStartup"})," \u65b9\u6cd5\u4e2d \uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a ",(0,i.jsx)(n.code,{children:"applicationContext"})," \u5bf9\u8c61\uff0c\u5c06\u5176\u4e0e ",(0,i.jsx)(n.code,{children:"DispatcherServlet"})," \u7ed1\u5b9a\uff0c\u7136\u540e\u5c06 ",(0,i.jsx)(n.code,{children:"DispatcherServlet"})," \u6ce8\u518c\u5230 servlet \u5bb9\u5668\u4e2d\uff08\u8fd9\u91cc\u662f tomcat\uff09\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"DispatcherServlet"})," \u6ce8\u518c\u5230 servlet \u5bb9\u5668\u4e2d\uff08\u8fd9\u91cc\u662f tomcat\uff09\u540e\uff0c\u6839\u636e servlet \u751f\u547d\u5468\u671f\uff0c",(0,i.jsx)(n.code,{children:"DispatcherServlet#init"})," \u5c06\u4f1a\u88ab\u8c03\u7528\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"DispatcherServlet#init"})," \u4e2d\u4f1a\u6267\u884c spring \u5bb9\u5668\u7684\u542f\u52a8\u8fc7\u7a0b\uff0cspring \u5bb9\u5668\u542f\u52a8\u540e\uff0c\u4f1a\u53d1\u5e03\u542f\u52a8\u5b8c\u6210\u4e8b\u4ef6\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["spring \u542f\u52a8\u5b8c\u6210\u540e\uff0c",(0,i.jsx)(n.code,{children:"ContextRefreshListener"})," \u5c06\u4f1a\u76d1\u542c spring \u542f\u52a8\u5b8c\u6210\u4e8b\u4ef6\uff0c",(0,i.jsx)(n.code,{children:"FrameworkServlet.ContextRefreshListener#onApplicationEvent"})," \u65b9\u6cd5\u4f1a\u88ab\u8c03\u7528\uff0c\u8c03\u7528\u8c03\u7528\u5230 ",(0,i.jsx)(n.code,{children:"DispatcherServlet#initStrategies"}),"\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["spring \u6700\u7ec8\u5728 ",(0,i.jsx)(n.code,{children:"DispatcherServlet#initStrategies"})," \u4e2d\u521d\u59cb\u5316 ",(0,i.jsx)(n.code,{children:"MultipartResolver"}),"\u3001",(0,i.jsx)(n.code,{children:"LocaleResolver"})," \u7b49\u7ec4\u4ef6\uff0c\u6240\u8c13\u7684\u521d\u59cb\u5316\uff0c\u5176\u5b9e\u662f\u83b7\u53d6\u6216\u521b\u5efa\u5bf9\u5e94\u7684 bean\uff0c\u7136\u540e\u8d4b\u503c\u7ed9 ",(0,i.jsx)(n.code,{children:"DispatcherServlet"})," \u7684\u5c5e\u6027\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5230\u6b64\uff0cspringmvc \u6574\u4e2a\u542f\u52a8\u6d41\u7a0b\u5c31\u5b8c\u6210\u4e86\u3002\u4e0d\u8fc7\u5230\u6b64\u6211\u4eec\u90fd\u6ca1\u6709\u770b\u5230 ",(0,i.jsxs)(n.strong,{children:["spring \u5904\u7406 ",(0,i.jsx)(n.code,{children:"@RequestMapping"})," \u7684\u76f8\u5173\u6d41\u7a0b"]}),"\uff0c\u90a3\u4e48 spring \u662f\u5982\u4f55\u5904\u7406\u8fd9\u4e2a\u6d41\u7a0b\u5462 \uff0c\u4e0b\u4e00\u7bc7\u6587\u7ae0\u5c06\u63ed\u6653\u3002"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["\u672c\u6587\u539f\u6587\u94fe\u63a5\uff1a",(0,i.jsx)(n.a,{href:"https://my.oschina.net/funcy/blog/4710330",children:"https://my.oschina.net/funcy/blog/4710330"})," \uff0c\u9650\u4e8e\u4f5c\u8005\u4e2a\u4eba\u6c34\u5e73\uff0c\u6587\u4e2d\u96be\u514d\u6709\u9519\u8bef\u4e4b\u5904\uff0c\u6b22\u8fce\u6307\u6b63\uff01\u539f\u521b\u4e0d\u6613\uff0c\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002"]})})]})}function d(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},88672:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>c});var i=t(50959);const r={},s=i.createContext(r);function c(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);