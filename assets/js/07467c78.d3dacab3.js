"use strict";(self.webpackChunkcode_note_blog=self.webpackChunkcode_note_blog||[]).push([[6146],{67837:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var t=i(11527),r=i(88672);const s={},o="Spring MVC \u4f7f\u7528@Controller\u6ce8\u89e3\u5b9a\u4e49\u4e00\u4e2a\u63a7\u5236\u5668",a={id:"Spring\u5168\u5bb6\u6876/SpringMVC/SpringMVC\u4e2d\u7684\u5e38\u7528\u529f\u80fd",title:"Spring MVC \u4f7f\u7528@Controller\u6ce8\u89e3\u5b9a\u4e49\u4e00\u4e2a\u63a7\u5236\u5668",description:"2018-07-26 14:02 \u66f4\u65b0",source:"@site/docs/Spring\u5168\u5bb6\u6876/SpringMVC/SpringMVC\u4e2d\u7684\u5e38\u7528\u529f\u80fd.md",sourceDirName:"Spring\u5168\u5bb6\u6876/SpringMVC",slug:"/Spring\u5168\u5bb6\u6876/SpringMVC/SpringMVC\u4e2d\u7684\u5e38\u7528\u529f\u80fd",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/SpringMVC/SpringMVC\u4e2d\u7684\u5e38\u7528\u529f\u80fd",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Spring\u5168\u5bb6\u6876/SpringMVC/SpringMVC\u4e2d\u7684\u5e38\u7528\u529f\u80fd.md",tags:[],version:"current",frontMatter:{},sidebar:"spring",previous:{title:"Spring MVC \u6587\u4ef6\u4e0a\u4f20\u6982\u8ff0",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/SpringMVC/SpringMVC\u5982\u4f55\u5b9e\u73b0\u6587\u4ef6\u4e0a\u4f20"},next:{title:"SpringMVC\u4e2d\u7684\u56fd\u9645\u5316\u529f\u80fd",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/SpringMVC/SpringMVC\u4e2d\u7684\u56fd\u9645\u5316\u529f\u80fd"}},c={},l=[{value:"@Controller\u548c\u9762\u5411\u5207\u9762\uff08AOP\uff09\u4ee3\u7406",id:"controller\u548c\u9762\u5411\u5207\u9762aop\u4ee3\u7406",level:2},{value:"Spring MVC 3.1\u4e2d\u65b0\u589e\u652f\u6301@RequestMapping\u7684\u4e00\u4e9b\u7c7b",id:"spring-mvc-31\u4e2d\u65b0\u589e\u652f\u6301requestmapping\u7684\u4e00\u4e9b\u7c7b",level:2},{value:"URI\u6a21\u677f",id:"uri\u6a21\u677f",level:2},{value:"\u5e26\u6b63\u5219\u8868\u8fbe\u5f0f\u7684URI\u6a21\u677f",id:"\u5e26\u6b63\u5219\u8868\u8fbe\u5f0f\u7684uri\u6a21\u677f",level:2},{value:"Path Patterns\uff08\u4e0d\u597d\u7ffb\uff0c\u5bb9\u6613\u6389\u97f5\u5473\uff09",id:"path-patterns\u4e0d\u597d\u7ffb\u5bb9\u6613\u6389\u97f5\u5473",level:2},{value:"\u8def\u5f84\u6837\u5f0f\u7684\u5339\u914d(Path Pattern Comparison)",id:"\u8def\u5f84\u6837\u5f0f\u7684\u5339\u914dpath-pattern-comparison",level:2},{value:"\u5e26\u5360\u4f4d\u7b26\u7684\u8def\u5f84\u6a21\u5f0f\uff08path patterns\uff09",id:"\u5e26\u5360\u4f4d\u7b26\u7684\u8def\u5f84\u6a21\u5f0fpath-patterns",level:2},{value:"Suffix Pattern Matching",id:"suffix-pattern-matching",level:2},{value:"\u540e\u7f00\u6a21\u5f0f\u5339\u914d",id:"\u540e\u7f00\u6a21\u5f0f\u5339\u914d",level:2},{value:"\u540e\u7f00\u6a21\u5f0f\u5339\u914d\u4e0eRFD",id:"\u540e\u7f00\u6a21\u5f0f\u5339\u914d\u4e0erfd",level:2},{value:"\u77e9\u9635\u53d8\u91cf",id:"\u77e9\u9635\u53d8\u91cf",level:2},{value:"\u53ef\u6d88\u8d39\u7684\u5a92\u4f53\u7c7b\u578b",id:"\u53ef\u6d88\u8d39\u7684\u5a92\u4f53\u7c7b\u578b",level:2},{value:"\u53ef\u751f\u4ea7\u7684\u5a92\u4f53\u7c7b\u578b",id:"\u53ef\u751f\u4ea7\u7684\u5a92\u4f53\u7c7b\u578b",level:2},{value:"\u8bf7\u6c42\u53c2\u6570\u4e0e\u8bf7\u6c42\u5934\u7684\u503c",id:"\u8bf7\u6c42\u53c2\u6570\u4e0e\u8bf7\u6c42\u5934\u7684\u503c",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"spring-mvc-\u4f7f\u7528controller\u6ce8\u89e3\u5b9a\u4e49\u4e00\u4e2a\u63a7\u5236\u5668",children:"Spring MVC \u4f7f\u7528@Controller\u6ce8\u89e3\u5b9a\u4e49\u4e00\u4e2a\u63a7\u5236\u5668"}),"\n",(0,t.jsx)(n.p,{children:"2018-07-26 14:02 \u66f4\u65b0"}),"\n",(0,t.jsxs)("section",{children:[(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] The ",(0,t.jsx)(n.code,{children:"@Controller"})," annotation indicates that a particular class serves the role of a controller. Spring does not require you to extend any controller base class or reference the Servlet API. However, you can still reference Servlet-specific features if you need to."]}),"\n"]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"@Controller"}),"\u6ce8\u89e3\u8868\u660e\u4e86\u4e00\u4e2a\u7c7b\u662f\u4f5c\u4e3a\u63a7\u5236\u5668\u7684\u89d2\u8272\u800c\u5b58\u5728\u7684\u3002Spring\u4e0d\u8981\u6c42\u4f60\u53bb\u7ee7\u627f\u4efb\u4f55\u63a7\u5236\u5668\u57fa\u7c7b\uff0c\u4e5f\u4e0d\u8981\u6c42\u4f60\u53bb\u5b9e\u73b0Servlet\u7684\u90a3\u5957API\u3002\u5f53\u7136\uff0c\u5982\u679c\u4f60\u9700\u8981\u7684\u8bdd\u4e5f\u53ef\u4ee5\u53bb\u4f7f\u7528\u4efb\u4f55\u4e0eServlet\u76f8\u5173\u7684\u7279\u6027\u548c\u8bbe\u65bd\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] The ",(0,t.jsx)(n.code,{children:"@Controller"})," annotation acts as a stereotype for the annotated class, indicating its role. The dispatcher scans such annotated classes for mapped methods and detects ",(0,t.jsx)(n.code,{children:"@RequestMapping"})," annotations (see the next section)."]}),"\n"]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"@Controller"}),"\u6ce8\u89e3\u53ef\u4ee5\u8ba4\u4e3a\u662f\u88ab\u6807\u6ce8\u7c7b\u7684\u539f\u578b\uff08stereotype\uff09\uff0c\u8868\u660e\u4e86\u8fd9\u4e2a\u7c7b\u6240\u627f\u62c5\u7684\u89d2\u8272\u3002\u5206\u6d3e\u5668\uff08",(0,t.jsx)(n.code,{children:"DispatcherServlet"}),"\uff09\u4f1a\u626b\u63cf\u6240\u6709\u6ce8\u89e3\u4e86",(0,t.jsx)(n.code,{children:"@Controller"}),"\u7684\u7c7b\uff0c\u68c0\u6d4b\u5176\u4e2d\u901a\u8fc7",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u914d\u7f6e\u7684\u65b9\u6cd5\uff08\u8be6\u89c1\u4e0b\u4e00\u5c0f\u8282\uff09\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] You can define annotated controller beans explicitly, using a standard Spring bean definition in the dispatcher\u2019s context. However, the ",(0,t.jsx)(n.code,{children:"@Controller"})," stereotype also allows for autodetection, aligned with Spring general support for detecting component classes in the classpath and auto-registering bean definitions for them."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u5f53\u7136\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4e0d\u4f7f\u7528",(0,t.jsx)(n.code,{children:"@Controller"}),"\u6ce8\u89e3\u800c\u663e\u5f0f\u5730\u53bb\u5b9a\u4e49\u88ab\u6ce8\u89e3\u7684bean\uff0c\u8fd9\u70b9\u901a\u8fc7\u6807\u51c6\u7684Spring bean\u7684\u5b9a\u4e49\u65b9\u5f0f\uff0c\u5728dispather\u7684\u4e0a\u4e0b\u6587\u5c5e\u6027\u4e0b\u914d\u7f6e\u5373\u53ef\u505a\u5230\u3002\u4f46\u662f",(0,t.jsx)(n.code,{children:"@Controller"}),"\u539f\u578b\u662f\u53ef\u4ee5\u88ab\u6846\u67b6\u81ea\u52a8\u68c0\u6d4b\u7684\uff0cSpring\u652f\u6301classpath\u8def\u5f84\u4e0b\u7ec4\u4ef6\u7c7b\u7684\u81ea\u52a8\u68c0\u6d4b\uff0c\u4ee5\u53ca\u5bf9\u5df2\u5b9a\u4e49bean\u7684\u81ea\u52a8\u6ce8\u518c\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"[Original] To enable autodetection of such annotated controllers, you add component scanning to your configuration. Use the spring-context schema as shown in the following XML snippet:"}),"\n"]}),(0,t.jsx)(n.p,{children:"\u4f60\u9700\u8981\u5728\u914d\u7f6e\u4e2d\u52a0\u5165\u7ec4\u4ef6\u626b\u63cf\u7684\u914d\u7f6e\u4ee3\u7801\u6765\u5f00\u542f\u6846\u67b6\u5bf9\u6ce8\u89e3\u63a7\u5236\u5668\u7684\u81ea\u52a8\u68c0\u6d4b\u3002\u8bf7\u4f7f\u7528\u4e0b\u9762XML\u4ee3\u7801\u6240\u793a\u7684spring-context schema\uff1a"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xsi:schemaLocation="\n        http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        http://www.springframework.org/schema/context/spring-context.xsd">\n\n    <context:component-scan base-package="org.springframework.samples.petclinic.web"/>\n\n    \x3c!-- ... --\x3e\n\n</beans>\n'})})]}),"\n",(0,t.jsx)(n.h1,{id:"spring-mvc-\u4f7f\u7528requestmapping\u6ce8\u89e3\u6620\u5c04\u8bf7\u6c42\u8def\u5f84",children:"Spring MVC \u4f7f\u7528@RequestMapping\u6ce8\u89e3\u6620\u5c04\u8bf7\u6c42\u8def\u5f84"}),"\n",(0,t.jsx)(n.p,{children:"2018-07-26 15:29 \u66f4\u65b0"}),"\n",(0,t.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u4f7f\u7528",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u6765\u5c06\u8bf7\u6c42URL\uff0c\u5982",(0,t.jsx)(n.code,{children:"/appointments"}),"\u7b49\uff0c\u6620\u5c04\u5230\u6574\u4e2a\u7c7b\u4e0a\u6216\u67d0\u4e2a\u7279\u5b9a\u7684\u5904\u7406\u5668\u65b9\u6cd5\u4e0a\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u7c7b\u7ea7\u522b\u7684\u6ce8\u89e3\u8d1f\u8d23\u5c06\u4e00\u4e2a\u7279\u5b9a\uff08\u6216\u7b26\u5408\u67d0\u79cd\u6a21\u5f0f\uff09\u7684\u8bf7\u6c42\u8def\u5f84\u6620\u5c04\u5230\u4e00\u4e2a\u63a7\u5236\u5668\u4e0a\uff0c\u540c\u65f6\u901a\u8fc7\u65b9\u6cd5\u7ea7\u522b\u7684\u6ce8\u89e3\u6765\u7ec6\u5316\u6620\u5c04\uff0c\u5373\u6839\u636e\u7279\u5b9a\u7684HTTP\u8bf7\u6c42\u65b9\u6cd5\uff08\u201cGET\u201d\u201cPOST\u201d\u65b9\u6cd5\u7b49\uff09\u3001HTTP\u8bf7\u6c42\u4e2d\u662f\u5426\u643a\u5e26\u7279\u5b9a\u53c2\u6570\u7b49\u6761\u4ef6\uff0c\u5c06\u8bf7\u6c42\u6620\u5c04\u5230\u5339\u914d\u7684\u65b9\u6cd5\u4e0a\u3002"]}),"\n",(0,t.jsxs)("section",{children:[(0,t.jsxs)(n.p,{children:["\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u793a\u4f8b\u6765\u81eaPetcare\uff0c\u5b83\u5c55\u793a\u4e86\u5728Spring MVC\u4e2d\u5982\u4f55\u5728\u63a7\u5236\u5668\u4e0a\u4f7f\u7528",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\uff1a"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Controller\n@RequestMapping("/appointments")\npublic class AppointmentsController {\n\n    private final AppointmentBook appointmentBook;\n\n    @Autowired\n    public AppointmentsController(AppointmentBook appointmentBook) {\n        this.appointmentBook = appointmentBook;\n    }\n\n    @RequestMapping(method = RequestMethod.GET)\n    public Map<String, Appointment> get() {\n        return appointmentBook.getAppointmentsForToday();\n    }\n\n    @RequestMapping(path = "/{day}", method = RequestMethod.GET)\n    public Map<String, Appointment> getForDay(@PathVariable @DateTimeFormat(iso=ISO.DATE) Date day, Model model) {\n        return appointmentBook.getAppointmentsForDay(day);\n    }\n\n    @RequestMapping(path = "/new", method = RequestMethod.GET)\n    public AppointmentForm getNewForm() {\n        return new AppointmentForm();\n    }\n\n    @RequestMapping(method = RequestMethod.POST)\n    public String add(@Valid AppointmentForm appointment, BindingResult result) {\n        if (result.hasErrors()) {\n            return "appointments/new";\n        }\n        appointmentBook.addAppointment(appointment);\n        return "redirect:/appointments";\n    }\n}\n\n'})}),(0,t.jsxs)(n.p,{children:["\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u8bb8\u591a\u5730\u65b9\u90fd\u4f7f\u7528\u5230\u4e86",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u3002\u7b2c\u4e00\u6b21\u4f7f\u7528\u70b9\u662f\u4f5c\u7528\u4e8e\u7c7b\u7ea7\u522b\u7684\uff0c\u5b83\u6307\u793a\u4e86\u6240\u6709",(0,t.jsx)(n.code,{children:"/appointments"}),"\u5f00\u5934\u7684\u8def\u5f84\u90fd\u4f1a\u88ab\u6620\u5c04\u5230\u63a7\u5236\u5668\u4e0b\u3002",(0,t.jsx)(n.code,{children:"get()"}),"\u65b9\u6cd5\u4e0a\u7684",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u5bf9\u8bf7\u6c42\u8def\u5f84\u8fdb\u884c\u4e86\u8fdb\u4e00\u6b65\u7ec6\u5316\uff1a\u5b83\u4ec5\u63a5\u53d7GET\u65b9\u6cd5\u7684\u8bf7\u6c42\u3002\u8fd9\u6837\uff0c\u4e00\u4e2a\u8bf7\u6c42\u8def\u5f84\u4e3a",(0,t.jsx)(n.code,{children:"/appointments"}),"\u3001HTTP\u65b9\u6cd5\u4e3aGET\u7684\u8bf7\u6c42\uff0c\u5c06\u4f1a\u6700\u7ec8\u8fdb\u5165\u5230\u8fd9\u4e2a\u65b9\u6cd5\u88ab\u5904\u7406\u3002",(0,t.jsx)(n.code,{children:"add()"}),"\u65b9\u6cd5\u4e5f\u505a\u4e86\u7c7b\u4f3c\u7684\u7ec6\u5316\uff0c\u800c",(0,t.jsx)(n.code,{children:"getNewForm()"}),"\u65b9\u6cd5\u5219\u540c\u65f6\u6ce8\u89e3\u4e86\u80fd\u591f\u63a5\u53d7\u7684\u8bf7\u6c42\u7684HTTP\u65b9\u6cd5\u548c\u8def\u5f84\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u8def\u5f84\u4e3a",(0,t.jsx)(n.code,{children:"appointments/new"}),"\u3001HTTP\u65b9\u6cd5\u4e3aGET\u7684\u8bf7\u6c42\u5c06\u4f1a\u88ab\u8fd9\u4e2a\u65b9\u6cd5\u6240\u5904\u7406\u3002"]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"getForDay()"}),"\u65b9\u6cd5\u5219\u5c55\u793a\u4e86\u4f7f\u7528",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u7684\u53e6\u4e00\u4e2a\u6280\u5de7\uff1aURI\u6a21\u677f\u3002\uff08\u5173\u4e8eURI\u6a21\u677f\uff0c\u8bf7\u89c1\u4e0b\u5c0f\u8282\uff09"]}),(0,t.jsxs)(n.p,{children:["\u7c7b\u7ea7\u522b\u7684",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u5e76\u4e0d\u662f\u5fc5\u987b\u7684\u3002\u4e0d\u914d\u7f6e\u7684\u8bdd\u5219\u6240\u6709\u7684\u8def\u5f84\u90fd\u662f\u7edd\u5bf9\u8def\u5f84\uff0c\u800c\u975e\u76f8\u5bf9\u8def\u5f84\u3002\u4ee5\u4e0b\u7684\u4ee3\u7801\u793a\u4f8b\u6765\u81eaPetClinic\uff0c\u5b83\u5c55\u793a\u4e86\u4e00\u4e2a\u5177\u6709\u591a\u4e2a\u5904\u7406\u5668\u65b9\u6cd5\u7684\u63a7\u5236\u5668\uff1a"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Controller\npublic class ClinicController {\n\n    private final Clinic clinic;\n\n    @Autowired\n    public ClinicController(Clinic clinic) {\n        this.clinic = clinic;\n    }\n\n    @RequestMapping("/")\n    public void welcomeHandler() {\n    }\n\n    @RequestMapping("/vets")\n    public ModelMap vetsHandler() {\n        return new ModelMap(this.clinic.getVets());\n    }\n}\n\n'})}),(0,t.jsxs)(n.p,{children:["\u4ee5\u4e0a\u4ee3\u7801\u6ca1\u6709\u6307\u5b9a\u8bf7\u6c42\u5fc5\u987b\u662fGET\u65b9\u6cd5\u8fd8\u662fPUT/POST\u6216\u5176\u4ed6\u65b9\u6cd5\uff0c",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u9ed8\u8ba4\u4f1a\u6620\u5c04\u6240\u6709\u7684HTTP\u8bf7\u6c42\u65b9\u6cd5\u3002\u5982\u679c\u4ec5\u60f3\u63a5\u6536\u67d0\u79cd\u8bf7\u6c42\u65b9\u6cd5\uff0c\u8bf7\u5728\u6ce8\u89e3\u4e2d\u6307\u5b9a\u4e4b",(0,t.jsx)(n.code,{children:"@RequestMapping(method=GET)"}),"\u4ee5\u7f29\u5c0f\u8303\u56f4\u3002"]}),(0,t.jsx)(n.h2,{id:"controller\u548c\u9762\u5411\u5207\u9762aop\u4ee3\u7406",children:"@Controller\u548c\u9762\u5411\u5207\u9762\uff08AOP\uff09\u4ee3\u7406"}),(0,t.jsxs)(n.p,{children:["\u6709\u65f6\uff0c\u6211\u4eec\u5e0c\u671b\u5728\u8fd0\u884c\u65f6\u4f7f\u7528AOP\u4ee3\u7406\u6765\u88c5\u9970\u63a7\u5236\u5668\uff0c\u6bd4\u5982\u5f53\u4f60\u76f4\u63a5\u5728\u63a7\u5236\u5668\u4e0a\u4f7f\u7528",(0,t.jsx)(n.code,{children:"@Transactional"}),"\u6ce8\u89e3\u65f6\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528\u7c7b\u7ea7\u522b\uff08\u5728\u63a7\u5236\u5668\u4e0a\u4f7f\u7528\uff09\u7684\u4ee3\u7406\u65b9\u5f0f\u3002\u8fd9\u4e00\u822c\u662f\u4ee3\u7406\u63a7\u5236\u5668\u7684\u9ed8\u8ba4\u505a\u6cd5\u3002\u5982\u679c\u63a7\u5236\u5668\u5fc5\u987b\u5b9e\u73b0\u4e00\u4e9b\u63a5\u53e3\uff0c\u800c\u8be5\u63a5\u53e3\u53c8\u4e0d\u652f\u6301Spring Context\u7684\u56de\u8c03\uff08\u6bd4\u5982",(0,t.jsx)(n.code,{children:"InitializingBean"}),", ",(0,t.jsx)(n.code,{children:"*Aware"}),"\u7b49\u63a5\u53e3\uff09\uff0c\u90a3\u8981\u914d\u7f6e\u7c7b\u7ea7\u522b\u7684\u4ee3\u7406\u5c31\u5fc5\u987b\u624b\u52a8\u914d\u7f6e\u4e86\u3002\u6bd4\u5982\uff0c\u539f\u6765\u7684\u914d\u7f6e\u6587\u4ef6",(0,t.jsx)(n.code,{children:"<tx:annotation-driven/>"}),"\u9700\u8981\u663e\u5f0f\u914d\u7f6e\u4e3a",(0,t.jsx)(n.code,{children:"<tx:annotation-driven proxy-target-/>"}),"\u3002"]}),(0,t.jsx)(n.h2,{id:"spring-mvc-31\u4e2d\u65b0\u589e\u652f\u6301requestmapping\u7684\u4e00\u4e9b\u7c7b",children:"Spring MVC 3.1\u4e2d\u65b0\u589e\u652f\u6301@RequestMapping\u7684\u4e00\u4e9b\u7c7b"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"They are recommended for use and even required to take advantage of new features in Spring MVC 3.1 and going forward."}),"\n"]}),(0,t.jsxs)(n.p,{children:["Spring 3.1\u4e2d\u65b0\u589e\u4e86\u4e00\u7ec4\u7c7b\u7528\u4ee5\u589e\u5f3a",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\uff0c\u5206\u522b\u662f",(0,t.jsx)(n.code,{children:"RequestMappingHandlerMapping"}),"\u548c",(0,t.jsx)(n.code,{children:"RequestMappingHandlerAdapter"}),"\u3002\u6211\u4eec\u63a8\u8350\u4f60\u7528\u4e00\u7528\u3002\u6709\u90e8\u5206Spring MVC 3.1\u4e4b\u540e\u65b0\u589e\u7684\u7279\u6027\uff0c\u8fd9\u4e24\u4e2a\u6ce8\u89e3\u751a\u81f3\u662f\u5fc5\u987b\u7684\u3002\u5728MVC\u547d\u540d\u7a7a\u95f4\u548cMVC Java\u7f16\u7a0b\u914d\u7f6e\u65b9\u5f0f\u4e0b\uff0c\u8fd9\u7ec4\u7c7b\u53ca\u5176\u65b0\u7279\u6027\u9ed8\u8ba4\u662f\u5f00\u542f\u7684\u3002\u4f46\u82e5\u4f60\u4f7f\u7528\u5176\u4ed6\u914d\u7f6e\u65b9\u5f0f\uff0c\u5219\u8be5\u7279\u6027\u5fc5\u987b\u624b\u52a8\u914d\u7f6e\u624d\u80fd\u4f7f\u7528\u3002\u672c\u5c0f\u8282\u5c06\u7b80\u8981\u4ecb\u7ecd\u4e00\u4e0b\uff0c\u65b0\u7c7b\u76f8\u6bd4\u4e4b\u524d\u7684\u4e00\u4e9b\u91cd\u8981\u53d8\u5316\u3002"]}),(0,t.jsxs)(n.p,{children:["\u5728Spring 3.1\u4e4b\u524d\uff0c\u6846\u67b6\u4f1a\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u9636\u6bb5\u5206\u522b\u68c0\u67e5\u7c7b\u7ea7\u522b\u548c\u65b9\u6cd5\u7ea7\u522b\u7684\u8bf7\u6c42\u6620\u5c04\u2014\u2014\u9996\u5148\uff0c",(0,t.jsx)(n.code,{children:"DefaultAnnotationHanlderMapping"}),"\u4f1a\u5148\u5728\u7c7b\u7ea7\u522b\u4e0a\u9009\u4e2d\u4e00\u4e2a\u63a7\u5236\u5668\uff0c\u7136\u540e\u518d\u901a\u8fc7",(0,t.jsx)(n.code,{children:"AnnotationMethodHandlerAdapter"}),"\u5b9a\u4f4d\u5230\u5177\u4f53\u8981\u8c03\u7528\u7684\u65b9\u6cd5\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] With the new support classes in Spring 3.1, the ",(0,t.jsx)(n.code,{children:"RequestMappingHandlerMapping"})," is the only place where a decision is made about which method should process the request. Think of controller methods as a collection of unique endpoints with mappings for each method derived from type and method-level ",(0,t.jsx)(n.code,{children:"@RequestMapping"})," information."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u73b0\u5728\u6709\u4e86Spring 3.1\u540e\u5f15\u5165\u7684\u8fd9\u7ec4\u65b0\u7c7b\uff0c",(0,t.jsx)(n.code,{children:"RequestMappingHandlerMapping"}),"\u6210\u4e3a\u4e86\u8fd9\u4e24\u4e2a\u51b3\u7b56\u5b9e\u9645\u53d1\u751f\u7684\u552f\u4e00\u4e00\u4e2a\u5730\u65b9\u3002\u4f60\u53ef\u4ee5\u628a\u63a7\u5236\u5668\u4e2d\u7684\u4e00\u7cfb\u5217\u5904\u7406\u65b9\u6cd5\u5f53\u6210\u662f\u4e00\u7cfb\u5217\u72ec\u7acb\u7684\u670d\u52a1\u8282\u70b9\uff0c\u6bcf\u4e2a\u4ece\u7c7b\u7ea7\u522b\u548c\u65b9\u6cd5\u7ea7\u522b\u7684",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u4e2d\u83b7\u53d6\u5230\u8db3\u591f\u8bf7\u6c421\u8def\u5f84\u6620\u5c04\u4fe1\u606f\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] This enables some new possibilities. For once a ",(0,t.jsx)(n.code,{children:"HandlerInterceptor"})," or a ",(0,t.jsx)(n.code,{children:"HandlerExceptionResolver"})," can now expect the Object-based handler to be a ",(0,t.jsx)(n.code,{children:"HandlerMethod"}),", which allows them to examine the exact method, its parameters and associated annotations. The processing for a URL no longer needs to be split across different controllers."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u8fd9\u79cd\u65b0\u7684\u5904\u7406\u65b9\u5f0f\u5e26\u6765\u4e86\u65b0\u7684\u53ef\u80fd\u6027\u3002\u4e4b\u524d\u7684",(0,t.jsx)(n.code,{children:"HandlerInterceptor"}),"\u6216",(0,t.jsx)(n.code,{children:"HandlerExceptionResolver"}),"\u73b0\u5728\u53ef\u4ee5\u786e\u5b9a\u62ff\u5230\u7684\u8fd9\u4e2a\u5904\u7406\u5668\u80af\u5b9a\u662f\u4e00\u4e2a",(0,t.jsx)(n.code,{children:"HandlerMethod"}),"\u7c7b\u578b\uff0c\u56e0\u6b64\u5b83\u80fd\u591f\u7cbe\u786e\u5730\u4e86\u89e3\u8fd9\u4e2a\u65b9\u6cd5\u7684\u6240\u6709\u4fe1\u606f\uff0c\u5305\u62ec\u5b83\u7684\u53c2\u6570\u3001\u5e94\u7528\u4e8e\u5176\u4e0a\u7684\u6ce8\u89e3\u7b49\u3002\u8fd9\u6837\uff0c\u5185\u90e8\u5bf9\u4e8e\u4e00\u4e2aURL\u7684\u5904\u7406\u6d41\u7a0b\u518d\u4e5f\u4e0d\u9700\u8981\u5206\u9694\u5230\u4e0d\u540c\u7684\u63a7\u5236\u5668\u91cc\u9762\u53bb\u6267\u884c\u4e86\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] There are also several things no longer possible: [Original] _Select a controller first with a ",(0,t.jsx)(n.code,{children:"SimpleUrlHandlerMapping"})," or ",(0,t.jsx)(n.code,{children:"BeanNameUrlHandlerMapping"})," and then narrow the method based on ",(0,t.jsx)(n.code,{children:"@RequestMapping"})," annotations. [Original] _Rely on method names as a fall-back mechanism to disambiguate between two ",(0,t.jsx)(n.code,{children:"@RequestMapping"})," methods that don\u2019t have an explicit path mapping URL path but otherwise match equally, e.g. by HTTP method. In the new support classes ",(0,t.jsx)(n.code,{children:"@RequestMapping"})," methods have to be mapped uniquely. [Original] * Have a single default method (without an explicit path mapping) with which requests are processed if no other controller method matches more concretely. In the new support classes if a matching method is not found a 404 error is raised."]}),"\n"]}),(0,t.jsx)(n.p,{children:"\u540c\u65f6\uff0c\u4e5f\u6709\u5176\u4ed6\u7684\u4e00\u4e9b\u53d8\u5316\uff0c\u6bd4\u5982\u6709\u4e9b\u4e8b\u60c5\u5c31\u6ca1\u6cd5\u8fd9\u4e48\u73a9\u513f\u4e86\uff1a"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5148\u901a\u8fc7",(0,t.jsx)(n.code,{children:"SimpleUrlHandlerMapping"}),"\u6216",(0,t.jsx)(n.code,{children:"BeanNameUrlHandlerMapping"}),"\u6765\u62ff\u5230\u8d1f\u8d23\u5904\u7406\u8bf7\u6c42\u7684\u63a7\u5236\u5668\uff0c\u7136\u540e\u901a\u8fc7",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u914d\u7f6e\u7684\u4fe1\u606f\u6765\u5b9a\u4f4d\u5230\u5177\u4f53\u7684\u5904\u7406\u65b9\u6cd5\uff1b"]}),"\n",(0,t.jsxs)(n.li,{children:["\u4f9d\u9760\u65b9\u6cd5\u540d\u79f0\u6765\u4f5c\u4e3a\u9009\u62e9\u5904\u7406\u65b9\u6cd5\u7684\u6807\u51c6\u3002\u6bd4\u5982\u8bf4\uff0c\u4e24\u4e2a\u6ce8\u89e3\u4e86",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u7684\u65b9\u6cd5\u9664\u4e86\u65b9\u6cd5\u540d\u79f0\u62e5\u6709\u5b8c\u5168\u76f8\u540c\u7684URL\u6620\u5c04\u548cHTTP\u8bf7\u6c42\u65b9\u6cd5\u3002\u5728\u65b0\u7248\u672c\u4e0b\uff0c",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u7684\u65b9\u6cd5\u5fc5\u987b\u5177\u6709\u552f\u4e00\u7684\u8bf7\u6c42\u6620\u5c04\uff1b"]}),"\n",(0,t.jsx)(n.li,{children:"\u5b9a\u4e49\u4e00\u4e2a\u9ed8\u8ba4\u65b9\u6cd5\uff08\u5373\u6ca1\u6709\u58f0\u660e\u8def\u5f84\u6620\u5c04\uff09\uff0c\u5728\u8bf7\u6c42\u8def\u5f84\u65e0\u6cd5\u88ab\u6620\u5c04\u5230\u63a7\u5236\u5668\u4e0b\u66f4\u7cbe\u786e\u7684\u65b9\u6cd5\u4e0a\u53bb\u65f6\uff0c\u4e3a\u8be5\u8bf7\u6c42\u63d0\u4f9b\u9ed8\u8ba4\u5904\u7406\u3002\u5728\u65b0\u7248\u672c\u4e2d\uff0c\u5982\u679c\u65e0\u6cd5\u4e3a\u4e00\u4e2a\u8bf7\u6c42\u627e\u5230\u5408\u9002\u7684\u5904\u7406\u65b9\u6cd5\uff0c\u90a3\u4e48\u4e00\u4e2a404\u9519\u8bef\u5c06\u88ab\u629b\u51fa\uff1b"}),"\n"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"[Original] The above features are still supported with the existing support classes. However to take advantage of new Spring MVC 3.1 features you\u2019ll need to use the new support classes."}),"\n"]}),(0,t.jsx)(n.p,{children:"\u5982\u679c\u4f7f\u7528\u539f\u6765\u7684\u7c7b\uff0c\u4ee5\u4e0a\u7684\u529f\u80fd\u8fd8\u662f\u53ef\u4ee5\u505a\u5230\u3002\u4f46\u662f\uff0c\u5982\u679c\u8981\u4eab\u53d7Spring MVC 3.1\u7248\u672c\u5e26\u6765\u7684\u65b9\u4fbf\u7279\u6027\uff0c\u4f60\u5c31\u9700\u8981\u53bb\u4f7f\u7528\u65b0\u7684\u7c7b\u3002"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"[Original] ## URI Template Patterns"}),"\n"]}),(0,t.jsx)(n.h2,{id:"uri\u6a21\u677f",children:"URI\u6a21\u677f"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] URI templates can be used for convenient access to selected parts of a URL in a ",(0,t.jsx)(n.code,{children:"@RequestMapping"})," method."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["URI\u6a21\u677f\u53ef\u4ee5\u4e3a\u5feb\u901f\u8bbf\u95ee",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u4e2d\u6307\u5b9a\u7684URL\u7684\u4e00\u4e2a\u7279\u5b9a\u7684\u90e8\u5206\u63d0\u4f9b\u5f88\u5927\u7684\u4fbf\u5229\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] A URI Template is a URI-like string, containing one or more variable names. When you substitute values for these variables, the template becomes a URI. The proposed RFC for URI Templates defines how a URI is parameterized. For example, the URI Template ",(0,t.jsx)(n.code,{children:"http://www.example.com/users/{userId}"})," contains the variable userId. Assigning the value fred to the variable yields ",(0,t.jsx)(n.code,{children:"http://www.example.com/users/fred"}),"."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["URI\u6a21\u677f\u662f\u4e00\u4e2a\u7c7b\u4f3c\u4e8eURI\u7684\u5b57\u7b26\u4e32\uff0c\u53ea\u4e0d\u8fc7\u5176\u4e2d\u5305\u542b\u4e86\u4e00\u4e2a\u6216\u591a\u4e2a\u7684\u53d8\u91cf\u540d\u3002\u5f53\u4f60\u4f7f\u7528\u5b9e\u9645\u7684\u503c\u53bb\u586b\u5145\u8fd9\u4e9b\u53d8\u91cf\u540d\u7684\u65f6\u5019\uff0c\u6a21\u677f\u5c31\u9000\u5316\u6210\u4e86\u4e00\u4e2aURI\u3002\u5728URI\u6a21\u677f\u7684RFC\u63d0\u8bae\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2aURI\u662f\u5982\u4f55\u8fdb\u884c\u53c2\u6570\u5316\u7684\u3002\u6bd4\u5982\u8bf4\uff0c\u4e00\u4e2a\u8fd9\u4e2aURI\u6a21\u677f",(0,t.jsx)(n.code,{children:"http://www.example.com/users/{userId}"}),"\u5c31\u5305\u542b\u4e86\u4e00\u4e2a\u53d8\u91cf\u540d_userId_\u3002\u5c06\u503c_fred_\u8d4b\u7ed9\u8fd9\u4e2a\u53d8\u91cf\u540d\u540e\uff0c\u5b83\u5c31\u53d8\u6210\u4e86\u4e00\u4e2aURI\uff1a",(0,t.jsx)(n.code,{children:"http://www.example.com/users/fred"}),"\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] In Spring MVC you can use the ",(0,t.jsx)(n.code,{children:"@PathVariable"})," annotation on a method argument to bind it to the value of a URI template variable:"]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u5728Spring MVC\u4e2d\u4f60\u53ef\u4ee5\u5728\u65b9\u6cd5\u53c2\u6570\u4e0a\u4f7f\u7528",(0,t.jsx)(n.code,{children:"@PathVariable"}),"\u6ce8\u89e3\uff0c\u5c06\u5176\u4e0eURI\u6a21\u677f\u4e2d\u7684\u53c2\u6570\u7ed1\u5b9a\u8d77\u6765\uff1a"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@RequestMapping(path="/owners/{ownerId}", method=RequestMethod.GET)\npublic String findOwner(@PathVariable String ownerId, Model model) {\n    Owner owner = ownerService.findOwner(ownerId);\n    model.addAttribute("owner", owner);\n    return "displayOwner";\n}\n\n'})}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:['[Original] The URI Template "',(0,t.jsx)(n.code,{children:"/owners/{ownerId}"}),'" specifies the variable name ',(0,t.jsx)(n.code,{children:"ownerId"}),". When the controller handles this request, the value of ",(0,t.jsx)(n.code,{children:"ownerId"})," is set to the value found in the appropriate part of the URI. For example, when a request comes in for ",(0,t.jsx)(n.code,{children:"/owners/fred"}),", the value of ",(0,t.jsx)(n.code,{children:"ownerId"})," is ",(0,t.jsx)(n.code,{children:"fred"}),"."]}),"\n"]}),(0,t.jsxs)(n.p,{children:['URI\u6a21\u677f"',(0,t.jsx)(n.code,{children:"/owners/{ownerId}"}),'"\u6307\u5b9a\u4e86\u4e00\u4e2a\u53d8\u91cf\uff0c\u540d\u4e3a',(0,t.jsx)(n.code,{children:"ownerId"}),"\u3002\u5f53\u63a7\u5236\u5668\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u7684\u65f6\u5019\uff0c",(0,t.jsx)(n.code,{children:"ownerId"}),"\u7684\u503c\u5c31\u4f1a\u88abURI\u6a21\u677f\u4e2d\u5bf9\u5e94\u90e8\u5206\u7684\u503c\u6240\u586b\u5145\u3002\u6bd4\u5982\u8bf4\uff0c\u5982\u679c\u8bf7\u6c42\u7684URI\u662f",(0,t.jsx)(n.code,{children:"/owners/fred"}),"\uff0c\u6b64\u65f6\u53d8\u91cf",(0,t.jsx)(n.code,{children:"ownerId"}),"\u7684\u503c\u5c31\u662f",(0,t.jsx)(n.code,{children:"fred"}),". `"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["\u4e3a\u4e86\u5904\u7406",(0,t.jsx)(n.code,{children:"@PathVariables"}),"\u6ce8\u89e3\uff0cSpring MVC\u5fc5\u987b\u901a\u8fc7\u53d8\u91cf\u540d\u6765\u627e\u5230URI\u6a21\u677f\u4e2d\u76f8\u5bf9\u5e94\u7684\u53d8\u91cf\u3002\u4f60\u53ef\u4ee5\u5728\u6ce8\u89e3\u4e2d\u76f4\u63a5\u58f0\u660e\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@RequestMapping(path="/owners/{ownerId}}", method=RequestMethod.GET)\npublic String findOwner(@PathVariable("ownerId") String theOwner, Model model) {\n    // \u5177\u4f53\u7684\u65b9\u6cd5\u4ee3\u7801\u2026\n}\n\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u6216\u8005\uff0c\u5982\u679cURI\u6a21\u677f\u4e2d\u7684\u53d8\u91cf\u540d\u4e0e\u65b9\u6cd5\u7684\u53c2\u6570\u540d\u662f\u76f8\u540c\u7684\uff0c\u5219\u4f60\u53ef\u4ee5\u4e0d\u5fc5\u518d\u6307\u5b9a\u4e00\u6b21\u3002\u53ea\u8981\u4f60\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u7559\u4e0bdebug\u4fe1\u606f\uff0cSpring MVC\u5c31\u53ef\u4ee5\u81ea\u52a8\u5339\u914dURL\u6a21\u677f\u4e2d\u4e0e\u65b9\u6cd5\u53c2\u6570\u540d\u76f8\u540c\u7684\u53d8\u91cf\u540d\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@RequestMapping(path="/owners/{ownerId}", method=RequestMethod.GET)\npublic String findOwner(@PathVariable String ownerId, Model model) {\n    // \u5177\u4f53\u7684\u65b9\u6cd5\u4ee3\u7801\u2026\n}\n\n'})}),"\n",(0,t.jsxs)(n.p,{children:["[Original] A method can have any number of ",(0,t.jsx)(n.code,{children:"@PathVariable"})," annotations:"]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u4e00\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u62e5\u6709\u4efb\u610f\u6570\u91cf\u7684",(0,t.jsx)(n.code,{children:"@PathVariable"}),"\u6ce8\u89e3\uff1a"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@RequestMapping(path="/owners/{ownerId}/pets/{petId}", method=RequestMethod.GET)\npublic String findPet(@PathVariable String ownerId, @PathVariable String petId, Model model) {\n    Owner owner = ownerService.findOwner(ownerId);\n    Pet pet = owner.getPet(petId);\n    model.addAttribute("pet", pet);\n    return "displayPet";\n}\n\n'})}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] When a ",(0,t.jsx)(n.code,{children:"@PathVariable"})," annotation is used on a ",(0,t.jsx)(n.code,{children:"Map<String, String>"})," argument, the map is populated with all URI template variables."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u5f53",(0,t.jsx)(n.code,{children:"@PathVariable"}),"\u6ce8\u89e3\u88ab\u5e94\u7528\u4e8e",(0,t.jsx)(n.code,{children:"Map<String, String>"}),"\u7c7b\u578b\u7684\u53c2\u6570\u4e0a\u65f6\uff0c\u6846\u67b6\u4f1a\u4f7f\u7528\u6240\u6709URI\u6a21\u677f\u53d8\u91cf\u6765\u586b\u5145\u8fd9\u4e2amap\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] A URI template can be assembled from type and path level ",(0,t.jsx)(n.em,{children:"@RequestMapping"})," annotations. As a result the ",(0,t.jsx)(n.code,{children:"findPet()"})," method can be invoked with a URL such as ",(0,t.jsx)(n.code,{children:"/owners/42/pets/21"}),"."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["URI\u6a21\u677f\u53ef\u4ee5\u4ece\u7c7b\u7ea7\u522b\u548c\u65b9\u6cd5\u7ea7\u522b\u7684 ",(0,t.jsx)(n.em,{children:"@RequestMapping"})," \u6ce8\u89e3\u83b7\u53d6\u6570\u636e\u3002\u56e0\u6b64\uff0c\u50cf\u8fd9\u6837\u7684",(0,t.jsx)(n.code,{children:"findPet()"}),"\u65b9\u6cd5\u53ef\u4ee5\u88ab\u7c7b\u4f3c\u4e8e",(0,t.jsx)(n.code,{children:"/owners/42/pets/21"}),"\u8fd9\u6837\u7684URL\u8def\u7531\u5e76\u8c03\u7528\u5230\uff1a"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'_@Controller_\n@RequestMapping("/owners/{ownerId}")\npublic class RelativePathUriTemplateController {\n\n    @RequestMapping("/pets/{petId}")\n    public void findPet(_@PathVariable_ String ownerId, _@PathVariable_ String petId, Model model) {\n        // \u65b9\u6cd5\u5b9e\u73b0\u4f53\u8fd9\u91cc\u5ffd\u7565\n    }\n\n}\n\n'})}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] A ",(0,t.jsx)(n.code,{children:"@PathVariable"})," argument can be of ",(0,t.jsx)(n.em,{children:"any simple type"})," such as int, long, Date, etc. Spring automatically converts to the appropriate type or throws a ",(0,t.jsx)(n.code,{children:"TypeMismatchException"})," if it fails to do so. You can also register support for parsing additional data types. See ",(0,t.jsx)(n.a,{href:"https://linesh.gitbooks.io/spring-mvc-documentation-linesh-translation/content/publish/21-3/mvc.html#mvc-ann-typeconversion",children:'the section called "Method Parameters And Type Conversion"'})," and ",(0,t.jsx)(n.a,{href:"https://linesh.gitbooks.io/spring-mvc-documentation-linesh-translation/content/publish/21-3/mvc.html#mvc-ann-webdatabinder",children:'the section called "Customizing WebDataBinder initialization"'}),"."]}),"\n"]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"@PathVariable"}),"\u53ef\u4ee5\u88ab\u5e94\u7528\u4e8e\u6240\u6709 ",(0,t.jsx)(n.em,{children:"\u7b80\u5355\u7c7b\u578b"})," \u7684\u53c2\u6570\u4e0a\uff0c\u6bd4\u5982int\u3001long\u3001Date\u7b49\u7c7b\u578b\u3002Spring\u4f1a\u81ea\u52a8\u5730\u5e2e\u4f60\u628a\u53c2\u6570\u8f6c\u5316\u6210\u5408\u9002\u7684\u7c7b\u578b\uff0c\u5982\u679c\u8f6c\u6362\u5931\u8d25\uff0c\u5c31\u629b\u51fa\u4e00\u4e2a",(0,t.jsx)(n.code,{children:"TypeMismatchException"}),"\u3002\u5982\u679c\u4f60\u9700\u8981\u5904\u7406\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u4e5f\u53ef\u4ee5\u6ce8\u518c\u81ea\u5df1\u7684\u7c7b\u3002\u82e5\u9700\u8981\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\u53ef\u4ee5\u53c2\u8003",(0,t.jsx)(n.a,{href:"http://docs.spring.io/spring-framework/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-typeconversion",children:"\u201c\u65b9\u6cd5\u53c2\u6570\u4e0e\u7c7b\u578b\u8f6c\u6362\u201d\u4e00\u8282"}),"\u548c",(0,t.jsx)(n.a,{href:"http://docs.spring.io/spring-framework/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-webdatabinder",children:"\u201c\u5b9a\u5236WebDataBinder\u521d\u59cb\u5316\u8fc7\u7a0b\u201d\u4e00\u8282"})]}),(0,t.jsx)(n.h2,{id:"\u5e26\u6b63\u5219\u8868\u8fbe\u5f0f\u7684uri\u6a21\u677f",children:"\u5e26\u6b63\u5219\u8868\u8fbe\u5f0f\u7684URI\u6a21\u677f"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] Sometimes you need more precision in defining URI template variables. Consider the URL ",(0,t.jsx)(n.code,{children:'"/spring-web/spring-web-3.0.5.jar"'}),". How do you break it down into multiple parts?"]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u6709\u65f6\u5019\u4f60\u53ef\u80fd\u9700\u8981\u66f4\u51c6\u786e\u5730\u63cf\u8ff0\u4e00\u4e2aURI\u6a21\u677f\u7684\u53d8\u91cf\uff0c\u6bd4\u5982\u8bf4\u8fd9\u4e2aURL\uff1a",(0,t.jsx)(n.code,{children:'"/spring-web/spring-web-3.0.5.jar'}),"\u3002\u4f60\u8981\u600e\u4e48\u628a\u5b83\u5206\u89e3\u6210\u51e0\u4e2a\u6709\u610f\u4e49\u7684\u90e8\u5206\u5462\uff1f"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] The ",(0,t.jsx)(n.code,{children:"@RequestMapping"})," annotation supports the use of regular expressions in URI template variables. The syntax is ",(0,t.jsx)(n.code,{children:"{varName:regex}"})," where the first part defines the variable name and the second - the regular expression.For example:"]}),"\n"]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u652f\u6301\u4f60\u5728URI\u6a21\u677f\u53d8\u91cf\u4e2d\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u8bed\u6cd5\u662f",(0,t.jsx)(n.code,{children:"{varName:regex}"}),"\uff0c\u5176\u4e2d\u7b2c\u4e00\u90e8\u5206\u5b9a\u4e49\u4e86\u53d8\u91cf\u540d\uff0c\u7b2c\u4e8c\u90e8\u5206\u5c31\u662f\u4f60\u6240\u8981\u5e94\u7528\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u6bd4\u5982\u4e0b\u9762\u7684\u4ee3\u7801\u6837\u4f8b\uff1a"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@RequestMapping("/spring-web/{symbolicName:[a-z-]+}-{version:\\\\d\\\\.\\\\d\\\\.\\\\d}{extension:\\\\.[a-z]+}")\n    public void handle(@PathVariable String version, @PathVariable String extension) {\n        // \u4ee3\u7801\u90e8\u5206\u7701\u7565...\n    }\n}\n\n'})}),(0,t.jsx)(n.h2,{id:"path-patterns\u4e0d\u597d\u7ffb\u5bb9\u6613\u6389\u97f5\u5473",children:"Path Patterns\uff08\u4e0d\u597d\u7ffb\uff0c\u5bb9\u6613\u6389\u97f5\u5473\uff09"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] In addition to URI templates, the ",(0,t.jsx)(n.code,{children:"@RequestMapping"})," annotation also supports Ant-style path patterns (for example, ",(0,t.jsx)(n.code,{children:"/myPath/*.do"}),"). A combination of URI template variables and Ant-style globs is also supported (e.g. ",(0,t.jsx)(n.code,{children:"/owners/*/pets/{petId}"}),")."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u9664\u4e86URI\u6a21\u677f\u5916\uff0c",(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u8fd8\u652f\u6301Ant\u98ce\u683c\u7684\u8def\u5f84\u6a21\u5f0f\uff08\u5982",(0,t.jsx)(n.code,{children:"/myPath/*.do"}),"\u7b49\uff09\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u8fd8\u53ef\u4ee5\u628aURI\u6a21\u677f\u53d8\u91cf\u548cAnt\u98ce\u683c\u7684glob\u7ec4\u5408\u8d77\u6765\u4f7f\u7528\uff08\u6bd4\u5982",(0,t.jsx)(n.code,{children:"/owners/*/pets/{petId}"}),"\u8fd9\u6837\u7684\u7528\u6cd5\u7b49\uff09\u3002"]}),(0,t.jsx)(n.h2,{id:"\u8def\u5f84\u6837\u5f0f\u7684\u5339\u914dpath-pattern-comparison",children:"\u8def\u5f84\u6837\u5f0f\u7684\u5339\u914d(Path Pattern Comparison)"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"[Original] When a URL matches multiple patterns, a sort is used to find the most specific match."}),"\n"]}),(0,t.jsx)(n.p,{children:"\u5f53\u4e00\u4e2aURL\u540c\u65f6\u5339\u914d\u591a\u4e2a\u6a21\u677f\uff08pattern\uff09\u65f6\uff0c\u6211\u4eec\u5c06\u9700\u8981\u4e00\u4e2a\u7b97\u6cd5\u6765\u51b3\u5b9a\u5176\u4e2d\u6700\u5339\u914d\u7684\u4e00\u4e2a\u3002"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] A pattern with a lower count of URI variables and wild cards is considered more specific. For example ",(0,t.jsx)(n.code,{children:"/hotels/{hotel}/*"})," has 1 URI variable and 1 wild card and is considered more specific than ",(0,t.jsx)(n.code,{children:"/hotels/{hotel}/**"})," which as 1 URI variable and 2 wild cards."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["URI\u6a21\u677f\u53d8\u91cf\u7684\u6570\u76ee\u548c\u901a\u914d\u7b26\u6570\u91cf\u7684\u603b\u548c\u6700\u5c11\u7684\u90a3\u4e2a\u8def\u5f84\u6a21\u677f\u66f4\u51c6\u786e\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c",(0,t.jsx)(n.code,{children:"/hotels/{hotel}/*"}),"\u8fd9\u4e2a\u8def\u5f84\u62e5\u6709\u4e00\u4e2aURI\u53d8\u91cf\u548c\u4e00\u4e2a\u901a\u914d\u7b26\uff0c\u800c",(0,t.jsx)(n.code,{children:"/hotels/{hotel}/**"}),"\u8fd9\u4e2a\u8def\u5f84\u5219\u62e5\u6709\u4e00\u4e2aURI\u53d8\u91cf\u548c\u4e24\u4e2a\u901a\u914d\u7b26\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u8ba4\u4e3a\u524d\u8005\u662f\u66f4\u51c6\u786e\u7684\u8def\u5f84\u6a21\u677f\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] If two patterns have the same count, the one that is longer is considered more specific. For example ",(0,t.jsx)(n.code,{children:"/foo/bar*"})," is longer and considered more specific than ",(0,t.jsx)(n.code,{children:"/foo/*"}),"."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u5982\u679c\u4e24\u4e2a\u6a21\u677f\u7684URI\u6a21\u677f\u6570\u91cf\u548c\u901a\u914d\u7b26\u6570\u91cf\u603b\u548c\u4e00\u81f4\uff0c\u5219\u8def\u5f84\u66f4\u957f\u7684\u90a3\u4e2a\u6a21\u677f\u66f4\u51c6\u786e\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c",(0,t.jsx)(n.code,{children:"/foo/bar*"}),"\u5c31\u88ab\u8ba4\u4e3a\u6bd4",(0,t.jsx)(n.code,{children:"/foo/*"}),"\u66f4\u51c6\u786e\uff0c\u56e0\u4e3a\u524d\u8005\u7684\u8def\u5f84\u66f4\u957f\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] When two patterns have the same count and length, the pattern with fewer wild cards is considered more specific. For example ",(0,t.jsx)(n.code,{children:"/hotels/{hotel}"})," is more specific than ",(0,t.jsx)(n.code,{children:"/hotels/*"}),"."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u5982\u679c\u4e24\u4e2a\u6a21\u677f\u7684\u6570\u91cf\u548c\u957f\u5ea6\u5747\u4e00\u81f4\uff0c\u5219\u90a3\u4e2a\u5177\u6709\u66f4\u5c11\u901a\u914d\u7b26\u7684\u6a21\u677f\u662f\u66f4\u52a0\u51c6\u786e\u7684\u3002\u6bd4\u5982\uff0c",(0,t.jsx)(n.code,{children:"/hotels/{hotel}"}),"\u5c31\u6bd4",(0,t.jsx)(n.code,{children:"/hotels/*"}),"\u66f4\u7cbe\u786e\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"[Original] There are also some additional special rules:"}),"\n"]}),(0,t.jsx)(n.p,{children:"\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u89c4\u5219\uff1a"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] _The ",(0,t.jsx)(n.strong,{children:"default mapping pattern"})," ",(0,t.jsx)(n.code,{children:"/*_"}),"is less specific than any other pattern. For example",(0,t.jsx)(n.code,{children:"/api/{a}/{b}/{c}"})," is more specific."]}),"\n",(0,t.jsxs)(n.p,{children:["[Original] _A ",(0,t.jsx)(n.strong,{children:"prefix pattern"})," such as ",(0,t.jsx)(n.code,{children:"/public/*_"}),"is less specific than any other pattern that doesn't contain double wildcards. For example",(0,t.jsx)(n.code,{children:"/public/path3/{a}/{b}/{c}"})," is more specific."]}),"\n"]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u9ed8\u8ba4\u7684\u901a\u914d\u6a21\u5f0f"}),(0,t.jsx)(n.code,{children:"/**"}),"\u6bd4\u5176\u4ed6\u6240\u6709\u7684\u6a21\u5f0f\u90fd\u66f4\u201c\u4e0d\u51c6\u786e\u201d\u3002\u6bd4\u65b9\u8bf4\uff0c",(0,t.jsx)(n.code,{children:"/api/{a}/{b}/{c}"}),"\u5c31\u6bd4\u9ed8\u8ba4\u7684\u901a\u914d\u6a21\u5f0f",(0,t.jsx)(n.code,{children:"/**"}),"\u8981\u66f4\u51c6\u786e"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u524d\u7f00\u901a\u914d"}),"\uff08\u6bd4\u5982",(0,t.jsx)(n.code,{children:"/public/**"}),")\u88ab\u8ba4\u4e3a\u6bd4\u5176\u4ed6\u4efb\u4f55\u4e0d\u5305\u62ec\u53cc\u901a\u914d\u7b26\u7684\u6a21\u5f0f\u66f4\u4e0d\u51c6\u786e\u3002\u6bd4\u5982\u8bf4\uff0c",(0,t.jsx)(n.code,{children:"/public/path3/{a}/{b}/{c}"}),"\u5c31\u6bd4",(0,t.jsx)(n.code,{children:"/public/**"}),"\u66f4\u51c6\u786e"]}),"\n"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] For the full details see ",(0,t.jsx)(n.code,{children:"AntPatternComparator"})," in ",(0,t.jsx)(n.code,{children:"AntPathMatcher"}),". Note that the PathMatcher can be customized (see ",(0,t.jsx)(n.a,{href:"https://linesh.gitbooks.io/spring-mvc-documentation-linesh-translation/content/publish/21-3/mvc.html#mvc-config-path-matching",children:'Section 21.16.11, "Path Matching"'})," in the section on configuring Spring MVC)."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u66f4\u591a\u7684\u7ec6\u8282\u8bf7\u53c2\u8003\u8fd9\u4e24\u4e2a\u7c7b\uff1a",(0,t.jsx)(n.code,{children:"AntPatternComparator"}),"\u548c",(0,t.jsx)(n.code,{children:"AntPathMatcher"}),"\u3002\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0cPathMatcher\u7c7b\u662f\u53ef\u4ee5\u914d\u7f6e\u7684\uff08\u89c1\u201c\u914d\u7f6eSpring MVC\u201d\u4e00\u8282\u4e2d\u7684",(0,t.jsx)(n.a,{href:"https://www.w3cschool.cn/spring_mvc_documentation_linesh_translation/spring_mvc_documentation_linesh_translation-cgvo27t2.html",children:"\u8def\u5f84\u7684\u5339\u914d"}),"\u4e00\u8282)\u3002"]}),(0,t.jsx)(n.h2,{id:"\u5e26\u5360\u4f4d\u7b26\u7684\u8def\u5f84\u6a21\u5f0fpath-patterns",children:"\u5e26\u5360\u4f4d\u7b26\u7684\u8def\u5f84\u6a21\u5f0f\uff08path patterns\uff09"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] Patterns in ",(0,t.jsx)(n.code,{children:"@RequestMapping"})," annotations support ",(0,t.jsx)(n.code,{children:"${\u2026}"})," placeholders against local properties and/or system properties and environment variables. This may be useful in cases where the path a controller is mapped to may need to be customized through configuration. For more information on placeholders, see the javadocs of the ",(0,t.jsx)(n.code,{children:"PropertyPlaceholderConfigurer"})," class."]}),"\n"]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"@RequestMapping"}),"\u6ce8\u89e3\u652f\u6301\u5728\u8def\u5f84\u4e2d\u4f7f\u7528\u5360\u4f4d\u7b26\uff0c\u4ee5\u53d6\u5f97\u4e00\u4e9b\u672c\u5730\u914d\u7f6e\u3001\u7cfb\u7edf\u914d\u7f6e\u3001\u73af\u5883\u53d8\u91cf\u7b49\u3002\u8fd9\u4e2a\u7279\u6027\u6709\u65f6\u5f88\u6709\u7528\uff0c\u6bd4\u5982\u8bf4\u63a7\u5236\u5668\u7684\u6620\u5c04\u8def\u5f84\u9700\u8981\u901a\u8fc7\u914d\u7f6e\u6765\u5b9a\u5236\u7684\u573a\u666f\u3002\u5982\u679c\u60f3\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u5360\u4f4d\u7b26\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u53c2\u8003",(0,t.jsx)(n.code,{children:"PropertyPlaceholderConfigurer"}),"\u8fd9\u4e2a\u7c7b\u7684\u6587\u6863\u3002"]}),(0,t.jsx)(n.h2,{id:"suffix-pattern-matching",children:"Suffix Pattern Matching"}),(0,t.jsx)(n.h2,{id:"\u540e\u7f00\u6a21\u5f0f\u5339\u914d",children:"\u540e\u7f00\u6a21\u5f0f\u5339\u914d"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] By default Spring MVC performs ",(0,t.jsx)(n.code,{children:'".*"'})," suffix pattern matching so that a controller mapped to ",(0,t.jsx)(n.code,{children:"/person"})," is also implicitly mapped to ",(0,t.jsx)(n.code,{children:"/person.*"}),". This makes it easy to request different representations of a resource through the URL path (e.g. ",(0,t.jsx)(n.code,{children:"/person.pdf"}),", ",(0,t.jsx)(n.code,{children:"/person.xml"}),")."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["Spring MVC\u9ed8\u8ba4\u91c7\u7528",(0,t.jsx)(n.code,{children:'".*"'}),"\u7684\u540e\u7f00\u6a21\u5f0f\u5339\u914d\u6765\u8fdb\u884c\u8def\u5f84\u5339\u914d\uff0c\u56e0\u6b64\uff0c\u4e00\u4e2a\u6620\u5c04\u5230",(0,t.jsx)(n.code,{children:"/person"}),"\u8def\u5f84\u7684\u63a7\u5236\u5668\u4e5f\u4f1a\u9690\u5f0f\u5730\u88ab\u6620\u5c04\u5230",(0,t.jsx)(n.code,{children:"/person.*"}),"\u3002\u8fd9\u4f7f\u5f97\u901a\u8fc7URL\u6765\u8bf7\u6c42\u540c\u4e00\u8d44\u6e90\u6587\u4ef6\u7684\u4e0d\u540c\u683c\u5f0f\u53d8\u5f97\u66f4\u7b80\u5355\uff08\u6bd4\u5982",(0,t.jsx)(n.code,{children:"/person.pdf"}),"\uff0c",(0,t.jsx)(n.code,{children:"/person.xml"}),"\uff09\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] Suffix pattern matching can be turned off or restricted to a set of path extensions explicitly registered for content negotiation purposes. This is generally recommended to minimize ambiguity with common request mappings such as ",(0,t.jsx)(n.code,{children:"/person/{id}"})," where a dot might not represent a file extension, e.g. ",(0,t.jsx)(n.code,{children:"/person/joe@email.com"})," vs ",(0,t.jsx)(n.code,{children:"/person/joe@email.com.json)"}),". Furthermore as explained in the note below suffix pattern matching as well as content negotiation may be used in some circumstances to attempt malicious attacks and there are good reasons to restrict them meaningfully."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u5173\u95ed\u9ed8\u8ba4\u7684\u540e\u7f00\u6a21\u5f0f\u5339\u914d\uff0c\u6216\u8005\u663e\u5f0f\u5730\u5c06\u8def\u5f84\u540e\u7f00\u9650\u5b9a\u5230\u4e00\u4e9b\u7279\u5b9a\u683c\u5f0f\u4e0afor content negotiation purpose\u3002\u6211\u4eec\u63a8\u8350\u8fd9\u6837\u505a\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u6620\u5c04\u8bf7\u6c42\u65f6\u53ef\u4ee5\u5e26\u6765\u7684\u4e00\u4e9b\u4e8c\u4e49\u6027\uff0c\u6bd4\u5982\u8bf7\u6c42\u4ee5\u4e0b\u8def\u5f84",(0,t.jsx)(n.code,{children:"/person/{id}"}),"\u65f6\uff0c\u8def\u5f84\u4e2d\u7684\u70b9\u53f7\u540e\u9762\u5e26\u7684\u53ef\u80fd\u4e0d\u662f\u63cf\u8ff0\u5185\u5bb9\u683c\u5f0f\uff0c\u6bd4\u5982",(0,t.jsx)(n.code,{children:"/person/joe@email.com"})," vs ",(0,t.jsx)(n.code,{children:"/person/joe@email.com.json"}),"\u3002\u800c\u4e14\u6b63\u5982\u4e0b\u9762\u9a6c\u4e0a\u8981\u63d0\u5230\u7684\uff0c\u540e\u7f00\u6a21\u5f0f\u901a\u914d\u4ee5\u53ca\u5185\u5bb9\u534f\u5546\u6709\u65f6\u53ef\u80fd\u4f1a\u88ab\u9ed1\u5ba2\u7528\u6765\u8fdb\u884c\u653b\u51fb\uff0c\u56e0\u6b64\uff0c\u5bf9\u540e\u7f00\u901a\u914d\u8fdb\u884c\u6709\u610f\u4e49\u7684\u9650\u5b9a\u662f\u6709\u597d\u5904\u7684\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] See ",(0,t.jsx)(n.a,{href:"https://linesh.gitbooks.io/spring-mvc-documentation-linesh-translation/content/publish/21-3/mvc.html#mvc-config-path-matching",children:'Section 21.16.11, "Path Matching"'})," for suffix pattern matching configuration and also ",(0,t.jsx)(n.a,{href:"https://linesh.gitbooks.io/spring-mvc-documentation-linesh-translation/content/publish/21-3/mvc.html#mvc-config-content-negotiation",children:'Section 21.16.6, "Content Negotiation"'})," for content negotiation configuration."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u5173\u4e8e\u540e\u7f00\u6a21\u5f0f\u5339\u914d\u7684\u914d\u7f6e\u95ee\u9898\uff0c\u53ef\u4ee5\u53c2\u8003",(0,t.jsx)(n.a,{href:"https://www.w3cschool.cn/spring_mvc_documentation_linesh_translation/spring_mvc_documentation_linesh_translation-cgvo27t2.html",children:"Spring MVC\u8def\u5f84\u5339\u914d\u914d\u7f6e"}),"\uff1b\u5173\u4e8e\u5185\u5bb9\u534f\u5546\u7684\u914d\u7f6e\u95ee\u9898\uff0c\u53ef\u4ee5\u53c2\u8003",(0,t.jsx)(n.a,{href:"https://www.w3cschool.cn/spring_mvc_documentation_linesh_translation/spring_mvc_documentation_linesh_translation-h8br27sx.html",children:'Spring MVC \u5185\u5bb9\u534f\u5546"'}),"\u7684\u5185\u5bb9\u3002"]}),(0,t.jsx)(n.h2,{id:"\u540e\u7f00\u6a21\u5f0f\u5339\u914d\u4e0erfd",children:"\u540e\u7f00\u6a21\u5f0f\u5339\u914d\u4e0eRFD"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] Reflected file download (RFD) attack was first described in a ",(0,t.jsx)(n.a,{href:"https://www.trustwave.com/Resources/SpiderLabs-Blog/Reflected-File-Download---A-New-Web-Attack-Vector/",children:"paper by Trustwave"})," in 2014. The attack is similar to XSS in that it relies on input (e.g. query parameter, URI variable) being reflected in the response. However instead of inserting JavaScript into HTML, an RFD attack relies on the browser switching to perform a download and treating the response as an executable script if double-clicked based on the file extension (e.g. .bat, .cmd)."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["RFD(Reflected file download)\u653b\u51fb\u6700\u5148\u662f2014\u5e74\u5728",(0,t.jsx)(n.a,{href:"https://www.trustwave.com/Resources/SpiderLabs-Blog/Reflected-File-Download---A-New-Web-Attack-Vector/",children:"Trustwave\u7684\u4e00\u7bc7\u8bba\u6587"}),"\u4e2d\u88ab\u63d0\u51fa\u7684\u3002\u5b83\u4e0eXSS\u653b\u51fb\u6709\u4e9b\u76f8\u4f3c\uff0c\u56e0\u4e3a\u8fd9\u79cd\u653b\u51fb\u65b9\u5f0f\u4e5f\u4f9d\u8d56\u4e8e\u67d0\u4e9b\u7279\u5f81\uff0c\u5373\u9700\u8981\u4f60\u7684\u8f93\u5165\uff08\u6bd4\u5982\u67e5\u8be2\u53c2\u6570\uff0cURI\u53d8\u91cf\u7b49\uff09\u7b49\u4e5f\u5728\u8f93\u51fa\uff08response\uff09\u4e2d\u4ee5\u67d0\u79cd\u5f62\u5f0f\u51fa\u73b0\u3002\u4e0d\u540c\u7684\u662f\uff0cRFD\u653b\u51fb\u5e76\u4e0d\u662f\u901a\u8fc7\u5728HTML\u4e2d\u5199\u5165JavaScript\u4ee3\u7801\u8fdb\u884c\uff0c\u800c\u662f\u4f9d\u8d56\u4e8e\u6d4f\u89c8\u5668\u6765\u8df3\u8f6c\u5230\u4e0b\u8f7d\u9875\u9762\uff0c\u5e76\u628a\u7279\u5b9a\u683c\u5f0f\uff08\u6bd4\u5982.bat\uff0c.cmd\u7b49\uff09\u7684response\u5f53\u6210\u662f\u53ef\u6267\u884c\u811a\u672c\uff0c\u53cc\u51fb\u5b83\u5c31\u4f1a\u6267\u884c\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] In Spring MVC ",(0,t.jsx)(n.code,{children:"@ResponseBody"})," and ",(0,t.jsx)(n.code,{children:"ResponseEntity"})," methods are at risk because they can render different content types which clients can request including via URL path extensions. Note however that neither disabling suffix pattern matching nor disabling the use of path extensions for content negotiation purposes alone are effective at preventing RFD attacks."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["Spring MVC\u7684",(0,t.jsx)(n.code,{children:"@ResponseBody"}),"\u548c",(0,t.jsx)(n.code,{children:"ResponseEntity"}),"\u65b9\u6cd5\u662f\u6709\u98ce\u9669\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u4f1a\u6839\u636e\u5ba2\u6237\u7684\u8bf7\u6c42\u2014\u2014\u5305\u62ecURL\u7684\u8def\u5f84\u540e\u7f00\uff0c\u6765\u6e32\u67d3\u4e0d\u540c\u7684\u5185\u5bb9\u7c7b\u578b\u3002\u56e0\u6b64\uff0c\u7981\u7528\u540e\u7f00\u6a21\u5f0f\u5339\u914d\u6216\u8005\u7981\u7528\u4ec5\u4e3a\u5185\u5bb9\u534f\u5546\u5f00\u542f\u7684\u8def\u5f84\u6587\u4ef6\u540e\u7f00\u540d\u643a\u5e26\uff0c\u90fd\u662f\u9632\u8303RFD\u653b\u51fb\u7684\u6709\u6548\u65b9\u5f0f\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] For comprehensive protection against RFD, prior to rendering the response body Spring MVC adds a ",(0,t.jsx)(n.code,{children:"Content-Disposition:inline;filename=f.txt"})," header to suggest a fixed and safe download file filename. This is done only if the URL path contains a file extension that is neither whitelisted nor explicitly registered for content negotiation purposes. However it may potentially have side effects when URLs are typed directly into a browser."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u82e5\u8981\u5f00\u542f\u5bf9RFD\u66f4\u9ad8\u7ea7\u7684\u4fdd\u62a4\u6a21\u5f0f\uff0c\u53ef\u4ee5\u5728Spring MVC\u6e32\u67d3\u5f00\u59cb\u8bf7\u6c42\u6b63\u6587\u4e4b\u524d\uff0c\u5728\u8bf7\u6c42\u5934\u4e2d\u589e\u52a0\u4e00\u884c\u914d\u7f6e",(0,t.jsx)(n.code,{children:"Content-Disposition:inline;filename=f.txt"}),"\uff0c\u6307\u5b9a\u56fa\u5b9a\u7684\u4e0b\u8f7d\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u3002\u8fd9\u4ec5\u5728URL\u8def\u5f84\u4e2d\u5305\u542b\u4e86\u4e00\u4e2a\u6587\u4ef6\u7b26\u5408\u4ee5\u4e0b\u7279\u5f81\u7684\u62d3\u5c55\u540d\u65f6\u9002\u7528\uff1a\u8be5\u6269\u5c55\u540d\u65e2\u4e0d\u5728\u4fe1\u4efb\u5217\u8868\uff08\u767d\u540d\u5355\uff09\u4e2d\uff0c\u4e5f\u6ca1\u6709\u88ab\u663e\u5f0f\u5730\u88ab\u6ce8\u518c\u4e8e\u5185\u5bb9\u534f\u5546\u65f6\u4f7f\u7528\u3002\u5e76\u4e14\u8fd9\u79cd\u505a\u6cd5\u8fd8\u53ef\u4ee5\u6709\u4e00\u4e9b\u526f\u4f5c\u7528\uff0c\u6bd4\u5982\uff0c\u5f53URL\u662f\u901a\u8fc7\u6d4f\u89c8\u5668\u624b\u52a8\u8f93\u5165\u7684\u65f6\u5019\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] Many common path extensions are whitelisted by default. Furthermore REST API calls are typically not meant to be used as URLs directly in browsers. Nevertheless applications that use custom ",(0,t.jsx)(n.code,{children:"HttpMessageConverter"})," implementations can explicitly register file extensions for content negotiation and the Content-Disposition header will not be added for such extensions. See ",(0,t.jsx)(n.a,{href:"https://linesh.gitbooks.io/spring-mvc-documentation-linesh-translation/content/publish/21-3/mvc.html#mvc-config-content-negotiation",children:'Section 21.16.6, "Content Negotiation"'}),"."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u5f88\u591a\u5e38\u7528\u7684\u8def\u5f84\u6587\u4ef6\u540e\u7f00\u9ed8\u8ba4\u662f\u88ab\u4fe1\u4efb\u7684\u3002\u53e6\u5916\uff0cREST\u7684API\u4e00\u822c\u662f\u4e0d\u5e94\u8be5\u76f4\u63a5\u7528\u505aURL\u7684\u3002\u4e0d\u8fc7\uff0c\u4f60\u53ef\u4ee5\u81ea\u5df1\u5b9a\u5236",(0,t.jsx)(n.code,{children:"HttpMessageConverter"}),"\u7684\u5b9e\u73b0\uff0c\u7136\u540e\u663e\u5f0f\u5730\u6ce8\u518c\u7528\u4e8e\u5185\u5bb9\u534f\u5546\u7684\u6587\u4ef6\u7c7b\u578b\uff0c\u8fd9\u79cd\u60c5\u5f62\u4e0bContent-Disposition\u5934\u5c06\u4e0d\u4f1a\u88ab\u52a0\u5165\u5230\u8bf7\u6c42\u5934\u4e2d\u3002\u8be6\u89c1",(0,t.jsx)(n.a,{href:"https://www.w3cschool.cn/spring_mvc_documentation_linesh_translation/spring_mvc_documentation_linesh_translation-h8br27sx.html",children:"Spring MVC \u5185\u5bb9\u534f\u5546"}),"\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] This was originally introduced as part of work for ",(0,t.jsx)(n.a,{href:"http://pivotal.io/security/cve-2015-5211",children:"CVE-2015-5211"}),". Below are additional recommendations from the report:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Encode rather than escape JSON responses. This is also an OWASP XSS recommendation. For an example of how to do that with Spring see ",(0,t.jsx)(n.a,{href:"https://github.com/rwinch/spring-jackson-owasp",children:"spring-jackson-owasp"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Configure suffix pattern matching to be turned off or restricted to explicitly registered suffixes only."}),"\n",(0,t.jsx)(n.li,{children:'Configure content negotiation with the properties "useJaf" and "ignoreUnknownPathExtensions" set to false which would result in a 406 response for URLs with unknown extensions. Note however that this may not be an option if URLs are naturally expected to have a dot towards the end.'}),"\n",(0,t.jsxs)(n.li,{children:["Add ",(0,t.jsx)(n.code,{children:"X-Content-Type-Options: nosniff"})," header to responses. Spring Security 4 does this by default."]}),"\n"]}),"\n"]}),(0,t.jsx)(n.p,{children:"\u611f\u89c9\u8fd9\u8282\u7684\u7ffb\u8bd1\u8d28\u91cf\u8fd8\u6709\u9650\uff0c\u9700\u8981\u7ee7\u7eed\u4e86\u89e3XSS\u653b\u51fb\u548cRFD\u653b\u51fb\u7684\u7ec6\u8282\u518d\u7ffb\u3002"}),(0,t.jsx)(n.h2,{id:"\u77e9\u9635\u53d8\u91cf",children:"\u77e9\u9635\u53d8\u91cf"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] The URI specification ",(0,t.jsx)(n.a,{href:"http://tools.ietf.org/html/rfc3986#section-3.3",children:"RFC 3986"}),' defines the possibility of including name-value pairs within path segments. There is no specific term used in the spec. The general "URI path parameters" could be applied although the more unique ',(0,t.jsx)(n.a,{href:"http://www.w3.org/DesignIssues/MatrixURIs.html",children:'"Matrix URIs"'}),", originating from an old post by Tim Berners-Lee, is also frequently used and fairly well known. Within Spring MVC these are referred to as matrix variables."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u539f\u6765\u7684URI\u89c4\u8303",(0,t.jsx)(n.a,{href:"http://tools.ietf.org/html/rfc3986#section-3.3",children:"RFC 3986"}),"\u4e2d\u5141\u8bb8\u5728\u8def\u5f84\u6bb5\u843d\u4e2d\u643a\u5e26\u952e\u503c\u5bf9\uff0c\u4f46\u89c4\u8303\u6ca1\u6709\u660e\u786e\u7ed9\u8fd9\u6837\u7684\u952e\u503c\u5bf9\u5b9a\u4e49\u672f\u8bed\u3002\u6709\u4eba\u53eb\u201cURI\u8def\u5f84\u53c2\u6570\u201d\uff0c\u4e5f\u6709\u53eb",(0,t.jsx)(n.a,{href:"http://www.w3.org/DesignIssues/MatrixURIs.html",children:"\u201c\u77e9\u9635URI\u201d"}),"\u7684\u3002\u540e\u8005\u662fTim Berners-Lee\u9996\u5148\u5728\u5176\u535a\u5ba2\u4e2d\u63d0\u5230\u7684\u672f\u8bed\uff0c\u88ab\u4f7f\u7528\u5f97\u8981\u66f4\u52a0\u9891\u7e41\u4e00\u4e9b\uff0c\u77e5\u540d\u5ea6\u4e5f\u66f4\u9ad8\u4e9b\u3002\u800c\u5728Spring MVC\u4e2d\uff0c\u6211\u4eec\u79f0\u8fd9\u6837\u7684\u952e\u503c\u5bf9\u4e3a\u77e9\u9635\u53d8\u91cf\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:['[Original] Matrix variables can appear in any path segment, each matrix variable separated with a ";" (semicolon). For example: ',(0,t.jsx)(n.code,{children:'"/cars;color=red;year=2012"'}),'. Multiple values may be either "," (comma) separated ',(0,t.jsx)(n.code,{children:'"color=red,green,blue"'})," or the variable name may be repeated ",(0,t.jsx)(n.code,{children:'"color=red;color=green;color=blue"'}),"."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u77e9\u9635\u53d8\u91cf\u53ef\u4ee5\u5728\u4efb\u4f55\u8def\u5f84\u6bb5\u843d\u4e2d\u51fa\u73b0\uff0c\u6bcf\u5bf9\u77e9\u9635\u53d8\u91cf\u4e4b\u95f4\u4f7f\u7528\u4e00\u4e2a\u5206\u53f7\u201c;\u201d\u9694\u5f00\u3002\u6bd4\u5982\u8fd9\u6837\u7684URI\uff1a",(0,t.jsx)(n.code,{children:'"/cars;color=red;year=2012"'}),"\u3002\u591a\u4e2a\u503c\u53ef\u4ee5\u7528\u9017\u53f7\u9694\u5f00",(0,t.jsx)(n.code,{children:'"color=red,green,blue"'}),"\uff0c\u6216\u8005\u91cd\u590d\u53d8\u91cf\u540d\u591a\u6b21",(0,t.jsx)(n.code,{children:'"color=red;color=green;color=blue"'}),"\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"[Original] If a URL is expected to contain matrix variables, the request mapping pattern must represent them with a URI template. This ensures the request can be matched correctly regardless of whether matrix variables are present or not and in what order they are provided."}),"\n"]}),(0,t.jsx)(n.p,{children:"\u5982\u679c\u4e00\u4e2aURL\u6709\u53ef\u80fd\u9700\u8981\u5305\u542b\u77e9\u9635\u53d8\u91cf\uff0c\u90a3\u4e48\u5728\u8bf7\u6c42\u8def\u5f84\u7684\u6620\u5c04\u914d\u7f6e\u4e0a\u5c31\u9700\u8981\u4f7f\u7528URI\u6a21\u677f\u6765\u4f53\u73b0\u8fd9\u4e00\u70b9\u3002\u8fd9\u6837\u624d\u80fd\u786e\u4fdd\u8bf7\u6c42\u53ef\u4ee5\u88ab\u6b63\u786e\u5730\u6620\u5c04\uff0c\u800c\u4e0d\u7ba1\u77e9\u9635\u53d8\u91cf\u5728URI\u4e2d\u662f\u5426\u51fa\u73b0\u3001\u51fa\u73b0\u7684\u6b21\u5e8f\u662f\u600e\u6837\u7b49\u3002"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:'[Original] Below is an example of extracting the matrix variable "q":'}),"\n"]}),(0,t.jsx)(n.p,{children:"\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5c55\u793a\u4e86\u6211\u4eec\u5982\u4f55\u4ece\u77e9\u9635\u53d8\u91cf\u4e2d\u83b7\u53d6\u5230\u53d8\u91cf\u201cq\u201d\u7684\u503c\uff1a"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// GET /pets/42;q=11;r=22\n\n@RequestMapping(path = "/pets/{petId}", method = RequestMethod.GET)\npublic void findPet(@PathVariable String petId, @MatrixVariable int q) {\n\n    // petId == 42\n    // q == 11\n\n}\n\n'})}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"[Original] Since all path segments may contain matrix variables, in some cases you need to be more specific to identify where the variable is expected to be:"}),"\n"]}),(0,t.jsx)(n.p,{children:"\u7531\u4e8e\u4efb\u610f\u8def\u5f84\u6bb5\u843d\u4e2d\u90fd\u53ef\u4ee5\u542b\u6709\u77e9\u9635\u53d8\u91cf\uff0c\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c\u4f60\u9700\u8981\u7528\u66f4\u7cbe\u786e\u7684\u4fe1\u606f\u6765\u6307\u5b9a\u4e00\u4e2a\u77e9\u9635\u53d8\u91cf\u7684\u4f4d\u7f6e\uff1a"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// GET /owners/42;q=11/pets/21;q=22\n\n@RequestMapping(path = "/owners/{ownerId}/pets/{petId}", method = RequestMethod.GET)\npublic void findPet(\n    @MatrixVariable(name="q", pathVar="ownerId") int q1,\n    @MatrixVariable(name="q", pathVar="petId") int q2) {\n\n    // q1 == 11\n    // q2 == 22\n\n}\n\n'})}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"[Original] A matrix variable may be defined as optional and a default value specified:"}),"\n"]}),(0,t.jsx)(n.p,{children:"\u4f60\u4e5f\u53ef\u4ee5\u58f0\u660e\u4e00\u4e2a\u77e9\u9635\u53d8\u91cf\u4e0d\u662f\u5fc5\u987b\u51fa\u73b0\u7684\uff0c\u5e76\u7ed9\u5b83\u8d4b\u4e00\u4e2a\u9ed8\u8ba4\u503c\uff1a"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// GET /pets/42\n\n@RequestMapping(path = "/pets/{petId}", method = RequestMethod.GET)\npublic void findPet(@MatrixVariable(required=false, defaultValue="1") int q) {\n\n    // q == 1\n\n}\n\n'})}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"[Original] All matrix variables may be obtained in a Map:"}),"\n"]}),(0,t.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2aMap\u6765\u5b58\u50a8\u6240\u6709\u7684\u77e9\u9635\u53d8\u91cf\uff1a"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// GET /owners/42;q=11;r=12/pets/21;q=22;s=23\n\n@RequestMapping(path = "/owners/{ownerId}/pets/{petId}", method = RequestMethod.GET)\npublic void findPet(\n    @MatrixVariable Map<String, String> matrixVars,\n    @MatrixVariable(pathVar="petId") Map<String, String> petMatrixVars) {\n\n    // matrixVars: ["q" : [11,22], "r" : 12, "s" : 23]\n    // petMatrixVars: ["q" : 11, "s" : 23]\n\n}\n\n'})}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] Note that to enable the use of matrix variables, you must set the ",(0,t.jsx)(n.code,{children:"removeSemicolonContent"}),"property of ",(0,t.jsx)(n.code,{children:"RequestMappingHandlerMapping"})," to ",(0,t.jsx)(n.code,{children:"false"}),". By default it is set to ",(0,t.jsx)(n.code,{children:"true"}),"."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u5982\u679c\u8981\u5141\u8bb8\u77e9\u9635\u53d8\u91cf\u7684\u4f7f\u7528\uff0c\u4f60\u5fc5\u987b\u628a",(0,t.jsx)(n.code,{children:"RequestMappingHandlerMapping"}),"\u7c7b\u7684",(0,t.jsx)(n.code,{children:"removeSemicolonContent"}),"\u5c5e\u6027\u8bbe\u7f6e\u4e3a",(0,t.jsx)(n.code,{children:"false"}),"\u3002\u8be5\u503c\u9ed8\u8ba4\u662f",(0,t.jsx)(n.code,{children:"true"}),"\u7684\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"[Original] The MVC Java config and the MVC namespace both provide options for enabling the use of matrix variables."}),"\n",(0,t.jsx)(n.p,{children:"MVC\u7684Java\u7f16\u7a0b\u914d\u7f6e\u548c\u547d\u540d\u7a7a\u95f4\u914d\u7f6e\u90fd\u63d0\u4f9b\u4e86\u542f\u7528\u77e9\u9635\u53d8\u91cf\u7684\u65b9\u5f0f\u3002"}),"\n",(0,t.jsxs)(n.p,{children:["[Original] If you are using Java config, The ",(0,t.jsx)(n.a,{href:"https://linesh.gitbooks.io/spring-mvc-documentation-linesh-translation/content/publish/21-3/mvc.html#mvc-config-advanced-java",children:"Advanced Customizations with MVC Java Config"})," section describes how the ",(0,t.jsx)(n.code,{children:"RequestMappingHandlerMapping"})," can be customized."]}),"\n",(0,t.jsxs)(n.p,{children:["\u5982\u679c\u4f60\u662f\u4f7f\u7528Java\u7f16\u7a0b\u7684\u65b9\u5f0f\uff0c",(0,t.jsx)(n.a,{href:"http://docs.spring.io/spring-framework/docs/current/spring-framework-reference/html/mvc.html#mvc-config-advanced-java",children:"\u201cMVC Java\u9ad8\u7ea7\u5b9a\u5236\u5316\u914d\u7f6e\u201d\u4e00\u8282"}),"\u63cf\u8ff0\u4e86\u5982\u4f55\u5bf9",(0,t.jsx)(n.code,{children:"RequestMappingHandlerMapping"}),"\u8fdb\u884c\u5b9a\u5236\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["[Original] In the MVC namespace, the ",(0,t.jsx)(n.code,{children:"<mvc:annotation-driven>"})," element has an ",(0,t.jsx)(n.code,{children:"enable-matrix-variables"})," attribute that should be set to ",(0,t.jsx)(n.code,{children:"true"}),". By default it is set to ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["\u800c\u4f7f\u7528MVC\u7684\u547d\u540d\u7a7a\u95f4\u914d\u7f6e\u65f6\uff0c\u4f60\u53ef\u4ee5\u628a",(0,t.jsx)(n.code,{children:"<mvc:annotation-driven>"}),"\u5143\u7d20\u4e0b\u7684",(0,t.jsx)(n.code,{children:"enable-matrix-variables"}),"\u5c5e\u6027\u8bbe\u7f6e\u4e3a",(0,t.jsx)(n.code,{children:"true"}),"\u3002\u8be5\u503c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f\u914d\u7f6e\u4e3a",(0,t.jsx)(n.code,{children:"false"}),"\u7684\u3002"]}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:mvc="http://www.springframework.org/schema/mvc"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="\n        http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/mvc\n        http://www.springframework.org/schema/mvc/spring-mvc.xsd">\n\n    <mvc:annotation-driven enable-matrix-variables="true"/>\n\n</beans>\n\n'})}),(0,t.jsx)(n.h2,{id:"\u53ef\u6d88\u8d39\u7684\u5a92\u4f53\u7c7b\u578b",children:"\u53ef\u6d88\u8d39\u7684\u5a92\u4f53\u7c7b\u578b"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] You can narrow the primary mapping by specifying a list of consumable media types. The request will be matched only if the ",(0,t.jsx)(n.em,{children:"Content-Type"})," request header matches the specified media type. For example:"]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u6307\u5b9a\u4e00\u7ec4\u53ef\u6d88\u8d39\u7684\u5a92\u4f53\u7c7b\u578b\uff0c\u7f29\u5c0f\u6620\u5c04\u7684\u8303\u56f4\u3002\u8fd9\u6837\u53ea\u6709\u5f53\u8bf7\u6c42\u5934\u4e2d ",(0,t.jsx)(n.em,{children:"Content-Type"})," \u7684\u503c\u4e0e\u6307\u5b9a\u53ef\u6d88\u8d39\u7684\u5a92\u4f53\u7c7b\u578b\u4e2d\u6709\u76f8\u540c\u7684\u65f6\u5019\uff0c\u8bf7\u6c42\u624d\u4f1a\u88ab\u5339\u914d\u3002\u6bd4\u5982\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff1a"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Controller\n@RequestMapping(path = "/pets", method = RequestMethod.POST, consumes="application/json")\npublic void addPet(@RequestBody Pet pet, Model model) {\n    // \u65b9\u6cd5\u5b9e\u73b0\u7701\u7565\n}\n\n'})}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] Consumable media type expressions can also be negated as in ",(0,t.jsx)(n.em,{children:"!text/plain"})," to match to all requests other than those with ",(0,t.jsx)(n.em,{children:"Content-Type"})," of ",(0,t.jsx)(n.em,{children:"text/plain"}),". Also consider using constants provided in ",(0,t.jsx)(n.code,{children:"MediaType"})," such as ",(0,t.jsx)(n.code,{children:"APPLICATION_JSON_VALUE"})," and ",(0,t.jsx)(n.code,{children:"APPLICATION_JSON_UTF8_VALUE"}),"."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u6307\u5b9a\u53ef\u6d88\u8d39\u5a92\u4f53\u7c7b\u578b\u7684\u8868\u8fbe\u5f0f\u4e2d\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5426\u5b9a\uff0c\u6bd4\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,t.jsx)(n.em,{children:"!text/plain"})," \u6765\u5339\u914d\u6240\u6709\u8bf7\u6c42\u5934 ",(0,t.jsx)(n.em,{children:"Content-Type"})," \u4e2d\u4e0d\u542b ",(0,t.jsx)(n.em,{children:"text/plain"})," \u7684\u8bf7\u6c42\u3002\u540c\u65f6\uff0c\u5728",(0,t.jsx)(n.code,{children:"MediaType"}),"\u7c7b\u4e2d\u8fd8\u5b9a\u4e49\u4e86\u4e00\u4e9b\u5e38\u91cf\uff0c\u6bd4\u5982",(0,t.jsx)(n.code,{children:"APPLICATION_JSON_VALUE"}),"\u3001",(0,t.jsx)(n.code,{children:"APPLICATION_JSON_UTF8_VALUE"}),"\u7b49\uff0c\u63a8\u8350\u66f4\u591a\u5730\u4f7f\u7528\u5b83\u4eec\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] The ",(0,t.jsx)(n.em,{children:"consumes"})," condition is supported on the type and on the method level. Unlike most other conditions, when used at the type level, method-level consumable types override rather than extend type-level consumable types."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:"consumes"})," \u5c5e\u6027\u63d0\u4f9b\u7684\u662f\u65b9\u6cd5\u7ea7\u7684\u7c7b\u578b\u652f\u6301\u3002\u4e0e\u5176\u4ed6\u5c5e\u6027\u4e0d\u540c\uff0c\u5f53\u5728\u7c7b\u578b\u7ea7\u4f7f\u7528\u65f6\uff0c\u65b9\u6cd5\u7ea7\u7684\u6d88\u8d39\u7c7b\u578b\u5c06\u8986\u76d6\u7c7b\u578b\u7ea7\u7684\u914d\u7f6e\uff0c\u800c\u975e\u7ee7\u627f\u5173\u7cfb\u3002"]}),"\n"]}),(0,t.jsx)(n.h2,{id:"\u53ef\u751f\u4ea7\u7684\u5a92\u4f53\u7c7b\u578b",children:"\u53ef\u751f\u4ea7\u7684\u5a92\u4f53\u7c7b\u578b"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] You can narrow the primary mapping by specifying a list of producible media types. The request will be matched only if the ",(0,t.jsx)(n.em,{children:"Accept"})," request header matches one of these values. Furthermore, use of the ",(0,t.jsx)(n.em,{children:"produces"})," condition ensures the actual content type used to generate the response respects the media types specified in the ",(0,t.jsx)(n.em,{children:"produces"})," condition. For example:"]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u6307\u5b9a\u4e00\u7ec4\u53ef\u751f\u4ea7\u7684\u5a92\u4f53\u7c7b\u578b\uff0c\u7f29\u5c0f\u6620\u5c04\u7684\u8303\u56f4\u3002\u8fd9\u6837\u53ea\u6709\u5f53\u8bf7\u6c42\u5934\u4e2d ",(0,t.jsx)(n.em,{children:"Accept"})," \u7684\u503c\u4e0e\u6307\u5b9a\u53ef\u751f\u4ea7\u7684\u5a92\u4f53\u7c7b\u578b\u4e2d\u6709\u76f8\u540c\u7684\u65f6\u5019\uff0c\u8bf7\u6c42\u624d\u4f1a\u88ab\u5339\u914d\u3002\u800c\u4e14\uff0c\u4f7f\u7528 ",(0,t.jsx)(n.em,{children:"produces"})," \u6761\u4ef6\u53ef\u4ee5\u786e\u4fdd\u7528\u4e8e\u751f\u6210\u54cd\u5e94\uff08response\uff09\u7684\u5185\u5bb9\u4e0e\u6307\u5b9a\u7684\u53ef\u751f\u4ea7\u7684\u5a92\u4f53\u7c7b\u578b\u662f\u76f8\u540c\u7684\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Controller\n@RequestMapping(path = "/pets/{petId}", method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_UTF8_VALUE)\n@ResponseBody\npublic Pet getPet(@PathVariable String petId, Model model) {\n    // \u65b9\u6cd5\u5b9e\u73b0\u7701\u7565\n}\n\n'})}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] Be aware that the media type specified in the ",(0,t.jsx)(n.em,{children:"produces"})," condition can also optionally specify a character set. For example, in the code snippet above we specify the same media type than the default one configured in ",(0,t.jsx)(n.code,{children:"MappingJackson2HttpMessageConverter"}),", including the ",(0,t.jsx)(n.code,{children:"UTF-8"}),"charset."]}),"\n",(0,t.jsxs)(n.p,{children:["\u8981\u6ce8\u610f\u7684\u662f\uff0c\u901a\u8fc7 ",(0,t.jsx)(n.em,{children:"condition"})," \u6761\u4ef6\u6307\u5b9a\u7684\u5a92\u4f53\u7c7b\u578b\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5b57\u7b26\u96c6\u3002\u6bd4\u5982\u5728\u4e0a\u9762\u7684\u5c0f\u6bb5\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u8fd8\u662f\u8986\u5199\u4e86",(0,t.jsx)(n.code,{children:"MappingJackson2HttpMessageConverter"}),"\u7c7b\u4e2d\u9ed8\u8ba4\u914d\u7f6e\u7684\u5a92\u4f53\u7c7b\u578b\uff0c\u540c\u65f6\uff0c\u8fd8\u6307\u5b9a\u4e86\u4f7f\u7528",(0,t.jsx)(n.code,{children:"UTF-8"}),"\u7684\u5b57\u7b26\u96c6\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["[Original] Just like with ",(0,t.jsx)(n.em,{children:"consumes"}),", producible media type expressions can be negated as in ",(0,t.jsx)(n.em,{children:"!text/plain"})," to match to all requests other than those with an ",(0,t.jsx)(n.em,{children:"Accept"})," header value of ",(0,t.jsx)(n.em,{children:"text/plain"}),". Also consider using constants provided in ",(0,t.jsx)(n.code,{children:"MediaType"})," such as ",(0,t.jsx)(n.code,{children:"APPLICATION_JSON_VALUE"})," and ",(0,t.jsx)(n.code,{children:"APPLICATION_JSON_UTF8_VALUE"}),"."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u4e0e ",(0,t.jsx)(n.em,{children:"consumes"})," \u6761\u4ef6\u7c7b\u4f3c\uff0c\u53ef\u751f\u4ea7\u7684\u5a92\u4f53\u7c7b\u578b\u8868\u8fbe\u5f0f\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5426\u5b9a\u3002\u6bd4\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,t.jsx)(n.em,{children:"!text/plain"})," \u6765\u5339\u914d\u6240\u6709\u8bf7\u6c42\u5934 ",(0,t.jsx)(n.em,{children:"Accept"})," \u4e2d\u4e0d\u542b ",(0,t.jsx)(n.em,{children:"text/plain"})," \u7684\u8bf7\u6c42\u3002\u540c\u65f6\uff0c\u5728",(0,t.jsx)(n.code,{children:"MediaType"}),"\u7c7b\u4e2d\u8fd8\u5b9a\u4e49\u4e86\u4e00\u4e9b\u5e38\u91cf\uff0c\u6bd4\u5982",(0,t.jsx)(n.code,{children:"APPLICATION_JSON_VALUE"}),"\u3001",(0,t.jsx)(n.code,{children:"APPLICATION_JSON_UTF8_VALUE"}),"\u7b49\uff0c\u63a8\u8350\u66f4\u591a\u5730\u4f7f\u7528\u5b83\u4eec\u3002"]}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] The ",(0,t.jsx)(n.em,{children:"produces"})," condition is supported on the type and on the method level. Unlike most other conditions, when used at the type level, method-level producible types override rather than extend type-level producible types."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:"produces"})," \u5c5e\u6027\u63d0\u4f9b\u7684\u662f\u65b9\u6cd5\u7ea7\u7684\u7c7b\u578b\u652f\u6301\u3002\u4e0e\u5176\u4ed6\u5c5e\u6027\u4e0d\u540c\uff0c\u5f53\u5728\u7c7b\u578b\u7ea7\u4f7f\u7528\u65f6\uff0c\u65b9\u6cd5\u7ea7\u7684\u6d88\u8d39\u7c7b\u578b\u5c06\u8986\u76d6\u7c7b\u578b\u7ea7\u7684\u914d\u7f6e\uff0c\u800c\u975e\u7ee7\u627f\u5173\u7cfb\u3002"]}),"\n"]}),(0,t.jsx)(n.h2,{id:"\u8bf7\u6c42\u53c2\u6570\u4e0e\u8bf7\u6c42\u5934\u7684\u503c",children:"\u8bf7\u6c42\u53c2\u6570\u4e0e\u8bf7\u6c42\u5934\u7684\u503c"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] You can narrow request matching through request parameter conditions such as ",(0,t.jsx)(n.code,{children:'"myParam"'}),", ",(0,t.jsx)(n.code,{children:'"!myParam"'}),", or ",(0,t.jsx)(n.code,{children:'"myParam=myValue"'}),". The first two test for request parameter presence/absence and the third for a specific parameter value. Here is an example with a request parameter value condition:"]}),"\n"]}),(0,t.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u7b5b\u9009\u8bf7\u6c42\u53c2\u6570\u7684\u6761\u4ef6\u6765\u7f29\u5c0f\u8bf7\u6c42\u5339\u914d\u8303\u56f4\uff0c\u6bd4\u5982",(0,t.jsx)(n.code,{children:'"myParam"'}),"\u3001",(0,t.jsx)(n.code,{children:'"!myParam"'}),"\u53ca",(0,t.jsx)(n.code,{children:'"myParam=myValue"'}),"\u7b49\u3002\u524d\u4e24\u4e2a\u6761\u4ef6\u7528\u4e8e\u7b5b\u9009\u5b58\u5728/\u4e0d\u5b58\u5728\u67d0\u4e9b\u8bf7\u6c42\u53c2\u6570\u7684\u8bf7\u6c42\uff0c\u7b2c\u4e09\u4e2a\u6761\u4ef6\u7b5b\u9009\u5177\u6709\u7279\u5b9a\u53c2\u6570\u503c\u7684\u8bf7\u6c42\u3002\u4e0b\u9762\u6709\u4e2a\u4f8b\u5b50\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u8bf7\u6c42\u53c2\u6570\u503c\u7684\u7b5b\u9009\u6761\u4ef6\uff1a"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Controller\n@RequestMapping("/owners/{ownerId}")\npublic class RelativePathUriTemplateController {\n\n    @RequestMapping(path = "/pets/{petId}", method = RequestMethod.GET, params="myParam=myValue")\n    public void findPet(@PathVariable String ownerId, @PathVariable String petId, Model model) {\n        // \u5b9e\u9645\u5b9e\u73b0\u7701\u7565\n    }\n\n}\n\n'})}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"[Original] The same can be done to test for request header presence/absence or to match based on a specific request header value:"}),"\n"]}),(0,t.jsx)(n.p,{children:"\u540c\u6837\uff0c\u4f60\u53ef\u4ee5\u7528\u76f8\u540c\u7684\u6761\u4ef6\u6765\u7b5b\u9009\u8bf7\u6c42\u5934\u7684\u51fa\u73b0\u4e0e\u5426\uff0c\u6216\u8005\u7b5b\u9009\u51fa\u4e00\u4e2a\u5177\u6709\u7279\u5b9a\u503c\u7684\u8bf7\u6c42\u5934\uff1a"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'@Controller\n@RequestMapping("/owners/{ownerId}")\npublic class RelativePathUriTemplateController {\n\n    @RequestMapping(path = "/pets", method = RequestMethod.GET, headers="myHeader=myValue")\n    public void findPet(@PathVariable String ownerId, @PathVariable String petId, Model model) {\n        // \u65b9\u6cd5\u4f53\u5b9e\u73b0\u7701\u7565\n    }\n\n}\n\n'})}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[Original] Although you can match to ",(0,t.jsx)(n.em,{children:"Content-Type"})," and ",(0,t.jsx)(n.em,{children:"Accept"})," header values using media type wild cards (for example ",(0,t.jsx)(n.em,{children:'"content-type=text/*"'})," will match to ",(0,t.jsx)(n.em,{children:'"text/plain"'})," and ",(0,t.jsx)(n.em,{children:'"text/html"'}),"), it is recommended to use the ",(0,t.jsx)(n.em,{children:"consumes"})," and ",(0,t.jsx)(n.em,{children:"produces"})," conditions respectively instead. They are intended specifically for that purpose."]}),"\n",(0,t.jsxs)(n.p,{children:["\u5c3d\u7ba1\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u5a92\u4f53\u7c7b\u578b\u7684\u901a\u914d\u7b26\uff08\u6bd4\u5982 ",(0,t.jsx)(n.em,{children:'"content-type=text/*"'}),"\uff09\u6765\u5339\u914d\u8bf7\u6c42\u5934 _Content-Type_\u548c _Accept_\u7684\u503c\uff0c\u4f46\u6211\u4eec\u66f4\u63a8\u8350\u72ec\u7acb\u4f7f\u7528 _consumes_\u548c _produces_\u6761\u4ef6\u6765\u7b5b\u9009\u5404\u81ea\u7684\u8bf7\u6c42\u3002\u56e0\u4e3a\u5b83\u4eec\u5c31\u662f\u4e13\u95e8\u4e3a\u533a\u5206\u8fd9\u4e24\u79cd\u4e0d\u540c\u7684\u573a\u666f\u800c\u751f\u7684\u3002"]}),"\n"]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},88672:(e,n,i)=>{i.d(n,{Z:()=>a,a:()=>o});var t=i(50959);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);