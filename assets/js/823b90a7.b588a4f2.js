"use strict";(self.webpackChunkcode_note_blog=self.webpackChunkcode_note_blog||[]).push([[8432],{53306:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>t,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>c,toc:()=>a});var d=n(11527),o=n(88672);const s={},i=void 0,c={id:"Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u91cd\u8981\u673a\u5236\u63a2\u79d8/Spring\u63a2\u79d8\u4e4bAOP\u7684\u6267\u884c\u987a\u5e8f",title:"Spring\u63a2\u79d8\u4e4bAOP\u7684\u6267\u884c\u987a\u5e8f",description:"spring aop \u05b4\ufffd\ufffd\u02b1\ufffd\ufffd\u02f3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0123\ufffd\ufffd\ufffd\u03b8\u0131\ufffd\u05b4\ufffd\u0435\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u013d\ufffd\ufffd\ufffd\u0534\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u033d\ufffd\ufffd aop \u05b4\ufffd\ufffd\u02f3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0721\ufffd",source:"@site/docs/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u91cd\u8981\u673a\u5236\u63a2\u79d8/Spring\u63a2\u79d8\u4e4bAOP\u7684\u6267\u884c\u987a\u5e8f.md",sourceDirName:"Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u91cd\u8981\u673a\u5236\u63a2\u79d8",slug:"/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u91cd\u8981\u673a\u5236\u63a2\u79d8/Spring\u63a2\u79d8\u4e4bAOP\u7684\u6267\u884c\u987a\u5e8f",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u91cd\u8981\u673a\u5236\u63a2\u79d8/Spring\u63a2\u79d8\u4e4bAOP\u7684\u6267\u884c\u987a\u5e8f",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u91cd\u8981\u673a\u5236\u63a2\u79d8/Spring\u63a2\u79d8\u4e4bAOP\u7684\u6267\u884c\u987a\u5e8f.md",tags:[],version:"current",frontMatter:{},sidebar:"spring",previous:{title:"Spring\u63a2\u79d8\u4e4b\u7ec4\u5408\u6ce8\u89e3\u7684\u5904\u7406",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u91cd\u8981\u673a\u5236\u63a2\u79d8/Spring\u63a2\u79d8\u4e4b\u7ec4\u5408\u6ce8\u89e3\u7684\u5904\u7406"},next:{title:"Spring\u63a2\u79d8\u4e4bSpring\u4e8b\u4ef6\u673a\u5236",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u91cd\u8981\u673a\u5236\u63a2\u79d8/Spring\u63a2\u79d8\u4e4bSpring\u4e8b\u4ef6\u673a\u5236"}},t={},a=[{value:"1 <code>ReflectiveAspectJAdvisorFactory#getAdvisorMethods</code>",id:"1-reflectiveaspectjadvisorfactorygetadvisormethods",level:4},{value:"2. advisor \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd<code>AspectJAwareAdvisorAutoProxyCreator#sortAdvisors</code>",id:"2-advisor-aspectjawareadvisorautoproxycreatorsortadvisors",level:3},{value:"2.1 <code>PartialOrder.sort(...)</code> \ufffd\u0131\u023d\ufffd\ufffd\ufffd\ufffd\ufffd<code>AspectJPrecedenceComparator</code>",id:"21-partialordersort-\u0131\u019aaspectjprecedencecomparator",level:4},{value:"<code>this.advisorComparator.compare</code>",id:"thisadvisorcomparatorcompare",level:5},{value:"<code>comparePrecedenceWithinAspect</code>",id:"compareprecedencewithinaspect",level:5},{value:"2. <code>super.sortAdvisors</code>",id:"2-supersortadvisors",level:4},{value:"3. <code>getOrder()</code> \u05b5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd",id:"3-getorder-\u05b5",level:3},{value:"<code>BeanFactoryTransactionAttributeSourceAdvisor#getOrder()</code>",id:"beanfactorytransactionattributesourceadvisorgetorder",level:4},{value:"<code>InstantiationModelAwarePointcutAdvisorImpl#getOrder()</code>",id:"instantiationmodelawarepointcutadvisorimplgetorder",level:4},{value:"4. \ufffd\ufffd\ufffd\ufffd\u0536\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd",id:"4-\u0566\u023c",level:3}];function l(e){const r={a:"a",blockquote:"blockquote",code:"code",em:"em",h3:"h3",h4:"h4",h5:"h5",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.p,{children:"spring aop \u05b4\ufffd\ufffd\u02b1\ufffd\ufffd\u02f3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0123\ufffd\ufffd\ufffd\u03b8\u0131\ufffd\u05b4\ufffd\u0435\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u013d\ufffd\ufffd\ufffd\u0534\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u033d\ufffd\ufffd aop \u05b4\ufffd\ufffd\u02f3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0721\ufffd"}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd ",(0,d.jsx)(r.a,{href:"https://my.oschina.net/funcy/blog/4678817",children:"spring aop \u05ae AnnotationAwareAspectJAutoProxyCreator \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u03e3\ufffd"})," \ufffd\ufffd ",(0,d.jsx)(r.a,{href:"https://my.oschina.net/funcy/blog/4687961",children:"spring aop \u05ae AnnotationAwareAspectJAutoProxyCreator \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xa3\ufffd"}),"\ufffd\u0423\ufffd\ufffd\u0779\ufffd spring aop \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u05b4\ufffd\u0439\ufffd\ufffd\u0323\ufffd\ufffd\ufffd\ufffd\ufffd\u04bb\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u03b9\ufffd\ufffd\ufffd aop \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"ReflectiveAspectJAdvisorFactory#getAdvisorMethods"}),"\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"aspect"})," \ufffd\u0435\ufffd ",(0,d.jsx)(r.code,{children:"@Around/@Before/@After"})," \ufffd\u0237\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"AspectJAwareAdvisorAutoProxyCreator#sortAdvisors"}),"\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advisor"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]}),"\n"]}),"\n",(0,d.jsx)(r.p,{children:"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0635\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"}),"\n",(0,d.jsxs)(r.h4,{id:"1-reflectiveaspectjadvisorfactorygetadvisormethods",children:["1 ",(0,d.jsx)(r.code,{children:"ReflectiveAspectJAdvisorFactory#getAdvisorMethods"})]}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\u04bb\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"ReflectiveAspectJAdvisorFactory#getAdvisorMethods"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\xfd\u1e79\ufffd\ufffd\ufffd\xa3\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"|-AbstractAutoProxyCreator#postProcessBeforeInstantiation\n  |-AspectJAwareAdvisorAutoProxyCreator#shouldSkip\n   |-AnnotationAwareAspectJAutoProxyCreator#findCandidateAdvisors\n    |-BeanFactoryAspectJAdvisorsBuilder#buildAspectJAdvisors\n     |-ReflectiveAspectJAdvisorFactory#getAdvisors\n      |-ReflectiveAspectJAdvisorFactory#getAdvisorMethods\n\n"})}),"\n",(0,d.jsx)(r.p,{children:"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xa3\ufffd"}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"ReflectiveAspectJAdvisorFactory"}),"\n"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"// \ufffd\ufffd\u0221 @Aspect \ufffd\ufffd\ufffd\u0435\u0137\ufffd\ufffd\ufffd\nprivate List<Method> getAdvisorMethods(Class<?> aspectClass) {\n    final List<Method> methods = new ArrayList<>();\n    // \u02a1\ufffd\u053b\ufffd\u0221\ufffd\ufffd\ufffd\ufffd\ufffd\u0132\ufffd\ufffd\ufffd\n    ...\n\n    //\ufffd\u0535\xf5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0437\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n    methods.sort(METHOD_COMPARATOR);\n    return methods;\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0132\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.a,{href:"https://my.oschina.net/funcy/blog/4678817",children:"spring aop \u05ae AnnotationAwareAspectJAutoProxyCreator \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u03e3\ufffd"})," \u04bb\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u03f8\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u01fd\ufffd\ufffd\ufffd\u05e2\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"ReflectiveAspectJAdvisorFactory"}),"\n"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"/**\n * METHOD_COMPARATOR \ufffd\ufffd\ufffd\n */\nprivate static final Comparator<Method> METHOD_COMPARATOR;\nstatic {\n    Comparator<Method> adviceKindComparator = new ConvertingComparator<>(\n            // \ufffd\u023d\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02f3\ufffd\ufffd\ufffd\ufffd\u0431\u023d\ufffd\n            new InstanceComparator<>(\n                    Around.class, Before.class, After.class, AfterReturning.class, AfterThrowing.class),\n            // \u05ea\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u05ea\ufffd\ufffd\u03aa @Around, @Before, @After, @AfterReturning, @AfterThrowing \ufffd\ufffd\u05e2\ufffd\ufffd\n            (Converter<Method, Annotation>) method -> {\n                AspectJAnnotation<?> annotation =\n                    AbstractAspectJAdvisorFactory.findAspectJAnnotationOnMethod(method);\n                return (annotation != null ? annotation.getAnnotation() : null);\n            });\n    // \u05ea\ufffd\ufffd\ufffd\u023d\ufffd\ufffd\ufffd\ufffd\ufffd\n    // 1\\. \u05ea\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0137\ufffd\ufffd\ufffd(Method)\u05ea\ufffd\ufffd\u03aa\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd(String)\n    // 2\\. \ufffd\u023d\u03e3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u037d\ufffd\ufffd\u0431\u023d\u03e3\ufffd\ufffd\ufffd\ufffd\ufd2b\ufffd\ufffd\u0135\ufffd\ufffd\ufffd\ufffd\ufffd\u03aaString\ufffd\ufffd\u052d\ufffd\ufffd\ufffd\ufffd\u05ea\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdMethod\u05ea\ufffd\ufffd\ufffd\ufffdString\ufffd\ufffd\n    Comparator<Method> methodNameComparator = new ConvertingComparator<>(Method::getName);\n    /*\n     * METHOD_COMPARATOR \ufffd\u023d\u03f9\ufffd\ufffd\ufffd\n     * 1\\. \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02b6\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u05e2\ufffd\ufffd, \ufffd\ufffd @Around, @Before, @After, @AfterReturning,\n     *       @AfterThrowing \u02f3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd (`adviceKindComparator`)\n     * 2\\. \ufffd\ufffd\ufffd\xfb\ufffd\u0431\ufffd\u02b6\ufffd\ufffd\u0429\u05e2\ufffd\u28ec\ufffd\uda83\udd37\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u01b5\ufffd\ufffd\u05b7\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd(`methodNameComparator`)\n     */\n    METHOD_COMPARATOR = adviceKindComparator.thenComparing(methodNameComparator);\n}\n\n"})}),"\n",(0,d.jsx)(r.p,{children:"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u073d\ufffd\ufffd\ufffd\ufffd\xa3\ufffd"}),"\n",(0,d.jsxs)(r.ol,{children:["\n",(0,d.jsxs)(r.li,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0136\ufffd\ufffd\ufffd\ufffd\ufffd\u036c\u04bb\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Aspect"})," \ufffd\u0435\u0137\ufffd\ufffd\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.li,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u6dfd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xa3\ufffd",(0,d.jsx)(r.code,{children:"@Around"}),", ",(0,d.jsx)(r.code,{children:"@Before"}),", ",(0,d.jsx)(r.code,{children:"@After"}),", ",(0,d.jsx)(r.code,{children:"@AfterReturning"}),", ",(0,d.jsx)(r.code,{children:"@AfterThrowing"}),"\ufffd\ufffd"]}),"\n",(0,d.jsx)(r.li,{children:"\ufffd\ufffd\ufffd\u06b7\ufffd\ufffd\ufffd\ufffd\u6dfd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdString \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"}),"\n"]}),"\n",(0,d.jsx)(r.p,{children:"\ufffd\xf7\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u01f0\ufffd\ufffd\u0131\u4eef\ufffd\ufffd\ufffd\xa3\ufffd"}),"\n",(0,d.jsx)(r.p,{children:"\ufffd\ufffd\ufffd\ufffd\u01f0\ufffd\ufffd"}),"\n",(0,d.jsx)(r.p,{children:(0,d.jsx)(r.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/up-23df6d6a46f37badb1017ceee8dcfa6533e.png",alt:""})}),"\n",(0,d.jsx)(r.p,{children:"\ufffd\ufffd\ufffd\ufffd\ufffd"}),"\n",(0,d.jsx)(r.p,{children:(0,d.jsx)(r.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/up-85bdb16953c1c6348d39578de6b6144c1cc.png",alt:""})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u01f7\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Around, @Before, @After, @AfterReturning,@AfterThrowing"})," \ufffd\ufffd\u02f3\ufffd\ufffd\u04bb\ufffd\xa1\ufffd"]}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\xf5\ufffd ",(0,d.jsx)(r.code,{children:"List<Method>"})," \ufffd\udb4e\udf3d\ufffd\ufffd\u017b\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0429 ",(0,d.jsx)(r.code,{children:"method"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u05f0\u03aa\u04bb\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advisor"}),"\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"ReflectiveAspectJAdvisorFactory"}),"\n"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"public List<Advisor> getAdvisors(MetadataAwareAspectInstanceFactory aspectInstanceFactory) {\n    // \u02a1\ufffd\ufffd\ufffd\ufffd\u04bb\u0429\ufffd\ufffd\ufffd\ufffd\n    ...\n\n    List<Advisor> advisors = new ArrayList<>();\n    //\ufffd\ufffd\u0221\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0435\ufffd\ufffd\ufffd\u01ff\ufffd\ufffd\ufffd\ufffd\n    for (Method method : getAdvisorMethods(aspectClass)) {\n        // \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u01ff\u02b5\ufffd\ufffd\ufffd\ufffdadvisors.size() \ufffd\ufffd\ufffd\ufffd\u03aa 0\ufffd\ufffd1\ufffd\ufffd2\ufffd\ufffd... \ufffd\ufffd\ufffd\ufffd\n        // declarationOrderInAspect \ufffd\ufffd\u05b5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xf5\ufffd\n        Advisor advisor = getAdvisor(method, lazySingletonAspectInstanceFactory, \n                advisors.size(), aspectName);\n        if (advisor != null) {\n            advisors.add(advisor);\n        }\n    }\n\n    // \u02a1\ufffd\ufffd\ufffd\ufffd\u04bb\u0429\ufffd\ufffd\ufffd\ufffd\n    ...\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\u05f0\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Advisor"})," \u02b1\ufffd\ufffd\ufffd\u1d2b\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"declarationOrderInAspect"})," \u05b5\ufffd\ufffd\ufffd\ufffd\u05b5\u03aa ",(0,d.jsx)(r.code,{children:"advisors.size()"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u03aa ",(0,d.jsx)(r.code,{children:"0\ufffd\ufffd1\ufffd\ufffd2\ufffd\ufffd..."}),"\ufffd\ufffd\ufffd\ufffd\ufffd\u05b5\ufffd\u06ba\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u043b\ufffd\ufffd\xf5\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.h3,{id:"2-advisor-aspectjawareadvisorautoproxycreatorsortadvisors",children:["2. advisor \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd",(0,d.jsx)(r.code,{children:"AspectJAwareAdvisorAutoProxyCreator#sortAdvisors"})]}),"\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.code,{children:"@Aspect"})," \ufffd\ufffd\ufffd\u0435\ufffd\ufffd\ufffd\ufffd\u6dfd\ufffd\ufffd\ufffd\ufffd\u05f0\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advisor"})," \ufffd\udb4e\udf3b\ufffd\ufffd\u07fb\ufffd\u0221\ufffd\ufffd\ufffd\u0536\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advisor"})," \ufffd\udb4e\udf3d\ufffd\ufffd\u017e\u037d\ufffd\ufffd\ufffd\ufffd\u02f5\u06b6\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd",(0,d.jsx)(r.code,{children:"AspectJAwareAdvisorAutoProxyCreator#sortAdvisors"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0135\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xa3\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"|-AbstractAutoProxyCreator#postProcessAfterInitialization\n |-AbstractAutoProxyCreator#wrapIfNecessary\n  |-AbstractAdvisorAutoProxyCreator#getAdvicesAndAdvisorsForBean\n   |-AbstractAdvisorAutoProxyCreator#findEligibleAdvisors\n    |-AspectJAwareAdvisorAutoProxyCreator#sortAdvisors\n\n"})}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"AspectJAwareAdvisorAutoProxyCreator"}),"\n"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"protected List<Advisor> sortAdvisors(List<Advisor> advisors) {\n    List<PartiallyComparableAdvisorHolder> partiallyComparableAdvisors \n            = new ArrayList<>(advisors.size());\n    for (Advisor element : advisors) {\n        partiallyComparableAdvisors.add(\n            // \ufffd\u023d\u03f9\ufffd\ufffd\ufffd\u03aa DEFAULT_PRECEDENCE_COMPARATOR,\ufffd\ufffd\u02b5\ufffd\ufffdAspectJPrecedenceComparator\n            new PartiallyComparableAdvisorHolder(element, DEFAULT_PRECEDENCE_COMPARATOR));\n    }\n    // \ufffd\ufffd\ufffd\ufffd\u0131\u023d\u03f2\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023d\u03f9\ufffd\ufffd\ufffd\ufffd\ufffd AspectJPrecedenceComparator \ufffd\u1e69\n    List<PartiallyComparableAdvisorHolder> sorted \n            = PartialOrder.sort(partiallyComparableAdvisors);\n    if (sorted != null) {\n        List<Advisor> result = new ArrayList<>(advisors.size());\n        for (PartiallyComparableAdvisorHolder pcAdvisor : sorted) {\n            result.add(pcAdvisor.getAdvisor());\n        }\n        return result;\n    }\n    else {\n        return super.sortAdvisors(advisors);\n    }\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04bb\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"PartialOrder.sort(...)"}),"\ufffd\ufffd\u04bb\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"super.sortAdvisors(...)"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"PartialOrder.sort(...)"}),"\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.h4,{id:"21-partialordersort-\u0131\u019aaspectjprecedencecomparator",children:["2.1 ",(0,d.jsx)(r.code,{children:"PartialOrder.sort(...)"})," \ufffd\u0131\u023d\ufffd\ufffd\ufffd\ufffd\ufffd",(0,d.jsx)(r.code,{children:"AspectJPrecedenceComparator"})]}),"\n",(0,d.jsxs)(r.p,{children:["\u02b5\ufffd\ufffd\ufffd\u03e3\ufffd",(0,d.jsx)(r.code,{children:"PartialOrder.sort(...)"})," \u05bb\u04aa\ufffd\ufffd\ufffd\ufffd\u04bb\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0463\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xfb\u0276\ufffd\ufffd\ufffd\ufffd\ufffd\u0123\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04aa\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04e6\ufffd\ufffd\ufffd\u01f4\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04b2\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"DEFAULT_PRECEDENCE_COMPARATOR"}),"\ufffd\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"private static final Comparator<Advisor> DEFAULT_PRECEDENCE_COMPARATOR \n        = new AspectJPrecedenceComparator();\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.code,{children:"DEFAULT_PRECEDENCE_COMPARATOR"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"AspectJPrecedenceComparator"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u05b1\ufffd\u04f2\u9ff4\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"compare(xxx)"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"AspectJPrecedenceComparator"}),"\n"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"@Override\npublic int compare(Advisor o1, Advisor o2) {\n    // \ufffd\u023d\u03f9\ufffd\ufffd\ufffdAnnotationAwareOrderComparator\n    int advisorPrecedence = this.advisorComparator.compare(o1, o2);\n    // \u02f3\ufffd\ufffd\ufffd\ufffd\u036c\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0534\ufffd\ufffd\u036c\u04bb aspect\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd comparePrecedenceWithinAspect \ufffd\u0674\u03b1\u023d\ufffd\n    if (advisorPrecedence == SAME_PRECEDENCE && declaredInSameAspect(o1, o2)) {\n        // \ufffd\u023d\ufffd\ufffd\ufffd\ufffd\ufffd\u02f3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04bb\ufffd\ufffd\ufffd\ufffdafter\u0368\u05aa\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\u07e3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\ufffd\n        advisorPrecedence = comparePrecedenceWithinAspect(o1, o2);\n    }\n    return advisorPrecedence;\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.code,{children:"AspectJPrecedenceComparator#compare"})," \ufffd\u023d\u03fc\uda96\udd63\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xa3\ufffd"]}),"\n",(0,d.jsxs)(r.ol,{children:["\n",(0,d.jsxs)(r.li,{children:["\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advisorComparator.compare"})," \ufffd\ufffd\ufffd\u0431\u023d\u03e3\ufffd\ufffd\ufffd\ufffd\ufffd\u023d\u03f9\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u01fd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.li,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023d\u03f9\ufffd\ufffd\ufffd\xf5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\ufffd\u036c\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advisor"})," \ufffd\ufffd\ufffd\ufffd\u036c\u04bb aspect \ufffd\u0436\ufffd\ufffd\ufffd\u0123\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"comparePrecedenceWithinAspect"})," \ufffd\ufffd\ufffd\ufffd\ufffd\u023d\ufffd."]}),"\n"]}),"\n",(0,d.jsx)(r.h5,{id:"thisadvisorcomparatorcompare",children:(0,d.jsx)(r.code,{children:"this.advisorComparator.compare"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"this.advisorComparator.compare"})," \ufffd\u0131\u023d\u03f9\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"private final Comparator<? super Advisor> advisorComparator;\n\npublic AspectJPrecedenceComparator() {\n    this.advisorComparator = AnnotationAwareOrderComparator.INSTANCE;\n}\n\npublic int compare(Advisor o1, Advisor o2) {\n    // \ufffd\u023d\u03f9\ufffd\ufffd\ufffdAnnotationAwareOrderComparator\n    int advisorPrecedence = this.advisorComparator.compare(o1, o2);\n    ...\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.code,{children:"this.advisorComparator.compare"})," \ufffd\u0131\u023d\u03f9\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"AnnotationAwareOrderComparator"})," \ufffd\u1e69\ufffd\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"public int compare(@Nullable Object o1, @Nullable Object o2) {\n    return doCompare(o1, o2, null);\n}\n\n/**\n * \ufffd\ufffd\ufffd\ufffd\u0131\u023d\u03f2\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0231\u023d\ufffd PriorityOrdered\ufffd\ufffd\ufffd\u0671\u023d\ufffd Ordered\n */\nprivate int doCompare(@Nullable Object o1, @Nullable Object o2, \n        @Nullable OrderSourceProvider sourceProvider) {\n    // \ufffd\ufffd\ufffd\ufffd\u05ae\u04bb\u03aa PriorityOrdered\ufffd\ufffd\u02ed\ufffd\ufffdPriorityOrdered\ufffd\ufffd\u02ed\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\ufffd\n    boolean p1 = (o1 instanceof PriorityOrdered);\n    boolean p2 = (o2 instanceof PriorityOrdered);\n    if (p1 && !p2) {\n        return -1;\n    }\n    else if (p2 && !p1) {\n        return 1;\n    }\n    // \ufffd\ufffd\ufffd\ufffdorder\ufffd\ufffd\u05b5\ufffd\ufffd\ufffd\u0232\ufffd\ufffd\ufffdOrdered\ufffd\u04ff\u06a3\ufffd\ufffd\ufffd\ufffd\xfb\ufffd\u04b5\ufffd\ufffd\ufffd\ufffd\u0672\ufffd\ufffd\ufffd @Order \u05e2\ufffd\ufffd\n    int i1 = getOrder(o1, sourceProvider);\n    int i2 = getOrder(o2, sourceProvider);\n    // \ufffd\ufffdInteger\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0431\u023d\ufffd\n    return Integer.compare(i1, i2);\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0134\ufffd\ufffd\ufffd\ufffd\u05aa\ufffd\ufffd\ufffd\u0231\u023d\ufffd ",(0,d.jsx)(r.code,{children:"PriorityOrdered"}),"\ufffd\ufffd\ufffd\u0671\u023d\ufffd ",(0,d.jsx)(r.code,{children:"Ordered"}),"\ufffd\ufffd\ufffd\u023d\u03f9\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xa3\ufffd"]}),"\n",(0,d.jsxs)(r.ol,{children:["\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"PriorityOrdered"})," \ufffd\u023d\u03e3\ufffd\ufffd\ufffd\ufffd\ufffd\u05ae\ufffd\u0423\ufffd\u05bb\ufffd\ufffd\ufffd\ufffd\u04bb\u02b5\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"PriorityOrdered"})," \ufffd\u04ff\u06a3\ufffd\ufffd\ufffd\xf4\ufffd\ufffd\ufffd\ufffd\u03aa ",(0,d.jsx)(r.code,{children:"PriorityOrdered"})," \ufffd\ufffd\ufffd\u023c\ufffd\ufffd\u07e3\ufffd \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Ordered"})," \ufffd\u0139\ufffd\ufffd\ufffd\u023d\u03e3\ufffd"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"Ordered"})," \ufffd\u023d\u03f9\ufffd\ufffd\ufffd","\n",(0,d.jsxs)(r.ol,{children:["\n",(0,d.jsxs)(r.li,{children:["\ufffd\ufffd\ufffd\u02b5\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Ordered"})," \ufffd\ufffd ",(0,d.jsx)(r.code,{children:"PriorityOrdered"})," \ufffd\u04ff\u06a3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"getOrder()"})," \ufffd\ufffd\ufffd\ufffd\u05b5\ufffd\ufffd\ufffd\u0431\u023d\u03e3\ufffd\u05b5\u053d\u0421\ufffd\ufffd\ufffd\u023c\ufffd\u053d\ufffd\u07e3\ufffd"]}),"\n",(0,d.jsxs)(r.li,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\u05e2\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Order/@Priority"})," \u05e2\ufffd\u28ec\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"value()"})," \ufffd\ufffd\ufffd\ufffd\u05b5\ufffd\ufffd\ufffd\u0431\u023d\u03e3\ufffd\u05b5\u053d\u0421\ufffd\ufffd\ufffd\u023c\ufffd\u053d\ufffd\u07e3\ufffd"]}),"\n",(0,d.jsxs)(r.li,{children:["\ufffd\ufffd\ufffd\xfb\ufffd\ufffd\u02b5\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Ordered/PriorityOrdered"}),"\ufffd\ufffd\u04b2\xfb\ufffd\u0431\ufffd\u05e2 ",(0,d.jsx)(r.code,{children:"@Order/@Priority"})," \u05e2\ufffd\u28ec\ufffd\ufffd\u03aa\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd (",(0,d.jsx)(r.code,{children:"Integer.MAX_VALUE"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(r.h5,{id:"compareprecedencewithinaspect",children:(0,d.jsx)(r.code,{children:"comparePrecedenceWithinAspect"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Aspect"})," \ufffd\ufffd\u05e2\ufffd\ufffd\ufffd\u08ec\ufffd\ufffd\ufffd\u036c\u04bb ",(0,d.jsx)(r.code,{children:"aspect"})," \ufffd\ufda8\ufffd\ufffd\ufffd\ufffd\u036c\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advice"}),"\ufffd\ufffdspring aop \u04b2\ufffd\u1e69\ufffd\ufffd\u04bb\ufffd\u05f1\u023d\u03f9\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"/**\n * \ufffd\ufffd\ufffd @Aspect\ufffd\ufffd \u036c\u04bbaspect\ufffd\ufda8\ufffd\ufffd\ufffd\ufffd\u036c\ufffd\ufffd\ufffd\ufffd advice\ufffd\ufffd\ufffd\u0674\u03b1\u023d\ufffd\n */\nprivate int comparePrecedenceWithinAspect(Advisor advisor1, Advisor advisor2) {\n    boolean oneOrOtherIsAfterAdvice = (AspectJAopUtils.isAfterAdvice(advisor1) \n            || AspectJAopUtils.isAfterAdvice(advisor2));\n    int adviceDeclarationOrderDelta = getAspectDeclarationOrder(advisor1) \n            - getAspectDeclarationOrder(advisor2);\n    // \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04bb\ufffd\ufffd\ufffd\ufffdafter\u0368\u05aa\ufffd\ufffddeclarationOrderInAspect\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\ufffd\n    if (oneOrOtherIsAfterAdvice) {\n        if (adviceDeclarationOrderDelta < 0) {\n            return LOWER_PRECEDENCE;\n        }\n        else if (adviceDeclarationOrderDelta == 0) {\n            return SAME_PRECEDENCE;\n        }\n        else {\n            return HIGHER_PRECEDENCE;\n        }\n    }\n    // \ufffd\ufffd\ufffd\u07f6\ufffd\ufffd\ufffd\ufffd\ufffdafter\u0368\u05aa\ufffd\ufffddeclarationOrderInAspect\u0421\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\ufffd\n    else {\n        if (adviceDeclarationOrderDelta < 0) {\n            return HIGHER_PRECEDENCE;\n        }\n        else if (adviceDeclarationOrderDelta == 0) {\n            return SAME_PRECEDENCE;\n        }\n        else {\n            return LOWER_PRECEDENCE;\n        }\n    }\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\u023d\u03f9\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xa3\ufffd\ufffd\u023d\ufffd\ufffd\ufffd\ufffd\u07f5\ufffd ",(0,d.jsx)(r.code,{children:"declarationOrderInAspect"})," \u05b5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u05ae\u04bb\u03aa ",(0,d.jsx)(r.code,{children:"after"})," \u0368\u05aa\ufffd\ufffd",(0,d.jsx)(r.code,{children:"declarationOrderInAspect"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\u07e3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u07f6\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"after"})," \u0368\u05aa\ufffd\ufffd",(0,d.jsx)(r.code,{children:"declarationOrderInAspect"})," \u0421\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\u07e1\ufffd"]}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"declarationOrderInAspect"})," \ufffd\ufffd\u02b2\xf4\ufffd\u0623\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04bb\u0421\ufffd\ufffd\ufffd\u1d7d\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advisor.size()"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xa3\ufffd"]}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"ReflectiveAspectJAdvisorFactory"}),"\n"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"public List<Advisor> getAdvisors(MetadataAwareAspectInstanceFactory aspectInstanceFactory) {\n    // \u02a1\ufffd\ufffd\ufffd\ufffd\u04bb\u0429\ufffd\ufffd\ufffd\ufffd\n    ...\n\n    List<Advisor> advisors = new ArrayList<>();\n    //\ufffd\ufffd\u0221\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0435\ufffd\ufffd\ufffd\u01ff\ufffd\ufffd\ufffd\ufffd\n    for (Method method : getAdvisorMethods(aspectClass)) {\n        // \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u01ff\u02b5\ufffd\ufffd\ufffd\ufffdadvisors.size() \ufffd\ufffd\ufffd\ufffd\u03aa 0\ufffd\ufffd1\ufffd\ufffd2\ufffd\ufffd... \ufffd\ufffd\ufffd\ufffd\n        // declarationOrderInAspect \ufffd\ufffd\u05b5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xf5\ufffd\n        Advisor advisor = getAdvisor(method, lazySingletonAspectInstanceFactory, \n                advisors.size(), aspectName);\n        if (advisor != null) {\n            advisors.add(advisor);\n        }\n    }\n\n    // \u02a1\ufffd\ufffd\ufffd\ufffd\u04bb\u0429\ufffd\ufffd\ufffd\ufffd\n    ...\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\u0631\ufffd\u01ff\ufffd\ufffd\ufffd\ufffd\ufffd\u01e3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u05bb\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u036c\u04bb ",(0,d.jsx)(r.code,{children:"@Aspect"})," \ufffd\u0da8\ufffd\ufffd\u0121\ufffd\u036c\ufffd\ufffd\ufffd\ufffd\u0368\u05aa\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u78fa"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"@Aspect\npublic class AspectTest {\n    @Before\n    public void before1() {\n        ...\n    }\n\n    @Before\n    public void before2() {\n        ...\n    }\n\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"before1()"})," \ufffd\ufffd ",(0,d.jsx)(r.code,{children:"before2()"})," \ufffd\ufffd\u04e6\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advisor"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"comparePrecedenceWithinAspect"})," \ufffd\ufffd\ufffd\uda4e\udf36\ufffd\ufffd\ufffd\ufffd\xb4\ufffd\ufffd\ufffd\u0372\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02e3\ufffd\u052d\ufffd\ufffd\ufffd\ufffd\ufffd\u06b2\ufffd\u036c\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Aspect"})," \ufffd\ufffd\ufffd\u0436\ufffd\ufffd\ufffd\u0123\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"@Aspect\npublic class AspectTest1 {\n    @Before\n    public void before() {\n        ...\n    }\n\n}\n\n@Aspect\npublic class AspectTest2 {\n    @Before\n    public void before() {\n        ...\n    }\n\n}\n\n"})}),"\n",(0,d.jsxs)(r.h4,{id:"2-supersortadvisors",children:["2. ",(0,d.jsx)(r.code,{children:"super.sortAdvisors"})]}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\u067b\u0639\ufffd\u0377\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"super.sortAdvisors(advisors)"}),":"]}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"AspectJAwareAdvisorAutoProxyCreator"}),"\n"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"protected List<Advisor> sortAdvisors(List<Advisor> advisors) {\n    ...\n    else {\n        return super.sortAdvisors(advisors);\n    }\n}\n\n"})}),"\n",(0,d.jsx)(r.p,{children:"\ufffd\ufffd\ufffd\u01f8\ufffd\ufffd\ufffd\u0225\ufffd\ufffd"}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"AbstractAdvisorAutoProxyCreator"}),"\n"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:" protected List<Advisor> sortAdvisors(List<Advisor> advisors) {\n     AnnotationAwareOrderComparator.sort(advisors);\n     return advisors;\n }\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02b9\ufffd\xf5\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"AnnotationAwareOrderComparator.sort(advisors)"}),"\ufffd\ufffd\u02b5\ufffd\ufffd\ufffd\u03e3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"this.advisorComparator.compare"})," \ufffd\u0131\u023d\u03f9\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0372\ufffd\ufffd\u0677\ufffd\ufffd\ufffd\ufffd\u02e1\ufffd"]}),"\n",(0,d.jsxs)(r.h3,{id:"3-getorder-\u05b5",children:["3. ",(0,d.jsx)(r.code,{children:"getOrder()"})," \u05b5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsx)(r.h4,{id:"beanfactorytransactionattributesourceadvisorgetorder",children:(0,d.jsx)(r.code,{children:"BeanFactoryTransactionAttributeSourceAdvisor#getOrder()"})}),"\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.code,{children:"BeanFactoryTransactionAttributeSourceAdvisor"})," \xfb\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Order/@Priority"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02b5\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Ordered"})," \ufffd\u04ff\u06a3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u05b4\ufffd\ufffd\u02f3\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"getOrder()"})," \ufffd\ufffd\ufffd\ufffd\ufffd\u0137\ufffd\ufffd\ufffd\u05b5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04e6\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"getOrder()"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xa3\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"    /**\n     * \ufffd\ufffd\u0221 order\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xa3\ufffd\n     * 1\\. \ufffd\ufffd\ufffd\ufffd\ufffd\u05b8\ufffd\ufffd\ufffd\ufffd order\ufffd\ufffd\u05b1\ufffd\u04f7\ufffd\ufffd\u0623\ufffd\n     * 2\\. \ufffd\ufffd\u0221 advisor \ufffd\ufffd advice\ufffd\ufffd\ufffd\ufffd\ufffd advice \u02b5\ufffd\ufffd\ufffd\ufffd Ordered \ufffd\u04ff\u06a3\ufffd\ufffd\ufffd\ufffd\ufffd getOrder()\ufffd\ufffd\n     * 3\\. \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u03f6\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u38ec\ufffd\uda9f\udd7b\ufffd Ordered.LOWEST_PRECEDENCE (\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd)\ufffd\ufffd\n     * @return\n     */\n    @Override\n    public int getOrder() {\n        if (this.order != null) {\n            return this.order;\n        }\n        Advice advice = getAdvice();\n        if (advice instanceof Ordered) {\n            return ((Ordered) advice).getOrder();\n        }\n        return Ordered.LOWEST_PRECEDENCE;\n    }\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.code,{children:"Ordered.LOWEST_PRECEDENCE"})," \u03aa ",(0,d.jsx)(r.code,{children:"Integer.MAX_VALUE"}),"\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"2147483647"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u067f\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"BeanFactoryTransactionAttributeSourceAdvisor"})," \ufffd\ufffd ",(0,d.jsx)(r.code,{children:"getOrder()"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0635\ufffd\u05b5\ufffd\ufffd"]}),"\n",(0,d.jsx)(r.p,{children:(0,d.jsx)(r.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/up-d05044b7dcd41855ab6e59727c4be74bdb9.png",alt:""})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\u027c\ufffd\ufffd\ufffd",(0,d.jsx)(r.code,{children:"BeanFactoryTransactionAttributeSourceAdvisor"})," \ufffd\ufffd\u05b4\ufffd\ufffd\u02f3\ufffd\ufffd\ufffd\ufffd\u012c\ufffd\u03f5\ufffd ",(0,d.jsx)(r.code,{children:"Integer.MAX_VALUE"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0235\u013b\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u05b5\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"return this.order"})," \ufffd\ufffd\ufffd\u0635\u0123\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"public int getOrder() {\n    // \u0368\ufffd\ufffd\ufffd\ufffd\ufffd\u0237\ufffd\ufffd\u05a3\ufffdthis.order \ufffd\ufffd\ufffd\ufffd\u03aanull\n    if (this.order != null) {\n        return this.order;\n    }\n    // \u02a1\ufffd\ufffd\u04bb\u0429\ufffd\ufffd\ufffd\ufffd\n    ...\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\xf4\ufffd\ufffd\u05b5\ufffd\u01f4\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0623\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0637\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u06b4\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"BeanFactoryTransactionAttributeSourceAdvisor"})," \ufffd\ufffd\ufffd\ufffd\u02b1\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"BeanFactoryTransactionAttributeSourceAdvisor#setOrder"})," \ufffd\ufffd\ufffd\xf5\u0123\ufffd"]}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"ProxyTransactionManagementConfiguration"}),"\n"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:'@Bean(name = TransactionManagementConfigUtils.TRANSACTION_ADVISOR_BEAN_NAME)\n@Role(BeanDefinition.ROLE_INFRASTRUCTURE)\npublic BeanFactoryTransactionAttributeSourceAdvisor transactionAdvisor() {\n    BeanFactoryTransactionAttributeSourceAdvisor advisor \n            = new BeanFactoryTransactionAttributeSourceAdvisor();\n    advisor.setTransactionAttributeSource(transactionAttributeSource());\n    advisor.setAdvice(transactionInterceptor());\n    if (this.enableTx != null) {\n        // \ufffd\ufffd\ufffd\ufffd\ufffd\u0221\ufffd\ufffd\ufffd\ufffd @EnableTransactionManagement \u05e2\ufffd\ufffd\ufffd order() \u05b5\n        advisor.setOrder(this.enableTx.<Integer>getNumber("order"));\n    }\n    return advisor;\n}\n\n'})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u01fe\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02e3\ufffd\ufffd\ufffd\ufffd\ufffd advisor \ufffd\ufffd\u05b4\ufffd\ufffd\u02f3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@EnableTransactionManagement"})," \ufffd\ufffd\u05b8\ufffd\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"public @interface EnableTransactionManagement {\n\n    boolean proxyTargetClass() default false;\n\n    AdviceMode mode() default AdviceMode.PROXY;\n\n    /**\n     * \ufffd\ufffd\ufffd\ufffd\u05b8\ufffd\ufffdadvisor\u05b4\ufffd\ufffd\u02f3\ufffd\ufffd\u012c\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\n     */\n    int order() default Ordered.LOWEST_PRECEDENCE;\n\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\u06e3\ufffd",(0,d.jsx)(r.code,{children:"@EnableTransactionManagement"})," \u05e2\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"order()"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u05b8\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advisor"})," \ufffd\ufffd\u05b4\ufffd\ufffd\u02f3\ufffd\ufffd"]}),"\n",(0,d.jsx)(r.h4,{id:"instantiationmodelawarepointcutadvisorimplgetorder",children:(0,d.jsx)(r.code,{children:"InstantiationModelAwarePointcutAdvisorImpl#getOrder()"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\u01f0\ufffd\ufffd\u0137\ufffd\ufffd\ufffd\ufffd\ufffd\u05aa\ufffd\ufffd",(0,d.jsx)(r.code,{children:"@Aspect"})," \ufffd\ufffd\ufffd\u0435\ufffd\xff\u04bb\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0576\ufffd\ufffd\ufffd\u05ea\ufffd\ufffd\u03aa ",(0,d.jsx)(r.code,{children:"advisor"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u03aa ",(0,d.jsx)(r.code,{children:"InstantiationModelAwarePointcutAdvisorImpl"}),"\ufffd\ufffd\ufffd\ufffd\u04b2\u02b5\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Ordered"})," \ufffd\u04ff\u06a3\ufffd\ufffd\ufffd\ufffd\u05b4\ufffd\ufffd\u02f3\ufffd\ufffd\u04b2\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"InstantiationModelAwarePointcutAdvisorImpl#getOrder()"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"getOrder()"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xa3\ufffd"]}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"InstantiationModelAwarePointcutAdvisorImpl"}),"\n"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"@Override\npublic int getOrder() {\n    return this.aspectInstanceFactory.getOrder();\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd ",(0,d.jsx)(r.a,{href:"https://my.oschina.net/funcy/blog/4678817",children:"spring aop \u05ae AnnotationAwareAspectJAutoProxyCreator \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u03e3\ufffd"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\u047e\ufffd\ufffd\ufffd\u03f8\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"method"})," \ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advisor"})," \ufffd\ufffd\u05ea\ufffd\ufffd\ufffd\ufffd\u0323\ufffd\ufffd\u0734\u04f4\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04b5\ufffd ",(0,d.jsx)(r.code,{children:"aspectInstanceFactory"})," \ufffd\ufffd\ufffd\ufffd\ufffd\u0363\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u01fe\u0372\ufffd\ufffd\ufffd\u04bb\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0534\ufffd\ufffd\ufffd\u02e3\ufffd\u05b1\ufffd\ufffd\u0368\ufffd\ufffd\ufffd\ufffd\ufffd\u0535\u0137\ufffd\ufffd\ufffd\ufffd\ufffd\u0221 ",(0,d.jsx)(r.code,{children:"aspectInstanceFactory"})," \ufffd\ufffd\ufffd\ufffd\ufffd\u0363\ufffd"]}),"\n",(0,d.jsx)(r.p,{children:(0,d.jsx)(r.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/up-e2784fc573474f56e8555ef60d57a07bcbf.png",alt:""})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\u04f5\ufffd\ufffd\u0535\u013d\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd",(0,d.jsx)(r.code,{children:"aspectInstanceFactory"})," \ufffd\ufffd\ufffd\ufffd\u03aa ",(0,d.jsx)(r.code,{children:"LazySingletonAspectInstanceFactoryDecorator"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\u01f8\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"getOrder()"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"LazySingletonAspectInstanceFactoryDecorator"}),"\n"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"@Override\npublic int getOrder() {\n    return this.maaif.getOrder();\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023b\u02b9\ufffd\xf5\ufffd\ufffd\u0535\u0137\ufffd\u02bd\ufffd\ufffd\u0221 ",(0,d.jsx)(r.code,{children:"maaif"})," \ufffd\ufffd\ufffd\ufffd\ufffd\u0363\ufffd"]}),"\n",(0,d.jsx)(r.p,{children:(0,d.jsx)(r.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/up-2a4b87b6c8c824c55c4a3d86d736796def0.png",alt:""})}),"\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.code,{children:"maaif"})," \ufffd\ufffd\ufffd\ufffd\u03aa ",(0,d.jsx)(r.code,{children:"BeanFactoryAspectInstanceFactory"}),"\ufffd\ufffd\ufffd\ufffd\ufffd\u01fc\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"BeanFactoryAspectInstanceFactory"}),"\n"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"public int getOrder() {\n    // this.name \u05b8\ufffd\ufffd\ufffd\u01f1\ufffd\u05e2\ufffd\ufffd @Aspect \u05e2\ufffd\ufffd\ufffd\ufffd\ufffd\n    Class<?> type = this.beanFactory.getType(this.name);\n    if (type != null) {\n        // \ufffd\ufffd\ufffd\u02b5\ufffd\ufffd\ufffd\ufffd Ordered \ufffd\u04ff\u06a3\ufffd\ufffd\u0375\ufffd\ufffd\ufffd getOrder() \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0221\n        // PriorityOrdered \ufffd\ufffd Ordered \ufffd\ufffd\ufffd\u04fd\u04ff\u06a3\ufffd\u04b2\ufffd\ufffd getOrder() \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04b2\ufffd\ufffd\ufffd\u0221\ufffd\ufffd\n        if (Ordered.class.isAssignableFrom(type) && this.beanFactory.isSingleton(this.name)) {\n            return ((Ordered) this.beanFactory.getBean(this.name)).getOrder();\n        }\n        // 1\\. \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u01f7\ufffd\ufffd\ufffd @Order \u05e2\ufffd\u28ec\ufffd\ufffd\ufffd\ufffd\u0423\ufffd\ufffd\uda9f\udd7b\ufffd @Order \u05e2\ufffd\ufffd\u05b8\ufffd\ufffd\ufffd\ufffd\u05b5\ufffd\ufffd\n        // 2\\. \ufffd\ufffd\ufffd\ufffd\ufffd\u046f\ufffd\ufffd\ufffd\u01f7\ufffd\ufffd\ufffd @Priority \u05e2\ufffd\u28ec\ufffd\ufffd\ufffd\ufffd\u0423\ufffd\ufffd\uda9f\udd7b\ufffd @Priority \u05e2\ufffd\ufffd\u05b8\ufffd\ufffd\ufffd\ufffd\u05b5\ufffd\ufffd\n        // 3\\. \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u03f6\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u38ec\ufffd\ufffd\ufffd\ufffd Ordered.LOWEST_PRECEDENCE\ufffd\ufffd\u05b5\u03aa Integer.MAX_VALUE\n        return OrderUtils.getOrder(type, Ordered.LOWEST_PRECEDENCE);\n    }\n    return Ordered.LOWEST_PRECEDENCE;\n}\n\n"})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\u04f4\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd",(0,d.jsx)(r.code,{children:"getOrder()"})," \ufffd\u07fc\ufffd\ufffd\ufffd\ufffd\xa3\ufffd"]}),"\n",(0,d.jsxs)(r.ol,{children:["\n",(0,d.jsxs)(r.li,{children:["\u0368\ufffd\ufffd\ufffd\ufffd\ufffd\u01bb\ufffd\u0221\ufffd\ufffd\ufffd\ufffd\ufffd\u08ec\u04b2\ufffd\ufffd\ufffd\u01f1\ufffd\u05e2\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Aspect"})," \ufffd\ufffd\ufffd\u08fb"]}),"\n",(0,d.jsxs)(r.li,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02b5\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Ordered"})," \ufffd\u04ff\u06a3\ufffd\ufffd\u0375\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"getOrder()"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0221\ufffd\ufffd\ufffd\ufffd\ufffd\u0623\ufffd\u05b5\ufffd\ufffd\u04bb\ufffd\ufffd\ufffd\ufffd\u01e3\ufffd",(0,d.jsx)(r.code,{children:"PriorityOrdered"})," \ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Ordered"})," \ufffd\ufffd\ufffd\u04fd\u04ff\u06a3\ufffd\u04b2\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"getOrder()"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04b2\ufffd\ufffd\ufffd\u0221\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.li,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xfb\ufffd\u043b\ufffd\u0221\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u01f7\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Order"})," \u05e2\ufffd\u28ec\ufffd\ufffd\ufffd\ufffd\u0423\ufffd\ufffd\uda9f\udd7b\ufffd ",(0,d.jsx)(r.code,{children:"@Order"})," \u05e2\ufffd\ufffd\u05b8\ufffd\ufffd\ufffd\ufffd\u05b5\ufffd\ufffd\ufffd\ufffd\ufffd\xfb\ufffd\u0423\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u01f7\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Priority"})," \u05e2\ufffd\u28ec\ufffd\ufffd\ufffd\ufffd\u0423\ufffd\ufffd\uda9f\udd7b\ufffd ",(0,d.jsx)(r.code,{children:"@Priority"})," \u05e2\ufffd\ufffd\u05b8\ufffd\ufffd\ufffd\ufffd\u05b5\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.li,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xfb\ufffd\u043b\ufffd\u0221\ufffd\ufffd\u05b5\ufffd\ufffd\ufffd\u0377\ufffd\ufffd\ufffd\u012c\ufffd\ufffd\u05b5\ufffd\ufffd",(0,d.jsx)(r.code,{children:"Ordered.LOWEST_PRECEDENCE"}),"\ufffd\ufffd"]}),"\n"]}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02e3\ufffd",(0,d.jsx)(r.code,{children:"@Aspect"})," \ufffd\ufffd\ufffd\ufffd\ufffd\u0368\ufffd\ufffd\u02b5\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Ordered/PriorityOrdered"})," \ufffd\u04ff\ufffd\ufffd\ufffd\u05b8\ufffd\ufffd\u05b4\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\ufffd\u04b2\ufffd\ufffd\ufffd\ufffd\u0368\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Order/@Priority"})," \u05e2\ufffd\ufffd\ufffd\ufffd\u05b8\ufffd\ufffd\u05b4\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsxs)(r.p,{children:[(0,d.jsx)(r.strong,{children:"\ufffd\ufffd\u04aa\ufffd\u0631\ufffd\u05b8\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"}),"\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"getOrder()"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u2cbf\ufffd\ufffd \ufffd\ufffd\ufffd\ufffd\u05bb \ufffd\u01f0\ufffd ",(0,d.jsx)(r.code,{children:"PriorityOrdered/@Priority"})," \ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Order"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Ordered/@Order"})," \ufffd\u07e1\ufffd\u04b2\ufffd\ufffd\ufffd\ufffd\u02f5\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"AspectA"})," \ufffd\ufffd\u05e2\ufffd\u02f5\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Priority"}),"\ufffd\ufffd",(0,d.jsx)(r.code,{children:"AspectB"})," \ufffd\ufffd\u05e2\ufffd\u02f5\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Order"}),"\ufffd\ufffd",(0,d.jsx)(r.code,{children:"AspectA"})," \ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\ufffd\ufffd\ufffd\u04bb\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"AspectB"})," \ufffd\u07e3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\ufffd\ufffd\ufffd\u05e2\ufffd\ufffd \ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"value()"})," \u05b5\ufffd\ufffd"]}),"\n",(0,d.jsx)(r.h3,{id:"4-\u0566\u023c",children:"4. \ufffd\ufffd\ufffd\ufffd\u0536\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd"}),"\n",(0,d.jsx)(r.p,{children:"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u053c\ufffd\u0434\ufffd\ufffd\ufffd\ufffd\u02b1\ufffd\ufffd\ufffd\ufffd\ufffd\u05b8\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\u0623\ufffd"}),"\n",(0,d.jsxs)(r.ol,{children:["\n",(0,d.jsxs)(r.li,{children:["\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02b5\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advisor"}),"\ufffd\ufffd\ufffd\ufffd\u02b5\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Ordered"})," \ufffd\u04ff\u06a3\ufffd\u04b2\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"advisor"})," \ufffd\ufffd\ufffd\u03f1\ufffd\u05e2 ",(0,d.jsx)(r.code,{children:"@Order"})," \u05e2\ufffd\u28fa"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"public class MyAdvisor extends AbstractBeanFactoryPointcutAdvisor implements Ordered {\n\n    @Override\n    public int getOrder() {\n        return xxx;\n    }\n\n}\n\n@Order(xxx)\npublic class MyAdvisor extends AbstractBeanFactoryPointcutAdvisor {\n\n    @Override\n    public int getOrder() {\n        return xxx;\n    }\n\n}\n\n"})}),"\n"]}),"\n",(0,d.jsxs)(r.li,{children:["\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\u01f5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd (",(0,d.jsx)(r.code,{children:"@Aspect"})," \ufffd\ufffd\u05e2\ufffd\ufffd\ufffd\ufffd)\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0638\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Around/@Before/@After"})," \ufffd\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:'@Aspect\npublic class MyAspectj {\n\n    @Around("xxx")\n    public Object around(ProceedingJoinPoint p){\n        ...\n    }\n\n    @Before("xxx")\n    public void before(JoinPoint p) {\n        ...\n    }\n\n    @After("xxx")\n    public void after(JoinPoint p) {\n        ...\n    }\n\n    @AfterReturning("xxx")\n    public void afterReturning(JoinPoint p) {\n        ...\n    }\n\n    @AfterThrowing("xxx")\n    public void afterThrowing(JoinPoint p) {\n        ...\n    }\n}\n\n'})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\u036c\u04bb\ufffd\ufffd\ufffd\ufffd\u0132\ufffd\u036c\u0368\u05aa\ufffd\ufffdspring \ufffd\u047e\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xfa\ufffd\ufffd\ufffd\u05b4\ufffd\ufffd\u02f3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u07b4\u04f8\ufffd\ufffd\u0123\ufffd\u05b4\ufffd\ufffd\u02f3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u03aa ",(0,d.jsx)(r.code,{children:"Around, Before, After, AfterReturning, AfterThrowing"}),"."]}),"\n"]}),"\n",(0,d.jsxs)(r.li,{children:["\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd (",(0,d.jsx)(r.code,{children:"@Aspect"})," \ufffd\ufffd\u05e2\ufffd\ufffd\ufffd\ufffd) \ufffd\ufffd\ufffd\ufffd\ufffd\u0638\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Around/@Before/@After"})," \ufffd\u0223\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xa3\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:'@Aspect\npublic class MyAspectj {\n\n    @Around("xxx")\n    public Object around(ProceedingJoinPoint p){\n        ...\n    }\n\n    @Before("xxx")\n    public void before(JoinPoint p) {\n        ...\n    }\n\n    @Around("xxx")\n    public Object around(ProceedingJoinPoint p){\n        ...\n    }\n\n    @Before("xxx")\n    public void before(JoinPoint p) {\n        ...\n    }\n\n}\n\n'})}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"AspectJPrecedenceComparator#comparePrecedenceWithinAspect"})," \ufffd\ufffd\ufffd\ufffd\u02b1\ufffd\u0437\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\xf5\ufffd\ufffd\u013d\ufffd\ufffd\ufffd\ufffd\u01e3\ufffd\ufffd\u023d\ufffd\ufffd\ufffd\ufffd\u07f5\ufffd ",(0,d.jsx)(r.code,{children:"declarationOrderInAspect"})," \u05b5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u05ae\u04bb\u03aa ",(0,d.jsx)(r.code,{children:"after"})," \u0368\u05aa\ufffd\ufffd",(0,d.jsx)(r.code,{children:"declarationOrderInAspect"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\u07e3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u07f6\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"after"})," \u0368\u05aa\ufffd\ufffd",(0,d.jsx)(r.code,{children:"declarationOrderInAspect"})," \u0421\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\ufffd\u07e1\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"declarationOrderInAspect"})," \ufffd\ufffd\u022b\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd jdk \ufffd\u0137\ufffd\ufffd\ufffd\ufffd\ufffd\u01a3\ufffd\ufffd\u023b\ufffd\u0221\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0138\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0138\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"declarationOrderInAspect"})," \ufffd\ufffd\u0421\ufffd\ufffd\ufffd\ufffd\u036c jdK \ufffd\u6c7e\u05ae\ufffd\u48ec\ufffd\ufffd\ufffd\u0531\ufffd\u05a4\ufffd\ufffd\xf5\ufffd\u02f3\ufffd\ufffd\u04bb\ufffd\xa1\ufffd"]}),"\n"]}),"\n",(0,d.jsxs)(r.li,{children:["\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd (",(0,d.jsx)(r.code,{children:"@Aspect"})," \ufffd\ufffd\u05e2\ufffd\ufffd\ufffd\ufffd) \ufffd\ufffd\u05b4\ufffd\ufffd\u02f3\ufffd\ufffd\ufffd\ufffd\ufffd\u0368\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Order"})," \u05e2\ufffd\u28ec\ufffd\ufffd\u02b5\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"Ordered"})," \ufffd\u04ff\ufffd\ufffd\ufffd\u05b8\ufffd\ufffd\ufffd\ufffd"]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{children:"@Order(xxx)\npublic class MyAspectj1 {\n    ...\n}\n\n@Order(xxx)\npublic class MyAspectj2 {\n    ...\n}\n\n"})}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(r.p,{children:["\ufffd\ufffd\ufffd\u28ec",(0,d.jsx)(r.code,{children:"getOrder()"})," \ufffd\ufffd\ufffd\u0635\ufffd\u05b5\ufffd\ufffd ",(0,d.jsx)(r.code,{children:"@Order(xxx)"})," \u05b8\ufffd\ufffd\ufffd\ufffd\u05b5\u053d\u0421\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023c\ufffd\u053d\ufffd\u07e1\ufffd"]}),"\n",(0,d.jsx)(r.hr,{}),"\n",(0,d.jsx)(r.p,{children:(0,d.jsxs)(r.em,{children:["\ufffd\ufffd\ufffd\ufffd\u052d\ufffd\ufffd\ufffd\ufffd\ufffd\u04e3\ufffd",(0,d.jsx)(r.a,{href:"https://my.oschina.net/funcy/blog/4784828",children:"https://my.oschina.net/funcy/blog/4784828"})," \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u07f8\ufffd\ufffd\ufffd\u02ee\u01bd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0434\ufffd\ufffd\ufffd\u05ae\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04ed\u05b8\ufffd\ufffd\ufffd\ufffd\u052d\ufffd\ufffd\ufffd\ufffd\ufffd\u05e3\ufffd\ufffd\ufffd\u04b5\u05ea\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u03f5\ufffd\ufffd\ufffd\u07fb\ufffd\ufffd\ufffd\ufffd\u0228\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04b5\u05ea\ufffd\ufffd\ufffd\ufffd\u05e2\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]})})]})}function p(e={}){const{wrapper:r}={...(0,o.a)(),...e.components};return r?(0,d.jsx)(r,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}},88672:(e,r,n)=>{n.d(r,{Z:()=>c,a:()=>i});var d=n(50959);const o={},s=d.createContext(o);function i(e){const r=d.useContext(s);return d.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),d.createElement(s.Provider,{value:r},e.children)}}}]);