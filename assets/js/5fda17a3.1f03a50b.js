"use strict";(self.webpackChunkcode_note_blog=self.webpackChunkcode_note_blog||[]).push([[388],{59258:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var i=t(11527),a=t(88672);const r={},s=void 0,o={id:"Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u542f\u52a8\u6d41\u7a0b/Spring\u542f\u52a8\u6d41\u7a0b\uff08\u4e5d\uff09\uff1a\u5355\u4f8bbean\u7684\u521b\u5efa",title:"Spring\u542f\u52a8\u6d41\u7a0b\uff08\u4e5d\uff09\uff1a\u5355\u4f8bbean\u7684\u521b\u5efa",description:"\u63a5\u4e0a\u6587\uff0c\u672c\u6587\u4f9d\u65e7\u662f\u5206\u6790 finishBeanFactoryInitialization(beanFactory)\uff0c\u672c\u6587\u5c06\u91cd\u70b9\u5206\u6790\u5355\u4f8b bean \u7684\u521b\u5efa\u6d41\u7a0b\u3002",source:"@site/docs/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u542f\u52a8\u6d41\u7a0b/Spring\u542f\u52a8\u6d41\u7a0b\uff08\u4e5d\uff09\uff1a\u5355\u4f8bbean\u7684\u521b\u5efa.md",sourceDirName:"Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u542f\u52a8\u6d41\u7a0b",slug:"/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u542f\u52a8\u6d41\u7a0b/Spring\u542f\u52a8\u6d41\u7a0b\uff08\u4e5d\uff09\uff1a\u5355\u4f8bbean\u7684\u521b\u5efa",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u542f\u52a8\u6d41\u7a0b/Spring\u542f\u52a8\u6d41\u7a0b\uff08\u4e5d\uff09\uff1a\u5355\u4f8bbean\u7684\u521b\u5efa",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u542f\u52a8\u6d41\u7a0b/Spring\u542f\u52a8\u6d41\u7a0b\uff08\u4e5d\uff09\uff1a\u5355\u4f8bbean\u7684\u521b\u5efa.md",tags:[],version:"current",frontMatter:{},sidebar:"spring",previous:{title:"Spring\u542f\u52a8\u6d41\u7a0b\uff08\u4e8c\uff09\uff1aApplicationContext\u7684\u521b\u5efa",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u542f\u52a8\u6d41\u7a0b/Spring\u542f\u52a8\u6d41\u7a0b\uff08\u4e8c\uff09\uff1aApplicationContext\u7684\u521b\u5efa"},next:{title:"Spring\u542f\u52a8\u6d41\u7a0b\uff08\u516d\uff09\uff1a\u6ce8\u518cBeanPostProcessor",permalink:"/code-note-blog/docs/Spring\u5168\u5bb6\u6876/Spring\u6e90\u7801\u5206\u6790/Spring\u542f\u52a8\u6d41\u7a0b/Spring\u542f\u52a8\u6d41\u7a0b\uff08\u516d\uff09\uff1a\u6ce8\u518cBeanPostProcessor"}},c={},l=[{value:"1. \u521b\u5efa\u5b9e\u4f8b",id:"1-\u521b\u5efa\u5b9e\u4f8b",level:4},{value:"2. \u67e5\u627e\u5c5e\u6027",id:"2-\u67e5\u627e\u5c5e\u6027",level:4},{value:"3. \u6ce8\u5165\u5c5e\u6027",id:"3-\u6ce8\u5165\u5c5e\u6027",level:4},{value:"4. \u521d\u59cb\u5316 bean",id:"4-\u521d\u59cb\u5316-bean",level:4},{value:"4.1 \u8c03\u7528 Aware bean \u7684\u65b9\u6cd5",id:"41-\u8c03\u7528-aware-bean-\u7684\u65b9\u6cd5",level:5},{value:"4.2 \u8fd0\u884c\u540e\u7f6e\u5904\u7406\u5668\u7684 <code>postProcessBeforeInitialization</code> \u65b9\u6cd5",id:"42-\u8fd0\u884c\u540e\u7f6e\u5904\u7406\u5668\u7684-postprocessbeforeinitialization-\u65b9\u6cd5",level:5},{value:"4.3 \u8c03\u7528 bean \u7684\u521d\u59cb\u5316\u65b9\u6cd5",id:"43-\u8c03\u7528-bean-\u7684\u521d\u59cb\u5316\u65b9\u6cd5",level:5},{value:"4.4 \u8fd0\u884c\u540e\u7f6e\u5904\u7406\u5668\u7684 <code>postProcessAfterInitialization</code> \u65b9\u6cd5",id:"44-\u8fd0\u884c\u540e\u7f6e\u5904\u7406\u5668\u7684-postprocessafterinitialization-\u65b9\u6cd5",level:5},{value:"5. \u603b\u7ed3",id:"5-\u603b\u7ed3",level:4}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h4:"h4",h5:"h5",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/up-1f1ac8f3d8241fad9693d9684048ab7f3ae.png",alt:""})}),"\n",(0,i.jsxs)(n.p,{children:["\u63a5\u4e0a\u6587\uff0c\u672c\u6587\u4f9d\u65e7\u662f\u5206\u6790 ",(0,i.jsx)(n.code,{children:"finishBeanFactoryInitialization(beanFactory)"}),"\uff0c\u672c\u6587\u5c06\u91cd\u70b9\u5206\u6790\u5355\u4f8b bean \u7684\u521b\u5efa\u6d41\u7a0b\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u4e0a\u4e00\u7bc7\u6587\u7ae0\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86 ",(0,i.jsx)(n.code,{children:"AbstractApplicationContext#finishBeanFactoryInitialization"})," \u7684\u6267\u884c\u8fc7\u7a0b\uff0c\u672c\u6587\u5c06\u6df1\u5165\u7ec6\u8282\uff0c\u5206\u6790 spring bean \u7684\u521b\u5efa\u8fc7\u7a0b\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"|-AnnotationConfigApplicationContext#AnnotationConfigApplicationContext(String...)\n |-AbstractApplicationContext#refresh\n  |-AbstractApplicationContext#finishBeanFactoryInitialization\n   |-DefaultListableBeanFactory#preInstantiateSingletons\n    |-AbstractBeanFactory#getBean(java.lang.String)\n     |-AbstractBeanFactory#doGetBean\n      |-AbstractAutowireCapableBeanFactory#createBean(String, RootBeanDefinition, Object[])\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4eec\u76f4\u63a5\u770b ",(0,i.jsx)(n.code,{children:"AbstractAutowireCapableBeanFactory#createBean(String, RootBeanDefinition, Object[])"}),"\uff0c\u7cbe\u7b80\u540e\u7684\u4ee3\u7801\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Override\nprotected Object createBean(String beanName, RootBeanDefinition mbd, @Nullable Object[] args)\n    \tthrows BeanCreationException {\n\n    RootBeanDefinition mbdToUse = mbd;\n\n    // \u786e\u4fdd BeanDefinition \u4e2d\u7684 Class \u88ab\u52a0\u8f7d\n    Class<?> resolvedClass = resolveBeanClass(mbd, beanName);\n    if (resolvedClass != null && !mbd.hasBeanClass() && mbd.getBeanClassName() != null) {\n        mbdToUse = new RootBeanDefinition(mbd);\n        mbdToUse.setBeanClass(resolvedClass);\n    }\n\n    // \u51c6\u5907\u65b9\u6cd5\u8986\u5199\uff0c\u5982\u679cbean\u4e2d\u5b9a\u4e49\u4e86 <lookup-method /> \u548c <replaced-method />\n    try {\n        mbdToUse.prepareMethodOverrides();\n    }\n    catch (BeanDefinitionValidationException ex) {\n        ...\n    }\n\n    try {\n        // \u5982\u679c\u6709\u4ee3\u7406\u7684\u8bdd\u76f4\u63a5\u8fd4\u56de\n        Object bean = resolveBeforeInstantiation(beanName, mbdToUse);\n        if (bean != null) {\n            return bean;\n        }\n    }\n    catch (Throwable ex) {\n        ...\n    }\n\n    try {\n        // \u521b\u5efa bean\n        Object beanInstance = doCreateBean(beanName, mbdToUse, args);\n        return beanInstance;\n    }\n    catch (BeanCreationException | ImplicitlyAppearedSingletonException ex) {\n        ...\n    }\n    catch (Throwable ex) {\n        ...\n    }\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u53ef\u4ee5\u770b\u5230\uff0c\u8be5\u65b9\u6cd5\u505a\u4e86\u56db\u4ef6\u4e8b\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u786e\u4fdd class \u88ab\u52a0\u8f7d"}),"\n",(0,i.jsx)(n.li,{children:"\u8986\u5199\u65b9\u6cd5"}),"\n",(0,i.jsx)(n.li,{children:"\u67e5\u627e\u4ee3\u7406\u5bf9\u8c61\uff0c\u82e5\u6709\u5219\u8fd4\u56de"}),"\n",(0,i.jsx)(n.li,{children:"\u521b\u5efa spring bean"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5bf9\u4e8e\u524d\u9762\u4e09\u4e2a\u64cd\u4f5c\uff0c\u672c\u6587\u4e0d\u5173\u6ce8\uff0c\u6211\u4eec\u4ec5\u770b\u7b2c\u56db\u4e2a\u64cd\u4f5c\u3002\u8fdb\u5165 ",(0,i.jsx)(n.code,{children:"AbstractAutowireCapableBeanFactory#doCreateBean"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"protected Object doCreateBean(final String beanName, final RootBeanDefinition mbd, \n          final @Nullable Object[] args)  throws BeanCreationException {\n\n    BeanWrapper instanceWrapper = null;\n    if (mbd.isSingleton()) {\n        //\u5982\u679c\u662f factoryBean\u5219\u4ece\u7f13\u5b58\u5220\u9664\n        instanceWrapper = this.factoryBeanInstanceCache.remove(beanName);\n    }\n    if (instanceWrapper == null) {\n         // \u5b9e\u4f8b\u5316 Bean\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u91cc\u9762\u624d\u662f\u7ec8\u70b9\n         instanceWrapper = createBeanInstance(beanName, mbd, args);\n    }\n    //bean\u5b9e\u4f8b\n    final Object bean = instanceWrapper.getWrappedInstance();\n    //bean\u7c7b\u578b\n    Class<?> beanType = instanceWrapper.getWrappedClass();\n    if (beanType != NullBean.class) {\n        mbd.resolvedTargetType = beanType;\n    }\n\n    synchronized (mbd.postProcessingLock) {\n        if (!mbd.postProcessed) {\n            try {\n                // \u5faa\u73af\u8c03\u7528MergedBeanDefinitionPostProcessor\u7684postProcessMergedBeanDefinition\u65b9\u6cd5\u3002\u4f8b\u5982\uff0c\n                // 1\\. \u8c03\u7528 AutowiredAnnotationBeanPostProcessor.postProcessMergedBeanDefinition \u4e3a\u4e86\u627e\u5230\n                //  \u5e26\u6709@Autowired\u3001@Value \u6ce8\u89e3\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\n                // 2\\. \u8c03\u7528 CommonAnnotationBeanPostProcessor.postProcessMergedBeanDefinition \u4e3a\u4e86\u627e\u5230\n                // \t\u5e26\u6709@Resource \u6ce8\u89e3\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\n                applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName);\n            }\n            catch (Throwable ex) {\n                ...\n            }\n            mbd.postProcessed = true;\n        }\n    }\n\n    // \u89e3\u51b3\u5faa\u73af\u4f9d\u8d56\u95ee\u9898, \u662f\u5426\u5141\u8bb8\u5faa\u73af\u4f9d\u8d56, allowCircularReferences\u9ed8\u8ba4\u4e3atrue\uff0c\u53ef\u4ee5\u5173\u95ed\n    boolean earlySingletonExposure = (mbd.isSingleton() && this.allowCircularReferences &&\n            isSingletonCurrentlyInCreation(beanName));\n    if (earlySingletonExposure) {\n        // \u5faa\u73af\u4f9d\u8d56\u7684\u89e3\u51b3\uff0c\u540e\u9762\u4f1a\u5355\u72ec\u5206\u6790\n        ...\n    }\n\n    Object exposedObject = bean;\n    try {\n        // \u8d1f\u8d23\u5c5e\u6027\u88c5\u914d, \u4e5f\u5c31\u662f\u6211\u4eec\u5e38\u5e38\u8bf4\u7684\u81ea\u52a8\u6ce8\u5165\uff0c\u5f88\u91cd\u8981\n        populateBean(beanName, mbd, instanceWrapper);\n        // \u8fd9\u91cc\u662f\u5904\u7406bean\u521d\u59cb\u5316\u5b8c\u6210\u540e\u7684\u5404\u79cd\u56de\u8c03\uff0c\n        // \u4f8b\u5982init-method\u3001InitializingBean \u63a5\u53e3\u3001BeanPostProcessor \u63a5\u53e3\n        exposedObject = initializeBean(beanName, exposedObject, mbd);\n    }\n    catch (Throwable ex) {\n        ...\n    }\n\n    //\u540c\u6837\u7684\uff0c\u5982\u679c\u5b58\u5728\u5faa\u73af\u4f9d\u8d56\n    if (earlySingletonExposure) {\n        // \u5faa\u73af\u4f9d\u8d56\u7684\u89e3\u51b3\uff0c\u540e\u9762\u4f1a\u5355\u72ec\u5206\u6790\n        ...\n    }\n\n    // \u628abean\u6ce8\u518c\u5230\u76f8\u5e94\u7684Scope\u4e2d\n    try {\n        registerDisposableBeanIfNecessary(beanName, bean, mbd);\n    }\n    catch (BeanDefinitionValidationException ex) {\n        ...\n    }\n\n    return exposedObject;\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u53ef\u4ee5\u770b\u5230\uff0cspring \u5728\u521b\u5efa bean \u65f6\uff0c\u4e3b\u8981\u505a\u4e86\u5982\u4e0b\u4e09\u4ef6\u4e8b\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u521b\u5efa\u5b9e\u4f8b"}),"\n",(0,i.jsx)(n.li,{children:"\u67e5\u627e\u5c5e\u6027"}),"\n",(0,i.jsx)(n.li,{children:"\u6ce8\u5165\u5c5e\u6027"}),"\n",(0,i.jsx)(n.li,{children:"\u521d\u59cb\u5316 bean"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\uff0c\u54b1\u4eec\u5c31\u4e3b\u8981\u5206\u6790\u8fd9\u56db\u4e2a\u6b65\u9aa4\u3002"}),"\n",(0,i.jsx)(n.h4,{id:"1-\u521b\u5efa\u5b9e\u4f8b",children:"1. \u521b\u5efa\u5b9e\u4f8b"}),"\n",(0,i.jsxs)(n.p,{children:["spring \u521b\u5efa\u5b9e\u4f8b\u7684\u65b9\u6cd5\u662f ",(0,i.jsx)(n.code,{children:"AbstractAutowireCapableBeanFactory#createBeanInstance"}),"\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"protected BeanWrapper createBeanInstance(String beanName, RootBeanDefinition mbd, \n        @Nullable Object[] args) {\n    // \u786e\u4fdd\u5df2\u7ecf\u52a0\u8f7d\u4e86\u6b64 class\n    Class<?> beanClass = resolveBeanClass(mbd, beanName);\n\n    // \u6821\u9a8c\u7c7b\u7684\u8bbf\u95ee\u6743\u9650\n    if (beanClass != null && !Modifier.isPublic(beanClass.getModifiers()) \n                && !mbd.isNonPublicAccessAllowed()) {\n        throw new BeanCreationException(...);\n    }\n\n    // \u662f\u5426\u8bbe\u7f6e\u4e86bean\u521b\u5efa\u7684Supplier\uff0cSupplier\u662fjava8\u63d0\u4f9b\u7684\u7c7b\uff0c\u53ef\u4ee5\u4f20\u5165\u4e00\u4e2alambda\u8868\u8fbe\u5f0f\n    // \u8c03\u7528 AbstractBeanDefinition#setInstanceSupplier \u6307\u5b9a\n    Supplier<?> instanceSupplier = mbd.getInstanceSupplier();\n    if (instanceSupplier != null) {\n        return obtainFromSupplier(instanceSupplier, beanName);\n    }\n\n    if (mbd.getFactoryMethodName() != null) {\n        // \u91c7\u7528\u5de5\u5382\u65b9\u6cd5\u5b9e\u4f8b\u5316\n        return instantiateUsingFactoryMethod(beanName, mbd, args);\n    }\n\n    // \u662f\u5426\u7b2c\u4e00\u6b21\n    boolean resolved = false;\n    // \u662f\u5426\u91c7\u7528\u6784\u9020\u51fd\u6570\u6ce8\u5165\n    boolean autowireNecessary = false;\n    if (args == null) {\n        synchronized (mbd.constructorArgumentLock) {\n            if (mbd.resolvedConstructorOrFactoryMethod != null) {\n                resolved = true;\n                autowireNecessary = mbd.constructorArgumentsResolved;\n            }\n        }\n    }\n    if (resolved) {\n        if (autowireNecessary) {\n            return autowireConstructor(beanName, mbd, null, null);\n        }\n        else {\n            // \u65e0\u53c2\u6784\u9020\u51fd\u6570\n            return instantiateBean(beanName, mbd);\n        }\n    }\n\n    // Candidate constructors for autowiring?\n    // \u5224\u65ad\u662f\u5426\u91c7\u7528\u6709\u53c2\u6784\u9020\u51fd\u6570\n    Constructor<?>[] ctors = determineConstructorsFromBeanPostProcessors(beanClass, beanName);\n    if (ctors != null || mbd.getResolvedAutowireMode() == AUTOWIRE_CONSTRUCTOR ||\n            mbd.hasConstructorArgumentValues() || !ObjectUtils.isEmpty(args)) {\n        return autowireConstructor(beanName, mbd, ctors, args);\n    }\n\n    ctors = mbd.getPreferredConstructors();\n    if (ctors != null) {\n        // \u6784\u9020\u51fd\u6570\u4f9d\u8d56\u6ce8\u5165\n        return autowireConstructor(beanName, mbd, ctors, null);\n    }\n\n    // \u8c03\u7528\u65e0\u53c2\u6784\u9020\u51fd\u6570\n    return instantiateBean(beanName, mbd);\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4ece\u4ee5\u4e0a\u4ee3\u7801\u6765\u770b\uff0cspring \u5728\u5b9e\u4f8b\u5316 bean \u65f6\uff0c\u6709 4 \u79cd\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u4f7f\u7528\u5b9e\u4f8b\u5316\u65b9\u6cd5\uff1aobtainFromSupplier"}),"\n",(0,i.jsx)(n.li,{children:"\u4f7f\u7528\u5de5\u5382\u65b9\u6cd5\uff1ainstantiateUsingFactoryMethod"}),"\n",(0,i.jsx)(n.li,{children:"\u4f7f\u7528\u6709\u53c2\u6784\u9020\uff1aautowireConstructor"}),"\n",(0,i.jsx)(n.li,{children:"\u4f7f\u7528\u65e0\u53c2\u6784\u9020\uff1ainstantiateBean"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5bf9\u4e8e\u524d\u9762\u4e24\u4e2a\u65b9\u6cd5\uff0c\u8fd9\u662f\u5f00\u53d1\u8005\u6307\u5b9a\u7684\u65b9\u6cd5\uff0c\u6ca1\u5565\u597d\u8bf4\u7684\uff0c\u540e\u9762\u4e24\u4e2a\u65b9\u6cd5\u662f spring \u6839\u636e\u7c7b\u7684\u5b9e\u9645\u60c5\u51b5\u6765\u9009\u62e9\u6784\u9020\u65b9\u6cd5\u8fdb\u884c\u5b9e\u4f8b\u5316\u7684\u3002\u5bf9\u4e8e\u4e00\u4e2a bean \u6765\u8bf4\uff0c\u5982\u679c\u672a\u63d0\u4f9b\u4efb\u4f55\u6784\u9020\u65b9\u6cd5\u6216\u63d0\u4f9b\u4e86\u65e0\u53c2\u6784\u9020\u65b9\u6cd5\uff0c\u5219\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"AbstractAutowireCapableBeanFactory#instantiateBean"})," \u6765\u8fdb\u884c\u5b9e\u4f8b\u5316\uff0c\u5426\u5219\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"AbstractAutowireCapableBeanFactory#autowireConstructor"})," \u8fdb\u884c\u5b9e\u4f8b\u5316\u3002\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u6700\u7ec8\u90fd\u4f1a\u6267\u884c\u5230 ",(0,i.jsx)(n.code,{children:"BeanUtils#instantiateClass(Constructor<T>, Object...)"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'public static <T> T instantiateClass(Constructor<T> ctor, Object... args) \n            throws BeanInstantiationException {\n    Assert.notNull(ctor, "Constructor must not be null");\n    try {\n        ReflectionUtils.makeAccessible(ctor);\n        if (KotlinDetector.isKotlinReflectPresent() \n                   && KotlinDetector.isKotlinType(ctor.getDeclaringClass())) {\n            return KotlinDelegate.instantiateClass(ctor, args);\n        }\n        else {\n            Class<?>[] parameterTypes = ctor.getParameterTypes();\n            Assert.isTrue(args.length <= parameterTypes.length, "...");\n            Object[] argsWithDefaultValues = new Object[args.length];\n            for (int i = 0 ; i < args.length; i++) {\n                if (args[i] == null) {\n                    Class<?> parameterType = parameterTypes[i];\n                    argsWithDefaultValues[i] = (parameterType.isPrimitive() \n                                        ? DEFAULT_TYPE_VALUES.get(parameterType) : null);\n                }\n                else {\n                    argsWithDefaultValues[i] = args[i];\n                }\n            }\n            // \u8fd9\u91cc\u8fdb\u884c\u5b9e\u4f8b\u5316\n            return ctor.newInstance(argsWithDefaultValues);\n        }\n    }\n    catch (...) {\n        ...\n    }\n}\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230\uff0c\u6700\u7ec8\u8c03\u7528\u7684\u662f ",(0,i.jsx)(n.code,{children:"java.lang.reflect.Constructor#newInstance"}),"\uff0c\u8fd9\u5c31\u662f jdk \u7684\u53cd\u5c04\u4e86\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u53e6\u5916\uff0c\u5f53 bean \u63d0\u4f9b\u4e86\u591a \u4e2a\u6784\u9020\u65b9\u6cd5\u65f6\uff0cspring \u4f1a\u8fdb\u884c\u4e00\u5957\u590d\u6742\u7684\u63a8\u65ad\u673a\u5236\uff0c\u63a8\u65ad\u51fa\u6700\u4f73\u7684\u6784\u9020\u65b9\u6cd5\uff0c\u8fd9\u91cc\u5c31\u4e0d\u5c55\u5f00\u4e86\u3002"}),"\n",(0,i.jsx)(n.h4,{id:"2-\u67e5\u627e\u5c5e\u6027",children:"2. \u67e5\u627e\u5c5e\u6027"}),"\n",(0,i.jsxs)(n.p,{children:["\u5bf9\u8c61\u521b\u5efa\u540e\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u8fdb\u884c\u5c5e\u6027\u6ce8\u5165\u4e86\uff0c\u4e0d\u8fc7\u5728\u6ce8\u5165\u5c5e\u6027\u524d\uff0c\u9700\u8981\u77e5\u9053\u7c7b\u4e2d\u6709\u54ea\u4e9b\u5c5e\u6027\u9700\u8981\u6ce8\u5165\u3002spring \u5c5e\u6027\u67e5\u627e\u662f\u5728 ",(0,i.jsx)(n.code,{children:"AbstractAutowireCapableBeanFactory#applyMergedBeanDefinitionPostProcessors"})," \u4e2d\u8c03\u7528\u540e\u7f6e\u5904\u7406\u5668\u8fdb\u884c\u64cd\u4f5c\u7684\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"protected void applyMergedBeanDefinitionPostProcessors(RootBeanDefinition mbd, \n        Class<?> beanType, String beanName) {\n    for (BeanPostProcessor bp : getBeanPostProcessors()) {\n        if (bp instanceof MergedBeanDefinitionPostProcessor) {\n            // \u8c03\u7528\u540e\u7f6e\u5904\u7406\u5668\n            MergedBeanDefinitionPostProcessor bdp = (MergedBeanDefinitionPostProcessor) bp;\n            bdp.postProcessMergedBeanDefinition(mbd, beanType, beanName);\n        }\n    }\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u8fd9\u4e9b\u540e\u7f6e\u5904\u7406\u5668\u4e2d\uff0c"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"AutowiredAnnotationBeanPostProcessor.postProcessMergedBeanDefinition"})," \u67e5\u627e\u5e26\u6709 ",(0,i.jsx)(n.code,{children:"@Autowired"}),"\u3001",(0,i.jsx)(n.code,{children:"@Value"})," \u6ce8\u89e3\u7684\u5c5e\u6027\u548c\u65b9\u6cd5"]}),"\n",(0,i.jsxs)(n.li,{children:["\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"CommonAnnotationBeanPostProcessor.postProcessMergedBeanDefinition"})," \u67e5\u627e\u5e26\u6709 ",(0,i.jsx)(n.code,{children:"@Resource"})," \u6ce8\u89e3\u7684\u5c5e\u6027\u548c\u65b9\u6cd5"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\u4e3a\u4e86\u65b9\u4fbf\u8bf4\u660e ",(0,i.jsx)(n.code,{children:"@Autowired"})," \u7684\u6ce8\u5165\u6d41\u7a0b\uff0c\u6211\u4eec\u5728 demo01 \u7684 ",(0,i.jsx)(n.code,{children:"org.springframework.learn.demo01.BeanObj1"})," \u6dfb\u52a0\u4e24\u884c\u884c\u4ee3\u7801\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'package org.springframework.learn.demo01;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class BeanObj1 {\n\n    // \u4ee5\u4e0b\u4e24\u884c\u4e3a\u65b0\u52a0\u5165\u7684\u4ee3\u7801\n    @Autowired\n    private BeanObj2 beanObj2;\n\n    public BeanObj1() {\n        System.out.println("\u8c03\u7528beanObj1\u7684\u6784\u9020\u65b9\u6cd5");\n    }\n\n    @Override\n    public String toString() {\n        return "BeanObj1{}";\n    }\n}\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fdb\u5165 ",(0,i.jsx)(n.code,{children:"AutowiredAnnotationBeanPostProcessor#postProcessMergedBeanDefinition"})," \u65b9\u6cd5\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Override\npublic void postProcessMergedBeanDefinition(RootBeanDefinition beanDefinition, \n        Class<?> beanType, String beanName) {\n    // \u67e5\u627e\u5c5e\u6027\u4e0e\u65b9\u6cd5\n    InjectionMetadata metadata = findAutowiringMetadata(beanName, beanType, null);\n    // \u9a8c\u8bc1\u67e5\u627e\u5230\u7684\u5c5e\u6027\u4e0e\u65b9\u6cd5\uff0c\u5e76\u6ce8\u518c\u5230beanDefinition\n    metadata.checkConfigMembers(beanDefinition);\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4e00\u8def\u8ddf\u8fdb ",(0,i.jsx)(n.code,{children:"AutowiredAnnotationBeanPostProcessor#findAutowiringMetadata"})," \u65b9\u6cd5\uff0c\u8ddf\u5230\u4e86 ",(0,i.jsx)(n.code,{children:"AutowiredAnnotationBeanPostProcessor#buildAutowiringMetadata"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"private InjectionMetadata buildAutowiringMetadata(final Class<?> clazz) {\n     ...\n    // \u8fd9\u91cc\u8dd1\u4e86\u4e00\u4e2a\u5faa\u73af\uff0c\u627e\u5b8c\u5f53\u524d\u7c7b\u627e\u5f53\u524d\u7c7b\u7684\u7236\u7c7b\uff0c\u76f4\u5230Object\u7c7b\n    do {\n        final List<InjectionMetadata.InjectedElement> currElements = new ArrayList<>();\n\n        // \u67e5\u627e\u5c5e\u6027\n        ReflectionUtils.doWithLocalFields(targetClass, field -> {\n            MergedAnnotation<?> ann = findAutowiredAnnotation(field);\n            if (ann != null) {\n                if (Modifier.isStatic(field.getModifiers())) {\n                    return;\n                }\n                boolean required = determineRequiredStatus(ann);\n                // \u5c5e\u6027\u5c01\u88c5\u6210 AutowiredFieldElement\n                currElements.add(new AutowiredFieldElement(field, required));\n            }\n        });\n\n        // \u67e5\u627e\u65b9\u6cd5\n        ReflectionUtils.doWithLocalMethods(targetClass, method -> {\n            Method bridgedMethod = BridgeMethodResolver.findBridgedMethod(method);\n            if (!BridgeMethodResolver.isVisibilityBridgeMethodPair(method, bridgedMethod)) {\n                return;\n            }\n            MergedAnnotation<?> ann = findAutowiredAnnotation(bridgedMethod);\n            if (ann != null && method.equals(ClassUtils.getMostSpecificMethod(method, clazz))) {\n                if (Modifier.isStatic(method.getModifiers())) {\n                    return;\n                }\n                if (method.getParameterCount() == 0) {\n                }\n                boolean required = determineRequiredStatus(ann);\n                PropertyDescriptor pd = BeanUtils.findPropertyForMethod(bridgedMethod, clazz);\n                // \u65b9\u6cd5\u5c01\u88c5\u6210 AutowiredMethodElement\n                currElements.add(new AutowiredMethodElement(method, required, pd));\n            }\n        });\n\n        elements.addAll(0, currElements);\n        targetClass = targetClass.getSuperclass();\n    }\n    while (targetClass != null && targetClass != Object.class);\n\n    return InjectionMetadata.forElements(elements, clazz);\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5\u4e0a\u4ee3\u7801\u5c31\u662f\u67e5\u627e\u8fc7\u7a0b\uff0c\u603b\u7ed3\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5faa\u73af\u67e5\u8be2\u7236\u7c7b\uff0c\u4ece\u5f53\u524d\u7c7b\u5f00\u59cb\uff0c\u627e\u5b8c\u5f53\u524d\u7c7b\u5c31\u627e\u5f53\u524d\u7c7b\u7684\u7236\u7c7b\uff0c\u76f4\u63a5 Object \u4e3a\u6b62\uff1b"}),"\n",(0,i.jsxs)(n.li,{children:["\u67e5\u627e\u5c5e\u6027\u4e0e\u65b9\u6cd5\uff0c\u5c5e\u6027\u627e\u5230\u540e\u5c01\u88c5\u4e3a ",(0,i.jsx)(n.code,{children:"AutowiredFieldElement"}),"\uff0c\u65b9\u6cd5\u627e\u5230\u540e\u5c01\u88c5\u4e3a ",(0,i.jsx)(n.code,{children:"AutowiredMethodElement"}),"\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u65e0\u8bba\u662f\u67e5\u627e\u5c5e\u6027\u8fd8\u662f\u65b9\u6cd5\uff0c\u4f7f\u7528\u7684\u90fd\u662f ",(0,i.jsx)(n.code,{children:"findAutowiredAnnotation"})," \u65b9\u6cd5"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c31\u770b\u770b ",(0,i.jsx)(n.code,{children:"findAutowiredAnnotation"})," \u65b9\u6cd5\u662f\u5982\u4f55\u8fdb\u884c\u67e5\u627e\u7684\u3002\u8fdb\u5165 ",(0,i.jsx)(n.code,{children:"AutowiredAnnotationBeanPostProcessor#findAutowiredAnnotation"})," \u65b9\u6cd5\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'private final Set<Class<? extends Annotation>> autowiredAnnotationTypes \n        = new LinkedHashSet<>(4);\n\n// \u9ed8\u8ba4\u6784\u9020\u65b9\u6cd5\u4e2d\u6307\u5b9a\u4e86@Autowired\u3001@Value\u6ce8\u89e3\n@SuppressWarnings("unchecked")\npublic AutowiredAnnotationBeanPostProcessor() {\n    this.autowiredAnnotationTypes.add(Autowired.class);\n    this.autowiredAnnotationTypes.add(Value.class);\n    ...\n}\n\n// \u8fd9\u91cc\u5c31\u662f\u67e5\u627e\u65b9\u6cd5\n@Nullable\nprivate MergedAnnotation<?> findAutowiredAnnotation(AccessibleObject ao) {\n    MergedAnnotations annotations = MergedAnnotations.from(ao);\n    // autowiredAnnotationTypes \u5305\u542b\u4e86 @Autowired\u3001@Value\u6ce8\u89e3\n    for (Class<? extends Annotation> type : this.autowiredAnnotationTypes) {\n        MergedAnnotation<?> annotation = annotations.get(type);\n        if (annotation.isPresent()) {\n            return annotation;\n        }\n    }\n    return null;\n}\n\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5\u4e0a\u4ee3\u7801\u6ce8\u89e3\u5f97\u5f88\u660e\u767d\u4e86\uff0c\u8fd9\u91cc\u5c31\u4e0d\u591a\u8bf4\u4e86\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u627e\u5230\u5c5e\u6027\u4e0e\u65b9\u6cd5\u540e\uff0c\u63a5\u7740\u5c31\u662f\u6ce8\u518c\u5230 ",(0,i.jsx)(n.code,{children:"beanDefinition"})," \u4e86\uff0c\u8fd9\u662f ",(0,i.jsx)(n.code,{children:"InjectionMetadata#checkConfigMembers"})," \u6240\u505a\u7684\u5de5\u4f5c\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"public void checkConfigMembers(RootBeanDefinition beanDefinition) {\n    Set<InjectedElement> checkedElements = new LinkedHashSet<>(this.injectedElements.size());\n    for (InjectedElement element : this.injectedElements) {\n        Member member = element.getMember();\n        if (!beanDefinition.isExternallyManagedConfigMember(member)) {\n            // \u6ce8\u518c\u5230 beanDefinition\n            beanDefinition.registerExternallyManagedConfigMember(member);\n            checkedElements.add(element);\n        }\n    }\n    this.checkedElements = checkedElements;\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6240\u8c13\u7684\u6ce8\u518c\uff0c\u5176\u5b9e\u4e5f\u76f8\u5f53\u7b80\u5355\uff0c\u5c31\u662f\u5f80 ",(0,i.jsx)(n.code,{children:"beanDefinition"})," \u6301\u6709\u7684 ",(0,i.jsx)(n.code,{children:"externallyManagedConfigMembers"})," \u96c6\u5408\u4e2d\u6dfb\u52a0\u4e00\u6761\u8bb0\u5f55\uff1a"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"RootBeanDefinition#registerExternallyManagedConfigMember"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"public void registerExternallyManagedConfigMember(Member configMember) {\n    synchronized (this.postProcessingLock) {\n        if (this.externallyManagedConfigMembers == null) {\n            this.externallyManagedConfigMembers = new HashSet<>(1);\n        }\n        // \u5f80set\u96c6\u5408\u4e2d\u6dfb\u52a0\u4e00\u6761\u8bb0\u5f55\n        this.externallyManagedConfigMembers.add(configMember);\n    }\n}\n\n"})}),"\n",(0,i.jsx)(n.h4,{id:"3-\u6ce8\u5165\u5c5e\u6027",children:"3. \u6ce8\u5165\u5c5e\u6027"}),"\n",(0,i.jsxs)(n.p,{children:["spring \u7684\u5c5e\u6027\u6ce8\u5165\u662f\u5728\u65b9\u6cd5 ",(0,i.jsx)(n.code,{children:"AbstractAutowireCapableBeanFactory#populateBean"})," \u4e2d\u5904\u7406\u7684\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"protected void populateBean(String beanName, RootBeanDefinition mbd, @Nullable BeanWrapper bw) {\n    if (bw == null) {\n        if (mbd.hasPropertyValues()) {\n            throw new BeanCreationException(...);\n        }\n        else {\n            return;\n        }\n    }\n\n    if (!mbd.isSynthetic() && hasInstantiationAwareBeanPostProcessors()) {\n        for (BeanPostProcessor bp : getBeanPostProcessors()) {\n            if (bp instanceof InstantiationAwareBeanPostProcessor) {\n                // \u8c03\u7528\u5177\u4f53\u7684\u540e\u7f6e\u5904\u7406\u5668\u5b8c\u6210\u5c5e\u6027\u586b\u5145\n                // AutowiredAnnotationBeanPostProcessor.postProcessProperties \u5904\u7406 @Autowired\u3001@Value \u6ce8\u89e3\n                // CommonAnnotationBeanPostProcessor.postProcessProperties \u5904\u7406 @Resource\u6ce8\u89e3\n                InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;\n                // \u5982\u679c\u8fd4\u56de false\uff0c\u4ee3\u8868\u4e0d\u9700\u8981\u8fdb\u884c\u540e\u7eed\u7684\u5c5e\u6027\u8bbe\u503c\uff0c\u4e5f\u4e0d\u9700\u8981\u518d\u7ecf\u8fc7\u5176\u4ed6\u7684 BeanPostProcessor \u7684\u5904\u7406\n                if (!ibp.postProcessAfterInstantiation(bw.getWrappedInstance(), beanName)) {\n                    return;\n                }\n            }\n        }\n    }\n\n    // bean\u7684\u6240\u6709\u5c5e\u6027\n    PropertyValues pvs = (mbd.hasPropertyValues() ? mbd.getPropertyValues() : null);\n\n    int resolvedAutowireMode = mbd.getResolvedAutowireMode();\n    // \u5c5e\u6027\u6ce8\u5165\u7c7b\u578b\u4e3abyType\u8fd8\u662fbyName\uff0c\u6ce8\uff1a@Autowired \u65e2\u4e0d\u662fbyType\u4e5f\u4e0d\u662fbyName,\u56e0\u6b64\u8fd9\u91cc\u8fd4\u56defalse\n    if (resolvedAutowireMode == AUTOWIRE_BY_NAME || resolvedAutowireMode == AUTOWIRE_BY_TYPE) {\n        MutablePropertyValues newPvs = new MutablePropertyValues(pvs);\n        // \u901a\u8fc7\u540d\u5b57\u627e\u5230\u6240\u6709\u5c5e\u6027\u503c\uff0c\u5982\u679c\u662f bean \u4f9d\u8d56\uff0c\u5148\u521d\u59cb\u5316\u4f9d\u8d56\u7684 bean\u3002\u8bb0\u5f55\u4f9d\u8d56\u5173\u7cfb\n        if (resolvedAutowireMode == AUTOWIRE_BY_NAME) {\n            autowireByName(beanName, mbd, bw, newPvs);\n        }\n        // \u901a\u8fc7\u7c7b\u578b\u88c5\u914d\u3002\u590d\u6742\u4e00\u4e9b\n        if (resolvedAutowireMode == AUTOWIRE_BY_TYPE) {\n            autowireByType(beanName, mbd, bw, newPvs);\n        }\n        pvs = newPvs;\n    }\n\n    boolean hasInstAwareBpps = hasInstantiationAwareBeanPostProcessors();\n    boolean needsDepCheck = (mbd.getDependencyCheck() != AbstractBeanDefinition.DEPENDENCY_CHECK_NONE);\n\n    PropertyDescriptor[] filteredPds = null;\n    if (hasInstAwareBpps) {\n        if (pvs == null) {\n            pvs = mbd.getPropertyValues();\n        }\n        for (BeanPostProcessor bp : getBeanPostProcessors()) {\n            if (bp instanceof InstantiationAwareBeanPostProcessor) {\n            // \u8c03\u7528\u540e\u7f6e\u5904\u7406\u5668\u5b8c\u6210\u6ce8\u91ca\u7684\u5c5e\u6027\u586b\u5145\n            // \u5904\u7406@Autowired\u6ce8\u89e3\u7684\u662f AutowiredAnnotationBeanPostProcessor\n            InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;\n            PropertyValues pvsToUse = ibp.postProcessProperties(pvs, bw.getWrappedInstance(), beanName);\n            if (pvsToUse == null) {\n                if (filteredPds == null) {\n                    filteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);\n                }\n                // \u8fd9\u91cc\u5c31\u662f\u4e0a\u65b9\u66fe\u7ecf\u63d0\u5230\u8fc7\u5f97\u5bf9@Autowired\u5904\u7406\u7684\u4e00\u4e2aBeanPostProcessor\u4e86\n                // \u5b83\u4f1a\u5bf9\u6240\u6709\u6807\u8bb0@Autowired\u3001@Value \u6ce8\u89e3\u7684\u5c5e\u6027\u8fdb\u884c\u8bbe\u503c\n                pvsToUse = ibp.postProcessPropertyValues(pvs, filteredPds, \n                        bw.getWrappedInstance(), beanName);\n                if (pvsToUse == null) {\n                    return;\n                }\n            }\n            pvs = pvsToUse;\n            }\n        }\n    }\n    if (needsDepCheck) {\n        if (filteredPds == null) {\n             filteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);\n        }\n        checkDependencies(beanName, mbd, filteredPds, pvs);\n    }\n\n    if (pvs != null) {\n        // \u8bbe\u7f6e bean \u5b9e\u4f8b\u7684\u5c5e\u6027\u503c\n        applyPropertyValues(beanName, mbd, bw, pvs);\n    }\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["spring \u7684\u5c5e\u6027\u586b\u5145\u662f\u5728\u540e\u7f6e\u5904\u7406\u5668\u4e2d\u8fdb\u884c\u7684\uff0c",(0,i.jsx)(n.code,{children:"@Autowired"})," \u7684\u5c5e\u6027\u586b\u5145\u65b9\u6cd5\u4e3a ",(0,i.jsx)(n.code,{children:"AutowiredAnnotationBeanPostProcessor#postProcessProperties"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"public PropertyValues postProcessProperties(PropertyValues pvs, Object bean, String beanName) {\n     // \u8c03\u7528 findAutowiringMetadata \u65b9\u6cd5\uff0c\u786e\u4fdd\u6807\u6ce8 @Autowired @Value \u6ce8\u89e3\u7684\u5c5e\u6027\u4e0e\u65b9\u6cd5\u83b7\u53d6\u6210\u529f\n     // findAutowiringMetadata \u53ef\u4ee5\u53d1\u73b0\uff0c\u91cc\u9762\u505a\u4e86\u4e00\u4e2a\u7f13\u5b58\uff0c\u53ea\u6709\u7b2c\u4e00\u6b21\u624d\u4f1a\u771f\u6b63\u53bb\u83b7\u53d6\uff0c\u4e4b\u540e\u90fd\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\n     InjectionMetadata metadata = findAutowiringMetadata(beanName, bean.getClass(), pvs);\n     try {\n         // \u8fd9\u91cc\u8fdb\u884c\u5c5e\u6027\u6ce8\u5165\n         metadata.inject(bean, beanName, pvs);\n     }\n     catch (...) {\n         ...\n     }\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4eec\u518d\u8fdb\u5165 ",(0,i.jsx)(n.code,{children:"InjectionMetadata#inject"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"public void inject(Object target, @Nullable String beanName, @Nullable PropertyValues pvs) \n        throws Throwable {\n    Collection<InjectedElement> checkedElements = this.checkedElements;\n    Collection<InjectedElement> elementsToIterate =\n            (checkedElements != null ? checkedElements : this.injectedElements);\n    if (!elementsToIterate.isEmpty()) {\n        // \u8fd9\u91cc\u7684 InjectedElement\uff0c\u5c31\u662f\u5728 AutowiredAnnotationBeanPostProcessor#findAutowiringMetadata\n        // \u4e2d\u67e5\u627e\u5230\u7684\uff0cfield \u4f1a\u5c01\u88c5\u4e3a AutowiredFieldElement\uff0cmethod \u4f1a\u4f1a\u5c01\u88c5\u4e3a AutowiredMethodElement\n        for (InjectedElement element : elementsToIterate) {\n            element.inject(target, beanName, pvs);\n        }\n    }\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4eec\u518d\u8ddf\u8fdb ",(0,i.jsx)(n.code,{children:"element.inject(target, beanName, pvs)"}),"\uff0c\u8fd9\u91cc\u8c03\u7528\u5230\u7684\u662f ",(0,i.jsx)(n.code,{children:"AutowiredAnnotationBeanPostProcessor.AutowiredFieldElement#inject"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'@Override\nprotected void inject(Object bean, @Nullable String beanName, \n                @Nullable PropertyValues pvs) throws Throwable {\n        Field field = (Field) this.member;\n        Object value;\n        if (this.cached) {\n            value = resolvedCachedArgument(beanName, this.cachedFieldValue);\n        }\n        else {\n            DependencyDescriptor desc = new DependencyDescriptor(field, this.required);\n            desc.setContainingClass(bean.getClass());\n            Set<String> autowiredBeanNames = new LinkedHashSet<>(1);\n            Assert.state(beanFactory != null, "No BeanFactory available");\n            TypeConverter typeConverter = beanFactory.getTypeConverter();\n            try {\n                // \u8fd9\u4e00\u884c\u5c31\u662f\u83b7\u53d6\u6ce8\u5165\u7684bean\n                value = beanFactory.resolveDependency(desc, beanName, autowiredBeanNames, typeConverter);\n            }\n            catch (BeansException ex) {\n                ...\n            }\n            ...\n        }\n        // \u901a\u8fc7\u53cd\u5c04\u7ed9\u5c5e\u6027\u8bbe\u7f6e\u503c\n        if (value != null) {\n            ReflectionUtils.makeAccessible(field);\n            field.set(bean, value);\n        }\n    }\n}\n\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5\u4e0a\u4ee3\u7801\u6709\u70b9\u591a\uff0c\u4f46\u6211\u4eec\u53ea\u8981\u4e3b\u8981\u5173\u6ce8\u4e24\u884c\u4ee3\u7801\u5c31\u884c\u4e86\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u83b7\u53d6\u9700\u8981\u6ce8\u5165\u7684 bean: ",(0,i.jsx)(n.code,{children:"value = beanFactory.resolveDependency(desc, beanName, autowiredBeanNames, typeConverter)"})]}),"\n",(0,i.jsxs)(n.li,{children:["\u4f7f\u7528\u53cd\u5c04\u8bbe\u7f6e bean\uff1a",(0,i.jsx)(n.code,{children:"ReflectionUtils.makeAccessible(field);field.set(bean, value);"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5bf9\u4e8e\u7b2c 2 \u70b9\uff0c\u6700\u7ec8\u8c03\u7528\u7684\u662f jdk \u63d0\u4f9b\u7684\u53cd\u5c04\u65b9\u6cd5\uff0c\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684\u3002\u8fd9\u91cc\u6211\u4eec\u91cd\u70b9\u6765\u770b\u770b spring \u662f\u5982\u4f55\u83b7\u53d6\u9700\u8981\u6ce8\u5165\u7684 bean\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u8ddf\u8fdb ",(0,i.jsx)(n.code,{children:"beanFactory.resolveDependency(desc, beanName, autowiredBeanNames, typeConverter)"}),"\uff0c\u8fd9\u91cc\u5bf9\u4e0d\u91cd\u8981\u7684\u4ee3\u7801\u4ec5\u7ed9\u51fa\u8c03\u7528\u94fe\uff0c\u8c03\u7528\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"|-AnnotationConfigApplicationContext#AnnotationConfigApplicationContext(String...)\n |-AbstractApplicationContext#refresh\n  |-AbstractApplicationContext#finishBeanFactoryInitialization\n   |-DefaultListableBeanFactory#preInstantiateSingletons\n    |-AbstractBeanFactory#getBean(String)\n     |-AbstractBeanFactory#doGetBean\n      |-DefaultSingletonBeanRegistry#getSingleton(String, ObjectFactory<?>)\n       |-AbstractAutowireCapableBeanFactory#createBean(String, RootBeanDefinition, Object[])\n        |-AbstractAutowireCapableBeanFactory#doCreateBean\n         |-AbstractAutowireCapableBeanFactory#populateBean\n          |-AutowiredAnnotationBeanPostProcessor#postProcessProperties\n           |-InjectionMetadata#inject\n            |-AutowiredAnnotationBeanPostProcessor.AutowiredFieldElement#inject\n             |-DefaultListableBeanFactory#resolveDependency\n              |-DefaultListableBeanFactory#doResolveDependency\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6700\u7ec8\u8fd0\u884c\u5230 ",(0,i.jsx)(n.code,{children:"DefaultListableBeanFactory#doResolveDependency"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Nullable\npublic Object doResolveDependency(DependencyDescriptor descriptor, @Nullable String beanName,\n         @Nullable Set<String> autowiredBeanNames, @Nullable TypeConverter typeConverter) \n         throws BeansException {\n\n    InjectionPoint previousInjectionPoint = ConstructorResolver.setCurrentInjectionPoint(descriptor);\n    try {\n        ...\n        // 1\\.  \u6839\u636e\u7c7b\u578b\u67e5\u627e\u6240\u6709\u7684beanClass\uff0cmap\u4e2d\u4fdd\u5b58\u7684\u5185\u5bb9\u4e3a\uff1abeanName -> Class\n        Map<String, Object> matchingBeans = findAutowireCandidates(beanName, type, descriptor);\n           ...\n        String autowiredBeanName;\n        Object instanceCandidate;\n        // 2\\. \u5982\u679c\u627e\u5230\u7684bean\u6709\u591a\u4e2a\uff0c\u5373\u6570\u91cf\u5927\u4e8e1\n        if (matchingBeans.size() > 1) {\n            // \u5219\u83b7\u53d6\u6ce8\u5165\u7684\u5c5e\u6027\u540d\n            autowiredBeanName = determineAutowireCandidate(matchingBeans, descriptor);\n            if (autowiredBeanName == null) {\n                if (isRequired(descriptor) || !indicatesMultipleBeans(type)) {\n                    return descriptor.resolveNotUnique(descriptor.getResolvableType(), matchingBeans);\n                }\n                else {\n                    return null;\n                }\n            }\n            // 3\\. \u6839\u636e\u6ce8\u5165\u7684\u5c5e\u6027\u540d\u4ece \u6839\u636e\u7c7b\u578b\u627e\u51fa\u6765\u7684map<beanName, Class>\u5f53\u4e2d\u627e\uff0c\n            // \u5f97\u5230bean\u7684Class\u5bf9\u8c61\n            instanceCandidate = matchingBeans.get(autowiredBeanName);\n        }\n        else {\n            Map.Entry<String, Object> entry = matchingBeans.entrySet().iterator().next();\n            autowiredBeanName = entry.getKey();\n            instanceCandidate = entry.getValue();\n        }\n        if (autowiredBeanNames != null) {\n            autowiredBeanNames.add(autowiredBeanName);\n        }\n        if (instanceCandidate instanceof Class) {\n            // \u6839\u636eclass \u83b7\u53d6 bean\uff0c\u5982\u679cbean\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u521b\u5efabean\n            instanceCandidate = descriptor.resolveCandidate(autowiredBeanName, type, this);\n        }\n        Object result = instanceCandidate;\n        if (result instanceof NullBean) {\n            if (isRequired(descriptor)) {\n                raiseNoMatchingBeanFound(type, descriptor.getResolvableType(), descriptor);\n            }\n            result = null;\n        }\n        if (!ClassUtils.isAssignableValue(type, result)) {\n            throw new BeanNotOfRequiredTypeException(...);\n        }\n        return result;\n    }\n    finally {\n        ConstructorResolver.setCurrentInjectionPoint(previousInjectionPoint);\n    }\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5bf9\u4e8e bean \u7684\u83b7\u53d6\uff0c\u8fd9\u91cc\u518d\u603b\u7ed3\u4e0b\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u6839\u636e bean \u7c7b\u578b\u4ece spring \u4e2d\u83b7\u53d6 bean \u7684 Class \u5bf9\u8c61\uff0c\u6ce8\u610f\uff1a\u8fd9\u91cc\u5f97\u5230\u7684\u5bf9\u8c61\u4e3a Class\uff0c\u4e14\u83b7\u53d6\u5230\u7684 Class \u5bf9\u8c61\u4ece spring \u4e2d\u83b7\u53d6 beanClass \u53ef\u80fd\u6709\u591a\u4e2a\uff1b"}),"\n",(0,i.jsx)(n.li,{children:"\u5982\u679c\u5f97\u5230\u7684 Class \u5bf9\u8c61\u6709\u591a\u4e2a\uff0c\u5219\u83b7\u53d6\u6ce8\u5165\u7684\u5c5e\u6027\u540d\uff0c\u6839\u636e\u5c5e\u6027\u540d\u67e5\u627e\u4ece\u7b2c 1 \u6b65\u5f97\u5230\u7684 Class \u5bf9\u8c61\u4e2d\u67e5\u627e\u7b26\u5408\u6761\u4ef6\u7684 1 \u4e2a Class \u5bf9\u8c61\uff1b"}),"\n",(0,i.jsx)(n.li,{children:"\u6839\u636e Class \u5bf9\u8c61\u4ece spring \u4e2d\u83b7\u53d6 bean."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u4f8b\u5982\uff0c\u73b0\u5728\u63a5\u53e3 ",(0,i.jsx)(n.code,{children:"Inter"}),"\u3001\u5b9e\u73b0\u7c7b ",(0,i.jsx)(n.code,{children:"A"})," \u4e0e ",(0,i.jsx)(n.code,{children:"B"}),"\uff0c\u4e09\u8005\u5173\u7cfb\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"interface Inter {\n\n}\n\n@Service\nclass A implements Inter {\n\n}\n\n@Service\nclass B implements Inter {\n\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u7c7b ",(0,i.jsx)(n.code,{children:"C"})," \u4e2d\uff0c\u6ce8\u5165 ",(0,i.jsx)(n.code,{children:"Inter"})," \u7c7b\u578b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Service\nclass C {\n    @Autowired\n    private Inter b;\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u6ce8\u5165\u65f6\uff0c"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["spring \u4f1a\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"Inter.class"})," \u67e5\u627e\uff0c\u5f97\u5230\u4e24\u4e2a\u7c7b\uff1a",(0,i.jsx)(n.code,{children:"A.class"})," \u4e0e ",(0,i.jsx)(n.code,{children:"B.class"}),"\uff0c\u51fa\u73b0\u4e86\u591a\u4e2a bean Class \u5bf9\u8c61\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5f97\u5230\u6ce8\u5165\u7684\u5c5e\u6027\u540d\uff0c\u8fd9\u91cc\u662f ",(0,i.jsx)(n.code,{children:"b"}),"\uff0c\u7136\u540e\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"b"})," \u5728\u4ee5\u4e0a\u5f97\u5230\u7684 bean Class \u5bf9\u8c61\u627e\u5230\u7b26\u5408\u7684 bean Class \u5bf9\u8c61\uff0c\u663e\u7136\uff0c",(0,i.jsx)(n.code,{children:"B.class"})," \u7b26\u5408\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u4ece spring \u5bb9\u5668\u4e2d\u83b7\u53d6 ",(0,i.jsx)(n.code,{children:"B.class"})," \u5bf9\u5e94\u7684 bean."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\u4f1a\u6709\u4e2a\u5c0f\u95ee\u9898\uff1a\u5982\u679c\u5728 ",(0,i.jsx)(n.code,{children:"C"})," \u4e2d\u8fd9\u6837\u6ce8\u5165:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Service\nclass C {\n    @Autowired\n    private Inter inter;\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5373 ",(0,i.jsx)(n.code,{children:"Inter"})," \u7684\u5c5e\u6027\u540d\u4e3a ",(0,i.jsx)(n.code,{children:"inter"}),"\uff0c\u800c spring \u4e2d\u53c8\u6ca1\u6709\u540d\u79f0\u4e3a ",(0,i.jsx)(n.code,{children:"inter"})," \u7684 bean Class \u5bf9\u8c61\uff0c\u8fd9\u6837\u80fd\u6ce8\u5165\u6210\u529f\u5417\uff1f"]}),"\n",(0,i.jsx)(n.p,{children:"\u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u6837\u6ce8\u5165\u4e0d\u4f1a\u6210\u529f\uff0c\u4e14 spring \u4f1a\u62a5\u5f02\u5e38\uff0c\u611f\u5174\u8da3\u7684\u5c0f\u4f19\u4f34\u53ef\u4ee5\u81ea\u5df1\u8bd5\u8bd5\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u6700\u540e\uff0c\u6211\u4eec\u518d\u6765\u770b\u770b\u5982\u4f55\u6839\u636e class \u4ece spring \u4e2d\u83b7\u53d6\u5bf9\u5e94\u7684 bean\uff0c\u5373 ",(0,i.jsx)(n.code,{children:"instanceCandidate = descriptor.resolveCandidate(autowiredBeanName, type, this)"}),"\uff0c\u8ddf\u8fdb\u53bb\uff1a"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"DependencyDescriptor#resolveCandidate"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"public Object resolveCandidate(String beanName, Class<?> requiredType, BeanFactory beanFactory)\n        throws BeansException {\n    // \u8c03\u7528\u7684\u4e0a AbstractBeanFactory#getBean(String)\n    return beanFactory.getBean(beanName);\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u4e2a\u65b9\u6cd5\u76f8\u5f53\u7b80\u5355\uff0c\u5c31\u53ea\u6709\u4e00\u884c\uff1a",(0,i.jsx)(n.code,{children:"beanFactory.getBean(beanName)"}),"\uff0c\u56de\u987e\u4e0b\u8c03\u7528\u94fe\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"|-AnnotationConfigApplicationContext#AnnotationConfigApplicationContext(String...)\n |-AbstractApplicationContext#refresh\n  |-AbstractApplicationContext#finishBeanFactoryInitialization\n   |-DefaultListableBeanFactory#preInstantiateSingletons\n    // \u8fd9\u91cc\u7b2c\u4e00\u6b21\u8c03\u7528\u4e86AbstractBeanFactory#getBean\n    // \u6b64\u65f6\u4f20\u5165\u7684\u53c2\u6570\u4e3abeanObj1\n    |-AbstractBeanFactory#getBean(String)\n     |-AbstractBeanFactory#doGetBean\n      |-DefaultSingletonBeanRegistry#getSingleton(String, ObjectFactory<?>)\n       |-AbstractAutowireCapableBeanFactory#createBean(String, RootBeanDefinition, Object[])\n        |-AbstractAutowireCapableBeanFactory#doCreateBean\n         |-AbstractAutowireCapableBeanFactory#populateBean\n          |-AutowiredAnnotationBeanPostProcessor#postProcessProperties\n           |-InjectionMetadata#inject\n            |-AutowiredAnnotationBeanPostProcessor.AutowiredFieldElement#inject\n             |-DefaultListableBeanFactory#resolveDependency\n              |-DefaultListableBeanFactory#doResolveDependency\n               |-DependencyDescriptor#resolveCandidate\n                // \u8fd9\u91cc\u7b2c\u4e00\u6b21\u8c03\u7528\u4e86AbstractBeanFactory#getBean\uff0c\n                // \u6b64\u65f6\u4f20\u5165\u7684\u53c2\u6570\u4e3abeanObj2\n                |-AbstractBeanFactory#getBean(String)\n                 .. \u4e0b\u9762\u5f00\u59cb\u8fdb\u884c`beanObj2`\u7684\u5b9e\u4f8b\u5316\u4e0e\u521d\u59cb\u5316\u64cd\u4f5c\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u7ed3\u5408\u8c03\u7528\u94fe\u53ca\u524d\u9762\u5206\u6790\u53ef\u4ee5\u770b\u51fa\uff0c"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5728\u83b7\u53d6 ",(0,i.jsx)(n.code,{children:"beanObj1"})," \u65f6\u7b2c\u4e00\u6b21\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"AbstractBeanFactory#getBean(String)"}),"\uff0c\u7531\u4e8e\u6b64\u65f6 spring \u4e2d\u4e0d\u5b58\u5728 ",(0,i.jsx)(n.code,{children:"beanObj1"}),"\uff0c\u5c31\u5f00\u59cb\u4e86 ",(0,i.jsx)(n.code,{children:"beanObj1"})," \u7684\u521b\u5efa\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"beanObj1"})," \u5b9e\u4f8b\u5316\u5b8c\u6210\u540e\uff0c\u63a5\u7740\u5c31\u8fdb\u884c\u5c5e\u6027\u6ce8\u5165\uff0c",(0,i.jsx)(n.code,{children:"beanObj1"})," \u4e2d\u6709\u4e2a\u5c5e\u6027 ",(0,i.jsx)(n.code,{children:"BeanObj2 beanObj2"}),"\uff0c\u540c\u6837\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"AbstractBeanFactory#getBean(String)"})," \u4ece spring \u4e2d\u83b7\u53d6 ",(0,i.jsx)(n.code,{children:"beanObj2"})," \u5bf9\u8c61\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u7531\u4e8e\u6b64\u65f6 spring \u4e2d\u4e0d\u5b58\u5728 ",(0,i.jsx)(n.code,{children:"beanObj2"}),"\uff0c\u63a5\u7740\u5c31\u8fdb\u5165\u4e86 ",(0,i.jsx)(n.code,{children:"beanObj2"})," \u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\uff1b\u521b\u5efa\u5bf9\u8c61\u540e\uff0c\u540c\u6837\u4e5f\u4f1a\u5bf9 ",(0,i.jsx)(n.code,{children:"beanObj2"})," \u5c5e\u6027\u6ce8\u5165\u3001\u8fd0\u884c\u521d\u59cb\u5316\u65b9\u6cd5\u7b49\u64cd\u4f5c\uff0c\u8fd9\u4e0e ",(0,i.jsx)(n.code,{children:"beanObj1"})," \u7684\u64cd\u4f5c\u7c7b\u4f3c\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5f97\u5230 ",(0,i.jsx)(n.code,{children:"beanObj2"})," \u5bf9\u8c61\u540e\uff0c\u6ce8\u5165\u5230 ",(0,i.jsx)(n.code,{children:"beanObj1"})," \u7684 ",(0,i.jsx)(n.code,{children:"BeanObj2 beanObj2"})," \u5c5e\u6027\u4e2d\uff0c\u7136\u540e\u8fdb\u884c ",(0,i.jsx)(n.code,{children:"beanObj1"})," \u7684\u540e\u7eed\u64cd\u4f5c\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4ece\u8fd9\u91cc\u53ef\u4ee5\u770b\u51fa\uff0c\u5c5e\u6027\u6ce8\u5165\u65f6\uff0c\u53ef\u80fd\u4f1a\u4f7f bean \u521d\u59cb\u5316\u63d0\u524d\uff1b\u540c\u65f6\uff0c\u5bf9\u4e8e\u4f9d\u8d56\u5c42\u6b21\u591a\u7684\u60c5\u51b5\uff0c\u8c03\u7528\u94fe\u5c06\u4f1a\u975e\u5e38\u957f\uff0c\u5982 A \u9700\u8981\u6ce8\u5165 B\uff0cB \u8981\u6ce8\u5165 C\uff0c\u90a3\u4e48\u5728 A \u7684\u5c5e\u6027\u6ce8\u5165\u65f6\uff0c\u5c06\u4f1a\u521d\u59cb\u5316 B\uff0c\u800c B \u5728\u521d\u59cb\u5316\u65f6\uff0c\u53c8\u4f1a\u521d\u59cb\u5316 C\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u5bf9\u4e8e bean \u7684\u5b9e\u4f8b\u5316\u4e0e\u521d\u59cb\u5316\uff0c\u8fd9\u91cc\u9700\u8981\u660e\u786e\u4e0b\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5b9e\u4f8b\u5316\uff1a\u4ec5\u6307\u521b\u5efa\u5bf9\u8c61\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u4f7f\u7528 new \u6216\u53cd\u5c04\u673a\u5236\uff0c\u672a\u5904\u7406 spring \u5c5e\u6027\u6ce8\u5165\u53ca\u4e4b\u540e\u7684\u8fd0\u884c\u521d\u59cb\u5316\u65b9\u6cd5\u3001\u4fdd\u5b58\u5230 spring \u5bb9\u5668\u7b49\u4e00\u7cfb\u5217\u64cd\u4f5c\uff1b"}),"\n",(0,i.jsx)(n.li,{children:"\u521d\u59cb\u5316\uff1a\u5bf9\u5b9e\u4f8b\u5316\u540e\u7684\u5bf9\u8c61\u8fdb\u884c\u5c5e\u6027\u6ce8\u5165\u3001\u8fd0\u884c\u521d\u59cb\u5316\u65b9\u6cd5\uff0c\u6700\u7ec8\u4fdd\u5b58\u5230 spring \u5bb9\u5668\uff1b"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"4-\u521d\u59cb\u5316-bean",children:"4. \u521d\u59cb\u5316 bean"}),"\n",(0,i.jsxs)(n.p,{children:["spring \u521d\u59cb\u5316 bean \u7684\u65b9\u6cd5\u662f ",(0,i.jsx)(n.code,{children:"AbstractAutowireCapableBeanFactory#initializeBean(String, Object, RootBeanDefinition)"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"protected Object initializeBean(final String beanName, final Object bean, \n             @Nullable RootBeanDefinition mbd) {\n    // 1\\. \u8fd0\u884c invokeAwareMethods\n    if (System.getSecurityManager() != null) {\n        AccessController.doPrivileged((PrivilegedAction<Object>) () -> {\n             invokeAwareMethods(beanName, bean);\n             return null;\n        }, getAccessControlContext());\n    }\n    else {\n        invokeAwareMethods(beanName, bean);\n    }\n\n    // 2\\. \u8fd0\u884c applyBeanPostProcessorsBeforeInitialization\n    Object wrappedBean = bean;\n    if (mbd == null || !mbd.isSynthetic()) {\n        // \u6267\u884c spring \u5f53\u4e2d\u7684\u5185\u7f6e\u5904\u7406\u5668\u2014\u2014xxxPostProcessor-------@PostConstruct\n        wrappedBean = applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName);\n    }\n\n    try {\n        // 3\\. \u6267\u884c InitializingBean \u521d\u59cb\u5316\n        invokeInitMethods(beanName, wrappedBean, mbd);\n    }\n    catch (Throwable ex) {\n        ...\n    }\n    if (mbd == null || !mbd.isSynthetic()) {\n        // 4\\. \u8fd0\u884c applyBeanPostProcessorsAfterInitialization\n        wrappedBean = applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName);\n    }\n\n    return wrappedBean;\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5\u4e0a\u4ee3\u7801\u4e3b\u8981\u662f\u7528\u6765\u8fd0\u884c 4 \u4e2a\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"invokeAwareMethods(beanName, bean);"}),"\n",(0,i.jsx)(n.li,{children:"applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName);"}),"\n",(0,i.jsx)(n.li,{children:"invokeInitMethods(beanName, wrappedBean, mbd);"}),"\n",(0,i.jsx)(n.li,{children:"applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName);"}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"41-\u8c03\u7528-aware-bean-\u7684\u65b9\u6cd5",children:"4.1 \u8c03\u7528 Aware bean \u7684\u65b9\u6cd5"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"invokeAwareMethods"})," \u5c31\u662f\u6267\u884c Aware bean \u7684\u76f8\u5173\u65b9\u6cd5\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"private void invokeAwareMethods(final String beanName, final Object bean) {\n    if (bean instanceof Aware) {\n        if (bean instanceof BeanNameAware) {\n            ((BeanNameAware) bean).setBeanName(beanName);\n        }\n        if (bean instanceof BeanClassLoaderAware) {\n            ClassLoader bcl = getBeanClassLoader();\n            if (bcl != null) {\n                ((BeanClassLoaderAware) bean).setBeanClassLoader(bcl);\n            }\n        }\n        if (bean instanceof BeanFactoryAware) {\n            ((BeanFactoryAware) bean).setBeanFactory(AbstractAutowireCapableBeanFactory.this);\n        }\n    }\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5\u4e0a\u65b9\u6cd5\u6bd4\u8f83\u7b80\u5355\uff0c\u5c31\u4e0d\u591a\u8bf4\u4e86\u3002"}),"\n",(0,i.jsxs)(n.h5,{id:"42-\u8fd0\u884c\u540e\u7f6e\u5904\u7406\u5668\u7684-postprocessbeforeinitialization-\u65b9\u6cd5",children:["4.2 \u8fd0\u884c\u540e\u7f6e\u5904\u7406\u5668\u7684 ",(0,i.jsx)(n.code,{children:"postProcessBeforeInitialization"})," \u65b9\u6cd5"]}),"\n",(0,i.jsxs)(n.p,{children:["\u63a5\u7740\u6765\u770b\u770b ",(0,i.jsx)(n.code,{children:"AbstractAutowireCapableBeanFactory#applyBeanPostProcessorsBeforeInitialization"})," \u7684\u8fd0\u884c\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"public Object applyBeanPostProcessorsBeforeInitialization(Object existingBean, String beanName)\n         throws BeansException {\n    Object result = existingBean;\n    for (BeanPostProcessor processor : getBeanPostProcessors()) {\n        // \u8c03\u7528\u540e\u7f6e\u5904\u7406\u5668\n        Object current = processor.postProcessBeforeInitialization(result, beanName);\n        if (current == null) {\n            return result;\n        }\n        result = current;\n    }\n    return result;\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u91cc\u4e3b\u8981\u8fd0\u884c ",(0,i.jsx)(n.code,{children:"ApplicationContextAwareProcessor#postProcessBeforeInitialization"})," \u65b9\u6cd5\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Override\n@Nullable\npublic Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n    if (!(bean instanceof EnvironmentAware || bean instanceof EmbeddedValueResolverAware ||\n              bean instanceof ResourceLoaderAware || bean instanceof ApplicationEventPublisherAware ||\n              bean instanceof MessageSourceAware || bean instanceof ApplicationContextAware)){\n        return bean;\n    }\n    AccessControlContext acc = null;\n    if (System.getSecurityManager() != null) {\n        acc = this.applicationContext.getBeanFactory().getAccessControlContext();\n    }\n    if (acc != null) {\n        AccessController.doPrivileged((PrivilegedAction<Object>) () -> {\n           invokeAwareInterfaces(bean);\n           return null;\n        }, acc);\n    }\n    else {\n        // \u8fd0\u884c\u65b9\u6cd5\n        invokeAwareInterfaces(bean);\n    }\n    return bean;\n}\n\nprivate void invokeAwareInterfaces(Object bean) {\n    if (bean instanceof EnvironmentAware) {\n        ((EnvironmentAware) bean).setEnvironment(this.applicationContext.getEnvironment());\n    }\n    if (bean instanceof EmbeddedValueResolverAware) {\n        ((EmbeddedValueResolverAware) bean).setEmbeddedValueResolver(this.embeddedValueResolver);\n    }\n    if (bean instanceof ResourceLoaderAware) {\n        ((ResourceLoaderAware) bean).setResourceLoader(this.applicationContext);\n    }\n    if (bean instanceof ApplicationEventPublisherAware) {\n        ((ApplicationEventPublisherAware) bean).setApplicationEventPublisher(this.applicationContext);\n    }\n    if (bean instanceof MessageSourceAware) {\n        ((MessageSourceAware) bean).setMessageSource(this.applicationContext);\n    }\n    // \u88c5\u914d \u5b9e\u73b0\u4e86ApplicationContextAware\u7684\u7c7b\u7684 applicationContext\n    if (bean instanceof ApplicationContextAware) {\n        ((ApplicationContextAware) bean).setApplicationContext(this.applicationContext);\n    }\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5176\u5b9e\u8fd9\u4e2a\u65b9\u6cd5\u5c31\u662f\u7ed9\u5404\u79cd ",(0,i.jsx)(n.code,{children:"XxxAware"})," \u8d4b\u503c\uff0c\u6bd4\u5982\u5927\u540d\u9f0e\u9f0e\u7684 ",(0,i.jsx)(n.code,{children:"ApplicationContextAware"})," \u8d4b\u503c\u4e5f\u662f\u5728\u8fd9\u91cc\u8fdb\u884c\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u987a\u5e26\u4e00\u63d0\u7684\u662f\uff0c\u5982\u679c\u5728 bean \u4e2d\uff0c\u65b9\u6cd5\u4e0a\u6709 ",(0,i.jsx)(n.code,{children:"@PostConstruct"})," \u6ce8\u89e3\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'@PostConstruct\npublic void test() {\n    System.out.println("PostConstruct");\n}\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u8be5\u65b9\u6cd5\u5c06\u4f1a\u5728 ",(0,i.jsx)(n.code,{children:"InitDestroyAnnotationBeanPostProcessor#postProcessBeforeInitialization"})," \u4e2d\u8fdb\u884c\u8c03\u7528\uff0c\u4ee3\u7801\u6bd4\u8f83\u7b80\u5355\uff0c\u4e5f\u662f\u5229\u7528\u4e86 jdk \u7684\u53cd\u5c04\u673a\u5236\uff0c\u8fd9\u91cc\u5c31\u4e0d\u591a\u8bf4\u4e86\u3002"]}),"\n",(0,i.jsx)(n.h5,{id:"43-\u8c03\u7528-bean-\u7684\u521d\u59cb\u5316\u65b9\u6cd5",children:"4.3 \u8c03\u7528 bean \u7684\u521d\u59cb\u5316\u65b9\u6cd5"}),"\n",(0,i.jsxs)(n.p,{children:["\u63a5\u7740\u6765\u770b\u770b ",(0,i.jsx)(n.code,{children:"AbstractAutowireCapableBeanFactory#invokeInitMethods"})," \u65b9\u6cd5:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'protected void invokeInitMethods(String beanName, final Object bean, \n        @Nullable RootBeanDefinition mbd)  throws Throwable {\n    // \u6267\u884c InitializingBean#afterPropertiesSet \u65b9\u6cd5\n    boolean isInitializingBean = (bean instanceof InitializingBean);\n    if (isInitializingBean && (mbd == null || \n                 !mbd.isExternallyManagedInitMethod("afterPropertiesSet"))) {\n        if (System.getSecurityManager() != null) {\n            try {\n                AccessController.doPrivileged((PrivilegedExceptionAction<Object>) () -> {\n                    ((InitializingBean) bean).afterPropertiesSet();\n                    return null;\n                }, getAccessControlContext());\n            }\n            catch (PrivilegedActionException pae) {\n                throw pae.getException();\n            }\n        }\n        else {\n            // \u5982\u679cbean\u5b9e\u73b0\u4e86 InitializingBean \u63a5\u53e3\uff0c\u5219\u8c03\u7528 afterPropertiesSet()\n            ((InitializingBean) bean).afterPropertiesSet();\n        }\n    }\n\n    // \u6267\u884c\u81ea\u5b9a\u4e49\u7684\u521d\u59cb\u5316\u65b9\u6cd5\uff0c\u5373\u5728xml\u4e2d\uff0c\u901a\u8fc7 init-method \u6307\u5b9a\u7684\u65b9\u6cd5\n    if (mbd != null && bean.getClass() != NullBean.class) {\n        String initMethodName = mbd.getInitMethodName();\n        if (StringUtils.hasLength(initMethodName) &&\n                !(isInitializingBean && "afterPropertiesSet".equals(initMethodName)) &&\n                !mbd.isExternallyManagedInitMethod(initMethodName)) {\n            invokeCustomInitMethod(beanName, bean, mbd);\n        }\n    }\n}\n\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u91cc\u4e3b\u8981\u662f\u8fd0\u884c\u4e24\u4e2a\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u5982\u679c bean \u5b9e\u73b0\u4e86 InitializingBean \u63a5\u53e3\uff0c\u5219\u8c03\u7528 afterPropertiesSet ()"}),"\n",(0,i.jsxs)(n.li,{children:["\u5982\u679c\u6307\u5b9a\u4e86 init-method\uff0c\u5219\u5728 ",(0,i.jsx)(n.code,{children:"invokeCustomInitMethod"})," \u4e2d\u8fd0\u884c\uff0c\u4e5f\u662f\u901a\u8fc7 jdk \u53cd\u5c04\u673a\u5236\u6765\u8fd0\u884c\u7684\uff0c\u5c31\u4e0d\u591a\u8bf4\u4e86\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.h5,{id:"44-\u8fd0\u884c\u540e\u7f6e\u5904\u7406\u5668\u7684-postprocessafterinitialization-\u65b9\u6cd5",children:["4.4 \u8fd0\u884c\u540e\u7f6e\u5904\u7406\u5668\u7684 ",(0,i.jsx)(n.code,{children:"postProcessAfterInitialization"})," \u65b9\u6cd5"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u4e00\u6b65\u4e3b\u8981\u662f\u8fd0\u884c ",(0,i.jsx)(n.code,{children:"BeanPostProcessor#postProcessAfterInitialization"}),"\uff0c\u6240\u8fd0\u884c\u7684 ",(0,i.jsx)(n.code,{children:"BeanPostProcessor"})," \u662f ",(0,i.jsx)(n.code,{children:"ApplicationListenerDetector"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"@Override\npublic Object postProcessAfterInitialization(Object bean, String beanName) {\n    if (bean instanceof ApplicationListener) {\n        Boolean flag = this.singletonNames.get(beanName);\n        if (Boolean.TRUE.equals(flag)) {\n            this.applicationContext.addApplicationListener((ApplicationListener<?>) bean);\n        }\n        else if (Boolean.FALSE.equals(flag)) {\n            this.singletonNames.remove(beanName);\n        }\n    }\n    return bean;\n}\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u4e2a\u65b9\u6cd5\u662f\u7528\u6765\u5904\u7406 ",(0,i.jsx)(n.code,{children:"ApplicationListener"})," \u7684\uff0c\u5982\u679c\u6709 bean \u5b9e\u73b0\u4e86 ",(0,i.jsx)(n.code,{children:"ApplicationListener"}),"\uff0c\u5c31\u662f\u5728\u8fd9\u91cc\u6dfb\u52a0\u5230 spring \u7684\u76d1\u542c\u5668\u5217\u8868\u7684\u3002"]}),"\n",(0,i.jsx)(n.h4,{id:"5-\u603b\u7ed3",children:"5. \u603b\u7ed3"}),"\n",(0,i.jsx)(n.p,{children:"\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86 spring bean \u521b\u5efa\u8fc7\u7a0b\uff0c\u76f8\u5173\u6d41\u7a0b\u603b\u7ed3\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5b9e\u4f8b\u5316 bean\uff0c\u6307\u5b9a\u4e86\u521d\u59cb\u5316\u65b9\u6cd5\u3001\u6307\u5b9a\u4e86 ",(0,i.jsx)(n.code,{children:"factory method"}),"\u3001\u81ea\u4e3b\u63a8\u65ad\u6784\u9020\u65b9\u6cd5\u7b49\u65b9\u5f0f\uff1b"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u67e5\u8be2\u5f85\u6ce8\u5165\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\uff0c\u5373\u54ea\u4e9b\u5c5e\u6027\u6216\u65b9\u6cd5\u4e0a\u6807\u6ce8\u4e86 ",(0,i.jsx)(n.code,{children:"@Autowird"}),"/",(0,i.jsx)(n.code,{children:"@Value"}),"/",(0,i.jsx)(n.code,{children:"@Resource"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"AutowiredAnnotationBeanPostProcessor.postProcessMergedBeanDefinition"})," \u7528\u6765\u67e5\u627e\u5e26\u6709 @Autowired\u3001@Value \u6ce8\u89e3\u7684\u5c5e\u6027\u548c\u65b9\u6cd5"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CommonAnnotationBeanPostProcessor.postProcessMergedBeanDefinition"})," \u7528\u6765\u67e5\u627e\u5e26\u6709 @Resource \u6ce8\u89e3\u7684\u5c5e\u6027\u548c\u65b9\u6cd5"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5c5e\u6027\u586b\u5145"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"AutowiredAnnotationBeanPostProcessor.postProcessProperties"})," \u5904\u7406 ",(0,i.jsx)(n.code,{children:"@Autowired"}),"\u3001",(0,i.jsx)(n.code,{children:"@Value"})," \u6ce8\u89e3\uff0c",(0,i.jsx)(n.code,{children:"CommonAnnotationBeanPostProcessor.postProcessProperties"})," \u5904\u7406 ",(0,i.jsx)(n.code,{children:"@Resource"})," \u6ce8\u89e3"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5904\u7406 ",(0,i.jsx)(n.code,{children:"@Autowired"})," \u65f6\uff0c\u5148\u6839\u636e\u7c7b\u578b\u627e\u5230\u6240\u6709\u7684 ",(0,i.jsx)(n.code,{children:"Class"}),"\uff0c\u5982\u679c\u6709\u591a\u4e2a\uff0c\u518d\u6839\u636e\u6ce8\u5165\u5c5e\u6027\u7684\u540d\u79f0\u67e5\u627e\u7b26\u5408\u7684 ",(0,i.jsx)(n.code,{children:"Class"}),"\uff0c\u6700\u540e\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"beanFactory.getBean(...)"})," \u4ece spring \u83b7\u53d6\u8981\u6ce8\u5165\u7684\u5bf9\u8c61\uff0c\u901a\u8fc7\u53cd\u5c04\u673a\u5236\u4e3a\u5bf9\u5e94\u7684\u5c5e\u6027\u8bbe\u7f6e\u503c\uff1b"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u521d\u59cb\u5316 bean"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u6267\u884c Aware bean \u7684\u76f8\u5173\u65b9\u6cd5"}),"\n",(0,i.jsxs)(n.li,{children:["\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"BeanPostProcessor#postProcessBeforeInitialization"})," \u65b9\u6cd5","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5728 ",(0,i.jsx)(n.code,{children:"ApplicationContextAwareProcessor#postProcessBeforeInitialization"})," \u4e2d\u6267\u884c Aware bean \u7684\u76f8\u5173\u65b9\u6cd5"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5728 ",(0,i.jsx)(n.code,{children:"InitDestroyAnnotationBeanPostProcessor#postProcessBeforeInitialization"})," \u4e2d\u5904\u7406 ",(0,i.jsx)(n.code,{children:"@PostConstruct"})," \u6ce8\u89e3"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u6267\u884c\u521d\u59cb\u5316\u65b9\u6cd5","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u6267\u884c ",(0,i.jsx)(n.code,{children:"InitializingBean#afterPropertiesSet"})," \u65b9\u6cd5"]}),"\n",(0,i.jsxs)(n.li,{children:["\u6267\u884c\u81ea\u5b9a\u4e49\u7684 ",(0,i.jsx)(n.code,{children:"init-method"})," \u65b9\u6cd5"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u8fd0\u884c ",(0,i.jsx)(n.code,{children:"BeanPostProcessor#postProcessAfterInitialization"})," \u65b9\u6cd5","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5728 ",(0,i.jsx)(n.code,{children:"ApplicationListenerDetector#postProcessAfterInitialization"})," \u4e2d\u5904\u7406 spring \u76d1\u542c\u5668"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://java-tutorial.oss-cn-shanghai.aliyuncs.com/up-b7a4d4bc1bfbd76537e40cf843b0d18df93.png",alt:""})}),"\n",(0,i.jsx)(n.p,{children:"\u5173\u4e8e spring bean \u7684\u521b\u5efa\u6d41\u7a0b\u5c31\u5148\u5206\u6790\u5230\u8fd9\u91cc\u4e86\uff0c\u4e0d\u8fc7 spring \u5728\u521b\u5efa bean \u7684\u8fc7\u7a0b\u4e2d\uff0c\u6709\u4e00\u4e2a\u65e0\u6cd5\u5ffd\u89c6\u7684\u60c5\u51b5\uff1a\u5faa\u73af\u4f9d\u8d56\uff0c\u5173\u4e8e\u8fd9\u65b9\u9762\u7684\u5904\u7406\uff0c\u53ef\u4ee5\u53c2\u8003\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://my.oschina.net/funcy/blog/4659555",children:"spring \u63a2\u79d8\u4e4b\u5faa\u73af\u4f9d\u8d56\u7684\u89e3\u51b3\uff08\u4e00\uff09\uff1a\u7406\u8bba\u57fa\u77f3"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://my.oschina.net/funcy/blog/4815992",children:"spring \u63a2\u79d8\u4e4b\u5faa\u73af\u4f9d\u8d56\u7684\u89e3\u51b3\uff08\u4e8c\uff09\uff1a\u6e90\u7801\u5206\u6790"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["\u672c\u6587\u539f\u6587\u94fe\u63a5\uff1a",(0,i.jsx)(n.a,{href:"https://my.oschina.net/funcy/blog/4659524",children:"https://my.oschina.net/funcy/blog/4659524"})," \uff0c\u9650\u4e8e\u4f5c\u8005\u4e2a\u4eba\u6c34\u5e73\uff0c\u6587\u4e2d\u96be\u514d\u6709\u9519\u8bef\u4e4b\u5904\uff0c\u6b22\u8fce\u6307\u6b63\uff01\u539f\u521b\u4e0d\u6613\uff0c\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002"]})})]})}function p(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},88672:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>s});var i=t(50959);const a={},r=i.createContext(a);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);